(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~32e6ce9b"],{"738d":function(e,t,i){"use strict";var a=i("71ce"),r=i("535a"),n=i("2f63"),o=i("9f1d"),s=i("7d62");function c(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),this._primitives=[],this._guid=Object(a["a"])(),this._zIndex=void 0,this.show=Object(r["a"])(e.show,!0),this.destroyPrimitives=Object(r["a"])(e.destroyPrimitives,!0)}function l(e,t){return e._primitives.indexOf(t)}Object(o["a"])(c.prototype,{length:{get:function(){return this._primitives.length}}}),c.prototype.add=function(e,t){var i=Object(n["a"])(t),a=e._external=e._external||{},r=a._composites=a._composites||{};return r[this._guid]={collection:this},i?this._primitives.splice(t,0,e):this._primitives.push(e),e},c.prototype.remove=function(e){if(this.contains(e)){var t=this._primitives.indexOf(e);if(-1!==t)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this.destroyPrimitives&&e.destroy(),!0}return!1},c.prototype.removeAndDestroy=function(e){var t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t},c.prototype.removeAll=function(){for(var e=this._primitives,t=e.length,i=0;i<t;++i)delete e[i]._external._composites[this._guid],this.destroyPrimitives&&e[i].destroy();this._primitives=[]},c.prototype.contains=function(e){return!!(Object(n["a"])(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])},c.prototype.raise=function(e){if(Object(n["a"])(e)){var t=l(this,e),i=this._primitives;if(t!==i.length-1){var a=i[t];i[t]=i[t+1],i[t+1]=a}}},c.prototype.raiseToTop=function(e){if(Object(n["a"])(e)){var t=l(this,e),i=this._primitives;t!==i.length-1&&(i.splice(t,1),i.push(e))}},c.prototype.lower=function(e){if(Object(n["a"])(e)){var t=l(this,e),i=this._primitives;if(0!==t){var a=i[t];i[t]=i[t-1],i[t-1]=a}}},c.prototype.lowerToBottom=function(e){if(Object(n["a"])(e)){var t=l(this,e),i=this._primitives;0!==t&&(i.splice(t,1),i.unshift(e))}},c.prototype.get=function(e){return this._primitives[e]},c.prototype.update=function(e){if(this.show)for(var t=this._primitives,i=0;i<t.length;++i)t[i].update(e)},c.prototype.prePassesUpdate=function(e){for(var t=this._primitives,i=0;i<t.length;++i){var a=t[i];Object(n["a"])(a.prePassesUpdate)&&a.prePassesUpdate(e)}},c.prototype.updateForPass=function(e,t){for(var i=this._primitives,a=0;a<i.length;++a){var r=i[a];Object(n["a"])(r.updateForPass)&&r.updateForPass(e,t)}},c.prototype.postPassesUpdate=function(e){for(var t=this._primitives,i=0;i<t.length;++i){var a=t[i];Object(n["a"])(a.postPassesUpdate)&&a.postPassesUpdate(e)}},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.removeAll(),Object(s["a"])(this)},t["a"]=c},"894b":function(e,t,i){"use strict";var a=i("cef5"),r=i("670c"),n=i("be18"),o=i("a561"),s=i("bef8"),c=i("dc1c"),l=i("bd8d"),h=i("2bb9"),d=i("abab"),u=i("535a"),p=i("2f63"),m=i("9f1d"),b=i("7d62"),_=i("6cbd"),f=i("5e57"),g=i("d2c7"),v=i("81d7"),y=i("473c"),O=i("0276"),C=i("66bf"),S=i("c2aa"),T=i("52f0"),D=i("188e"),w=i("283e"),R=i("6a4b"),x=i("6a29"),j=i("8b68"),A=i("b997"),E=i("a894"),L=i("d289"),F=i("6dc0"),P=i("e90c"),I=i("5770"),k=i("7c5e"),z=i("a58e"),M=i("2cc3"),N=i("29ab"),V=i("06f0"),B=i("c52f"),H=i("3d7f"),U=i("c1e2"),G=i("0123"),Q=i("c2eb"),W=i("1184");function Z(e,t,i){var a,r=!i,n=e.length;if(!r&&n>1){var o=e[0].modelMatrix;for(a=1;a<n;++a)if(!T["a"].equals(o,e[a].modelMatrix)){r=!0;break}}if(r)for(a=0;a<n;++a)Object(p["a"])(e[a].geometry)&&U["a"].transformToWorldCoordinates(e[a]);else T["a"].multiplyTransformation(t,e[0].modelMatrix,t)}function Y(e,t){var i=e.attributes,a=i.position,r=a.values.length/a.componentsPerAttribute;i.batchId=new v["a"]({componentDatatype:d["a"].FLOAT,componentsPerAttribute:1,values:new Float32Array(r)});for(var n=i.batchId.values,o=0;o<r;++o)n[o]=t}function q(e){for(var t=e.length,i=0;i<t;++i){var a=e[i];Object(p["a"])(a.geometry)?Y(a.geometry,i):Object(p["a"])(a.westHemisphereGeometry)&&Object(p["a"])(a.eastHemisphereGeometry)&&(Y(a.westHemisphereGeometry,i),Y(a.eastHemisphereGeometry,i))}}function $(e){var t,i,r=e.instances,n=e.projection,o=e.elementIndexUintSupported,s=e.scene3DOnly,c=e.vertexCacheOptimize,l=e.compressVertices,h=e.modelMatrix,u=r.length;for(t=0;t<u;++t)if(Object(p["a"])(r[t].geometry)){r[t].geometry.primitiveType;break}if(Z(r,h,s),!s)for(t=0;t<u;++t)Object(p["a"])(r[t].geometry)&&U["a"].splitLongitude(r[t]);if(q(r),c)for(t=0;t<u;++t){var m=r[t];Object(p["a"])(m.geometry)?(U["a"].reorderForPostVertexCache(m.geometry),U["a"].reorderForPreVertexCache(m.geometry)):Object(p["a"])(m.westHemisphereGeometry)&&Object(p["a"])(m.eastHemisphereGeometry)&&(U["a"].reorderForPostVertexCache(m.westHemisphereGeometry),U["a"].reorderForPreVertexCache(m.westHemisphereGeometry),U["a"].reorderForPostVertexCache(m.eastHemisphereGeometry),U["a"].reorderForPreVertexCache(m.eastHemisphereGeometry))}var b=U["a"].combineInstances(r);for(u=b.length,t=0;t<u;++t){i=b[t];var _,f=i.attributes;if(s)for(_ in f)f.hasOwnProperty(_)&&f[_].componentDatatype===d["a"].DOUBLE&&U["a"].encodeAttribute(i,_,_+"3DHigh",_+"3DLow");else for(_ in f)if(f.hasOwnProperty(_)&&f[_].componentDatatype===d["a"].DOUBLE){var g=_+"3D",v=_+"2D";U["a"].projectTo2D(i,_,g,v,n),Object(p["a"])(i.boundingSphere)&&"position"===_&&(i.boundingSphereCV=a["a"].fromVertices(i.attributes.position2D.values)),U["a"].encodeAttribute(i,g,g+"High",g+"Low"),U["a"].encodeAttribute(i,v,v+"High",v+"Low")}l&&U["a"].compressVertices(i)}if(!o){var y=[];for(u=b.length,t=0;t<u;++t)i=b[t],y=y.concat(U["a"].fitToUnsignedShortIndices(i));b=y}return b}function X(e,t,i,a){var r,n,o,s=a.length-1;if(s>=0){var c=a[s];r=c.offset+c.count,o=c.index,n=i[o].indices.length}else r=0,o=0,n=i[o].indices.length;for(var l=e.length,h=0;h<l;++h){var d=e[h],u=d[t];if(Object(p["a"])(u)){var m=u.indices.length;r+m>n&&(r=0,n=i[++o].indices.length),a.push({index:o,offset:r,count:m}),r+=m}}}function J(e,t){var i=[];return X(e,"geometry",t,i),X(e,"westHemisphereGeometry",t,i),X(e,"eastHemisphereGeometry",t,i),i}var K={};function ee(e,t){var i=e.attributes;for(var a in i)if(i.hasOwnProperty(a)){var r=i[a];Object(p["a"])(r)&&Object(p["a"])(r.values)&&t.push(r.values.buffer)}Object(p["a"])(e.indices)&&t.push(e.indices.buffer)}function te(e,t){for(var i=e.length,a=0;a<i;++a)ee(e[a],t)}function ie(e){for(var t=1,i=e.length,r=0;r<i;r++){var n=e[r];if(++t,Object(p["a"])(n)){var o=n.attributes;for(var s in t+=7+2*a["a"].packedLength+(Object(p["a"])(n.indices)?n.indices.length:0),o)if(o.hasOwnProperty(s)&&Object(p["a"])(o[s])){var c=o[s];t+=5+c.values.length}}}return t}function ae(e,t){var i=e.length,a=new Float64Array(1+19*i),r=0;a[r++]=i;for(var n=0;n<i;n++){var o=e[n];if(T["a"].pack(o.modelMatrix,a,r),r+=T["a"].packedLength,Object(p["a"])(o.attributes)&&Object(p["a"])(o.attributes.offset)){var s=o.attributes.offset.value;a[r]=s[0],a[r+1]=s[1],a[r+2]=s[2]}r+=3}return t.push(a.buffer),a}function re(e){var t=e,i=new Array(t[0]),a=0,r=1;while(r<t.length){var n,o=T["a"].unpack(t,r);r+=T["a"].packedLength,Object(p["a"])(t[r])&&(n={offset:new Q["a"](t[r],t[r+1],t[r+2])}),r+=3,i[a++]={modelMatrix:o,attributes:n}}return i}function ne(e){var t=e.length,i=1+(a["a"].packedLength+1)*t,r=new Float32Array(i),n=0;r[n++]=t;for(var o=0;o<t;++o){var s=e[o];Object(p["a"])(s)?(r[n++]=1,a["a"].pack(e[o],r,n)):r[n++]=0,n+=a["a"].packedLength}return r}function oe(e){var t=new Array(e[0]),i=0,r=1;while(r<e.length)1===e[r++]&&(t[i]=a["a"].unpack(e,r)),++i,r+=a["a"].packedLength;return t}K.combineGeometry=function(e){var t,i,r,n,o=e.instances,s=o.length,c=!1;s>0&&(t=$(e),t.length>0&&(i=U["a"].createAttributeLocations(t[0]),e.createPickOffsets&&(r=J(o,t))),Object(p["a"])(o[0].attributes)&&Object(p["a"])(o[0].attributes.offset)&&(n=new Array(s),c=!0));for(var l=new Array(s),h=new Array(s),d=0;d<s;++d){var u=o[d],m=u.geometry;Object(p["a"])(m)&&(l[d]=m.boundingSphere,h[d]=m.boundingSphereCV,c&&(n[d]=u.geometry.offsetAttribute));var b=u.eastHemisphereGeometry,_=u.westHemisphereGeometry;Object(p["a"])(b)&&Object(p["a"])(_)&&(Object(p["a"])(b.boundingSphere)&&Object(p["a"])(_.boundingSphere)&&(l[d]=a["a"].union(b.boundingSphere,_.boundingSphere)),Object(p["a"])(b.boundingSphereCV)&&Object(p["a"])(_.boundingSphereCV)&&(h[d]=a["a"].union(b.boundingSphereCV,_.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:i,pickOffsets:r,offsetInstanceExtend:n,boundingSpheres:l,boundingSpheresCV:h}},K.packCreateGeometryResults=function(e,t){var i=new Float64Array(ie(e)),r=[],n={},o=e.length,s=0;i[s++]=o;for(var c=0;c<o;c++){var l=e[c],h=Object(p["a"])(l);if(i[s++]=h?1:0,h){i[s++]=l.primitiveType,i[s++]=l.geometryType,i[s++]=Object(u["a"])(l.offsetAttribute,-1);var d=Object(p["a"])(l.boundingSphere)?1:0;i[s++]=d,d&&a["a"].pack(l.boundingSphere,i,s),s+=a["a"].packedLength;var m=Object(p["a"])(l.boundingSphereCV)?1:0;i[s++]=m,m&&a["a"].pack(l.boundingSphereCV,i,s),s+=a["a"].packedLength;var b=l.attributes,_=[];for(var f in b)b.hasOwnProperty(f)&&Object(p["a"])(b[f])&&(_.push(f),Object(p["a"])(n[f])||(n[f]=r.length,r.push(f)));i[s++]=_.length;for(var g=0;g<_.length;g++){var v=_[g],y=b[v];i[s++]=n[v],i[s++]=y.componentDatatype,i[s++]=y.componentsPerAttribute,i[s++]=y.normalize?1:0,i[s++]=y.values.length,i.set(y.values,s),s+=y.values.length}var O=Object(p["a"])(l.indices)?l.indices.length:0;i[s++]=O,O>0&&(i.set(l.indices,s),s+=O)}}return t.push(i.buffer),{stringTable:r,packedData:i}},K.unpackCreateGeometryResults=function(e){var t,i=e.stringTable,r=e.packedData,n=new Array(r[0]),o=0,s=1;while(s<r.length){var c=1===r[s++];if(c){var l,h,u=r[s++],p=r[s++],m=r[s++];-1===m&&(m=void 0);var b=1===r[s++];b&&(l=a["a"].unpack(r,s)),s+=a["a"].packedLength;var _,f,O,C=1===r[s++];C&&(h=a["a"].unpack(r,s)),s+=a["a"].packedLength;var S,T=new y["a"],D=r[s++];for(t=0;t<D;t++){var w=i[r[s++]],R=r[s++];O=r[s++];var x=0!==r[s++];_=r[s++],f=d["a"].createTypedArray(R,_);for(var j=0;j<_;j++)f[j]=r[s++];T[w]=new v["a"]({componentDatatype:R,componentsPerAttribute:O,normalize:x,values:f})}if(_=r[s++],_>0){var A=f.length/O;for(S=G["a"].createTypedArray(A,_),t=0;t<_;t++)S[t]=r[s++]}n[o++]=new g["a"]({primitiveType:u,geometryType:p,boundingSphere:l,boundingSphereCV:h,indices:S,attributes:T,offsetAttribute:m})}else n[o++]=void 0}return n},K.packCombineGeometryParameters=function(e,t){for(var i=e.createGeometryResults,a=i.length,r=0;r<a;r++)t.push(i[r].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:ae(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof H["a"],elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}},K.unpackCombineGeometryParameters=function(e){for(var t=re(e.packedInstances),i=e.createGeometryResults,a=i.length,r=0,n=0;n<a;n++)for(var o=K.unpackCreateGeometryResults(i[n]),s=o.length,c=0;c<s;c++){var l=o[c],h=t[r];h.geometry=l,++r}var d=B["a"].clone(e.ellipsoid),u=e.isGeographic?new H["a"](d):new W["a"](d);return{instances:t,ellipsoid:d,projection:u,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:T["a"].clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}},K.packCombineGeometryResults=function(e,t){Object(p["a"])(e.geometries)&&te(e.geometries,t);var i=ne(e.boundingSpheres),a=ne(e.boundingSpheresCV);return t.push(i.buffer,a.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:i,boundingSpheresCV:a}},K.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:oe(e.boundingSpheres),boundingSpheresCV:oe(e.boundingSpheresCV)}};var se=K,ce=i("0e25"),le={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6},he=Object(ce["a"])(le),de=i("a307"),ue=i("c86b");function pe(e){e=Object(u["a"])(e,u["a"].EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this.appearance=e.appearance,this._appearance=void 0,this._material=void 0,this.depthFailAppearance=e.depthFailAppearance,this._depthFailAppearance=void 0,this._depthFailMaterial=void 0,this.modelMatrix=T["a"].clone(Object(u["a"])(e.modelMatrix,T["a"].IDENTITY)),this._modelMatrix=new T["a"],this.show=Object(u["a"])(e.show,!0),this._vertexCacheOptimize=Object(u["a"])(e.vertexCacheOptimize,!1),this._interleave=Object(u["a"])(e.interleave,!1),this._releaseGeometryInstances=Object(u["a"])(e.releaseGeometryInstances,!0),this._allowPicking=Object(u["a"])(e.allowPicking,!0),this._asynchronous=Object(u["a"])(e.asynchronous,!0),this._compressVertices=Object(u["a"])(e.compressVertices,!0),this.cull=Object(u["a"])(e.cull,!0),this.debugShowBoundingVolume=Object(u["a"])(e.debugShowBoundingVolume,!1),this.rtcCenter=e.rtcCenter,this.shadows=Object(u["a"])(e.shadows,ue["a"].DISABLED),this._translucent=void 0,this._state=he.READY,this._geometries=[],this._error=void 0,this._numberOfInstances=0,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeCache=[],this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._depthFailAppearance=void 0,this._spDepthFail=void 0,this._frontFaceDepthFailRS=void 0,this._backFaceDepthFailRS=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._readOnlyInstanceAttributes=e._readOnlyInstanceAttributes,this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._createRenderStatesFunction=e._createRenderStatesFunction,this._createShaderProgramFunction=e._createShaderProgramFunction,this._createCommandsFunction=e._createCommandsFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._createPickOffsets=e._createPickOffsets,this._pickOffsets=void 0,this._createGeometryResults=void 0,this._ready=!1,this._readyPromise=z["a"].defer(),this._batchTable=void 0,this._batchTableAttributeIndices=void 0,this._offsetInstanceExtend=void 0,this._batchTableOffsetAttribute2DIndex=void 0,this._batchTableOffsetsUpdated=!1,this._instanceBoundingSpheres=void 0,this._instanceBoundingSpheresCV=void 0,this._tempBoundingSpheres=void 0,this._recomputeBoundingSpheres=!1,this._batchTableBoundingSpheresUpdated=!1,this._batchTableBoundingSphereAttributeIndices=void 0}function me(e){var t,i=e.length,a=[],r=e[0].attributes;for(t in r)if(r.hasOwnProperty(t)&&Object(p["a"])(r[t])){for(var n=r[t],o=!0,s=1;s<i;++s){var c=e[s].attributes[t];if(!Object(p["a"])(c)||n.componentDatatype!==c.componentDatatype||n.componentsPerAttribute!==c.componentsPerAttribute||n.normalize!==c.normalize){o=!1;break}}o&&a.push(t)}return a}Object(m["a"])(pe.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}}});var be=new r["a"],_e=new n["a"],fe=new o["a"];function ge(e){var t=e.length;return 1===t?e[0]:2===t?r["a"].unpack(e,0,be):3===t?n["a"].unpack(e,0,_e):4===t?o["a"].unpack(e,0,fe):void 0}function ve(e,t){var i=e.geometryInstances,a=Object(S["a"])(i)?i:[i],r=a.length;if(0!==r){var n,o,s,c,h=me(a),m=h.length,b=[],_={},f={},g=a[0],v=g.attributes;for(o=0;o<m;++o)s=h[o],c=v[s],_[s]=o,b.push({functionName:"czm_batchTable_"+s,componentDatatype:c.componentDatatype,componentsPerAttribute:c.componentsPerAttribute,normalize:c.normalize});-1!==h.indexOf("distanceDisplayCondition")&&(b.push({functionName:"czm_batchTable_boundingSphereCenter3DHigh",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter3DLow",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DHigh",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DLow",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereRadius",componentDatatype:d["a"].FLOAT,componentsPerAttribute:1}),f.center3DHigh=b.length-5,f.center3DLow=b.length-4,f.center2DHigh=b.length-3,f.center2DLow=b.length-2,f.radius=b.length-1),-1!==h.indexOf("offset")&&(b.push({functionName:"czm_batchTable_offset2D",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3}),n=b.length-1),b.push({functionName:"czm_batchTable_pickColor",componentDatatype:d["a"].UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});var y=b.length,O=new M["a"](t,b,r);for(o=0;o<r;++o){var C=a[o];v=C.attributes;for(var T=0;T<m;++T){s=h[T],c=v[s];var D=ge(c.value),w=_[s];O.setBatchedAttribute(o,w,D)}var R={primitive:Object(u["a"])(C.pickPrimitive,e)};Object(p["a"])(C.id)&&(R.id=C.id);var x=t.createPickId(R);e._pickIds.push(x);var j=x.color,A=fe;A.x=l["a"].floatToByte(j.red),A.y=l["a"].floatToByte(j.green),A.z=l["a"].floatToByte(j.blue),A.w=l["a"].floatToByte(j.alpha),O.setBatchedAttribute(o,y-1,A)}e._batchTable=O,e._batchTableAttributeIndices=_,e._batchTableBoundingSphereAttributeIndices=f,e._batchTableOffsetAttribute2DIndex=n}}function ye(e){var t;return t=Object(S["a"])(e.values)?e.values.slice(0):new e.values.constructor(e.values),new v["a"]({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:t})}function Oe(e){var t,i=e.attributes,r=new y["a"];for(var n in i)i.hasOwnProperty(n)&&Object(p["a"])(i[n])&&(r[n]=ye(i[n]));if(Object(p["a"])(e.indices)){var o=e.indices;t=Object(S["a"])(o)?o.slice(0):new o.constructor(o)}return new g["a"]({attributes:r,indices:t,primitiveType:e.primitiveType,boundingSphere:a["a"].clone(e.boundingSphere)})}function Ce(e,t){return{geometry:t,attributes:e.attributes,modelMatrix:T["a"].clone(e.modelMatrix),pickPrimitive:e.pickPrimitive,id:e.id}}var Se=/attribute\s+vec(?:3|4)\s+(.*)3DHigh;/g;function Te(e){var t=I["a"].replaceMain(e,"czm_non_pick_main"),i="varying vec4 v_pickColor; \nvoid main() \n{ \n    czm_non_pick_main(); \n    v_pickColor = czm_batchTable_pickColor(batchId); \n}";return t+"\n"+i}function De(e){return"varying vec4 v_pickColor;\n"+e}function we(e,t){if(!e.compressVertices)return t;var i=-1!==t.search(/attribute\s+vec3\s+normal;/g),a=-1!==t.search(/attribute\s+vec2\s+st;/g);if(!i&&!a)return t;var r=-1!==t.search(/attribute\s+vec3\s+tangent;/g),n=-1!==t.search(/attribute\s+vec3\s+bitangent;/g),o=a&&i?2:1;o+=r||n?1:0;var s=o>1?"vec"+o:"float",c="compressedAttributes",l="attribute "+s+" "+c+";",h="",d="";if(a){h+="vec2 st;\n";var u=o>1?c+".x":c;d+="    st = czm_decompressTextureCoordinates("+u+");\n"}i&&r&&n?(h+="vec3 normal;\nvec3 tangent;\nvec3 bitangent;\n",d+="    czm_octDecode("+c+"."+(a?"yz":"xy")+", normal, tangent, bitangent);\n"):(i&&(h+="vec3 normal;\n",d+="    normal = czm_octDecode("+c+(o>1?"."+(a?"y":"x"):"")+");\n"),r&&(h+="vec3 tangent;\n",d+="    tangent = czm_octDecode("+c+"."+(a&&i?"z":"y")+");\n"),n&&(h+="vec3 bitangent;\n",d+="    bitangent = czm_octDecode("+c+"."+(a&&i?"z":"y")+");\n"));var p=t;p=p.replace(/attribute\s+vec3\s+normal;/g,""),p=p.replace(/attribute\s+vec2\s+st;/g,""),p=p.replace(/attribute\s+vec3\s+tangent;/g,""),p=p.replace(/attribute\s+vec3\s+bitangent;/g,""),p=I["a"].replaceMain(p,"czm_non_compressed_main");var m="void main() \n{ \n"+d+"    czm_non_compressed_main(); \n}";return[l,h,p,m].join("\n")}function Re(e){var t=I["a"].replaceMain(e,"czm_non_depth_clamp_main");return t+="varying float v_WindowZ;\nvoid main() {\n    czm_non_depth_clamp_main();\n    vec4 position = gl_Position;\n    v_WindowZ = (0.5 * (position.z / position.w) + 0.5) * position.w;\n    position.z = min(position.z, position.w);\n    gl_Position = position;\n}\n",t}function xe(e){var t=I["a"].replaceMain(e,"czm_non_depth_clamp_main");return t+="varying float v_WindowZ;\nvoid main() {\n    czm_non_depth_clamp_main();\n#if defined(GL_EXT_frag_depth) && !defined(LOG_DEPTH)\n    gl_FragDepthEXT = min(v_WindowZ * gl_FragCoord.w, 1.0);\n#endif\n}\n",t="#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n"+t,t}function je(e,t){e.vertexAttributes}function Ae(e,t){return function(){return e[t]}}pe._modifyShaderPosition=function(e,t,i){var a,r="",n="",o="";while(null!==(a=Se.exec(t))){var s=a[1],c="vec4 czm_compute"+s[0].toUpperCase()+s.substr(1)+"()";"vec4 czm_computePosition()"!==c&&(r+=c+";\n"),Object(p["a"])(e.rtcCenter)?(t=t.replace(/attribute\s+vec(?:3|4)\s+position3DHigh;/g,""),t=t.replace(/attribute\s+vec(?:3|4)\s+position3DLow;/g,""),r+="uniform mat4 u_modifiedModelView;\n",n+="attribute vec4 position;\n",o+=c+"\n{\n    return u_modifiedModelView * position;\n}\n\n",t=t.replace(/czm_modelViewRelativeToEye\s+\*\s+/g,""),t=t.replace(/czm_modelViewProjectionRelativeToEye/g,"czm_projection")):i?o+=c+"\n{\n    return czm_translateRelativeToEye("+s+"3DHigh, "+s+"3DLow);\n}\n\n":(n+="attribute vec3 "+s+"2DHigh;\nattribute vec3 "+s+"2DLow;\n",o+=c+"\n{\n    vec4 p;\n    if (czm_morphTime == 1.0)\n    {\n        p = czm_translateRelativeToEye("+s+"3DHigh, "+s+"3DLow);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        p = czm_translateRelativeToEye("+s+"2DHigh.zxy, "+s+"2DLow.zxy);\n    }\n    else\n    {\n        p = czm_columbusViewMorph(\n                czm_translateRelativeToEye("+s+"2DHigh.zxy, "+s+"2DLow.zxy),\n                czm_translateRelativeToEye("+s+"3DHigh, "+s+"3DLow),\n                czm_morphTime);\n    }\n    return p;\n}\n\n")}return[r,n,t,o].join("\n")},pe._appendShowToShader=function(e,t){if(!Object(p["a"])(e._batchTableAttributeIndices.show))return t;var i=I["a"].replaceMain(t,"czm_non_show_main"),a="void main() \n{ \n    czm_non_show_main(); \n    gl_Position *= czm_batchTable_show(batchId); \n}";return i+"\n"+a},pe._updateColorAttribute=function(e,t,i){if(!Object(p["a"])(e._batchTableAttributeIndices.color)&&!Object(p["a"])(e._batchTableAttributeIndices.depthFailColor))return t;if(-1===t.search(/attribute\s+vec4\s+color;/g))return t;var a=t;return a=a.replace(/attribute\s+vec4\s+color;/g,""),a=i?a.replace(/(\b)color(\b)/g,"$1czm_batchTable_depthFailColor(batchId)$2"):a.replace(/(\b)color(\b)/g,"$1czm_batchTable_color(batchId)$2"),a},pe._updatePickColorAttribute=function(e){var t=e.replace(/attribute\s+vec4\s+pickColor;/g,"");return t=t.replace(/(\b)pickColor(\b)/g,"$1czm_batchTable_pickColor(batchId)$2"),t},pe._appendOffsetToShader=function(e,t){if(!Object(p["a"])(e._batchTableAttributeIndices.offset))return t;var i="attribute float batchId;\n";i+="attribute float applyOffset;";var a=t.replace(/attribute\s+float\s+batchId;/g,i),r="vec4 $1 = czm_computePosition();\n";return r+="    if (czm_sceneMode == czm_sceneMode3D)\n",r+="    {\n",r+="        $1 = $1 + vec4(czm_batchTable_offset(batchId) * applyOffset, 0.0);",r+="    }\n",r+="    else\n",r+="    {\n",r+="        $1 = $1 + vec4(czm_batchTable_offset2D(batchId) * applyOffset, 0.0);",r+="    }\n",a=a.replace(/vec4\s+([A-Za-z0-9_]+)\s+=\s+czm_computePosition\(\);/g,r),a},pe._appendDistanceDisplayConditionToShader=function(e,t,i){if(!Object(p["a"])(e._batchTableAttributeIndices.distanceDisplayCondition))return t;var a=I["a"].replaceMain(t,"czm_non_distanceDisplayCondition_main"),r="void main() \n{ \n    czm_non_distanceDisplayCondition_main(); \n    vec2 distanceDisplayCondition = czm_batchTable_distanceDisplayCondition(batchId);\n    vec3 boundingSphereCenter3DHigh = czm_batchTable_boundingSphereCenter3DHigh(batchId);\n    vec3 boundingSphereCenter3DLow = czm_batchTable_boundingSphereCenter3DLow(batchId);\n    float boundingSphereRadius = czm_batchTable_boundingSphereRadius(batchId);\n";return r+=i?"    vec4 centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n":"    vec3 boundingSphereCenter2DHigh = czm_batchTable_boundingSphereCenter2DHigh(batchId);\n    vec3 boundingSphereCenter2DLow = czm_batchTable_boundingSphereCenter2DLow(batchId);\n    vec4 centerRTE;\n    if (czm_morphTime == 1.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy);\n    }\n    else\n    {\n        centerRTE = czm_columbusViewMorph(\n                czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy),\n                czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow),\n                czm_morphTime);\n    }\n",r+="    float radiusSq = boundingSphereRadius * boundingSphereRadius; \n    float distanceSq; \n    if (czm_sceneMode == czm_sceneMode2D) \n    { \n        distanceSq = czm_eyeHeight2D.y - radiusSq; \n    } \n    else \n    { \n        distanceSq = dot(centerRTE.xyz, centerRTE.xyz) - radiusSq; \n    } \n    distanceSq = max(distanceSq, 0.0); \n    float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x; \n    float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y; \n    float show = (distanceSq >= nearSq && distanceSq <= farSq) ? 1.0 : 0.0; \n    gl_Position *= show; \n}",a+"\n"+r};var Ee,Le=Math.max(f["a"].hardwareConcurrency-1,1),Fe=new x["a"]("combineGeometry",Number.POSITIVE_INFINITY);function Pe(e,t){var i,a,r,n,o=e._instanceIds;if(e._state===he.READY){i=Object(S["a"])(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];var s,c=e._numberOfInstances=i.length,l=[],h=[];for(r=0;r<c;++r)a=i[r].geometry,o.push(i[r].id),h.push({moduleName:a._workerName,geometry:a});if(!Object(p["a"])(Ee))for(Ee=new Array(Le),r=0;r<Le;r++)Ee[r]=new x["a"]("createGeometry",Number.POSITIVE_INFINITY);for(h=Object(R["a"])(h,Le),r=0;r<h.length;r++){var d,m=0,b=h[r],_=b.length;for(n=0;n<_;++n)s=b[n],a=s.geometry,Object(p["a"])(a.constructor.pack)&&(s.offset=m,m+=Object(u["a"])(a.constructor.packedLength,a.packedLength));if(m>0){var f=new Float64Array(m);for(d=[f.buffer],n=0;n<_;++n)s=b[n],a=s.geometry,Object(p["a"])(a.constructor.pack)&&(a.constructor.pack(a,f,s.offset),s.geometry=f)}l.push(Ee[r].scheduleTask({subTasks:h[r]},d))}e._state=he.CREATING,z["a"].all(l,(function(t){e._createGeometryResults=t,e._state=he.CREATED})).otherwise((function(i){st(e,t,he.FAILED,i)}))}else if(e._state===he.CREATED){var g=[];i=Object(S["a"])(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];var v=t.scene3DOnly,y=t.mapProjection,O=Fe.scheduleTask(se.packCombineGeometryParameters({createGeometryResults:e._createGeometryResults,instances:i,ellipsoid:y.ellipsoid,projection:y,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:v,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets},g),g);e._createGeometryResults=void 0,e._state=he.COMBINING,Object(z["a"])(O,(function(i){var a=se.unpackCombineGeometryResults(i);e._geometries=a.geometries,e._attributeLocations=a.attributeLocations,e.modelMatrix=T["a"].clone(a.modelMatrix,e.modelMatrix),e._pickOffsets=a.pickOffsets,e._offsetInstanceExtend=a.offsetInstanceExtend,e._instanceBoundingSpheres=a.boundingSpheres,e._instanceBoundingSpheresCV=a.boundingSpheresCV,Object(p["a"])(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=he.COMBINED):st(e,t,he.FAILED,void 0)})).otherwise((function(i){st(e,t,he.FAILED,i)}))}}function Ie(e,t){var i,a,r=Object(S["a"])(e.geometryInstances)?e.geometryInstances:[e.geometryInstances],n=e._numberOfInstances=r.length,o=new Array(n),s=e._instanceIds,c=0;for(a=0;a<n;a++){i=r[a];var l,h=i.geometry;l=Object(p["a"])(h.attributes)&&Object(p["a"])(h.primitiveType)?Oe(h):h.constructor.createGeometry(h),o[c++]=Ce(i,l),s.push(i.id)}o.length=c;var d=t.scene3DOnly,u=t.mapProjection,m=se.combineGeometry({instances:o,ellipsoid:u.ellipsoid,projection:u,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:d,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets});e._geometries=m.geometries,e._attributeLocations=m.attributeLocations,e.modelMatrix=T["a"].clone(m.modelMatrix,e.modelMatrix),e._pickOffsets=m.pickOffsets,e._offsetInstanceExtend=m.offsetInstanceExtend,e._instanceBoundingSpheres=m.boundingSpheres,e._instanceBoundingSpheresCV=m.boundingSpheresCV,Object(p["a"])(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=he.COMBINED):st(e,t,he.FAILED,void 0)}function ke(e,t){var i=e._batchTableAttributeIndices.offset;if(e._recomputeBoundingSpheres&&Object(p["a"])(i)){var r,o=e._offsetInstanceExtend,s=e._instanceBoundingSpheres,c=s.length,l=e._tempBoundingSpheres;if(!Object(p["a"])(l)){for(l=new Array(c),r=0;r<c;r++)l[r]=new a["a"];e._tempBoundingSpheres=l}for(r=0;r<c;++r){var h=l[r],d=e._batchTable.getBatchedAttribute(r,i,new n["a"]);h=s[r].clone(h),tt(h,d,o[r])}var u=[],m=[],b=[];for(r=0;r<c;++r){var _=l[r],f=_.center.x-_.radius;f>0||a["a"].intersectPlane(_,D["a"].ORIGIN_ZX_PLANE)!==C["a"].INTERSECTING?u.push(_):(m.push(_),b.push(_))}var g=u[0],v=b[0],y=m[0];for(r=1;r<u.length;r++)g=a["a"].union(g,u[r]);for(r=1;r<b.length;r++)v=a["a"].union(v,b[r]);for(r=1;r<m.length;r++)y=a["a"].union(y,m[r]);var O=[];for(Object(p["a"])(g)&&O.push(g),Object(p["a"])(v)&&O.push(v),Object(p["a"])(y)&&O.push(y),r=0;r<O.length;r++){var S=O[r].clone(e._boundingSpheres[r]);e._boundingSpheres[r]=S,e._boundingSphereCV[r]=a["a"].projectTo2D(S,t.mapProjection,e._boundingSphereCV[r])}pe._updateBoundingVolumes(e,t,e.modelMatrix,!0),e._recomputeBoundingSpheres=!1}else e._recomputeBoundingSpheres=!1}var ze=new _["a"],Me=new s["a"],Ne=new n["a"],Ve=new a["a"];function Be(e,t){var i=Object(p["a"])(e._batchTableAttributeIndices.distanceDisplayCondition);if(i&&!e._batchTableBoundingSpheresUpdated){for(var r=e._batchTableBoundingSphereAttributeIndices,n=r.center3DHigh,o=r.center3DLow,s=r.center2DHigh,c=r.center2DLow,l=r.radius,h=t.mapProjection,d=h.ellipsoid,u=e._batchTable,m=e._instanceBoundingSpheres,b=m.length,f=0;f<b;++f){var g=m[f];if(Object(p["a"])(g)){var v=e.modelMatrix;Object(p["a"])(v)&&(g=a["a"].transform(g,v,Ve));var y=g.center,O=g.radius,C=_["a"].fromCartesian(y,ze);if(u.setBatchedAttribute(f,n,C.high),u.setBatchedAttribute(f,o,C.low),!t.scene3DOnly){var S=d.cartesianToCartographic(y,Me),T=h.project(S,Ne);C=_["a"].fromCartesian(T,ze),u.setBatchedAttribute(f,s,C.high),u.setBatchedAttribute(f,c,C.low)}u.setBatchedAttribute(f,l,O)}}e._batchTableBoundingSpheresUpdated=!0}}var He=new n["a"],Ue=new n["a"];function Ge(e,t){var i=Object(p["a"])(e._batchTableAttributeIndices.offset);if(i&&!e._batchTableOffsetsUpdated&&!t.scene3DOnly){for(var r=e._batchTableOffsetAttribute2DIndex,o=t.mapProjection,s=o.ellipsoid,c=e._batchTable,l=e._instanceBoundingSpheres,h=l.length,d=0;d<h;++d){var u=l[d];if(Object(p["a"])(u)){var m=c.getBatchedAttribute(d,e._batchTableAttributeIndices.offset);if(n["a"].equals(m,n["a"].ZERO))c.setBatchedAttribute(d,r,n["a"].ZERO);else{var b=e.modelMatrix;Object(p["a"])(b)&&(u=a["a"].transform(u,b,Ve));var _=u.center;_=s.scaleToGeodeticSurface(_,Ue);var f=s.cartesianToCartographic(_,Me),g=o.project(f,Ne),v=n["a"].add(m,_,He);f=s.cartesianToCartographic(v,f);var y=o.project(f,He),O=n["a"].subtract(y,g,He),C=O.x;O.x=O.z,O.z=O.y,O.y=C,c.setBatchedAttribute(d,r,O)}}}e._batchTableOffsetsUpdated=!0}}function Qe(e,t){for(var i=e._attributeLocations,r=e._geometries,n=t.scene3DOnly,o=t.context,s=[],c=r.length,l=0;l<c;++l){var h=r[l];if(s.push(k["a"].fromGeometry({context:o,geometry:h,attributeLocations:i,bufferUsage:j["a"].STATIC_DRAW,interleave:e._interleave})),Object(p["a"])(e._createBoundingVolumeFunction))e._createBoundingVolumeFunction(t,h);else if(e._boundingSpheres.push(a["a"].clone(h.boundingSphere)),e._boundingSphereWC.push(new a["a"]),!n){var d=h.boundingSphereCV.center,u=d.x,m=d.y,b=d.z;d.x=b,d.y=u,d.z=m,e._boundingSphereCV.push(a["a"].clone(h.boundingSphereCV)),e._boundingSphere2D.push(new a["a"]),e._boundingSphereMorph.push(new a["a"])}}e._va=s,e._primitiveType=r[0].primitiveType,e.releaseGeometryInstances&&(e.geometryInstances=void 0),e._geometries=void 0,st(e,t,he.COMPLETE,void 0)}function We(e,t,i,a){var r,n=i.getRenderState();a?(r=Object(c["a"])(n,!1),r.cull={enabled:!0,face:N["a"].BACK},e._frontFaceRS=F["a"].fromCache(r),r.cull.face=N["a"].FRONT,e._backFaceRS=F["a"].fromCache(r)):(e._frontFaceRS=F["a"].fromCache(n),e._backFaceRS=e._frontFaceRS),r=Object(c["a"])(n,!1),Object(p["a"])(e._depthFailAppearance)&&(r.depthTest.enabled=!1),Object(p["a"])(e._depthFailAppearance)&&(n=e._depthFailAppearance.getRenderState(),r=Object(c["a"])(n,!1),r.depthTest.func=V["a"].GREATER,a?(r.cull={enabled:!0,face:N["a"].BACK},e._frontFaceDepthFailRS=F["a"].fromCache(r),r.cull.face=N["a"].FRONT,e._backFaceDepthFailRS=F["a"].fromCache(r)):(e._frontFaceDepthFailRS=F["a"].fromCache(r),e._backFaceDepthFailRS=e._frontFaceRS))}function Ze(e,t,i){var a=t.context,r=e._attributeLocations,n=e._batchTable.getVertexShaderCallback()(i.vertexShaderSource);n=pe._appendOffsetToShader(e,n),n=pe._appendShowToShader(e,n),n=pe._appendDistanceDisplayConditionToShader(e,n,t.scene3DOnly),n=Te(n),n=pe._updateColorAttribute(e,n,!1),n=we(e,n),n=pe._modifyShaderPosition(e,n,t.scene3DOnly);var o=i.getFragmentShaderSource();o=De(o),e._sp=P["a"].replaceCache({context:a,shaderProgram:e._sp,vertexShaderSource:n,fragmentShaderSource:o,attributeLocations:r}),je(e._sp,r),Object(p["a"])(e._depthFailAppearance)&&(n=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),n=pe._appendShowToShader(e,n),n=pe._appendDistanceDisplayConditionToShader(e,n,t.scene3DOnly),n=Te(n),n=pe._updateColorAttribute(e,n,!0),n=we(e,n),n=pe._modifyShaderPosition(e,n,t.scene3DOnly),n=Re(n),o=e._depthFailAppearance.getFragmentShaderSource(),o=De(o),o=xe(o),e._spDepthFail=P["a"].replaceCache({context:a,shaderProgram:e._spDepthFail,vertexShaderSource:n,fragmentShaderSource:o,attributeLocations:r}),je(e._spDepthFail,r))}var Ye=new T["a"],qe=new n["a"];function $e(e,t,i,a){var r=Object(p["a"])(i)?i._uniforms:void 0,n={},o=t.uniforms;if(Object(p["a"])(o))for(var s in o)o.hasOwnProperty(s)&&(n[s]=Ae(o,s));var c=Object(h["a"])(n,r);return c=e._batchTable.getUniformMapCallback()(c),Object(p["a"])(e.rtcCenter)&&(c.u_modifiedModelView=function(){var t=a.context.uniformState.view;return T["a"].multiply(t,e._modelMatrix,Ye),T["a"].multiplyByPoint(Ye,e.rtcCenter,qe),T["a"].setTranslation(Ye,qe,Ye),Ye}),c}function Xe(e,t,i,a,r,n,o,s){var c,l=$e(e,t,i,s);Object(p["a"])(e._depthFailAppearance)&&(c=$e(e,e._depthFailAppearance,e._depthFailAppearance.material,s));var h=a?L["a"].TRANSLUCENT:L["a"].OPAQUE,d=r?2:1;d*=Object(p["a"])(e._depthFailAppearance)?2:1,n.length=e._va.length*d;for(var u=n.length,m=0,b=0;b<u;++b){var _;r&&(_=n[b],Object(p["a"])(_)||(_=n[b]=new E["a"]({owner:e,primitiveType:e._primitiveType})),_.vertexArray=e._va[m],_.renderState=e._backFaceRS,_.shaderProgram=e._sp,_.uniformMap=l,_.pass=h,++b),_=n[b],Object(p["a"])(_)||(_=n[b]=new E["a"]({owner:e,primitiveType:e._primitiveType})),_.vertexArray=e._va[m],_.renderState=e._frontFaceRS,_.shaderProgram=e._sp,_.uniformMap=l,_.pass=h,Object(p["a"])(e._depthFailAppearance)&&(r&&(++b,_=n[b],Object(p["a"])(_)||(_=n[b]=new E["a"]({owner:e,primitiveType:e._primitiveType})),_.vertexArray=e._va[m],_.renderState=e._backFaceDepthFailRS,_.shaderProgram=e._spDepthFail,_.uniformMap=c,_.pass=h),++b,_=n[b],Object(p["a"])(_)||(_=n[b]=new E["a"]({owner:e,primitiveType:e._primitiveType})),_.vertexArray=e._va[m],_.renderState=e._frontFaceDepthFailRS,_.shaderProgram=e._spDepthFail,_.uniformMap=c,_.pass=h),++m}}function Je(e,t,i,a,r,n,o,s){var c;pe._updateBoundingVolumes(e,t,r),t.mode===de["a"].SCENE3D?c=e._boundingSphereWC:t.mode===de["a"].COLUMBUS_VIEW?c=e._boundingSphereCV:t.mode===de["a"].SCENE2D&&Object(p["a"])(e._boundingSphere2D)?c=e._boundingSphere2D:Object(p["a"])(e._boundingSphereMorph)&&(c=e._boundingSphereMorph);var l=t.commandList,h=t.passes;if(h.render||h.pick){var d=e.allowPicking,u=ue["a"].castShadows(e.shadows),m=ue["a"].receiveShadows(e.shadows),b=i.length,_=s?2:1;_*=Object(p["a"])(e._depthFailAppearance)?2:1;for(var f=0;f<b;++f){var g=Math.floor(f/_),v=i[f];v.modelMatrix=r,v.boundingVolume=c[g],v.cull=n,v.debugShowBoundingVolume=o,v.castShadows=u,v.receiveShadows=m,v.pickId=d?"v_pickColor":void 0,l.push(v)}}}pe._updateBoundingVolumes=function(e,t,i,r){var n,o,s;if(r||!T["a"].equals(i,e._modelMatrix))for(T["a"].clone(i,e._modelMatrix),o=e._boundingSpheres.length,n=0;n<o;++n)s=e._boundingSpheres[n],Object(p["a"])(s)&&(e._boundingSphereWC[n]=a["a"].transform(s,i,e._boundingSphereWC[n]),t.scene3DOnly||(e._boundingSphere2D[n]=a["a"].clone(e._boundingSphereCV[n],e._boundingSphere2D[n]),e._boundingSphere2D[n].center.x=0,e._boundingSphereMorph[n]=a["a"].union(e._boundingSphereWC[n],e._boundingSphereCV[n])));var c=e.appearance.pixelSize;if(Object(p["a"])(c))for(o=e._boundingSpheres.length,n=0;n<o;++n){s=e._boundingSpheres[n];var l=e._boundingSphereWC[n],h=t.camera.getPixelSize(s,t.context.drawingBufferWidth,t.context.drawingBufferHeight),d=h*c;l.radius=s.radius+d}},pe.prototype.update=function(e){if(!(!Object(p["a"])(this.geometryInstances)&&0===this._va.length||Object(p["a"])(this.geometryInstances)&&Object(S["a"])(this.geometryInstances)&&0===this.geometryInstances.length||!Object(p["a"])(this.appearance)||e.mode!==de["a"].SCENE3D&&e.scene3DOnly||!e.passes.render&&!e.passes.pick)){if(Object(p["a"])(this._error))throw this._error;if(this._state!==he.FAILED){var t=e.context;if(Object(p["a"])(this._batchTable)||ve(this,t),this._batchTable.attributes.length>0){if(0===A["a"].maximumVertexTextureImageUnits)throw new w["a"]("Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.");this._batchTable.update(e)}if(this._state!==he.COMPLETE&&this._state!==he.COMBINED&&(this.asynchronous?Pe(this,e):Ie(this,e)),this._state===he.COMBINED&&(Be(this,e),Ge(this,e),Qe(this,e)),this.show&&this._state===he.COMPLETE){this._batchTableOffsetsUpdated||Ge(this,e),this._recomputeBoundingSpheres&&ke(this,e);var i=this.appearance,a=i.material,r=!1,n=!1;this._appearance!==i?(this._appearance=i,this._material=a,r=!0,n=!0):this._material!==a&&(this._material=a,n=!0);var o=this.depthFailAppearance,s=Object(p["a"])(o)?o.material:void 0;this._depthFailAppearance!==o?(this._depthFailAppearance=o,this._depthFailMaterial=s,r=!0,n=!0):this._depthFailMaterial!==s&&(this._depthFailMaterial=s,n=!0);var c=this._appearance.isTranslucent();this._translucent!==c&&(this._translucent=c,r=!0),Object(p["a"])(this._material)&&this._material.update(t);var l=i.closed&&c;if(r){var h=Object(u["a"])(this._createRenderStatesFunction,We);h(this,t,i,l)}if(n){var d=Object(u["a"])(this._createShaderProgramFunction,Ze);d(this,e,i)}if(r||n){var m=Object(u["a"])(this._createCommandsFunction,Xe);m(this,i,a,c,l,this._colorCommands,this._pickCommands,e)}var b=Object(u["a"])(this._updateAndQueueCommandsFunction,Je);b(this,e,this._colorCommands,this._pickCommands,this.modelMatrix,this.cull,this.debugShowBoundingVolume,l)}}}};var Ke=new a["a"],et=new a["a"];function tt(e,t,i){if(i===O["a"].TOP){var r=a["a"].clone(e,Ke),o=a["a"].clone(e,et);o.center=n["a"].add(o.center,t,o.center),e=a["a"].union(r,o,e)}else i===O["a"].ALL&&(e.center=n["a"].add(e.center,t,e.center));return e}function it(e,t,i){return function(){var a=e.getBatchedAttribute(t,i),r=e.attributes[i],n=r.componentsPerAttribute,o=d["a"].createTypedArray(r.componentDatatype,n);return Object(p["a"])(a.constructor.pack)?a.constructor.pack(a,o,0):o[0]=a,o}}function at(e,t,i,a,r){return function(n){var o=ge(n);e.setBatchedAttribute(t,i,o),"offset"===r&&(a._recomputeBoundingSpheres=!0,a._batchTableOffsetsUpdated=!1)}}var rt=new n["a"];function nt(e,t,i){t.boundingSphere={get:function(){var r=e._instanceBoundingSpheres[i];if(Object(p["a"])(r)){r=r.clone();var o=e.modelMatrix,s=t.offset;Object(p["a"])(s)&&tt(r,n["a"].fromArray(s.get(),0,rt),e._offsetInstanceExtend[i]),Object(p["a"])(o)&&(r=a["a"].transform(r,o))}return r}},t.boundingSphereCV={get:function(){return e._instanceBoundingSpheresCV[i]}}}function ot(e,t,i){t.pickId={get:function(){return e._pickIds[i]}}}function st(e,t,i,a){e._error=a,e._state=i,t.afterRender.push((function(){e._ready=e._state===he.COMPLETE||e._state===he.FAILED,Object(p["a"])(a)?e._readyPromise.reject(a):e._readyPromise.resolve(e)}))}pe.prototype.getGeometryInstanceAttributes=function(e){for(var t=-1,i=this._lastPerInstanceAttributeIndex,a=this._instanceIds,r=a.length,n=0;n<r;++n){var o=(i+n)%r;if(e===a[o]){t=o;break}}if(-1!==t){var s=this._perInstanceAttributeCache[t];if(Object(p["a"])(s))return s;var c=this._batchTable,l=this._batchTableAttributeIndices;s={};var h={};for(var d in l)if(l.hasOwnProperty(d)){var u=l[d];h[d]={get:it(c,t,u)};var b=!0,_=this._readOnlyInstanceAttributes;if(b&&Object(p["a"])(_)){r=_.length;for(var f=0;f<r;++f)if(d===_[f]){b=!1;break}}b&&(h[d].set=at(c,t,u,this,d))}return nt(this,h,t),ot(this,h,t),Object(m["a"])(s,h),this._lastPerInstanceAttributeIndex=t,this._perInstanceAttributeCache[t]=s,s}},pe.prototype.isDestroyed=function(){return!1},pe.prototype.destroy=function(){var e,t;this._sp=this._sp&&this._sp.destroy(),this._spDepthFail=this._spDepthFail&&this._spDepthFail.destroy();var i=this._va;for(e=i.length,t=0;t<e;++t)i[t].destroy();this._va=void 0;var a=this._pickIds;for(e=a.length,t=0;t<e;++t)a[t].destroy();return this._pickIds=void 0,this._batchTable=this._batchTable&&this._batchTable.destroy(),this._instanceIds=void 0,this._perInstanceAttributeCache=void 0,this._attributeLocations=void 0,Object(b["a"])(this)};t["a"]=pe},c17f:function(e,t,i){"use strict";var a=i("be18"),r=i("bef8"),n=i("535a"),o=i("2f63"),s=i("9f1d"),c=i("21d7"),l=i("ddf7"),h=i("93da"),d=i("52f0"),u=i("713f"),p=i("c34a"),m=i("2ac3"),b=i("eace"),_=i("2368"),f=i("82d9");function g(e){this._ellipsoid=new f["a"](e.ellipsoid,a["a"].ZERO)}Object(s["a"])(g.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});var v=g,y=i("f1b3"),O=i("ee78");function C(e){this._tilingScheme=e.tilingScheme,this._x=e.x,this._y=e.y,this._level=e.level,this._parent=e.parent,this._rectangle=this._tilingScheme.tileXYToRectangle(this._x,this._y,this._level),this._southwestChild=void 0,this._southeastChild=void 0,this._northwestChild=void 0,this._northeastChild=void 0,this.replacementPrevious=void 0,this.replacementNext=void 0,this._distance=0,this._loadPriority=0,this._customData=[],this._frameUpdated=void 0,this._lastSelectionResult=O["a"].NONE,this._lastSelectionResultFrame=void 0,this._loadedCallbacks={},this.state=y["a"].START,this.renderable=!1,this.upsampledFromParent=!1,this.data=void 0}function S(e){Object(o["a"])(e)&&e.freeResources()}C.createLevelZeroTiles=function(e){for(var t=e.getNumberOfXTilesAtLevel(0),i=e.getNumberOfYTilesAtLevel(0),a=new Array(t*i),r=0,n=0;n<i;++n)for(var o=0;o<t;++o)a[r++]=new C({tilingScheme:e,x:o,y:n,level:0});return a},C.prototype._updateCustomData=function(e,t,i){var a,r,n,s=this.customData;if(Object(o["a"])(t)&&Object(o["a"])(i)){for(s=s.filter((function(e){return-1===i.indexOf(e)})),this._customData=s,n=this._rectangle,a=0;a<t.length;++a)r=t[a],b["a"].contains(n,r.positionCartographic)&&s.push(r);this._frameUpdated=e}else{var c=this._parent;if(Object(o["a"])(c)&&this._frameUpdated!==c._frameUpdated){s.length=0,n=this._rectangle;var l=c.customData;for(a=0;a<l.length;++a)r=l[a],b["a"].contains(n,r.positionCartographic)&&s.push(r);this._frameUpdated=c._frameUpdated}}},Object(s["a"])(C.prototype,{tilingScheme:{get:function(){return this._tilingScheme}},x:{get:function(){return this._x}},y:{get:function(){return this._y}},level:{get:function(){return this._level}},parent:{get:function(){return this._parent}},rectangle:{get:function(){return this._rectangle}},children:{get:function(){return[this.northwestChild,this.northeastChild,this.southwestChild,this.southeastChild]}},southwestChild:{get:function(){return Object(o["a"])(this._southwestChild)||(this._southwestChild=new C({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y+1,level:this.level+1,parent:this})),this._southwestChild}},southeastChild:{get:function(){return Object(o["a"])(this._southeastChild)||(this._southeastChild=new C({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y+1,level:this.level+1,parent:this})),this._southeastChild}},northwestChild:{get:function(){return Object(o["a"])(this._northwestChild)||(this._northwestChild=new C({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y,level:this.level+1,parent:this})),this._northwestChild}},northeastChild:{get:function(){return Object(o["a"])(this._northeastChild)||(this._northeastChild=new C({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y,level:this.level+1,parent:this})),this._northeastChild}},customData:{get:function(){return this._customData}},needsLoading:{get:function(){return this.state<y["a"].DONE}},eligibleForUnloading:{get:function(){var e=!0;return Object(o["a"])(this.data)&&(e=this.data.eligibleForUnloading,Object(o["a"])(e)||(e=!0)),e}}}),C.prototype.findLevelZeroTile=function(e,t,i){var a=this.tilingScheme.getNumberOfXTilesAtLevel(0);if(t<0?t+=a:t>=a&&(t-=a),!(i<0||i>=this.tilingScheme.getNumberOfYTilesAtLevel(0)))return e.filter((function(e){return e.x===t&&e.y===i}))[0]},C.prototype.findTileToWest=function(e){var t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x-1,this.y);if(t.southeastChild===this)return t.southwestChild;if(t.northeastChild===this)return t.northwestChild;var i=t.findTileToWest(e);return void 0!==i?t.southwestChild===this?i.southeastChild:i.northeastChild:void 0},C.prototype.findTileToEast=function(e){var t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x+1,this.y);if(t.southwestChild===this)return t.southeastChild;if(t.northwestChild===this)return t.northeastChild;var i=t.findTileToEast(e);return void 0!==i?t.southeastChild===this?i.southwestChild:i.northwestChild:void 0},C.prototype.findTileToSouth=function(e){var t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y+1);if(t.northwestChild===this)return t.southwestChild;if(t.northeastChild===this)return t.southeastChild;var i=t.findTileToSouth(e);return void 0!==i?t.southwestChild===this?i.northwestChild:i.northeastChild:void 0},C.prototype.findTileToNorth=function(e){var t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y-1);if(t.southwestChild===this)return t.northwestChild;if(t.southeastChild===this)return t.northeastChild;var i=t.findTileToNorth(e);return void 0!==i?t.northwestChild===this?i.southwestChild:i.southeastChild:void 0},C.prototype.freeResources=function(){this.state=y["a"].START,this.renderable=!1,this.upsampledFromParent=!1,Object(o["a"])(this.data)&&Object(o["a"])(this.data.freeResources)&&this.data.freeResources(),S(this._southwestChild),this._southwestChild=void 0,S(this._southeastChild),this._southeastChild=void 0,S(this._northwestChild),this._northwestChild=void 0,S(this._northeastChild),this._northeastChild=void 0};var T,D=C,w=i("a307"),R=i("3a92");function x(e){this._tileProvider=e.tileProvider,this._tileProvider.quadtree=this,this._debug={enableDebugOutput:!1,maxDepth:0,maxDepthVisited:0,tilesVisited:0,tilesCulled:0,tilesRendered:0,tilesWaitingForChildren:0,lastMaxDepth:-1,lastMaxDepthVisited:-1,lastTilesVisited:-1,lastTilesCulled:-1,lastTilesRendered:-1,lastTilesWaitingForChildren:-1,suspendLodUpdate:!1};var t=this._tileProvider.tilingScheme,i=t.ellipsoid;this._tilesToRender=[],this._tileLoadQueueHigh=[],this._tileLoadQueueMedium=[],this._tileLoadQueueLow=[],this._tileReplacementQueue=new R["a"],this._levelZeroTiles=void 0,this._loadQueueTimeSlice=5,this._tilesInvalidated=!1,this._addHeightCallbacks=[],this._removeHeightCallbacks=[],this._tileToUpdateHeights=[],this._lastTileIndex=0,this._updateHeightsTimeSlice=2,this._cameraPositionCartographic=void 0,this._cameraReferenceFrameOriginCartographic=void 0,this.maximumScreenSpaceError=Object(n["a"])(e.maximumScreenSpaceError,2),this.tileCacheSize=Object(n["a"])(e.tileCacheSize,100),this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this._occluders=new v({ellipsoid:i}),this._tileLoadProgressEvent=new c["a"],this._lastTileLoadQueueLength=0,this._lastSelectionFrameNumber=void 0}function j(e){var t=e._tileReplacementQueue;t.head=void 0,t.tail=void 0,t.count=0,A(e);var i=e._levelZeroTiles;if(Object(o["a"])(i))for(var a=0;a<i.length;++a){for(var r=i[a],n=r.customData,s=n.length,c=0;c<s;++c){var l=n[c];l.level=0,e._addHeightCallbacks.push(l)}i[a].freeResources()}e._levelZeroTiles=void 0,e._tileProvider.cancelReprojections()}function A(e){var t=e._debug;t.maxDepth=0,t.maxDepthVisited=0,t.tilesVisited=0,t.tilesCulled=0,t.tilesRendered=0,t.tilesWaitingForChildren=0,e._tileLoadQueueHigh.length=0,e._tileLoadQueueMedium.length=0,e._tileLoadQueueLow.length=0}function E(e,t){var i=e._tileLoadQueueHigh.length+e._tileLoadQueueMedium.length+e._tileLoadQueueLow.length;(i!==e._lastTileLoadQueueLength||e._tilesInvalidated)&&(t.afterRender.push(c["a"].prototype.raiseEvent.bind(e._tileLoadProgressEvent,i)),e._lastTileLoadQueueLength=i);var a=e._debug;a.enableDebugOutput&&!a.suspendLodUpdate&&(a.maxDepth=e._tilesToRender.reduce((function(e,t){return Math.max(e,t.level)}),-1),a.tilesRendered=e._tilesToRender.length,a.tilesVisited===a.lastTilesVisited&&a.tilesRendered===a.lastTilesRendered&&a.tilesCulled===a.lastTilesCulled&&a.maxDepth===a.lastMaxDepth&&a.tilesWaitingForChildren===a.lastTilesWaitingForChildren&&a.maxDepthVisited===a.lastMaxDepthVisited||(console.log("Visited "+a.tilesVisited+", Rendered: "+a.tilesRendered+", Culled: "+a.tilesCulled+", Max Depth Rendered: "+a.maxDepth+", Max Depth Visited: "+a.maxDepthVisited+", Waiting for children: "+a.tilesWaitingForChildren),a.lastTilesVisited=a.tilesVisited,a.lastTilesRendered=a.tilesRendered,a.lastTilesCulled=a.tilesCulled,a.lastMaxDepth=a.maxDepth,a.lastTilesWaitingForChildren=a.tilesWaitingForChildren,a.lastMaxDepthVisited=a.maxDepthVisited))}Object(s["a"])(x.prototype,{tileProvider:{get:function(){return this._tileProvider}},tileLoadProgressEvent:{get:function(){return this._tileLoadProgressEvent}},occluders:{get:function(){return this._occluders}}}),x.prototype.invalidateAllTiles=function(){this._tilesInvalidated=!0},x.prototype.forEachLoadedTile=function(e){var t=this._tileReplacementQueue.head;while(Object(o["a"])(t))t.state!==y["a"].START&&e(t),t=t.replacementNext},x.prototype.forEachRenderedTile=function(e){for(var t=this._tilesToRender,i=0,a=t.length;i<a;++i)e(t[i])},x.prototype.updateHeight=function(e,t){var i=this,a={positionOnEllipsoidSurface:void 0,positionCartographic:e,level:-1,callback:t,removeFunc:function(){for(var e=i._addHeightCallbacks,t=e.length,r=0;r<t;++r)if(e[r]===a){e.splice(r,1);break}i._removeHeightCallbacks.push(a)}};return i._addHeightCallbacks.push(a),a.removeFunc},x.prototype.update=function(e){Object(o["a"])(this._tileProvider.update)&&this._tileProvider.update(e)},x.prototype.beginFrame=function(e){var t=e.passes;t.render&&(this._tilesInvalidated&&(j(this),this._tilesInvalidated=!1),this._tileProvider.initialize(e),A(this),this._debug.suspendLodUpdate||this._tileReplacementQueue.markStartOfRenderFrame())},x.prototype.render=function(e){var t=e.passes,i=this._tileProvider;t.render&&(i.beginUpdate(e),k(this,e),ae(this,e),i.endUpdate(e)),t.pick&&this._tilesToRender.length>0&&i.updateForPick(e)},x.prototype.endFrame=function(e){var t=e.passes;t.render&&e.mode!==w["a"].MORPHING&&(q(this,e),ie(this,e),E(this,e))},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){this._tileProvider=this._tileProvider&&this._tileProvider.destroy()};var L=new r["a"];function F(e,t){var i=b["a"].center(e.rectangle,L),a=i.longitude-T.longitude,r=i.latitude-T.latitude;i=b["a"].center(t.rectangle,L);var n=i.longitude-T.longitude,o=i.latitude-T.latitude;return a*a+r*r-(n*n+o*o)}var P=new a["a"],I=[];function k(e,t){var i=e._debug;if(!i.suspendLodUpdate){var a,r=e._tilesToRender;r.length=0;var n,s=e._tileProvider;if(!Object(o["a"])(e._levelZeroTiles)){if(!s.ready)return;var c=s.tilingScheme;e._levelZeroTiles=D.createLevelZeroTiles(c);var l=e._levelZeroTiles.length;if(I.length<l)for(I=new Array(l),a=0;a<l;++a)void 0===I[a]&&(I[a]=new M)}e._occluders.ellipsoid.cameraPosition=t.camera.positionWC;var h=e._levelZeroTiles,u=h.length>1?e._occluders:void 0;T=t.camera.positionCartographic,h.sort(F);var p,m=e._addHeightCallbacks,b=e._removeHeightCallbacks,_=t.frameNumber;if(m.length>0||b.length>0){for(a=0,p=h.length;a<p;++a)n=h[a],n._updateCustomData(_,m,b);m.length=0,b.length=0}var f=t.camera;e._cameraPositionCartographic=f.positionCartographic;var g=d["a"].getTranslation(f.transform,P);for(e._cameraReferenceFrameOriginCartographic=e.tileProvider.tilingScheme.ellipsoid.cartesianToCartographic(g,e._cameraReferenceFrameOriginCartographic),a=0,p=h.length;a<p;++a)n=h[a],e._tileReplacementQueue.markTileRendered(n),n.renderable?Q(e,n,s,t,u,!1,I[a]):(z(e,e._tileLoadQueueHigh,n,t),++i.tilesWaitingForChildren);e._lastSelectionFrameNumber=_}}function z(e,t,i,a){i.needsLoading&&(void 0!==e.tileProvider.computeTileLoadPriority&&(i._loadPriority=e.tileProvider.computeTileLoadPriority(i,a)),t.push(i))}function M(){this.allAreRenderable=!0,this.anyWereRenderedLastFrame=!1,this.notYetRenderableCount=0}function N(){this.southwest=new M,this.southeast=new M,this.northwest=new M,this.northeast=new M}N.prototype.combine=function(e){var t=this.southwest,i=this.southeast,a=this.northwest,r=this.northeast;e.allAreRenderable=t.allAreRenderable&&i.allAreRenderable&&a.allAreRenderable&&r.allAreRenderable,e.anyWereRenderedLastFrame=t.anyWereRenderedLastFrame||i.anyWereRenderedLastFrame||a.anyWereRenderedLastFrame||r.anyWereRenderedLastFrame,e.notYetRenderableCount=t.notYetRenderableCount+i.notYetRenderableCount+a.notYetRenderableCount+r.notYetRenderableCount};for(var V=new Array(31),B=0;B<V.length;++B)V[B]=new N;function H(e,t,i,a,r){var n=e._debug;++n.tilesVisited,e._tileReplacementQueue.markTileRendered(i),i._updateCustomData(t.frameNumber),i.level>n.maxDepthVisited&&(n.maxDepthVisited=i.level);var s=W(e,t,i)<e.maximumScreenSpaceError,c=i.southwestChild,l=i.southeastChild,h=i.northwestChild,d=i.northeastChild,u=e._lastSelectionFrameNumber,p=i._lastSelectionResultFrame===u?i._lastSelectionResult:O["a"].NONE,m=e.tileProvider;if(s||a){var b=O["a"].originalResult(p)===O["a"].RENDERED,_=O["a"].originalResult(p)===O["a"].CULLED||p===O["a"].NONE,f=i.state===y["a"].DONE,g=b||_||f;if(g||Object(o["a"])(m.canRenderWithoutLosingDetail)&&(g=m.canRenderWithoutLosingDetail(i)),g)return s&&z(e,e._tileLoadQueueMedium,i,t),Y(e,i),r.allAreRenderable=i.renderable,r.anyWereRenderedLastFrame=p===O["a"].RENDERED,r.notYetRenderableCount=i.renderable?0:1,i._lastSelectionResultFrame=t.frameNumber,i._lastSelectionResult=O["a"].RENDERED,void(r.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(i));a=!0,s&&z(e,e._tileLoadQueueHigh,i,t)}if(m.canRefine(i)){var v=c.upsampledFromParent&&l.upsampledFromParent&&h.upsampledFromParent&&d.upsampledFromParent;if(v)return Y(e,i),z(e,e._tileLoadQueueMedium,i,t),e._tileReplacementQueue.markTileRendered(c),e._tileReplacementQueue.markTileRendered(l),e._tileReplacementQueue.markTileRendered(h),e._tileReplacementQueue.markTileRendered(d),r.allAreRenderable=i.renderable,r.anyWereRenderedLastFrame=p===O["a"].RENDERED,r.notYetRenderableCount=i.renderable?0:1,i._lastSelectionResultFrame=t.frameNumber,i._lastSelectionResult=O["a"].RENDERED,void(r.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(i));i._lastSelectionResultFrame=t.frameNumber,i._lastSelectionResult=O["a"].REFINED;var C=e._tilesToRender.length,S=e._tileLoadQueueLow.length,T=e._tileLoadQueueMedium.length,D=e._tileLoadQueueHigh.length,w=e._tileToUpdateHeights.length;if(U(e,c,l,h,d,t,a,r),C!==e._tilesToRender.length){var R=r.allAreRenderable,x=r.anyWereRenderedLastFrame,j=r.notYetRenderableCount,A=!1;if(!R&&!x){for(var E=e._tilesToRender,L=C;L<E.length;++L){var F=E[L];while(void 0!==F&&F._lastSelectionResult!==O["a"].KICKED&&F!==i)F._lastSelectionResult=O["a"].kick(F._lastSelectionResult),F=F.parent}e._tilesToRender.length=C,e._tileToUpdateHeights.length=w,Y(e,i),i._lastSelectionResult=O["a"].RENDERED;var P=p===O["a"].RENDERED;!P&&j>e.loadingDescendantLimit&&(e._tileLoadQueueLow.length=S,e._tileLoadQueueMedium.length=T,e._tileLoadQueueHigh.length=D,z(e,e._tileLoadQueueMedium,i,t),r.notYetRenderableCount=i.renderable?0:1,A=!0),r.allAreRenderable=i.renderable,r.anyWereRenderedLastFrame=P,P||e._tileToUpdateHeights.push(i),++n.tilesWaitingForChildren}e.preloadAncestors&&!A&&z(e,e._tileLoadQueueLow,i,t)}}else i._lastSelectionResultFrame=t.frameNumber,i._lastSelectionResult=O["a"].RENDERED,Y(e,i),z(e,e._tileLoadQueueHigh,i,t),r.allAreRenderable=i.renderable,r.anyWereRenderedLastFrame=p===O["a"].RENDERED,r.notYetRenderableCount=i.renderable?0:1}function U(e,t,i,a,r,n,o,s){var c=n.camera.positionCartographic,l=e._tileProvider,h=e._occluders,d=V[t.level],u=d.southwest,p=d.southeast,m=d.northwest,b=d.northeast;c.longitude<t.rectangle.east?c.latitude<t.rectangle.north?(Q(e,t,l,n,h,o,u),Q(e,i,l,n,h,o,p),Q(e,a,l,n,h,o,m),Q(e,r,l,n,h,o,b)):(Q(e,a,l,n,h,o,m),Q(e,t,l,n,h,o,u),Q(e,r,l,n,h,o,b),Q(e,i,l,n,h,o,p)):c.latitude<t.rectangle.north?(Q(e,i,l,n,h,o,p),Q(e,t,l,n,h,o,u),Q(e,r,l,n,h,o,b),Q(e,a,l,n,h,o,m)):(Q(e,r,l,n,h,o,b),Q(e,a,l,n,h,o,m),Q(e,i,l,n,h,o,p),Q(e,t,l,n,h,o,u)),d.combine(s)}function G(e,t){var i=t.rectangle;return Object(o["a"])(e._cameraPositionCartographic)&&b["a"].contains(i,e._cameraPositionCartographic)||Object(o["a"])(e._cameraReferenceFrameOriginCartographic)&&b["a"].contains(i,e._cameraReferenceFrameOriginCartographic)}function Q(e,t,i,a,r,n,s){if(i.computeTileVisibility(t,a,r)!==_["a"].NONE)return H(e,a,t,n,s);if(++e._debug.tilesCulled,e._tileReplacementQueue.markTileRendered(t),s.allAreRenderable=!0,s.anyWereRenderedLastFrame=!1,s.notYetRenderableCount=0,G(e,t)){Object(o["a"])(t.data)&&Object(o["a"])(t.data.vertexArray)||z(e,e._tileLoadQueueMedium,t,a);var c=e._lastSelectionFrameNumber,l=t._lastSelectionResultFrame===c?t._lastSelectionResult:O["a"].NONE;l!==O["a"].CULLED_BUT_NEEDED&&l!==O["a"].RENDERED&&e._tileToUpdateHeights.push(t),t._lastSelectionResult=O["a"].CULLED_BUT_NEEDED}else e.preloadSiblings||0===t.level?(z(e,e._tileLoadQueueLow,t,a),t._lastSelectionResult=O["a"].CULLED):t._lastSelectionResult=O["a"].CULLED;t._lastSelectionResultFrame=a.frameNumber}function W(e,t,i){if(t.mode===w["a"].SCENE2D||t.camera.frustum instanceof u["a"]||t.camera.frustum instanceof p["a"])return Z(e,t,i);var a=e._tileProvider.getLevelMaximumGeometricError(i.level),r=i._distance,n=t.context.drawingBufferHeight,o=t.camera.frustum.sseDenominator,s=a*n/(r*o);return t.fog.enabled&&(s-=h["a"].fog(r,t.fog.density)*t.fog.sse),s/=t.pixelRatio,s}function Z(e,t,i){var a=t.camera,r=a.frustum;Object(o["a"])(r._offCenterFrustum)&&(r=r._offCenterFrustum);var n=t.context,s=n.drawingBufferWidth,c=n.drawingBufferHeight,l=e._tileProvider.getLevelMaximumGeometricError(i.level),d=Math.max(r.top-r.bottom,r.right-r.left)/Math.max(s,c),u=l/d;return t.fog.enabled&&t.mode!==w["a"].SCENE2D&&(u-=h["a"].fog(i._distance,t.fog.density)*t.fog.sse),u/=t.pixelRatio,u}function Y(e,t){e._tilesToRender.push(t)}function q(e,t){var i=e._tileLoadQueueHigh,a=e._tileLoadQueueMedium,r=e._tileLoadQueueLow;if(0!==i.length||0!==a.length||0!==r.length){e._tileReplacementQueue.trimTiles(e.tileCacheSize);var n=Object(l["a"])()+e._loadQueueTimeSlice,o=e._tileProvider,s=X(e,t,o,n,i,!1);s=X(e,t,o,n,a,s),X(e,t,o,n,r,s)}}function $(e,t){return e._loadPriority-t._loadPriority}function X(e,t,i,a,r,n){void 0!==i.computeTileLoadPriority&&r.sort($);for(var o=0,s=r.length;o<s&&(Object(l["a"])()<a||!n);++o){var c=r[o];e._tileReplacementQueue.markTileRendered(c),i.loadTile(t,c),n=!0}return n}var J=new m["a"],K=new r["a"],ee=new a["a"],te=[];function ie(e,t){if(e.tileProvider.ready){var i=te;i.length=0;var s,c=e._tileToUpdateHeights,h=e._tileProvider.terrainProvider,d=Object(l["a"])(),u=e._updateHeightsTimeSlice,p=d+u,m=t.mode,_=t.mapProjection,f=e.tileProvider.tilingScheme.ellipsoid;while(c.length>0){var g=c[0];if(Object(o["a"])(g.data)&&Object(o["a"])(g.data.mesh)){var v=g.customData,y=v.length,C=!1;for(s=e._lastTileIndex;s<y;++s){var S=v[s];if(g.level>S.level){if(Object(o["a"])(S.positionOnEllipsoidSurface)||(S.positionOnEllipsoidSurface=a["a"].fromRadians(S.positionCartographic.longitude,S.positionCartographic.latitude,0,f)),m===w["a"].SCENE3D){var T=f.geodeticSurfaceNormal(S.positionOnEllipsoidSurface,J.direction),D=f.getSurfaceNormalIntersectionWithZAxis(S.positionOnEllipsoidSurface,11500,J.origin);if(!Object(o["a"])(D)){var R;Object(o["a"])(g.data.tileBoundingRegion)&&(R=g.data.tileBoundingRegion.minimumHeight);var x=Math.min(Object(n["a"])(R,0),-11500),j=a["a"].multiplyByScalar(T,Math.abs(x)+1,ee);a["a"].subtract(S.positionOnEllipsoidSurface,j,J.origin)}}else r["a"].clone(S.positionCartographic,K),K.height=-11500,_.project(K,ee),a["a"].fromElements(ee.z,ee.x,ee.y,ee),a["a"].clone(ee,J.origin),a["a"].clone(a["a"].UNIT_X,J.direction);var A=g.data.pick(J,m,_,!1,ee);Object(o["a"])(A)&&(S.callback(A),S.level=g.level)}else if(g.level===S.level){for(var E,L=g.children,F=L.length,P=0;P<F;++P)if(E=L[P],b["a"].contains(E.rectangle,S.positionCartographic))break;var I=h.getTileDataAvailable(E.x,E.y,E.level),k=g.parent;(Object(o["a"])(I)&&!I||Object(o["a"])(k)&&Object(o["a"])(k.data)&&Object(o["a"])(k.data.terrainData)&&!k.data.terrainData.isChildAvailable(k.x,k.y,E.x,E.y))&&S.removeFunc()}if(Object(l["a"])()>=p){C=!0;break}}if(C){e._lastTileIndex=s;break}e._lastTileIndex=0,c.shift()}else{var z=g._lastSelectionResultFrame===e._lastSelectionFrameNumber?g._lastSelectionResult:O["a"].NONE;z!==O["a"].RENDERED&&z!==O["a"].CULLED_BUT_NEEDED||i.push(g),c.shift(),e._lastTileIndex=0}}for(s=0;s<i.length;s++)c.push(i[s])}}function ae(e,t){for(var i=e._tileProvider,a=e._tilesToRender,r=0,n=a.length;r<n;++r){var o=a[r];i.showTileThisFrame(o,t)}}t["a"]=x},d9a9:function(e,t,i){"use strict";var a=i("0e25"),r={FONT_SIZE:48,PADDING:10,RADIUS:8,CUTOFF:.25};t["a"]=Object(a["a"])(r)},f1b3:function(e,t,i){"use strict";var a=i("0e25"),r={START:0,LOADING:1,DONE:2,FAILED:3};t["a"]=Object(a["a"])(r)}}]);