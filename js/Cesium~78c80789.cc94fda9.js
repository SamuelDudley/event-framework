(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~78c80789"],{"0a40":function(e,t,a){"use strict";var r=a("2f63"),i=a("7d62"),n=a("fe57"),o=a("e90c"),s=a("0249"),d=a("a307");function c(e,t,a,r,i){this.numberOfDayTextures=e,this.flags=t,this.material=a,this.shaderProgram=r,this.clippingShaderState=i}function u(){this.baseVertexShaderSource=void 0,this.baseFragmentShaderSource=void 0,this._shadersByTexturesFlags=[],this.material=void 0}function l(e){var t,a="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPosition3DMode(position, height, textureCoordinates); }",r="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionColumbusViewMode(position, height, textureCoordinates); }",i="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionMorphingMode(position, height, textureCoordinates); }";switch(e){case d["a"].SCENE3D:t=a;break;case d["a"].SCENE2D:case d["a"].COLUMBUS_VIEW:t=r;break;case d["a"].MORPHING:t=i;break}return t}function h(e){var t="float get2DYPositionFraction(vec2 textureCoordinates) { return get2DGeographicYPositionFraction(textureCoordinates); }",a="float get2DYPositionFraction(vec2 textureCoordinates) { return get2DMercatorYPositionFraction(textureCoordinates); }";return e?a:t}u.prototype.getShaderProgram=function(e){var t=e.frameState,a=e.surfaceTile,i=e.numberOfDayTextures,d=e.applyBrightness,u=e.applyContrast,m=e.applyHue,p=e.applySaturation,g=e.applyGamma,f=e.applyAlpha,v=e.applySplit,y=e.showReflectiveOcean,_=e.showOceanWaves,b=e.enableLighting,T=e.showGroundAtmosphere,S=e.perFragmentGroundAtmosphere,O=e.hasVertexNormals,x=e.useWebMercatorProjection,E=e.enableFog,w=e.enableClippingPlanes,C=e.clippingPlanes,I=e.clippedByBoundaries,A=e.hasImageryLayerCutout,P=e.colorCorrect,D=e.highlightFillTile,L=e.colorToAlpha,j=0,M="",N=a.renderedMesh,R=N.encoding,H=R.quantization;H===n["a"].BITS12&&(j=1,M="QUANTIZATION_BITS12");var B=0,V="";Object(r["a"])(a.vertexArray)&&Object(r["a"])(a.terrainData)&&!a.terrainData._createdByUpsampling||(B=1,V="DISABLE_GL_POSITION_LOG_DEPTH");var F=0,G="";I&&(F=1,G="TILE_LIMIT_RECTANGLE");var k=0,U="";A&&(k=1,U="APPLY_IMAGERY_CUTOUT");var z=t.mode,W=z|d<<2|u<<3|m<<4|p<<5|g<<6|f<<7|y<<8|_<<9|b<<10|T<<11|S<<12|O<<13|x<<14|E<<15|j<<16|v<<17|w<<18|B<<19|F<<20|k<<21|P<<22|D<<23|L<<24,Y=0;Object(r["a"])(C)&&C.length>0&&(Y=w?C.clippingPlanesState:0);var q=a.surfaceShader;if(Object(r["a"])(q)&&q.numberOfDayTextures===i&&q.flags===W&&q.material===this.material&&q.clippingShaderState===Y)return q.shaderProgram;var K=this._shadersByTexturesFlags[i];if(Object(r["a"])(K)||(K=this._shadersByTexturesFlags[i]=[]),q=K[W],!Object(r["a"])(q)||q.material!==this.material||q.clippingShaderState!==Y){var Q=this.baseVertexShaderSource.clone(),X=this.baseFragmentShaderSource.clone();0!==Y&&X.sources.unshift(Object(s["a"])(C,t.context)),Q.defines.push(M,V),X.defines.push("TEXTURE_UNITS "+i,G,U),d&&X.defines.push("APPLY_BRIGHTNESS"),u&&X.defines.push("APPLY_CONTRAST"),m&&X.defines.push("APPLY_HUE"),p&&X.defines.push("APPLY_SATURATION"),g&&X.defines.push("APPLY_GAMMA"),f&&X.defines.push("APPLY_ALPHA"),y&&(X.defines.push("SHOW_REFLECTIVE_OCEAN"),Q.defines.push("SHOW_REFLECTIVE_OCEAN")),_&&X.defines.push("SHOW_OCEAN_WAVES"),L&&X.defines.push("APPLY_COLOR_TO_ALPHA"),b&&(O?(Q.defines.push("ENABLE_VERTEX_LIGHTING"),X.defines.push("ENABLE_VERTEX_LIGHTING")):(Q.defines.push("ENABLE_DAYNIGHT_SHADING"),X.defines.push("ENABLE_DAYNIGHT_SHADING"))),T&&(Q.defines.push("GROUND_ATMOSPHERE"),X.defines.push("GROUND_ATMOSPHERE"),S&&X.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE")),Q.defines.push("INCLUDE_WEB_MERCATOR_Y"),X.defines.push("INCLUDE_WEB_MERCATOR_Y"),E&&(Q.defines.push("FOG"),X.defines.push("FOG")),v&&X.defines.push("APPLY_SPLIT"),w&&X.defines.push("ENABLE_CLIPPING_PLANES"),P&&X.defines.push("COLOR_CORRECT"),D&&X.defines.push("HIGHLIGHT_FILL_TILE");var J="    vec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates)\n    {\n        vec4 color = initialColor;\n";A&&(J+="        vec4 cutoutAndColorResult;\n        bool texelUnclipped;\n");for(var Z=0;Z<i;++Z)J+=A?"        cutoutAndColorResult = u_dayTextureCutoutRectangles["+Z+"];\n        texelUnclipped = v_textureCoordinates.x < cutoutAndColorResult.x || cutoutAndColorResult.z < v_textureCoordinates.x || v_textureCoordinates.y < cutoutAndColorResult.y || cutoutAndColorResult.w < v_textureCoordinates.y;\n        cutoutAndColorResult = sampleAndBlend(\n":"        color = sampleAndBlend(\n",J+="            color,\n            u_dayTextures["+Z+"],\n            u_dayTextureUseWebMercatorT["+Z+"] ? textureCoordinates.xz : textureCoordinates.xy,\n            u_dayTextureTexCoordsRectangle["+Z+"],\n            u_dayTextureTranslationAndScale["+Z+"],\n            "+(f?"u_dayTextureAlpha["+Z+"]":"1.0")+",\n            "+(d?"u_dayTextureBrightness["+Z+"]":"0.0")+",\n            "+(u?"u_dayTextureContrast["+Z+"]":"0.0")+",\n            "+(m?"u_dayTextureHue["+Z+"]":"0.0")+",\n            "+(p?"u_dayTextureSaturation["+Z+"]":"0.0")+",\n            "+(g?"u_dayTextureOneOverGamma["+Z+"]":"0.0")+",\n            "+(v?"u_dayTextureSplit["+Z+"]":"0.0")+",\n            "+(L?"u_colorsToAlpha["+Z+"]":"vec4(0.0)")+"\n        );\n",A&&(J+="        color = czm_branchFreeTernary(texelUnclipped, cutoutAndColorResult, color);\n");J+="        return color;\n    }",X.sources.push(J),Q.sources.push(l(z)),Q.sources.push(h(x));var $=o["a"].fromCache({context:t.context,vertexShaderSource:Q,fragmentShaderSource:X,attributeLocations:R.getAttributeLocations()});q=K[W]=new c(i,W,this.material,$,Y)}return a.surfaceShader=q,q.shaderProgram},u.prototype.destroy=function(){var e,t,a=this._shadersByTexturesFlags;for(var n in a)if(a.hasOwnProperty(n)){var o=a[n];if(!Object(r["a"])(o))continue;for(e in o)o.hasOwnProperty(e)&&(t=o[e],Object(r["a"])(t)&&t.shaderProgram.destroy())}return Object(i["a"])(this)},t["a"]=u},2856:function(e,t,a){"use strict";var r=a("cef5"),i=a("be18"),n=a("a561"),o=a("2f63"),s=a("9f1d"),d=a("0123"),c=a("5410"),u=a("78e5"),l=a("e42d"),h=a("de66"),m=a("8a39"),p=a("b82e"),g=a("a89b"),f=a("f20a"),v=a("8b68"),y=a("6ef5"),_=a("6c84"),b=a("a913"),T=a("3022"),S=a("03f1"),O=a("23b6"),x=a("7c5e"),E=a("a58e"),w=a("dddf"),C=a("f1b3"),I=a("a307"),A=a("4c22");function P(){this.imagery=[],this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new n["a"](0,0,1,1),this.terrainData=void 0,this.vertexArray=void 0,this.orientedBoundingBox=void 0,this.boundingVolumeSourceTile=void 0,this.tileBoundingRegion=void 0,this.occludeePointInScaledSpace=new i["a"],this.terrainState=A["a"].UNLOADED,this.mesh=void 0,this.fill=void 0,this.pickBoundingSphere=new r["a"],this.surfaceShader=void 0,this.isClipped=!0,this.clippedByBoundaries=!1}function D(e,t,a,r,n,s){if(e.decodePosition(r,n,s),Object(o["a"])(t)&&t!==I["a"].SCENE3D){var d=a.ellipsoid,c=d.cartesianToCartographic(s);a.project(c,s),i["a"].fromElements(s.z,s.x,s.y,s)}return s}Object(s["a"])(P.prototype,{eligibleForUnloading:{get:function(){for(var e=this.terrainState,t=e===A["a"].RECEIVING||e===A["a"].TRANSFORMING,a=!t,r=this.imagery,i=0,n=r.length;a&&i<n;++i){var s=r[i];a=!Object(o["a"])(s.loadingImagery)||s.loadingImagery.state!==w["a"].TRANSITIONING}return a}},renderedMesh:{get:function(){return Object(o["a"])(this.vertexArray)?this.mesh:Object(o["a"])(this.fill)?this.fill.mesh:void 0}}});var L=new i["a"],j=new i["a"],M=new i["a"],N=new i["a"];function R(e,t,a){var r=t.getTileDataAvailable(e.x,e.y,e.level);if(!Object(o["a"])(r)&&Object(o["a"])(e.parent)){var i=e.parent,n=i.data;Object(o["a"])(n)&&Object(o["a"])(n.terrainData)&&(r=n.terrainData.isChildAvailable(i.x,i.y,e.x,e.y))}!1===r&&(e.data.terrainState=A["a"].FAILED);for(var s=0,d=a.length;s<d;++s){var c=a.get(s);c.show&&c._createTileImagerySkeletons(e,t)}}function H(e,t,a,r,i){var n=e.data,s=e.parent;if(n.terrainState===A["a"].FAILED&&void 0!==s){var d=void 0!==s.data&&void 0!==s.data.terrainData&&!1!==s.data.terrainData.canUpsample;d||P.processStateMachine(s,t,a,r,!0)}if(n.terrainState===A["a"].FAILED&&B(n,e,t,a,e.x,e.y,e.level),n.terrainState===A["a"].UNLOADED&&V(n,a,e.x,e.y,e.level),n.terrainState===A["a"].RECEIVED&&F(n,t,a,e.x,e.y,e.level),n.terrainState===A["a"].TRANSFORMED&&G(n,t.context,a,e.x,e.y,e.level,i),n.terrainState>=A["a"].RECEIVED&&void 0===n.waterMaskTexture&&a.hasWaterMask){var c=n.terrainData;if(void 0!==c.waterMask)U(t.context,n);else{var u=n._findAncestorTileWithTerrainData(e);Object(o["a"])(u)&&Object(o["a"])(u.data.waterMaskTexture)&&(n.waterMaskTexture=u.data.waterMaskTexture,++n.waterMaskTexture.referenceCount,n._computeWaterMaskTranslationAndScale(e,u,n.waterMaskTranslationAndScale))}}}function B(e,t,a,r,i,n,s){var d=t.parent;if(d){var c=d.data.terrainData,u=d.x,l=d.y,h=d.level;if(Object(o["a"])(c)){var m=c.upsample(r.tilingScheme,u,l,h,i,n,s);Object(o["a"])(m)&&(e.terrainState=A["a"].RECEIVING,Object(E["a"])(m,(function(t){e.terrainData=t,e.terrainState=A["a"].RECEIVED}),(function(){e.terrainState=A["a"].FAILED})))}}else t.state=C["a"].FAILED}function V(e,t,a,r,i){function n(t){e.terrainData=t,e.terrainState=A["a"].RECEIVED,e.request=void 0}function s(){if(e.request.state===m["a"].CANCELLED)return e.terrainData=void 0,e.terrainState=A["a"].UNLOADED,void(e.request=void 0);e.terrainState=A["a"].FAILED,e.request=void 0;var n="Failed to obtain terrain tile X: "+a+" Y: "+r+" Level: "+i+".";t._requestError=g["a"].handleError(t._requestError,t,t.errorEvent,n,a,r,i,d)}function d(){var d=new h["a"]({throttle:!1,throttleByServer:!0,type:p["a"].TERRAIN});e.request=d;var c=t.requestTileGeometry(a,r,i,d);Object(o["a"])(c)?(e.terrainState=A["a"].RECEIVING,Object(E["a"])(c,n,s)):(e.terrainState=A["a"].UNLOADED,e.request=void 0)}d()}function F(e,t,a,r,n,s){var d=a.tilingScheme,c=e.terrainData,l=c.createMesh(d,r,n,s,t.terrainExaggeration);Object(o["a"])(l)&&(e.terrainState=A["a"].TRANSFORMING,Object(E["a"])(l,(function(t){e.mesh=t,e.orientedBoundingBox=u["a"].clone(t.orientedBoundingBox,e.orientedBoundingBox),e.occludeePointInScaledSpace=i["a"].clone(t.occludeePointInScaledSpace,e.occludeePointInScaledSpace),e.terrainState=A["a"].TRANSFORMED}),(function(){e.terrainState=A["a"].FAILED})))}function G(e,t,a,r,i,n,o){e.vertexArray=P._createVertexArrayForMesh(t,e.mesh),e.terrainState=A["a"].READY,e.fill=e.fill&&e.fill.destroy(o)}function k(e){var t=e.cache.tile_waterMaskData;if(!Object(o["a"])(t)){var a=b["a"].create({context:e,pixelFormat:l["a"].LUMINANCE,pixelDatatype:y["a"].UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});a.referenceCount=1;var r=new _["a"]({wrapS:O["a"].CLAMP_TO_EDGE,wrapT:O["a"].CLAMP_TO_EDGE,minificationFilter:S["a"].LINEAR,magnificationFilter:T["a"].LINEAR});t={allWaterTexture:a,sampler:r,destroy:function(){this.allWaterTexture.destroy()}},e.cache.tile_waterMaskData=t}return t}function U(e,t){var a,r=t.terrainData.waterMask,i=k(e),o=r.length;if(1===o){if(0===r[0])return;a=i.allWaterTexture}else{var s=Math.sqrt(o);a=b["a"].create({context:e,pixelFormat:l["a"].LUMINANCE,pixelDatatype:y["a"].UNSIGNED_BYTE,source:{width:s,height:s,arrayBufferView:r},sampler:i.sampler,flipY:!1}),a.referenceCount=0}++a.referenceCount,t.waterMaskTexture=a,n["a"].fromElements(0,0,1,1,t.waterMaskTranslationAndScale)}P.prototype.pick=function(e,t,a,r,n){var s=this.renderedMesh;if(Object(o["a"])(s))for(var d=s.vertices,u=s.indices,l=s.encoding,h=u.length,m=0;m<h;m+=3){var p=u[m],g=u[m+1],f=u[m+2],v=D(l,t,a,d,p,L),y=D(l,t,a,d,g,j),_=D(l,t,a,d,f,M),b=c["a"].rayTriangle(e,v,y,_,r,N);if(Object(o["a"])(b))return i["a"].clone(b,n)}},P.prototype.freeResources=function(){Object(o["a"])(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,this.terrainState=A["a"].UNLOADED,this.mesh=void 0,this.fill=this.fill&&this.fill.destroy();for(var e=this.imagery,t=0,a=e.length;t<a;++t)e[t].freeResources();this.imagery.length=0,this.freeVertexArray()},P.prototype.freeVertexArray=function(){P._freeVertexArray(this.vertexArray),this.vertexArray=void 0,P._freeVertexArray(this.wireframeVertexArray),this.wireframeVertexArray=void 0},P.initialize=function(e,t,a){var r=e.data;Object(o["a"])(r)||(r=e.data=new P),e.state===C["a"].START&&(R(e,t,a),e.state=C["a"].LOADING)},P.processStateMachine=function(e,t,a,r,i,n){P.initialize(e,a,r);var s=e.data;if(e.state===C["a"].LOADING&&H(e,t,a,r,i),!n){var d=e.renderable;e.renderable=Object(o["a"])(s.vertexArray);var c=s.terrainState===A["a"].READY;e.upsampledFromParent=Object(o["a"])(s.terrainData)&&s.terrainData.wasCreatedByUpsampling();var u=s.processImagery(e,a,t);if(c&&u){var l=e._loadedCallbacks,h={};for(var m in l)l.hasOwnProperty(m)&&(l[m](e)||(h[m]=l[m]));e._loadedCallbacks=h,e.state=C["a"].DONE}d&&(e.renderable=!0)}},P.prototype.processImagery=function(e,t,a,r){var i,n,s=e.data,d=e.upsampledFromParent,c=!1,u=!0,l=s.imagery;for(i=0,n=l.length;i<n;++i){var h=l[i];if(Object(o["a"])(h.loadingImagery)){if(h.loadingImagery.state===w["a"].PLACEHOLDER){var m=h.loadingImagery.imageryLayer;if(m.imageryProvider.ready){h.freeResources(),l.splice(i,1),m._createTileImagerySkeletons(e,t,i),--i,n=l.length;continue}d=!1}var p=h.processStateMachine(e,a,r);u=u&&p,c=c||p||Object(o["a"])(h.readyImagery),d=d&&Object(o["a"])(h.loadingImagery)&&(h.loadingImagery.state===w["a"].FAILED||h.loadingImagery.state===w["a"].INVALID)}else d=!1}return e.upsampledFromParent=d,e.renderable=e.renderable&&(c||u),u},P._createVertexArrayForMesh=function(e,t){var a=t.vertices,r=f["a"].createVertexBuffer({context:e,typedArray:a,usage:v["a"].STATIC_DRAW}),i=t.encoding.getAttributes(r),n=t.indices.indexBuffers||{},s=n[e.id];if(!Object(o["a"])(s)||s.isDestroyed()){var c=t.indices;s=f["a"].createIndexBuffer({context:e,typedArray:c,usage:v["a"].STATIC_DRAW,indexDatatype:d["a"].fromSizeInBytes(c.BYTES_PER_ELEMENT)}),s.vertexArrayDestroyable=!1,s.referenceCount=1,n[e.id]=s,t.indices.indexBuffers=n}else++s.referenceCount;return new x["a"]({context:e,attributes:i,indexBuffer:s})},P._freeVertexArray=function(e){if(Object(o["a"])(e)){var t=e.indexBuffer;e.destroy(),Object(o["a"])(t)&&!t.isDestroyed()&&Object(o["a"])(t.referenceCount)&&(--t.referenceCount,0===t.referenceCount&&t.destroy())}},P.prototype._findAncestorTileWithTerrainData=function(e){var t=e.parent;while(Object(o["a"])(t)&&(!Object(o["a"])(t.data)||!Object(o["a"])(t.data.terrainData)||t.data.terrainData.wasCreatedByUpsampling()))t=t.parent;return t},P.prototype._computeWaterMaskTranslationAndScale=function(e,t,a){var r=t.rectangle,i=e.rectangle,n=i.width,o=i.height,s=n/r.width,d=o/r.height;return a.x=s*(i.west-r.west)/n,a.y=d*(i.south-r.south)/o,a.z=s,a.w=d,a},t["a"]=P},"2d75":function(e,t,a){"use strict";var r=a("0e25"),i={NONE:0,CLAMP_TO_GROUND:1,RELATIVE_TO_GROUND:2};t["a"]=Object(r["a"])(i)},3209:function(e,t,a){"use strict";var r=a("cef5"),i=a("b081"),n=a("670c"),o=a("be18"),s=a("a561"),d=a("bef8"),c=a("bd8d"),u=a("9541"),l=a("2bb9"),h=a("535a"),m=a("2f63"),p=a("9f1d"),g=a("7d62"),f=a("21d7"),v=a("d940"),y=a("c1e2"),_=a("0123"),b=a("66bf"),T=a("93da"),S=a("52f0"),O=a("78e5"),x=a("713f"),E=a("1b8d"),w=a("eace"),C=a("98f6"),I=a("fe57"),A=a("2368"),P=a("1184"),D=a("f20a"),L=a("8b68"),j=a("b997"),M=a("a894"),N=a("d289"),R=a("6dc0"),H=a("7c5e"),B=a("b7c8"),V=a("43ee"),F=a("06f0"),G=a("2856"),k=a("ad4a"),U=a("dddf"),z=a("3a8e"),W=a("894b"),Y=a("f1b3"),q=a("a307"),K=a("c86b"),Q=a("2221"),X=a("4c22"),J=a("1ec0"),Z=a("ee78");function $(e){this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.hasWaterMask=!1,this.oceanNormalMap=void 0,this.zoomedOutOceanSpecularIntensity=.5,this.enableLighting=!1,this.showGroundAtmosphere=!1,this.shadows=K["a"].RECEIVE_ONLY,this.fillHighlightColor=void 0,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this._quadtree=void 0,this._terrainProvider=e.terrainProvider,this._imageryLayers=e.imageryLayers,this._surfaceShaderSet=e.surfaceShaderSet,this._renderState=void 0,this._blendRenderState=void 0,this._errorEvent=new f["a"],this._imageryLayers.layerAdded.addEventListener($.prototype._onLayerAdded,this),this._imageryLayers.layerRemoved.addEventListener($.prototype._onLayerRemoved,this),this._imageryLayers.layerMoved.addEventListener($.prototype._onLayerMoved,this),this._imageryLayers.layerShownOrHidden.addEventListener($.prototype._onLayerShownOrHidden,this),this._imageryLayersUpdatedEvent=new f["a"],this._layerOrderChanged=!1,this._tilesToRenderByTextureCount=[],this._drawCommands=[],this._uniformMaps=[],this._usedDrawCommands=0,this._vertexArraysToDestroy=[],this._debug={wireframe:!1,boundingSphereTile:void 0},this._baseColor=void 0,this._firstPassInitialColor=void 0,this.baseColor=new c["a"](0,0,.5,1),this._clippingPlanes=void 0,this.cartographicLimitRectangle=w["a"].clone(w["a"].MAX_VALUE),this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1}function ee(e,t){var a=e.loadingImagery;Object(m["a"])(a)||(a=e.readyImagery);var r=t.loadingImagery;return Object(m["a"])(r)||(r=t.readyImagery),a.imageryLayer._layerIndex-r.imageryLayer._layerIndex}function te(e,t){var a=t.creditDisplay;e._terrainProvider.ready&&Object(m["a"])(e._terrainProvider.credit)&&a.addCredit(e._terrainProvider.credit);for(var r=e._imageryLayers,i=0,n=r.length;i<n;++i){var o=r.get(i).imageryProvider;o.ready&&Object(m["a"])(o.credit)&&a.addCredit(o.credit)}}Object(p["a"])($.prototype,{baseColor:{get:function(){return this._baseColor},set:function(e){this._baseColor=e,this._firstPassInitialColor=s["a"].fromColor(e,this._firstPassInitialColor)}},quadtree:{get:function(){return this._quadtree},set:function(e){this._quadtree=e}},ready:{get:function(){return this._terrainProvider.ready&&(0===this._imageryLayers.length||this._imageryLayers.get(0).imageryProvider.ready)}},tilingScheme:{get:function(){return this._terrainProvider.tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},imageryLayersUpdatedEvent:{get:function(){return this._imageryLayersUpdatedEvent}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){this._terrainProvider!==e&&(this._terrainProvider=e,Object(m["a"])(this._quadtree)&&this._quadtree.invalidateAllTiles())}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){V["a"].setOwner(e,this,"_clippingPlanes")}}}),$.prototype.update=function(e){this._imageryLayers._update()},$.prototype.initialize=function(e){this._imageryLayers.queueReprojectionCommands(e),this._layerOrderChanged&&(this._layerOrderChanged=!1,this._quadtree.forEachLoadedTile((function(e){e.data.imagery.sort(ee)}))),te(this,e);for(var t=this._vertexArraysToDestroy,a=t.length,r=0;r<a;++r)G["a"]._freeVertexArray(t[r]);t.length=0},$.prototype.beginUpdate=function(e){for(var t=this._tilesToRenderByTextureCount,a=0,r=t.length;a<r;++a){var i=t[a];Object(m["a"])(i)&&(i.length=0)}var n=this._clippingPlanes;Object(m["a"])(n)&&n.enabled&&n.update(e),this._usedDrawCommands=0,this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1},$.prototype.endUpdate=function(e){Object(m["a"])(this._renderState)||(this._renderState=R["a"].fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:F["a"].LESS}}),this._blendRenderState=R["a"].fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:F["a"].LESS_OR_EQUAL},blending:B["a"].ALPHA_BLEND})),this._hasFillTilesThisFrame&&this._hasLoadedTilesThisFrame&&Q["a"].updateFillTiles(this,this._quadtree._tilesToRender,e,this._vertexArraysToDestroy);for(var t=this._tilesToRenderByTextureCount,a=0,r=t.length;a<r;++a){var i=t[a];if(Object(m["a"])(i))for(var n=0,o=i.length;n<o;++n)De(this,i[n],e)}},$.prototype.updateForPick=function(e){for(var t=this._drawCommands,a=0,r=this._usedDrawCommands;a<r;++a)e.commandList.push(t[a])},$.prototype.cancelReprojections=function(){this._imageryLayers.cancelReprojections()},$.prototype.getLevelMaximumGeometricError=function(e){return this._terrainProvider.getLevelMaximumGeometricError(e)},$.prototype.loadTile=function(e,t){var a,r=t.data,i=!0;Object(m["a"])(r)&&(i=r.boundingVolumeSourceTile!==t||t._lastSelectionResult===Z["a"].CULLED_BUT_NEEDED,a=r.terrainState),G["a"].processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this._vertexArraysToDestroy,i),r=t.data,i&&a!==t.data.terrainState&&this.computeTileVisibility(t,e,this.quadtree.occluders)&&r.boundingVolumeSourceTile===t&&(i=!1,G["a"].processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this._vertexArraysToDestroy,i))};var ae=new r["a"],re=new w["a"],ie=new w["a"],ne=new d["a"];function oe(e,t){if(t.west<t.east)return t;var a=w["a"].clone(t,ie),r=w["a"].center(e,ne);return r.longitude>0?a.east=T["a"].PI:a.west=-T["a"].PI,a}$.prototype.computeTileVisibility=function(e,t,a){var i=this.computeDistanceToTile(e,t);if(e._distance=i,t.fog.enabled&&T["a"].fog(i,t.fog.density)>=1)return A["a"].NONE;var n=e.data,s=n.tileBoundingRegion;if(void 0===n.boundingVolumeSourceTile)return A["a"].PARTIAL;var d=t.cullingVolume,c=n.orientedBoundingBox;!Object(m["a"])(c)&&Object(m["a"])(n.renderedMesh)&&(c=n.renderedMesh.boundingSphere3D),n.clippedByBoundaries=!1;var u=oe(e.rectangle,this.cartographicLimitRectangle),l=w["a"].simpleIntersection(u,e.rectangle,re);if(!Object(m["a"])(l))return A["a"].NONE;if(w["a"].equals(l,e.rectangle)||(n.clippedByBoundaries=!0),t.mode!==q["a"].SCENE3D&&(c=ae,r["a"].fromRectangleWithHeights2D(e.rectangle,t.mapProjection,s.minimumHeight,s.maximumHeight,c),o["a"].fromElements(c.center.z,c.center.x,c.center.y,c.center),t.mode===q["a"].MORPHING&&Object(m["a"])(n.renderedMesh)&&(c=r["a"].union(n.renderedMesh.boundingSphere3D,c,c))),!Object(m["a"])(c))return b["a"].INTERSECTING;var h=this._clippingPlanes;if(Object(m["a"])(h)&&h.enabled){var p=h.computeIntersectionWithBoundingVolume(c);if(e.isClipped=p!==b["a"].INSIDE,p===b["a"].OUTSIDE)return A["a"].NONE}var g=d.computeVisibility(c);if(g===b["a"].OUTSIDE)return A["a"].NONE;var f=t.mode===q["a"].SCENE3D&&t.camera.frustum instanceof x["a"];if(t.mode===q["a"].SCENE3D&&!f&&Object(m["a"])(a)){var v=n.occludeePointInScaledSpace;return Object(m["a"])(v)?a.ellipsoid.isScaledSpacePointVisible(v)?g:A["a"].NONE:g}return g},$.prototype.canRefine=function(e){if(Object(m["a"])(e.data.terrainData))return!0;var t=this.terrainProvider.getTileDataAvailable(2*e.x,2*e.y,e.level+1);return void 0!==t};var se=[],de=[];$.prototype.canRenderWithoutLosingDetail=function(e,t){var a=e.data,r=se;r.length=this._imageryLayers.length;var i,n,o,s=!1,d=!1;for(Object(m["a"])(a)&&(s=a.terrainState===X["a"].READY,d=!0,i=a.imagery),n=0,o=r.length;n<o;++n)r[n]=d;if(Object(m["a"])(i))for(n=0,o=i.length;n<o;++n){var c=i[n],u=c.loadingImagery,l=!Object(m["a"])(u)||u.state===U["a"].FAILED||u.state===U["a"].INVALID,h=(c.loadingImagery||c.readyImagery).imageryLayer._layerIndex;r[h]=l&&r[h]}var p=this.quadtree._lastSelectionFrameNumber,g=de;g.length=0,g.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild);while(g.length>0){var f=g.pop(),v=f._lastSelectionResultFrame===p?f._lastSelectionResult:Z["a"].NONE;if(v===Z["a"].RENDERED){var y=f.data;if(!Object(m["a"])(y))continue;if(!s&&f.data.terrainState===X["a"].READY)return!1;var _=f.data.imagery;for(n=0,o=_.length;n<o;++n){var b=_[n],T=b.loadingImagery,S=!Object(m["a"])(T)||T.state===U["a"].FAILED||T.state===U["a"].INVALID,O=(b.loadingImagery||b.readyImagery).imageryLayer._layerIndex;if(S&&!r[O])return!1}}else v===Z["a"].REFINED&&g.push(f.southwestChild,f.southeastChild,f.northwestChild,f.northeastChild)}return!0};var ce=new o["a"];$.prototype.computeTileLoadPriority=function(e,t){var a=e.data;if(void 0===a)return 0;var r=a.orientedBoundingBox;if(void 0===r)return 0;var i=t.camera.positionWC,n=t.camera.directionWC,s=o["a"].subtract(r.center,i,ce),d=o["a"].magnitude(s);return d<T["a"].EPSILON5?0:(o["a"].divideByScalar(s,d,s),(1-o["a"].dot(s,n))*e._distance)};var ue=new S["a"],le=new S["a"],he=new s["a"],me=new s["a"],pe=new o["a"],ge=new o["a"],fe=new o["a"],ve=new o["a"];$.prototype.showTileThisFrame=function(e,t){for(var a=0,r=e.data.imagery,i=0,n=r.length;i<n;++i){var o=r[i];Object(m["a"])(o.readyImagery)&&0!==o.readyImagery.imageryLayer.alpha&&++a}var s=this._tilesToRenderByTextureCount[a];Object(m["a"])(s)||(s=[],this._tilesToRenderByTextureCount[a]=s),s.push(e);var d=e.data;Object(m["a"])(d.vertexArray)?this._hasLoadedTilesThisFrame=!0:this._hasFillTilesThisFrame=!0;var c=this._debug;++c.tilesRendered,c.texturesRendered+=a};var ye=[new o["a"],new o["a"],new o["a"],new o["a"]];function _e(e,t,a,r,i){var n=e.quadtree._occluders.ellipsoid,s=n.ellipsoid,d=ye;return o["a"].fromRadians(a.west,a.south,r,s,d[0]),o["a"].fromRadians(a.east,a.south,r,s,d[1]),o["a"].fromRadians(a.west,a.north,r,s,d[2]),o["a"].fromRadians(a.east,a.north,r,s,d[3]),n.computeHorizonCullingPoint(t,d,i)}function be(e,t,a){var r=e.data;void 0===r&&(r=e.data=new G["a"]),void 0===r.tileBoundingRegion&&(r.tileBoundingRegion=new J["a"]({computeBoundingVolumes:!1,rectangle:e.rectangle,ellipsoid:e.tilingScheme.ellipsoid,minimumHeight:0,maximumHeight:0}));var i=r.terrainData,n=r.mesh,o=r.tileBoundingRegion;if(void 0!==n&&void 0!==n.minimumHeight&&void 0!==n.maximumHeight)return o.minimumHeight=n.minimumHeight,o.maximumHeight=n.maximumHeight,e;if(void 0!==i&&void 0!==i._minimumHeight&&void 0!==i._maximumHeight)return o.minimumHeight=i._minimumHeight*a.terrainExaggeration,o.maximumHeight=i._maximumHeight*a.terrainExaggeration,e;o.minimumHeight=Number.NaN,o.maximumHeight=Number.NaN;var s=e.parent;while(void 0!==s){var d=s.data;if(void 0!==d){var c=d.mesh;if(void 0!==c&&void 0!==c.minimumHeight&&void 0!==c.maximumHeight)return o.minimumHeight=c.minimumHeight,o.maximumHeight=c.maximumHeight,s;var u=d.terrainData;if(void 0!==u&&void 0!==u._minimumHeight&&void 0!==u._maximumHeight)return o.minimumHeight=u._minimumHeight*a.terrainExaggeration,o.maximumHeight=u._maximumHeight*a.terrainExaggeration,s}s=s.parent}}function Te(e,t,a){return function(r){var i,n,o,s=-1,d=r.data.imagery,c=d.length;for(o=0;o<c;++o)if(i=d[o],n=Object(h["a"])(i.readyImagery,i.loadingImagery),n.imageryLayer===t){s=o;break}if(-1!==s){var u=s+e;if(i=d[u],n=Object(m["a"])(i)?Object(h["a"])(i.readyImagery,i.loadingImagery):void 0,!Object(m["a"])(n)||n.imageryLayer!==t)return!t._createTileImagerySkeletons(r,a,u);for(o=s;o<u;++o)d[o].freeResources();d.splice(s,e)}return!0}}$.prototype.computeDistanceToTile=function(e,t){var a=be(e,this.terrainProvider,t),r=e.data,i=r.tileBoundingRegion;if(void 0===a)return 9999999999;if(r.boundingVolumeSourceTile!==a){r.boundingVolumeSourceTile=a;var n=e.rectangle;Object(m["a"])(n)&&n.width<T["a"].PI_OVER_TWO+T["a"].EPSILON5&&(r.orientedBoundingBox=O["a"].fromRectangle(e.rectangle,i.minimumHeight,i.maximumHeight,e.tilingScheme.ellipsoid,r.orientedBoundingBox),r.occludeePointInScaledSpace=_e(this,r.orientedBoundingBox.center,e.rectangle,i.maximumHeight,r.occludeePointInScaledSpace))}var o=i.minimumHeight,s=i.maximumHeight;if(r.boundingVolumeSourceTile!==e){var d=t.camera.positionCartographic.height,c=Math.abs(d-o),u=Math.abs(d-s);c>u?(i.minimumHeight=o,i.maximumHeight=o):(i.minimumHeight=s,i.maximumHeight=s)}var l=i.distanceToCamera(t);return i.minimumHeight=o,i.maximumHeight=s,l},$.prototype.isDestroyed=function(){return!1},$.prototype.destroy=function(){return this._tileProvider=this._tileProvider&&this._tileProvider.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),Object(g["a"])(this)},$.prototype._onLayerAdded=function(e,t){if(e.show){var a=this._terrainProvider,r=this,i=e.imageryProvider,n=this._imageryLayersUpdatedEvent;i._reload=function(){e._imageryCache={},r._quadtree.forEachLoadedTile((function(t){if(!Object(m["a"])(t._loadedCallbacks[e._layerIndex])){var r,i=t.data.imagery,n=i.length,o=-1,s=0;for(r=0;r<n;++r){var d=i[r],c=Object(h["a"])(d.readyImagery,d.loadingImagery);if(c.imageryLayer===e)-1===o&&(o=r),++s;else if(-1!==o)break}if(-1!==o){var u=o+s;e._createTileImagerySkeletons(t,a,u)&&(t._loadedCallbacks[e._layerIndex]=Te(s,e,a),t.state=Y["a"].LOADING)}}}))},this._quadtree.forEachLoadedTile((function(t){e._createTileImagerySkeletons(t,a)&&(t.state=Y["a"].LOADING,0===t.level||t._lastSelectionResultFrame===r.quadtree._lastSelectionFrameNumber&&t._lastSelectionResult===Z["a"].RENDERED||(t.renderable=!1))})),this._layerOrderChanged=!0,n.raiseEvent()}},$.prototype._onLayerRemoved=function(e,t){this._quadtree.forEachLoadedTile((function(t){for(var a=t.data.imagery,r=-1,i=0,n=0,o=a.length;n<o;++n){var s=a[n],d=s.loadingImagery;if(Object(m["a"])(d)||(d=s.readyImagery),d.imageryLayer===e)-1===r&&(r=n),s.freeResources(),++i;else if(-1!==r)break}-1!==r&&a.splice(r,i)})),Object(m["a"])(e.imageryProvider)&&(e.imageryProvider._reload=void 0),this._imageryLayersUpdatedEvent.raiseEvent()},$.prototype._onLayerMoved=function(e,t,a){this._layerOrderChanged=!0,this._imageryLayersUpdatedEvent.raiseEvent()},$.prototype._onLayerShownOrHidden=function(e,t,a){a?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)};var Se,Oe,xe,Ee=new S["a"];function we(e,t){var a={u_initialColor:function(){return this.properties.initialColor},u_fillHighlightColor:function(){return this.properties.fillHighlightColor},u_zoomedOutOceanSpecularIntensity:function(){return this.properties.zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return this.properties.oceanNormalMap},u_lightingFadeDistance:function(){return this.properties.lightingFadeDistance},u_nightFadeDistance:function(){return this.properties.nightFadeDistance},u_center3D:function(){return this.properties.center3D},u_tileRectangle:function(){return this.properties.tileRectangle},u_modifiedModelView:function(){var t=e.context.uniformState.view,a=S["a"].multiplyByPoint(t,this.properties.rtc,ge);return S["a"].setTranslation(t,a,ue),ue},u_modifiedModelViewProjection:function(){var t=e.context.uniformState.view,a=e.context.uniformState.projection,r=S["a"].multiplyByPoint(t,this.properties.rtc,ge);return S["a"].setTranslation(t,r,le),S["a"].multiply(a,le,le),le},u_dayTextures:function(){return this.properties.dayTextures},u_dayTextureTranslationAndScale:function(){return this.properties.dayTextureTranslationAndScale},u_dayTextureTexCoordsRectangle:function(){return this.properties.dayTextureTexCoordsRectangle},u_dayTextureUseWebMercatorT:function(){return this.properties.dayTextureUseWebMercatorT},u_dayTextureAlpha:function(){return this.properties.dayTextureAlpha},u_dayTextureBrightness:function(){return this.properties.dayTextureBrightness},u_dayTextureContrast:function(){return this.properties.dayTextureContrast},u_dayTextureHue:function(){return this.properties.dayTextureHue},u_dayTextureSaturation:function(){return this.properties.dayTextureSaturation},u_dayTextureOneOverGamma:function(){return this.properties.dayTextureOneOverGamma},u_dayIntensity:function(){return this.properties.dayIntensity},u_southAndNorthLatitude:function(){return this.properties.southAndNorthLatitude},u_southMercatorYAndOneOverHeight:function(){return this.properties.southMercatorYAndOneOverHeight},u_waterMask:function(){return this.properties.waterMask},u_waterMaskTranslationAndScale:function(){return this.properties.waterMaskTranslationAndScale},u_minMaxHeight:function(){return this.properties.minMaxHeight},u_scaleAndBias:function(){return this.properties.scaleAndBias},u_dayTextureSplit:function(){return this.properties.dayTextureSplit},u_dayTextureCutoutRectangles:function(){return this.properties.dayTextureCutoutRectangles},u_clippingPlanes:function(){var a=t._clippingPlanes;return Object(m["a"])(a)&&Object(m["a"])(a.texture)?a.texture:e.context.defaultTexture},u_cartographicLimitRectangle:function(){return this.properties.localizedCartographicLimitRectangle},u_clippingPlanesMatrix:function(){var a=t._clippingPlanes;return Object(m["a"])(a)?S["a"].multiply(e.context.uniformState.view,a.modelMatrix,Ee):S["a"].IDENTITY},u_clippingPlanesEdgeStyle:function(){var e=this.properties.clippingPlanesEdgeColor;return e.alpha=this.properties.clippingPlanesEdgeWidth,e},u_minimumBrightness:function(){return e.fog.minimumBrightness},u_hsbShift:function(){return this.properties.hsbShift},u_colorsToAlpha:function(){return this.properties.colorsToAlpha},properties:{initialColor:new s["a"](0,0,.5,1),fillHighlightColor:new c["a"](0,0,0,0),zoomedOutOceanSpecularIntensity:.5,oceanNormalMap:void 0,lightingFadeDistance:new n["a"](65e5,9e6),nightFadeDistance:new n["a"](1e7,4e7),hsbShift:new o["a"],center3D:void 0,rtc:new o["a"],modifiedModelView:new S["a"],tileRectangle:new s["a"],dayTextures:[],dayTextureTranslationAndScale:[],dayTextureTexCoordsRectangle:[],dayTextureUseWebMercatorT:[],dayTextureAlpha:[],dayTextureBrightness:[],dayTextureContrast:[],dayTextureHue:[],dayTextureSaturation:[],dayTextureOneOverGamma:[],dayTextureSplit:[],dayTextureCutoutRectangles:[],dayIntensity:0,colorsToAlpha:[],southAndNorthLatitude:new n["a"],southMercatorYAndOneOverHeight:new n["a"],waterMask:void 0,waterMaskTranslationAndScale:new s["a"],minMaxHeight:new n["a"],scaleAndBias:new S["a"],clippingPlanesEdgeColor:c["a"].clone(c["a"].WHITE),clippingPlanesEdgeWidth:0,localizedCartographicLimitRectangle:new s["a"]}};return a}function Ce(e,t,a){var r,i,n=a.data;if(Object(m["a"])(n.vertexArray)?(r=n.mesh,i=n.vertexArray):Object(m["a"])(n.fill)&&Object(m["a"])(n.fill.vertexArray)&&(r=n.fill.mesh,i=n.fill.vertexArray),Object(m["a"])(r)&&Object(m["a"])(i)){if(Object(m["a"])(n.wireframeVertexArray)){if(n.wireframeVertexArray.mesh===r)return;n.wireframeVertexArray.destroy(),n.wireframeVertexArray=void 0}n.wireframeVertexArray=Ie(e,i,r),n.wireframeVertexArray.mesh=r}}function Ie(e,t,a){var r=a.indices,i={indices:r,primitiveType:E["a"].TRIANGLES};y["a"].toWireframe(i);var n=i.indices,o=D["a"].createIndexBuffer({context:e,typedArray:n,usage:L["a"].STATIC_DRAW,indexDatatype:_["a"].fromSizeInBytes(n.BYTES_PER_ELEMENT)});return new H["a"]({context:e,attributes:t._attributes,indexBuffer:o})}(function(){var e,t,a=new v["a"]({geometry:i["a"].fromDimensions({dimensions:new o["a"](2,2,2)})}),r=new v["a"]({geometry:new C["a"]({radius:1})}),n=new S["a"];function s(e){return new W["a"]({geometryInstances:e,appearance:new z["a"]({translucent:!1,flat:!0}),asynchronous:!1})}Se=function(r,i){return r===e?t:(xe(),e=r,n=S["a"].fromRotationTranslation(r.halfAxes,r.center,n),a.modelMatrix=n,a.attributes.color=u["a"].fromColor(i),t=s(a),t)},Oe=function(a,i){return a===e?t:(xe(),e=a,n=S["a"].fromTranslation(a.center,n),n=S["a"].multiplyByUniformScale(n,a.radius,n),r.modelMatrix=n,r.attributes.color=u["a"].fromColor(i),t=s(r),t)},xe=function(){Object(m["a"])(t)&&(t.destroy(),t=void 0,e=void 0)}})();var Ae=new s["a"](0,0,0,0),Pe={frameState:void 0,surfaceTile:void 0,numberOfDayTextures:void 0,applyBrightness:void 0,applyContrast:void 0,applyHue:void 0,applySaturation:void 0,applyGamma:void 0,applyAlpha:void 0,applySplit:void 0,showReflectiveOcean:void 0,showOceanWaves:void 0,enableLighting:void 0,showGroundAtmosphere:void 0,perFragmentGroundAtmosphere:void 0,hasVertexNormals:void 0,useWebMercatorProjection:void 0,enableFog:void 0,enableClippingPlanes:void 0,clippingPlanes:void 0,clippedByBoundaries:void 0,hasImageryLayerCutout:void 0,colorCorrect:void 0,colorToAlpha:void 0};function De(e,t,a){var i=t.data;Object(m["a"])(i.vertexArray)||(void 0===i.fill&&(i.fill=new Q["a"](t)),i.fill.update(e,a));var n=a.creditDisplay,d=i.terrainData;if(Object(m["a"])(d)&&Object(m["a"])(d.credits))for(var u=d.credits,h=0,p=u.length;h<p;++h)n.addCredit(u[h]);var g=j["a"].maximumTextureImageUnits,f=i.waterMaskTexture,v=i.waterMaskTranslationAndScale;!Object(m["a"])(f)&&Object(m["a"])(i.fill)&&(f=i.fill.waterMaskTexture,v=i.fill.waterMaskTranslationAndScale);var y=e.hasWaterMask&&Object(m["a"])(f),_=e.oceanNormalMap,b=y&&Object(m["a"])(_),x=e.terrainProvider.ready&&e.terrainProvider.hasVertexNormals,C=a.fog.enabled,A=e.showGroundAtmosphere,D=K["a"].castShadows(e.shadows),L=K["a"].receiveShadows(e.shadows),R=e.hueShift,H=e.saturationShift,B=e.brightnessShift,V=!(T["a"].equalsEpsilon(R,0,T["a"].EPSILON7)&&T["a"].equalsEpsilon(H,0,T["a"].EPSILON7)&&T["a"].equalsEpsilon(B,0,T["a"].EPSILON7)),F=!1;if(A){var G,U=a.mode,z=a.camera;G=U===q["a"].SCENE2D||U===q["a"].COLUMBUS_VIEW?z.positionCartographic.height:o["a"].magnitude(z.positionWC);var W=e.nightFadeOutDistance;U!==q["a"].SCENE3D&&(W-=a.mapProjection.ellipsoid.maximumRadius),F=G>W}y&&--g,b&&--g,Object(m["a"])(a.shadowState)&&a.shadowState.shadowsEnabled&&--g,Object(m["a"])(e.clippingPlanes)&&e.clippingPlanes.enabled&&--g;var Y=i.renderedMesh,X=Y.center,J=Y.encoding,Z=he,$=0,ee=0,te=0,ae=0,ie=!1;if(a.mode!==q["a"].SCENE3D){var ne=a.mapProjection,se=ne.project(w["a"].southwest(t.rectangle),fe),de=ne.project(w["a"].northeast(t.rectangle),ve);if(Z.x=se.x,Z.y=se.y,Z.z=de.x,Z.w=de.y,a.mode!==q["a"].MORPHING&&(X=pe,X.x=0,X.y=.5*(Z.z+Z.x),X.z=.5*(Z.w+Z.y),Z.x-=X.y,Z.y-=X.z,Z.z-=X.y,Z.w-=X.z),a.mode===q["a"].SCENE2D&&J.quantization===I["a"].BITS12){var ce=1/(Math.pow(2,12)-1)*.5,ue=(Z.z-Z.x)*ce,le=(Z.w-Z.y)*ce;Z.x-=ue,Z.y-=le,Z.z+=ue,Z.w+=le}ne instanceof P["a"]&&($=t.rectangle.south,ee=t.rectangle.north,te=P["a"].geodeticLatitudeToMercatorAngle($),ae=1/(P["a"].geodeticLatitudeToMercatorAngle(ee)-te),ie=!0)}var ge=Pe;ge.frameState=a,ge.surfaceTile=i,ge.showReflectiveOcean=y,ge.showOceanWaves=b,ge.enableLighting=e.enableLighting,ge.showGroundAtmosphere=A,ge.perFragmentGroundAtmosphere=F,ge.hasVertexNormals=x,ge.useWebMercatorProjection=ie,ge.clippedByBoundaries=i.clippedByBoundaries;var ye=i.imagery,_e=0,be=ye.length,Te=e._renderState,Ee=e._blendRenderState,Ie=Te,De=e._firstPassInitialColor,Le=a.context;Object(m["a"])(e._debug.boundingSphereTile)||xe();do{var je,Me,Ne=0;if(e._drawCommands.length<=e._usedDrawCommands?(je=new M["a"],je.owner=t,je.cull=!1,je.boundingVolume=new r["a"],je.orientedBoundingBox=void 0,Me=we(a,e),e._drawCommands.push(je),e._uniformMaps.push(Me)):(je=e._drawCommands[e._usedDrawCommands],Me=e._uniformMaps[e._usedDrawCommands]),je.owner=t,++e._usedDrawCommands,t===e._debug.boundingSphereTile){var Re=i.orientedBoundingBox;Object(m["a"])(Re)?Se(Re,c["a"].RED).update(a):Object(m["a"])(Y)&&Object(m["a"])(Y.boundingSphere3D)&&Oe(Y.boundingSphere3D,c["a"].RED).update(a)}var He=Me.properties;s["a"].clone(De,He.initialColor),He.oceanNormalMap=_,He.lightingFadeDistance.x=e.lightingFadeOutDistance,He.lightingFadeDistance.y=e.lightingFadeInDistance,He.nightFadeDistance.x=e.nightFadeOutDistance,He.nightFadeDistance.y=e.nightFadeInDistance,He.zoomedOutOceanSpecularIntensity=e.zoomedOutOceanSpecularIntensity;var Be=!Object(m["a"])(i.vertexArray)&&Object(m["a"])(e.fillHighlightColor)&&e.fillHighlightColor.alpha>0;Be&&c["a"].clone(e.fillHighlightColor,He.fillHighlightColor),He.center3D=Y.center,o["a"].clone(X,He.rtc),s["a"].clone(Z,He.tileRectangle),He.southAndNorthLatitude.x=$,He.southAndNorthLatitude.y=ee,He.southMercatorYAndOneOverHeight.x=te,He.southMercatorYAndOneOverHeight.y=ae;var Ve=me,Fe=oe(t.rectangle,e.cartographicLimitRectangle);o["a"].fromElements(R,H,B,He.hsbShift);var Ge=t.rectangle,ke=1/Ge.width,Ue=1/Ge.height;Ve.x=(Fe.west-Ge.west)*ke,Ve.y=(Fe.south-Ge.south)*Ue,Ve.z=(Fe.east-Ge.west)*ke,Ve.w=(Fe.north-Ge.south)*Ue,s["a"].clone(Ve,He.localizedCartographicLimitRectangle);var ze=C&&T["a"].fog(t._distance,a.fog.density)>T["a"].EPSILON3;V=V&&(ze||A);var We=!1,Ye=!1,qe=!1,Ke=!1,Qe=!1,Xe=!1,Je=!1,Ze=!1,$e=!1;while(Ne<g&&_e<be){var et=ye[_e],tt=et.readyImagery;if(++_e,Object(m["a"])(tt)&&0!==tt.imageryLayer.alpha){var at=et.useWebMercatorT?tt.textureWebMercator:tt.texture,rt=tt.imageryLayer;Object(m["a"])(et.textureTranslationAndScale)||(et.textureTranslationAndScale=rt._calculateTextureTranslationAndScale(t,et)),He.dayTextures[Ne]=at,He.dayTextureTranslationAndScale[Ne]=et.textureTranslationAndScale,He.dayTextureTexCoordsRectangle[Ne]=et.textureCoordinateRectangle,He.dayTextureUseWebMercatorT[Ne]=et.useWebMercatorT,He.dayTextureAlpha[Ne]=rt.alpha,Xe=Xe||1!==He.dayTextureAlpha[Ne],He.dayTextureBrightness[Ne]=rt.brightness,We=We||He.dayTextureBrightness[Ne]!==k["a"].DEFAULT_BRIGHTNESS,He.dayTextureContrast[Ne]=rt.contrast,Ye=Ye||He.dayTextureContrast[Ne]!==k["a"].DEFAULT_CONTRAST,He.dayTextureHue[Ne]=rt.hue,qe=qe||He.dayTextureHue[Ne]!==k["a"].DEFAULT_HUE,He.dayTextureSaturation[Ne]=rt.saturation,Ke=Ke||He.dayTextureSaturation[Ne]!==k["a"].DEFAULT_SATURATION,He.dayTextureOneOverGamma[Ne]=1/rt.gamma,Qe=Qe||He.dayTextureOneOverGamma[Ne]!==1/k["a"].DEFAULT_GAMMA,He.dayTextureSplit[Ne]=rt.splitDirection,Je=Je||0!==He.dayTextureSplit[Ne];var it=He.dayTextureCutoutRectangles[Ne];if(Object(m["a"])(it)||(it=He.dayTextureCutoutRectangles[Ne]=new s["a"]),s["a"].clone(s["a"].ZERO,it),Object(m["a"])(rt.cutoutRectangle)){var nt=oe(Ge,rt.cutoutRectangle),ot=w["a"].simpleIntersection(nt,Ge,re);Ze=Object(m["a"])(ot)||Ze,it.x=(nt.west-Ge.west)*ke,it.y=(nt.south-Ge.south)*Ue,it.z=(nt.east-Ge.west)*ke,it.w=(nt.north-Ge.south)*Ue}var st=He.colorsToAlpha[Ne];Object(m["a"])(st)||(st=He.colorsToAlpha[Ne]=new s["a"]);var dt=Object(m["a"])(rt.colorToAlpha)&&rt.colorToAlphaThreshold>0;if($e=$e||dt,dt){var ct=rt.colorToAlpha;st.x=ct.red,st.y=ct.green,st.z=ct.blue,st.w=rt.colorToAlphaThreshold}else st.w=-1;if(Object(m["a"])(tt.credits))for(var ut=tt.credits,lt=0,ht=ut.length;lt<ht;++lt)n.addCredit(ut[lt]);++Ne}}He.dayTextures.length=Ne,He.waterMask=f,s["a"].clone(v,He.waterMaskTranslationAndScale),He.minMaxHeight.x=J.minimumHeight,He.minMaxHeight.y=J.maximumHeight,S["a"].clone(J.matrix,He.scaleAndBias);var mt=e._clippingPlanes,pt=Object(m["a"])(mt)&&mt.enabled&&t.isClipped;pt&&(He.clippingPlanesEdgeColor=c["a"].clone(mt.edgeColor,He.clippingPlanesEdgeColor),He.clippingPlanesEdgeWidth=mt.edgeWidth),Object(m["a"])(e.uniformMap)&&(Me=Object(l["a"])(Me,e.uniformMap)),ge.numberOfDayTextures=Ne,ge.applyBrightness=We,ge.applyContrast=Ye,ge.applyHue=qe,ge.applySaturation=Ke,ge.applyGamma=Qe,ge.applyAlpha=Xe,ge.applySplit=Je,ge.enableFog=ze,ge.enableClippingPlanes=pt,ge.clippingPlanes=mt,ge.hasImageryLayerCutout=Ze,ge.colorCorrect=V,ge.highlightFillTile=Be,ge.colorToAlpha=$e,je.shaderProgram=e._surfaceShaderSet.getShaderProgram(ge),je.castShadows=D,je.receiveShadows=L,je.renderState=Ie,je.primitiveType=E["a"].TRIANGLES,je.vertexArray=i.vertexArray||i.fill.vertexArray,je.uniformMap=Me,je.pass=N["a"].GLOBE,e._debug.wireframe&&(Ce(Le,e,t),Object(m["a"])(i.wireframeVertexArray)&&(je.vertexArray=i.wireframeVertexArray,je.primitiveType=E["a"].LINES));var gt=je.boundingVolume,ft=je.orientedBoundingBox;if(a.mode!==q["a"].SCENE3D){var vt=i.tileBoundingRegion;r["a"].fromRectangleWithHeights2D(t.rectangle,a.mapProjection,vt.minimumHeight,vt.maximumHeight,gt),o["a"].fromElements(gt.center.z,gt.center.x,gt.center.y,gt.center),a.mode===q["a"].MORPHING&&(gt=r["a"].union(Y.boundingSphere3D,gt,gt))}else je.boundingVolume=r["a"].clone(Y.boundingSphere3D,gt),je.orientedBoundingBox=O["a"].clone(i.orientedBoundingBox,ft);je.dirty=!0,a.commandList.push(je),Ie=Ee,De=Ae}while(_e<be)}t["a"]=$},"324a":function(e,t,a){"use strict";var r=a("7229"),i=a("8dfe"),n=a("535a"),o=a("2f63"),s=a("9f1d"),d=a("21d7"),c=a("5d5c"),u=a("eace"),l=a("d4ed"),h=a("283e"),m=a("a89b"),p=a("d3a0"),g=a("a58e"),f=a("64ac");function v(e){e=Object(n["a"])(e,{});var t=e.url,a=Object(n["a"])(e.path,"/default_map"),r=l["a"].createIfNeeded(t).getDerivedResource({url:"/"===a[0]?a.substring(1):a});r.appendForwardSlash(),this._resource=r,this._url=t,this._path=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new i["a"]('<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="'+v.logoUrl+'" title="Google Imagery"/></a>'),this.defaultGamma=1.9,this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=e.maximumLevel,this._errorEvent=new d["a"],this._ready=!1,this._readyPromise=g["a"].defer();var s,f=r.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),y=this;function _(t){var a,r,i;try{a=JSON.parse(t)}catch(d){a=JSON.parse(t.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}for(var n=0;n<a.layers.length;n++)if(a.layers[n].id===y._channel){r=a.layers[n];break}if(!Object(o["a"])(r))throw i="Could not find layer with channel (id) of "+y._channel+".",s=m["a"].handleError(s,y,y._errorEvent,i,void 0,void 0,void 0,T),new h["a"](i);if(!Object(o["a"])(r.version))throw i="Could not find a version in channel (id) "+y._channel+".",s=m["a"].handleError(s,y,y._errorEvent,i,void 0,void 0,void 0,T),new h["a"](i);if(y._version=r.version,Object(o["a"])(a.projection)&&"flat"===a.projection)y._tilingScheme=new c["a"]({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new u["a"](-Math.PI,-Math.PI,Math.PI,Math.PI),ellipsoid:e.ellipsoid});else{if(Object(o["a"])(a.projection)&&"mercator"!==a.projection)throw i="Unsupported projection "+a.projection+".",s=m["a"].handleError(s,y,y._errorEvent,i,void 0,void 0,void 0,T),new h["a"](i);y._tilingScheme=new p["a"]({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid})}y._ready=!0,y._readyPromise.resolve(!0),m["a"].handleSuccess(s)}function b(e){var t="An error occurred while accessing "+f.url+".";s=m["a"].handleError(s,y,y._errorEvent,t,void 0,void 0,void 0,T),y._readyPromise.reject(new h["a"](t))}function T(){var e=f.fetchText();Object(g["a"])(e,_,b)}T()}Object(s["a"])(v.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._resource.proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},version:{get:function(){return this._version}},requestType:{get:function(){return this._requestType}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),v.prototype.getTileCredits=function(e,t,a){},v.prototype.requestImage=function(e,t,a,r){var i=this._resource.getDerivedResource({url:"query",request:r,queryParameters:{request:this._requestType,channel:this._channel,version:this._version,x:e,y:t,z:a+1}});return f["a"].loadImage(this,i)},v.prototype.pickFeatures=function(e,t,a,r,i){},v._logoUrl=void 0,Object(s["a"])(v,{logoUrl:{get:function(){return Object(o["a"])(v._logoUrl)||(v._logoUrl=Object(r["a"])("Assets/Images/google_earth_credit.png")),v._logoUrl},set:function(e){v._logoUrl=e}}}),t["a"]=v},a0f5:function(e,t,a){"use strict";var r=a("dd06"),i=a("abab"),n=a("535a"),o=a("2f63"),s=a("9f1d"),d=a("7d62"),c=a("4f04"),u=a("d940"),l=a("c888"),h=a("69e5"),m=a("c2aa"),p=a("a894"),g=a("d289"),f=a("6dc0"),v=a("e90c"),y=a("5770"),_=a("9d1c"),b=a("1dca"),T=a("fb17"),S=a("e3b4"),O=a("a58e"),x=a("b7c8"),E=a("5a6c"),w=a("29ab"),C=a("63ae"),I=a("2e78"),A=a("894b"),P=a("a307"),D=a("3626"),L=a("6102"),j=a("25ef");function M(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this._hasPerInstanceColors=!0;var t=e.appearance;Object(o["a"])(t)||(t=new I["a"]),this.appearance=t,this.show=Object(n["a"])(e.show,!0),this.classificationType=Object(n["a"])(e.classificationType,E["a"].BOTH),this.debugShowBoundingVolume=Object(n["a"])(e.debugShowBoundingVolume,!1),this._debugShowShadowVolume=Object(n["a"])(e.debugShowShadowVolume,!1),this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:!1,interleave:Object(n["a"])(e.interleave,!1),releaseGeometryInstances:Object(n["a"])(e.releaseGeometryInstances,!0),allowPicking:Object(n["a"])(e.allowPicking,!0),asynchronous:Object(n["a"])(e.asynchronous,!0),compressVertices:!1,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0},this._zIndex=void 0,this._ready=!1,this._readyPromise=O["a"].defer(),this._primitive=void 0,this._sp=void 0,this._sp2D=void 0,this._spMorph=void 0,this._renderState=R(!1),this._renderState3DTiles=R(!0),this._renderStateMorph=f["a"].fromCache({cull:{enabled:!0,face:w["a"].FRONT},depthTest:{enabled:!0},blending:x["a"].ALPHA_BLEND,depthMask:!1})}function N(e,t,a){var i=t.context,n=e._primitive,s=n._attributeLocations,d=n._batchTable.getVertexShaderCallback()(S["a"]);d=A["a"]._appendShowToShader(n,d),d=A["a"]._appendDistanceDisplayConditionToShader(n,d),d=A["a"]._modifyShaderPosition(e,d,t.scene3DOnly);var c=n._batchTable.getVertexShaderCallback()(T["a"]);c=A["a"]._appendShowToShader(n,c),c=A["a"]._appendDistanceDisplayConditionToShader(n,c),c=A["a"]._modifyShaderPosition(e,c,t.scene3DOnly);var u=n._batchTable.getVertexShaderCallback()(_["a"]),l=["ENABLE_GL_POSITION_LOG_DEPTH_AT_HEIGHT","GLOBE_MINIMUM_ALTITUDE "+t.mapProjection.ellipsoid.minimumRadius.toFixed(1)],h="",m="";Object(o["a"])(a.material)?(m=Object(o["a"])(a.material)?a.material.shaderSource:"",-1!==m.search(/varying\s+float\s+v_polylineAngle;/g)&&l.push("ANGLE_VARYING"),-1!==m.search(/varying\s+float\s+v_width;/g)&&l.push("WIDTH_VARYING")):h="PER_INSTANCE_COLOR",l.push(h);var p=e.debugShowShadowVolume?["DEBUG_SHOW_VOLUME",h]:[h],g=new y["a"]({defines:l,sources:[d]}),f=new y["a"]({defines:p,sources:[m,u]});e._sp=v["a"].replaceCache({context:i,shaderProgram:n._sp,vertexShaderSource:g,fragmentShaderSource:f,attributeLocations:s});var O=i.shaderCache.getDerivedShaderProgram(e._sp,"2dColor");if(!Object(o["a"])(O)){var x=new y["a"]({defines:l.concat(["COLUMBUS_VIEW_2D"]),sources:[d]});O=i.shaderCache.createDerivedShaderProgram(e._sp,"2dColor",{context:i,shaderProgram:e._sp2D,vertexShaderSource:x,fragmentShaderSource:f,attributeLocations:s})}e._sp2D=O;var E=i.shaderCache.getDerivedShaderProgram(e._sp,"MorphColor");if(!Object(o["a"])(E)){var w=new y["a"]({defines:l.concat(["MAX_TERRAIN_HEIGHT "+r["a"]._defaultMaxTerrainHeight.toFixed(1)]),sources:[c]});u=n._batchTable.getVertexShaderCallback()(b["a"]);var C=new y["a"]({defines:p,sources:[m,u]});E=i.shaderCache.createDerivedShaderProgram(e._sp,"MorphColor",{context:i,shaderProgram:e._spMorph,vertexShaderSource:w,fragmentShaderSource:C,attributeLocations:s})}e._spMorph=E}function R(e){return f["a"].fromCache({cull:{enabled:!0},blending:x["a"].ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:L["a"].EQUAL,frontOperation:{fail:j["a"].KEEP,zFail:j["a"].KEEP,zPass:j["a"].KEEP},backFunction:L["a"].EQUAL,backOperation:{fail:j["a"].KEEP,zFail:j["a"].KEEP,zPass:j["a"].KEEP},reference:D["a"].CESIUM_3D_TILE_MASK,mask:D["a"].CESIUM_3D_TILE_MASK}})}function H(e,t,a,r,i,n){var s=e._primitive,d=s._va.length;i.length=d,n.length=d;for(var c=t instanceof C["a"],u=c?{}:a._uniforms,l=s._batchTable.getUniformMapCallback()(u),h=0;h<d;h++){var m=s._va[h],f=i[h];Object(o["a"])(f)||(f=i[h]=new p["a"]({owner:e,primitiveType:s._primitiveType})),f.vertexArray=m,f.renderState=e._renderState,f.shaderProgram=e._sp,f.uniformMap=l,f.pass=g["a"].TERRAIN_CLASSIFICATION,f.pickId="czm_batchTable_pickColor(v_endPlaneNormalEcAndBatchId.w)";var v=p["a"].shallowClone(f,f.derivedCommands.tileset);v.renderState=e._renderState3DTiles,v.pass=g["a"].CESIUM_3D_TILE_CLASSIFICATION,f.derivedCommands.tileset=v;var y=p["a"].shallowClone(f,f.derivedCommands.color2D);y.shaderProgram=e._sp2D,f.derivedCommands.color2D=y;var _=p["a"].shallowClone(v,v.derivedCommands.color2D);_.shaderProgram=e._sp2D,v.derivedCommands.color2D=_;var b=p["a"].shallowClone(f,f.derivedCommands.colorMorph);b.renderState=e._renderStateMorph,b.shaderProgram=e._spMorph,b.pickId="czm_batchTable_pickColor(v_batchId)",f.derivedCommands.colorMorph=b}}function B(e,t,a,r,i,n,o){a.mode===P["a"].MORPHING?t=t.derivedCommands.colorMorph:a.mode!==P["a"].SCENE3D&&(t=t.derivedCommands.color2D),t.modelMatrix=r,t.boundingVolume=n,t.cull=i,t.debugShowBoundingVolume=o,a.commandList.push(t)}function V(e,t,a,r,i,n,s){var d,c=e._primitive;A["a"]._updateBoundingVolumes(c,t,i),t.mode===P["a"].SCENE3D?d=c._boundingSphereWC:t.mode===P["a"].COLUMBUS_VIEW?d=c._boundingSphereCV:t.mode===P["a"].SCENE2D&&Object(o["a"])(c._boundingSphere2D)?d=c._boundingSphere2D:Object(o["a"])(c._boundingSphereMorph)&&(d=c._boundingSphereMorph);var u,l=t.mode===P["a"].MORPHING,h=e.classificationType,m=h!==E["a"].CESIUM_3D_TILE,p=h!==E["a"].TERRAIN&&!l,g=t.passes;if(g.render||g.pick&&c.allowPicking)for(var f=a.length,v=0;v<f;++v){var y=d[v];m&&(u=a[v],B(e,u,t,i,n,y,s)),p&&(u=a[v].derivedCommands.tileset,B(e,u,t,i,n,y,s))}}Object(s["a"])(M.prototype,{interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},debugShowShadowVolume:{get:function(){return this._debugShowShadowVolume}}}),M.initializeTerrainHeights=function(){return r["a"].initialize()},M.prototype.update=function(e){if(Object(o["a"])(this._primitive)||Object(o["a"])(this.geometryInstances))if(r["a"].initialized){var t,a=this,n=this._primitiveOptions;if(!Object(o["a"])(this._primitive)){var s,d=Object(m["a"])(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],p=d.length,g=new Array(p);for(t=0;t<p;++t)if(s=d[t].attributes,!Object(o["a"])(s)||!Object(o["a"])(s.color)){this._hasPerInstanceColors=!1;break}for(t=0;t<p;++t){var f=d[t];s={};var v=f.attributes;for(var y in v)v.hasOwnProperty(y)&&(s[y]=v[y]);Object(o["a"])(s.width)||(s.width=new l["a"]({componentDatatype:i["a"].UNSIGNED_BYTE,componentsPerAttribute:1,value:[f.geometry.width]})),f.geometry._scene3DOnly=e.scene3DOnly,h["a"].setProjectionAndEllipsoid(f.geometry,e.mapProjection),g[t]=new u["a"]({geometry:f.geometry,attributes:s,id:f.id,pickPrimitive:a})}n.geometryInstances=g,n.appearance=this.appearance,n._createShaderProgramFunction=function(e,t,r){N(a,t,r)},n._createCommandsFunction=function(e,t,r,i,n,o,s){H(a,t,r,i,o,s)},n._updateAndQueueCommandsFunction=function(e,t,r,i,n,o,s,d){V(a,t,r,i,n,o,s)},this._primitive=new A["a"](n),this._primitive.readyPromise.then((function(e){a._ready=!0,a.releaseGeometryInstances&&(a.geometryInstances=void 0);var t=e._error;Object(o["a"])(t)?a._readyPromise.reject(t):a._readyPromise.resolve(a)}))}if(this.appearance instanceof C["a"]&&!this._hasPerInstanceColors)throw new c["a"]("All GeometryInstances must have color attributes to use PolylineColorAppearance with GroundPolylinePrimitive.");this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e)}else M.initializeTerrainHeights()},M.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)},M.isSupported=function(e){return e.frameState.context.depthTexture},M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._sp2D=void 0,this._spMorph=void 0,Object(d["a"])(this)},t["a"]=M},acad:function(e,t,a){"use strict";var r=a("dd06"),i=a("cef5"),n=a("be18"),o=a("bef8"),s=a("535a"),d=a("2f63"),c=a("9f1d"),u=a("7d62"),l=a("d940"),h=a("c2aa"),m=a("93da"),p=a("78e5"),g=a("eace"),f=a("a58e"),v=a("e8b2"),y=a("5a6c"),_=a("3a8e"),b=a("a307"),T=a("2a1b"),S={u_globeMinimumAltitude:function(){return 55e3}};function O(e){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT);var t=e.appearance,a=e.geometryInstances;if(!Object(d["a"])(t)&&Object(d["a"])(a))for(var i=Object(h["a"])(a)?a:[a],n=i.length,o=0;o<n;o++){var c=i[o].attributes;if(Object(d["a"])(c)&&Object(d["a"])(c.color)){t=new _["a"]({flat:!0});break}}this.appearance=t,this.geometryInstances=e.geometryInstances,this.show=Object(s["a"])(e.show,!0),this.classificationType=Object(s["a"])(e.classificationType,y["a"].BOTH),this.debugShowBoundingVolume=Object(s["a"])(e.debugShowBoundingVolume,!1),this.debugShowShadowVolume=Object(s["a"])(e.debugShowShadowVolume,!1),this._boundingVolumes=[],this._boundingVolumes2D=[],this._ready=!1,this._readyPromise=f["a"].defer(),this._primitive=void 0,this._maxHeight=void 0,this._minHeight=void 0,this._maxTerrainHeight=r["a"]._defaultMaxTerrainHeight,this._minTerrainHeight=r["a"]._defaultMinTerrainHeight,this._boundingSpheresKeys=[],this._boundingSpheres=[],this._useFragmentCulling=!1,this._zIndex=void 0;var u=this;this._classificationPrimitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:Object(s["a"])(e.vertexCacheOptimize,!1),interleave:Object(s["a"])(e.interleave,!1),releaseGeometryInstances:Object(s["a"])(e.releaseGeometryInstances,!0),allowPicking:Object(s["a"])(e.allowPicking,!0),asynchronous:Object(s["a"])(e.asynchronous,!0),compressVertices:Object(s["a"])(e.compressVertices,!0),_createBoundingVolumeFunction:void 0,_updateAndQueueCommandsFunction:void 0,_pickPrimitive:u,_extruded:!0,_uniformMap:S}}function x(e){return function(t,a){var r=a.maximumRadius,i=r/Math.cos(.5*t)-r;return e._maxHeight+i}}function E(e){return function(t,a){return e._minHeight}}Object(c["a"])(O.prototype,{vertexCacheOptimize:{get:function(){return this._classificationPrimitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._classificationPrimitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._classificationPrimitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._classificationPrimitiveOptions.allowPicking}},asynchronous:{get:function(){return this._classificationPrimitiveOptions.asynchronous}},compressVertices:{get:function(){return this._classificationPrimitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}}}),O.isSupported=v["a"].isSupported;var w=new n["a"],C=new n["a"],I=new n["a"],A=new o["a"],P=new g["a"];function D(e,t){var a=e.mapProjection.ellipsoid;if(!Object(d["a"])(t.attributes)||!Object(d["a"])(t.attributes.position3DHigh))return Object(d["a"])(t.rectangle)?t.rectangle:void 0;for(var r=t.attributes.position3DHigh.values,i=t.attributes.position3DLow.values,o=r.length,s=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=0;h<o;h+=3){var m=n["a"].unpack(r,h,w),p=n["a"].unpack(i,h,C),g=n["a"].add(m,p,I),f=a.cartesianToCartographic(g,A),v=f.latitude,y=f.longitude;s=Math.min(s,v),c=Math.min(c,y),u=Math.max(u,v),l=Math.max(l,y)}var _=P;return _.north=u,_.south=s,_.east=l,_.west=c,_}function L(e,t,a){var i=r["a"].getMinimumMaximumHeights(t,a);e._minTerrainHeight=i.minimumTerrainHeight,e._maxTerrainHeight=i.maximumTerrainHeight}function j(e,t,a){var r=t.mapProjection.ellipsoid,o=D(t,a);if(o.width<m["a"].PI){var s=p["a"].fromRectangle(o,e._maxHeight,e._minHeight,r);e._boundingVolumes.push(s)}else{var d=a.attributes.position3DHigh.values,c=a.attributes.position3DLow.values;e._boundingVolumes.push(i["a"].fromEncodedCartesianVertices(d,c))}if(!t.scene3DOnly){var u=t.mapProjection,l=i["a"].fromRectangleWithHeights2D(o,u,e._maxHeight,e._minHeight);n["a"].fromElements(l.center.z,l.center.x,l.center.y,l.center),e._boundingVolumes2D.push(l)}}function M(e,t){return Math.floor(e%t/3)}function N(e,t,a,r,i,n,o){var s=e._primitive;a.mode!==b["a"].SCENE3D&&t.shaderProgram===s._spColor&&s._needs2DShader&&(t=t.derivedCommands.appearance2D),t.owner=e,t.modelMatrix=r,t.boundingVolume=n,t.cull=i,t.debugShowBoundingVolume=o,a.commandList.push(t)}function R(e,t,a,r,i,n){var o=e._primitive;a.mode!==b["a"].SCENE3D&&t.shaderProgram===o._spPick&&o._needs2DShader&&(t=t.derivedCommands.pick2D),t.owner=e,t.modelMatrix=r,t.boundingVolume=n,t.cull=i,a.commandList.push(t)}function H(e,t,a,r,i,n,o,s){var d;d=t.mode===b["a"].SCENE3D?e._boundingVolumes:e._boundingVolumes2D;var c,u,l,h=e.classificationType,m=h!==y["a"].CESIUM_3D_TILE,p=h!==y["a"].TERRAIN,g=t.passes,f=e._primitive;if(g.render){var v=a.length;for(c=0;c<v;++c)u=d[M(c,v)],m&&(l=a[c],N(e,l,t,i,n,u,o)),p&&(l=a[c].derivedCommands.tileset,N(e,l,t,i,n,u,o));if(t.invertClassification){var _=f._commandsIgnoreShow,T=_.length;for(c=0;c<T;++c)u=d[Math.floor(c/2)],l=_[c],N(e,l,t,i,n,u,o)}}if(g.pick){var S,O=r.length;for(e._useFragmentCulling||(S=f._primitive._pickOffsets),c=0;c<O;++c){if(u=d[M(c,O)],!e._useFragmentCulling){var x=S[M(c,O)];u=d[x.index]}m&&(l=r[c],R(e,l,t,i,n,u)),p&&(l=r[c].derivedCommands.tileset,R(e,l,t,i,n,u))}}}O.initializeTerrainHeights=function(){return r["a"].initialize()},O.prototype.update=function(e){if(Object(d["a"])(this._primitive)||Object(d["a"])(this.geometryInstances))if(r["a"].initialized){var t=this,a=this._classificationPrimitiveOptions;if(!Object(d["a"])(this._primitive)){var i,n,o,s,c,u=e.mapProjection.ellipsoid,m=Object(h["a"])(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],p=m.length,f=new Array(p);for(s=0;s<p;++s){i=m[s],n=i.geometry;var y=D(e,n);Object(d["a"])(c)?Object(d["a"])(y)&&g["a"].union(c,y,c):c=g["a"].clone(y);var _=i.id;if(Object(d["a"])(_)&&Object(d["a"])(y)){var b=r["a"].getBoundingSphere(y,u);this._boundingSpheresKeys.push(_),this._boundingSpheres.push(b)}o=n.constructor,!Object(d["a"])(o)||Object(d["a"])(o.createShadowVolume)}L(this,c,u);var S=e.terrainExaggeration;this._minHeight=this._minTerrainHeight*S,this._maxHeight=this._maxTerrainHeight*S;var w=O._supportsMaterials(e.context);if(this._useFragmentCulling=w,w){var C,I=!0;for(s=0;s<p;++s)if(i=m[s],n=i.geometry,c=D(e,n),T["a"].shouldUseSphericalCoordinates(c)){I=!1;break}for(s=0;s<p;++s){i=m[s],n=i.geometry,o=n.constructor;var A=D(e,n),P=n.textureCoordinateRotationPoints,M=e.context.floatTextureSixPlaces;C=I?T["a"].getPlanarTextureCoordinateAttributes(A,P,u,e.mapProjection,M,this._maxHeight):T["a"].getSphericalExtentGeometryInstanceAttributes(A,P,u,e.mapProjection,M);var N=i.attributes;for(var R in N)N.hasOwnProperty(R)&&(C[R]=N[R]);f[s]=new l["a"]({geometry:o.createShadowVolume(n,E(this),x(this)),attributes:C,id:i.id})}}else for(s=0;s<p;++s)i=m[s],n=i.geometry,o=n.constructor,f[s]=new l["a"]({geometry:o.createShadowVolume(n,E(this),x(this)),attributes:i.attributes,id:i.id});a.geometryInstances=f,a.appearance=this.appearance,a._createBoundingVolumeFunction=function(e,a){j(t,e,a)},a._updateAndQueueCommandsFunction=function(e,a,r,i,n,o,s,d){H(t,a,r,i,n,o,s,d)},this._primitive=new v["a"](a),this._primitive.readyPromise.then((function(e){t._ready=!0,t.releaseGeometryInstances&&(t.geometryInstances=void 0);var a=e._error;Object(d["a"])(a)?t._readyPromise.reject(a):t._readyPromise.resolve(t)}))}this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowShadowVolume=this.debugShowShadowVolume,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e)}else O.initializeTerrainHeights()},O.prototype.getBoundingSphere=function(e){var t=this._boundingSpheresKeys.indexOf(e);if(-1!==t)return this._boundingSpheres[t]},O.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(u["a"])(this)},O._supportsMaterials=function(e){return e.depthTexture},O.supportsMaterials=function(e){return O._supportsMaterials(e.frameState.context)},t["a"]=O}}]);