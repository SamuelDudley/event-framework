(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~78c80789"],{"0a40":function(e,t,a){"use strict";var r=a("2f63"),i=a("7d62"),n=a("fe57"),o=a("e90c"),s=a("0249"),d=a("a307");function c(e,t,a,r,i){this.numberOfDayTextures=e,this.flags=t,this.material=a,this.shaderProgram=r,this.clippingShaderState=i}function u(){this.baseVertexShaderSource=void 0,this.baseFragmentShaderSource=void 0,this._shadersByTexturesFlags=[],this.material=void 0}function l(e){var t,a="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPosition3DMode(position, height, textureCoordinates); }",r="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionColumbusViewMode(position, height, textureCoordinates); }",i="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionMorphingMode(position, height, textureCoordinates); }";switch(e){case d["a"].SCENE3D:t=a;break;case d["a"].SCENE2D:case d["a"].COLUMBUS_VIEW:t=r;break;case d["a"].MORPHING:t=i;break}return t}function h(e){var t="float get2DYPositionFraction(vec2 textureCoordinates) { return get2DGeographicYPositionFraction(textureCoordinates); }",a="float get2DYPositionFraction(vec2 textureCoordinates) { return get2DMercatorYPositionFraction(textureCoordinates); }";return e?a:t}u.prototype.getShaderProgram=function(e){var t=e.frameState,a=e.surfaceTile,i=e.numberOfDayTextures,d=e.applyBrightness,u=e.applyContrast,m=e.applyHue,p=e.applySaturation,g=e.applyGamma,f=e.applyAlpha,v=e.applySplit,y=e.showReflectiveOcean,_=e.showOceanWaves,b=e.enableLighting,S=e.dynamicAtmosphereLighting,T=e.dynamicAtmosphereLightingFromSun,O=e.showGroundAtmosphere,x=e.perFragmentGroundAtmosphere,E=e.hasVertexNormals,w=e.useWebMercatorProjection,C=e.enableFog,A=e.enableClippingPlanes,I=e.clippingPlanes,P=e.clippedByBoundaries,D=e.hasImageryLayerCutout,L=e.colorCorrect,j=e.highlightFillTile,M=e.colorToAlpha,R=0,N="",H=a.renderedMesh,B=H.encoding,F=B.quantization;F===n["a"].BITS12&&(R=1,N="QUANTIZATION_BITS12");var V=0,G="";Object(r["a"])(a.vertexArray)&&Object(r["a"])(a.terrainData)&&!a.terrainData._createdByUpsampling||(V=1,G="DISABLE_GL_POSITION_LOG_DEPTH");var k=0,U="";P&&(k=1,U="TILE_LIMIT_RECTANGLE");var z=0,W="";D&&(z=1,W="APPLY_IMAGERY_CUTOUT");var Y=t.mode,q=Y|d<<2|u<<3|m<<4|p<<5|g<<6|f<<7|y<<8|_<<9|b<<10|S<<11|T<<12|O<<13|x<<14|E<<15|w<<16|C<<17|R<<18|v<<19|A<<20|V<<21|k<<22|z<<23|L<<24|j<<25|M<<26,K=0;Object(r["a"])(I)&&I.length>0&&(K=A?I.clippingPlanesState:0);var X=a.surfaceShader;if(Object(r["a"])(X)&&X.numberOfDayTextures===i&&X.flags===q&&X.material===this.material&&X.clippingShaderState===K)return X.shaderProgram;var Q=this._shadersByTexturesFlags[i];if(Object(r["a"])(Q)||(Q=this._shadersByTexturesFlags[i]=[]),X=Q[q],!Object(r["a"])(X)||X.material!==this.material||X.clippingShaderState!==K){var J=this.baseVertexShaderSource.clone(),Z=this.baseFragmentShaderSource.clone();0!==K&&Z.sources.unshift(Object(s["a"])(I,t.context)),J.defines.push(N,G),Z.defines.push("TEXTURE_UNITS "+i,U,W),d&&Z.defines.push("APPLY_BRIGHTNESS"),u&&Z.defines.push("APPLY_CONTRAST"),m&&Z.defines.push("APPLY_HUE"),p&&Z.defines.push("APPLY_SATURATION"),g&&Z.defines.push("APPLY_GAMMA"),f&&Z.defines.push("APPLY_ALPHA"),y&&(Z.defines.push("SHOW_REFLECTIVE_OCEAN"),J.defines.push("SHOW_REFLECTIVE_OCEAN")),_&&Z.defines.push("SHOW_OCEAN_WAVES"),M&&Z.defines.push("APPLY_COLOR_TO_ALPHA"),b&&(E?(J.defines.push("ENABLE_VERTEX_LIGHTING"),Z.defines.push("ENABLE_VERTEX_LIGHTING")):(J.defines.push("ENABLE_DAYNIGHT_SHADING"),Z.defines.push("ENABLE_DAYNIGHT_SHADING"))),S&&(Z.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),T&&Z.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN")),O&&(J.defines.push("GROUND_ATMOSPHERE"),Z.defines.push("GROUND_ATMOSPHERE"),x&&Z.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE")),J.defines.push("INCLUDE_WEB_MERCATOR_Y"),Z.defines.push("INCLUDE_WEB_MERCATOR_Y"),C&&(J.defines.push("FOG"),Z.defines.push("FOG")),v&&Z.defines.push("APPLY_SPLIT"),A&&Z.defines.push("ENABLE_CLIPPING_PLANES"),L&&Z.defines.push("COLOR_CORRECT"),j&&Z.defines.push("HIGHLIGHT_FILL_TILE");var $="    vec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates)\n    {\n        vec4 color = initialColor;\n";D&&($+="        vec4 cutoutAndColorResult;\n        bool texelUnclipped;\n");for(var ee=0;ee<i;++ee)$+=D?"        cutoutAndColorResult = u_dayTextureCutoutRectangles["+ee+"];\n        texelUnclipped = v_textureCoordinates.x < cutoutAndColorResult.x || cutoutAndColorResult.z < v_textureCoordinates.x || v_textureCoordinates.y < cutoutAndColorResult.y || cutoutAndColorResult.w < v_textureCoordinates.y;\n        cutoutAndColorResult = sampleAndBlend(\n":"        color = sampleAndBlend(\n",$+="            color,\n            u_dayTextures["+ee+"],\n            u_dayTextureUseWebMercatorT["+ee+"] ? textureCoordinates.xz : textureCoordinates.xy,\n            u_dayTextureTexCoordsRectangle["+ee+"],\n            u_dayTextureTranslationAndScale["+ee+"],\n            "+(f?"u_dayTextureAlpha["+ee+"]":"1.0")+",\n            "+(d?"u_dayTextureBrightness["+ee+"]":"0.0")+",\n            "+(u?"u_dayTextureContrast["+ee+"]":"0.0")+",\n            "+(m?"u_dayTextureHue["+ee+"]":"0.0")+",\n            "+(p?"u_dayTextureSaturation["+ee+"]":"0.0")+",\n            "+(g?"u_dayTextureOneOverGamma["+ee+"]":"0.0")+",\n            "+(v?"u_dayTextureSplit["+ee+"]":"0.0")+",\n            "+(M?"u_colorsToAlpha["+ee+"]":"vec4(0.0)")+"\n        );\n",D&&($+="        color = czm_branchFreeTernary(texelUnclipped, cutoutAndColorResult, color);\n");$+="        return color;\n    }",Z.sources.push($),J.sources.push(l(Y)),J.sources.push(h(w));var te=o["a"].fromCache({context:t.context,vertexShaderSource:J,fragmentShaderSource:Z,attributeLocations:B.getAttributeLocations()});X=Q[q]=new c(i,q,this.material,te,K)}return a.surfaceShader=X,X.shaderProgram},u.prototype.destroy=function(){var e,t,a=this._shadersByTexturesFlags;for(var n in a)if(a.hasOwnProperty(n)){var o=a[n];if(!Object(r["a"])(o))continue;for(e in o)o.hasOwnProperty(e)&&(t=o[e],Object(r["a"])(t)&&t.shaderProgram.destroy())}return Object(i["a"])(this)},t["a"]=u},2856:function(e,t,a){"use strict";var r=a("cef5"),i=a("be18"),n=a("a561"),o=a("2f63"),s=a("9f1d"),d=a("0123"),c=a("5410"),u=a("78e5"),l=a("e42d"),h=a("2ac3"),m=a("de66"),p=a("8a39"),g=a("b82e"),f=a("a89b"),v=a("f20a"),y=a("8b68"),_=a("6ef5"),b=a("6c84"),S=a("a913"),T=a("3022"),O=a("03f1"),x=a("23b6"),E=a("7c5e"),w=a("a58e"),C=a("dddf"),A=a("f1b3"),I=a("a307"),P=a("4c22");function D(){this.imagery=[],this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new n["a"](0,0,1,1),this.terrainData=void 0,this.vertexArray=void 0,this.orientedBoundingBox=void 0,this.boundingVolumeSourceTile=void 0,this.tileBoundingRegion=void 0,this.occludeePointInScaledSpace=new i["a"],this.terrainState=P["a"].UNLOADED,this.mesh=void 0,this.fill=void 0,this.pickBoundingSphere=new r["a"],this.surfaceShader=void 0,this.isClipped=!0,this.clippedByBoundaries=!1}function L(e,t,a,r,n,s){if(e.decodePosition(r,n,s),Object(o["a"])(t)&&t!==I["a"].SCENE3D){var d=a.ellipsoid,c=d.cartesianToCartographic(s);a.project(c,s),i["a"].fromElements(s.z,s.x,s.y,s)}return s}Object(s["a"])(D.prototype,{eligibleForUnloading:{get:function(){for(var e=this.terrainState,t=e===P["a"].RECEIVING||e===P["a"].TRANSFORMING,a=!t,r=this.imagery,i=0,n=r.length;a&&i<n;++i){var s=r[i];a=!Object(o["a"])(s.loadingImagery)||s.loadingImagery.state!==C["a"].TRANSITIONING}return a}},renderedMesh:{get:function(){return Object(o["a"])(this.vertexArray)?this.mesh:Object(o["a"])(this.fill)?this.fill.mesh:void 0}}});var j=new i["a"],M=new i["a"],R=new i["a"];function N(e,t,a){var r=t.getTileDataAvailable(e.x,e.y,e.level);if(!Object(o["a"])(r)&&Object(o["a"])(e.parent)){var i=e.parent,n=i.data;Object(o["a"])(n)&&Object(o["a"])(n.terrainData)&&(r=n.terrainData.isChildAvailable(i.x,i.y,e.x,e.y))}!1===r&&(e.data.terrainState=P["a"].FAILED);for(var s=0,d=a.length;s<d;++s){var c=a.get(s);c.show&&c._createTileImagerySkeletons(e,t)}}function H(e,t,a,r,i){var n=e.data,s=e.parent;if(n.terrainState===P["a"].FAILED&&void 0!==s){var d=void 0!==s.data&&void 0!==s.data.terrainData&&!1!==s.data.terrainData.canUpsample;d||D.processStateMachine(s,t,a,r,!0)}if(n.terrainState===P["a"].FAILED&&B(n,e,t,a,e.x,e.y,e.level),n.terrainState===P["a"].UNLOADED&&F(n,a,e.x,e.y,e.level),n.terrainState===P["a"].RECEIVED&&V(n,t,a,e.x,e.y,e.level),n.terrainState===P["a"].TRANSFORMED&&G(n,t.context,a,e.x,e.y,e.level,i),n.terrainState>=P["a"].RECEIVED&&void 0===n.waterMaskTexture&&a.hasWaterMask){var c=n.terrainData;if(void 0!==c.waterMask)U(t.context,n);else{var u=n._findAncestorTileWithTerrainData(e);Object(o["a"])(u)&&Object(o["a"])(u.data.waterMaskTexture)&&(n.waterMaskTexture=u.data.waterMaskTexture,++n.waterMaskTexture.referenceCount,n._computeWaterMaskTranslationAndScale(e,u,n.waterMaskTranslationAndScale))}}}function B(e,t,a,r,i,n,s){var d=t.parent;if(d){var c=d.data.terrainData,u=d.x,l=d.y,h=d.level;if(Object(o["a"])(c)){var m=c.upsample(r.tilingScheme,u,l,h,i,n,s);Object(o["a"])(m)&&(e.terrainState=P["a"].RECEIVING,Object(w["a"])(m,(function(t){e.terrainData=t,e.terrainState=P["a"].RECEIVED}),(function(){e.terrainState=P["a"].FAILED})))}}else t.state=A["a"].FAILED}function F(e,t,a,r,i){function n(t){e.terrainData=t,e.terrainState=P["a"].RECEIVED,e.request=void 0}function s(){if(e.request.state===p["a"].CANCELLED)return e.terrainData=void 0,e.terrainState=P["a"].UNLOADED,void(e.request=void 0);e.terrainState=P["a"].FAILED,e.request=void 0;var n="Failed to obtain terrain tile X: "+a+" Y: "+r+" Level: "+i+".";t._requestError=f["a"].handleError(t._requestError,t,t.errorEvent,n,a,r,i,d)}function d(){var d=new m["a"]({throttle:!1,throttleByServer:!0,type:g["a"].TERRAIN});e.request=d;var c=t.requestTileGeometry(a,r,i,d);Object(o["a"])(c)?(e.terrainState=P["a"].RECEIVING,Object(w["a"])(c,n,s)):(e.terrainState=P["a"].UNLOADED,e.request=void 0)}d()}function V(e,t,a,r,n,s){var d=a.tilingScheme,c=e.terrainData,l=c.createMesh(d,r,n,s,t.terrainExaggeration);Object(o["a"])(l)&&(e.terrainState=P["a"].TRANSFORMING,Object(w["a"])(l,(function(t){e.mesh=t,e.orientedBoundingBox=u["a"].clone(t.orientedBoundingBox,e.orientedBoundingBox),e.occludeePointInScaledSpace=i["a"].clone(t.occludeePointInScaledSpace,e.occludeePointInScaledSpace),e.terrainState=P["a"].TRANSFORMED}),(function(){e.terrainState=P["a"].FAILED})))}function G(e,t,a,r,i,n,o){e.vertexArray=D._createVertexArrayForMesh(t,e.mesh),e.terrainState=P["a"].READY,e.fill=e.fill&&e.fill.destroy(o)}function k(e){var t=e.cache.tile_waterMaskData;if(!Object(o["a"])(t)){var a=S["a"].create({context:e,pixelFormat:l["a"].LUMINANCE,pixelDatatype:_["a"].UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});a.referenceCount=1;var r=new b["a"]({wrapS:x["a"].CLAMP_TO_EDGE,wrapT:x["a"].CLAMP_TO_EDGE,minificationFilter:O["a"].LINEAR,magnificationFilter:T["a"].LINEAR});t={allWaterTexture:a,sampler:r,destroy:function(){this.allWaterTexture.destroy()}},e.cache.tile_waterMaskData=t}return t}function U(e,t){var a,r=t.terrainData.waterMask,i=k(e),o=r.length;if(1===o){if(0===r[0])return;a=i.allWaterTexture}else{var s=Math.sqrt(o);a=S["a"].create({context:e,pixelFormat:l["a"].LUMINANCE,pixelDatatype:_["a"].UNSIGNED_BYTE,source:{width:s,height:s,arrayBufferView:r},sampler:i.sampler,flipY:!1}),a.referenceCount=0}++a.referenceCount,t.waterMaskTexture=a,n["a"].fromElements(0,0,1,1,t.waterMaskTranslationAndScale)}D.prototype.pick=function(e,t,a,r,i){var n=this.renderedMesh;if(Object(o["a"])(n)){for(var s=n.vertices,d=n.indices,u=n.encoding,l=d.length,m=Number.MAX_VALUE,p=0;p<l;p+=3){var g=d[p],f=d[p+1],v=d[p+2],y=L(u,t,a,s,g,j),_=L(u,t,a,s,f,M),b=L(u,t,a,s,v,R),S=c["a"].rayTriangleParametric(e,y,_,b,r);Object(o["a"])(S)&&S<m&&S>=0&&(m=S)}return m!==Number.MAX_VALUE?h["a"].getPoint(e,m,i):void 0}},D.prototype.freeResources=function(){Object(o["a"])(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,this.terrainState=P["a"].UNLOADED,this.mesh=void 0,this.fill=this.fill&&this.fill.destroy();for(var e=this.imagery,t=0,a=e.length;t<a;++t)e[t].freeResources();this.imagery.length=0,this.freeVertexArray()},D.prototype.freeVertexArray=function(){D._freeVertexArray(this.vertexArray),this.vertexArray=void 0,D._freeVertexArray(this.wireframeVertexArray),this.wireframeVertexArray=void 0},D.initialize=function(e,t,a){var r=e.data;Object(o["a"])(r)||(r=e.data=new D),e.state===A["a"].START&&(N(e,t,a),e.state=A["a"].LOADING)},D.processStateMachine=function(e,t,a,r,i,n){D.initialize(e,a,r);var s=e.data;if(e.state===A["a"].LOADING&&H(e,t,a,r,i),!n){var d=e.renderable;e.renderable=Object(o["a"])(s.vertexArray);var c=s.terrainState===P["a"].READY;e.upsampledFromParent=Object(o["a"])(s.terrainData)&&s.terrainData.wasCreatedByUpsampling();var u=s.processImagery(e,a,t);if(c&&u){var l=e._loadedCallbacks,h={};for(var m in l)l.hasOwnProperty(m)&&(l[m](e)||(h[m]=l[m]));e._loadedCallbacks=h,e.state=A["a"].DONE}d&&(e.renderable=!0)}},D.prototype.processImagery=function(e,t,a,r){var i,n,s=e.data,d=e.upsampledFromParent,c=!1,u=!0,l=s.imagery;for(i=0,n=l.length;i<n;++i){var h=l[i];if(Object(o["a"])(h.loadingImagery)){if(h.loadingImagery.state===C["a"].PLACEHOLDER){var m=h.loadingImagery.imageryLayer;if(m.imageryProvider.ready){h.freeResources(),l.splice(i,1),m._createTileImagerySkeletons(e,t,i),--i,n=l.length;continue}d=!1}var p=h.processStateMachine(e,a,r);u=u&&p,c=c||p||Object(o["a"])(h.readyImagery),d=d&&Object(o["a"])(h.loadingImagery)&&(h.loadingImagery.state===C["a"].FAILED||h.loadingImagery.state===C["a"].INVALID)}else d=!1}return e.upsampledFromParent=d,e.renderable=e.renderable&&(c||u),u},D._createVertexArrayForMesh=function(e,t){var a=t.vertices,r=v["a"].createVertexBuffer({context:e,typedArray:a,usage:y["a"].STATIC_DRAW}),i=t.encoding.getAttributes(r),n=t.indices.indexBuffers||{},s=n[e.id];if(!Object(o["a"])(s)||s.isDestroyed()){var c=t.indices;s=v["a"].createIndexBuffer({context:e,typedArray:c,usage:y["a"].STATIC_DRAW,indexDatatype:d["a"].fromSizeInBytes(c.BYTES_PER_ELEMENT)}),s.vertexArrayDestroyable=!1,s.referenceCount=1,n[e.id]=s,t.indices.indexBuffers=n}else++s.referenceCount;return new E["a"]({context:e,attributes:i,indexBuffer:s})},D._freeVertexArray=function(e){if(Object(o["a"])(e)){var t=e.indexBuffer;e.destroy(),Object(o["a"])(t)&&!t.isDestroyed()&&Object(o["a"])(t.referenceCount)&&(--t.referenceCount,0===t.referenceCount&&t.destroy())}},D.prototype._findAncestorTileWithTerrainData=function(e){var t=e.parent;while(Object(o["a"])(t)&&(!Object(o["a"])(t.data)||!Object(o["a"])(t.data.terrainData)||t.data.terrainData.wasCreatedByUpsampling()))t=t.parent;return t},D.prototype._computeWaterMaskTranslationAndScale=function(e,t,a){var r=t.rectangle,i=e.rectangle,n=i.width,o=i.height,s=n/r.width,d=o/r.height;return a.x=s*(i.west-r.west)/n,a.y=d*(i.south-r.south)/o,a.z=s,a.w=d,a},t["a"]=D},"2d75":function(e,t,a){"use strict";var r=a("0e25"),i={NONE:0,CLAMP_TO_GROUND:1,RELATIVE_TO_GROUND:2};t["a"]=Object(r["a"])(i)},3209:function(e,t,a){"use strict";var r=a("cef5"),i=a("b081"),n=a("670c"),o=a("be18"),s=a("a561"),d=a("bef8"),c=a("dc1c"),u=a("bd8d"),l=a("9541"),h=a("2bb9"),m=a("535a"),p=a("2f63"),g=a("9f1d"),f=a("7d62"),v=a("21d7"),y=a("d940"),_=a("c1e2"),b=a("0123"),S=a("66bf"),T=a("93da"),O=a("52f0"),x=a("78e5"),E=a("713f"),w=a("1b8d"),C=a("eace"),A=a("98f6"),I=a("fe57"),P=a("2368"),D=a("1184"),L=a("f20a"),j=a("8b68"),M=a("b997"),R=a("a894"),N=a("d289"),H=a("6dc0"),B=a("7c5e"),F=a("b7c8"),V=a("43ee"),G=a("06f0"),k=a("2856"),U=a("ad4a"),z=a("dddf"),W=a("3a8e"),Y=a("894b"),q=a("f1b3"),K=a("a307"),X=a("c86b"),Q=a("2221"),J=a("4c22"),Z=a("1ec0"),$=a("ee78");function ee(e){this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.hasWaterMask=!1,this.oceanNormalMap=void 0,this.zoomedOutOceanSpecularIntensity=.5,this.enableLighting=!1,this.dynamicAtmosphereLighting=!1,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!1,this.shadows=X["a"].RECEIVE_ONLY,this.fillHighlightColor=void 0,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.showSkirts=!0,this.backFaceCulling=!0,this._quadtree=void 0,this._terrainProvider=e.terrainProvider,this._imageryLayers=e.imageryLayers,this._surfaceShaderSet=e.surfaceShaderSet,this._renderState=void 0,this._blendRenderState=void 0,this._disableCullingRenderState=void 0,this._disableCullingBlendRenderState=void 0,this._errorEvent=new v["a"],this._imageryLayers.layerAdded.addEventListener(ee.prototype._onLayerAdded,this),this._imageryLayers.layerRemoved.addEventListener(ee.prototype._onLayerRemoved,this),this._imageryLayers.layerMoved.addEventListener(ee.prototype._onLayerMoved,this),this._imageryLayers.layerShownOrHidden.addEventListener(ee.prototype._onLayerShownOrHidden,this),this._imageryLayersUpdatedEvent=new v["a"],this._layerOrderChanged=!1,this._tilesToRenderByTextureCount=[],this._drawCommands=[],this._uniformMaps=[],this._usedDrawCommands=0,this._vertexArraysToDestroy=[],this._debug={wireframe:!1,boundingSphereTile:void 0},this._baseColor=void 0,this._firstPassInitialColor=void 0,this.baseColor=new u["a"](0,0,.5,1),this._clippingPlanes=void 0,this.cartographicLimitRectangle=C["a"].clone(C["a"].MAX_VALUE),this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1}function te(e,t){var a=e.loadingImagery;Object(p["a"])(a)||(a=e.readyImagery);var r=t.loadingImagery;return Object(p["a"])(r)||(r=t.readyImagery),a.imageryLayer._layerIndex-r.imageryLayer._layerIndex}function ae(e,t){var a=t.creditDisplay;e._terrainProvider.ready&&Object(p["a"])(e._terrainProvider.credit)&&a.addCredit(e._terrainProvider.credit);for(var r=e._imageryLayers,i=0,n=r.length;i<n;++i){var o=r.get(i).imageryProvider;o.ready&&Object(p["a"])(o.credit)&&a.addCredit(o.credit)}}Object(g["a"])(ee.prototype,{baseColor:{get:function(){return this._baseColor},set:function(e){this._baseColor=e,this._firstPassInitialColor=s["a"].fromColor(e,this._firstPassInitialColor)}},quadtree:{get:function(){return this._quadtree},set:function(e){this._quadtree=e}},ready:{get:function(){return this._terrainProvider.ready&&(0===this._imageryLayers.length||this._imageryLayers.get(0).imageryProvider.ready)}},tilingScheme:{get:function(){return this._terrainProvider.tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},imageryLayersUpdatedEvent:{get:function(){return this._imageryLayersUpdatedEvent}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){this._terrainProvider!==e&&(this._terrainProvider=e,Object(p["a"])(this._quadtree)&&this._quadtree.invalidateAllTiles())}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){V["a"].setOwner(e,this,"_clippingPlanes")}}}),ee.prototype.update=function(e){this._imageryLayers._update()},ee.prototype.initialize=function(e){this._imageryLayers.queueReprojectionCommands(e),this._layerOrderChanged&&(this._layerOrderChanged=!1,this._quadtree.forEachLoadedTile((function(e){e.data.imagery.sort(te)}))),ae(this,e);for(var t=this._vertexArraysToDestroy,a=t.length,r=0;r<a;++r)k["a"]._freeVertexArray(t[r]);t.length=0},ee.prototype.beginUpdate=function(e){for(var t=this._tilesToRenderByTextureCount,a=0,r=t.length;a<r;++a){var i=t[a];Object(p["a"])(i)&&(i.length=0)}var n=this._clippingPlanes;Object(p["a"])(n)&&n.enabled&&n.update(e),this._usedDrawCommands=0,this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1},ee.prototype.endUpdate=function(e){if(Object(p["a"])(this._renderState)||(this._renderState=H["a"].fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:G["a"].LESS}}),this._blendRenderState=H["a"].fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:G["a"].LESS_OR_EQUAL},blending:F["a"].ALPHA_BLEND})),!this.backFaceCulling&&!Object(p["a"])(this._disableCullingRenderState)){var t=Object(c["a"])(this._renderState,!0);t.cull.enabled=!1,this._disableCullingRenderState=H["a"].fromCache(t),t=Object(c["a"])(this._blendRenderState,!0),t.cull.enabled=!1,this._disableCullingBlendRenderState=H["a"].fromCache(t)}this._hasFillTilesThisFrame&&this._hasLoadedTilesThisFrame&&Q["a"].updateFillTiles(this,this._quadtree._tilesToRender,e,this._vertexArraysToDestroy);for(var a=this._tilesToRenderByTextureCount,r=0,i=a.length;r<i;++r){var n=a[r];if(Object(p["a"])(n))for(var o=0,s=n.length;o<s;++o){var d=n[o],u=d.data.tileBoundingRegion;Le(this,d,e),e.minimumTerrainHeight=Math.min(e.minimumTerrainHeight,u.minimumHeight)}}},ee.prototype.updateForPick=function(e){for(var t=this._drawCommands,a=0,r=this._usedDrawCommands;a<r;++a)e.commandList.push(t[a])},ee.prototype.cancelReprojections=function(){this._imageryLayers.cancelReprojections()},ee.prototype.getLevelMaximumGeometricError=function(e){return this._terrainProvider.getLevelMaximumGeometricError(e)},ee.prototype.loadTile=function(e,t){var a,r=t.data,i=!0;Object(p["a"])(r)&&(i=r.boundingVolumeSourceTile!==t||t._lastSelectionResult===$["a"].CULLED_BUT_NEEDED,a=r.terrainState),k["a"].processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this._vertexArraysToDestroy,i),r=t.data,i&&a!==t.data.terrainState&&this.computeTileVisibility(t,e,this.quadtree.occluders)&&r.boundingVolumeSourceTile===t&&(i=!1,k["a"].processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this._vertexArraysToDestroy,i))};var re=new r["a"],ie=new C["a"],ne=new C["a"],oe=new d["a"];function se(e,t){if(t.west<t.east)return t;var a=C["a"].clone(t,ne),r=C["a"].center(e,oe);return r.longitude>0?a.east=T["a"].PI:a.west=-T["a"].PI,a}ee.prototype.computeTileVisibility=function(e,t,a){var i=this.computeDistanceToTile(e,t);if(e._distance=i,t.fog.enabled&&T["a"].fog(i,t.fog.density)>=1)return P["a"].NONE;var n=e.data,s=n.tileBoundingRegion;if(void 0===n.boundingVolumeSourceTile)return P["a"].PARTIAL;var d=t.cullingVolume,c=n.orientedBoundingBox;!Object(p["a"])(c)&&Object(p["a"])(n.renderedMesh)&&(c=n.renderedMesh.boundingSphere3D),n.clippedByBoundaries=!1;var u=se(e.rectangle,this.cartographicLimitRectangle),l=C["a"].simpleIntersection(u,e.rectangle,ie);if(!Object(p["a"])(l))return P["a"].NONE;if(C["a"].equals(l,e.rectangle)||(n.clippedByBoundaries=!0),t.mode!==K["a"].SCENE3D&&(c=re,r["a"].fromRectangleWithHeights2D(e.rectangle,t.mapProjection,s.minimumHeight,s.maximumHeight,c),o["a"].fromElements(c.center.z,c.center.x,c.center.y,c.center),t.mode===K["a"].MORPHING&&Object(p["a"])(n.renderedMesh)&&(c=r["a"].union(n.renderedMesh.boundingSphere3D,c,c))),!Object(p["a"])(c))return S["a"].INTERSECTING;var h=this._clippingPlanes;if(Object(p["a"])(h)&&h.enabled){var m=h.computeIntersectionWithBoundingVolume(c);if(e.isClipped=m!==S["a"].INSIDE,m===S["a"].OUTSIDE)return P["a"].NONE}var g=d.computeVisibility(c);if(g===S["a"].OUTSIDE)return P["a"].NONE;var f=t.mode===K["a"].SCENE3D&&t.camera.frustum instanceof E["a"];if(t.mode===K["a"].SCENE3D&&!f&&Object(p["a"])(a)){var v=n.occludeePointInScaledSpace;return Object(p["a"])(v)?a.ellipsoid.isScaledSpacePointVisiblePossiblyUnderEllipsoid(v,s.minimumHeight)?g:P["a"].NONE:g}return g},ee.prototype.canRefine=function(e){if(Object(p["a"])(e.data.terrainData))return!0;var t=this.terrainProvider.getTileDataAvailable(2*e.x,2*e.y,e.level+1);return void 0!==t};var de=[],ce=[];ee.prototype.canRenderWithoutLosingDetail=function(e,t){var a=e.data,r=de;r.length=this._imageryLayers.length;var i,n,o,s=!1,d=!1;for(Object(p["a"])(a)&&(s=a.terrainState===J["a"].READY,d=!0,i=a.imagery),n=0,o=r.length;n<o;++n)r[n]=d;if(Object(p["a"])(i))for(n=0,o=i.length;n<o;++n){var c=i[n],u=c.loadingImagery,l=!Object(p["a"])(u)||u.state===z["a"].FAILED||u.state===z["a"].INVALID,h=(c.loadingImagery||c.readyImagery).imageryLayer._layerIndex;r[h]=l&&r[h]}var m=this.quadtree._lastSelectionFrameNumber,g=ce;g.length=0,g.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild);while(g.length>0){var f=g.pop(),v=f._lastSelectionResultFrame===m?f._lastSelectionResult:$["a"].NONE;if(v===$["a"].RENDERED){var y=f.data;if(!Object(p["a"])(y))continue;if(!s&&f.data.terrainState===J["a"].READY)return!1;var _=f.data.imagery;for(n=0,o=_.length;n<o;++n){var b=_[n],S=b.loadingImagery,T=!Object(p["a"])(S)||S.state===z["a"].FAILED||S.state===z["a"].INVALID,O=(b.loadingImagery||b.readyImagery).imageryLayer._layerIndex;if(T&&!r[O])return!1}}else v===$["a"].REFINED&&g.push(f.southwestChild,f.southeastChild,f.northwestChild,f.northeastChild)}return!0};var ue=new o["a"];ee.prototype.computeTileLoadPriority=function(e,t){var a=e.data;if(void 0===a)return 0;var r=a.orientedBoundingBox;if(void 0===r)return 0;var i=t.camera.positionWC,n=t.camera.directionWC,s=o["a"].subtract(r.center,i,ue),d=o["a"].magnitude(s);return d<T["a"].EPSILON5?0:(o["a"].divideByScalar(s,d,s),(1-o["a"].dot(s,n))*e._distance)};var le=new O["a"],he=new O["a"],me=new s["a"],pe=new s["a"],ge=new o["a"],fe=new o["a"],ve=new o["a"],ye=new o["a"];ee.prototype.showTileThisFrame=function(e,t){for(var a=0,r=e.data.imagery,i=0,n=r.length;i<n;++i){var o=r[i];Object(p["a"])(o.readyImagery)&&0!==o.readyImagery.imageryLayer.alpha&&++a}var s=this._tilesToRenderByTextureCount[a];Object(p["a"])(s)||(s=[],this._tilesToRenderByTextureCount[a]=s),s.push(e);var d=e.data;Object(p["a"])(d.vertexArray)?this._hasLoadedTilesThisFrame=!0:this._hasFillTilesThisFrame=!0;var c=this._debug;++c.tilesRendered,c.texturesRendered+=a};var _e=[new o["a"],new o["a"],new o["a"],new o["a"]];function be(e,t,a,r,i,n){var s=e.quadtree._occluders.ellipsoid,d=s.ellipsoid,c=_e;return o["a"].fromRadians(a.west,a.south,i,d,c[0]),o["a"].fromRadians(a.east,a.south,i,d,c[1]),o["a"].fromRadians(a.west,a.north,i,d,c[2]),o["a"].fromRadians(a.east,a.north,i,d,c[3]),s.computeHorizonCullingPointPossiblyUnderEllipsoid(t,c,r,n)}function Se(e,t,a){var r=e.data;void 0===r&&(r=e.data=new k["a"]),void 0===r.tileBoundingRegion&&(r.tileBoundingRegion=new Z["a"]({computeBoundingVolumes:!1,rectangle:e.rectangle,ellipsoid:e.tilingScheme.ellipsoid,minimumHeight:0,maximumHeight:0}));var i=r.terrainData,n=r.mesh,o=r.tileBoundingRegion;if(void 0!==n&&void 0!==n.minimumHeight&&void 0!==n.maximumHeight)return o.minimumHeight=n.minimumHeight,o.maximumHeight=n.maximumHeight,e;if(void 0!==i&&void 0!==i._minimumHeight&&void 0!==i._maximumHeight)return o.minimumHeight=i._minimumHeight*a.terrainExaggeration,o.maximumHeight=i._maximumHeight*a.terrainExaggeration,e;o.minimumHeight=Number.NaN,o.maximumHeight=Number.NaN;var s=e.parent;while(void 0!==s){var d=s.data;if(void 0!==d){var c=d.mesh;if(void 0!==c&&void 0!==c.minimumHeight&&void 0!==c.maximumHeight)return o.minimumHeight=c.minimumHeight,o.maximumHeight=c.maximumHeight,s;var u=d.terrainData;if(void 0!==u&&void 0!==u._minimumHeight&&void 0!==u._maximumHeight)return o.minimumHeight=u._minimumHeight*a.terrainExaggeration,o.maximumHeight=u._maximumHeight*a.terrainExaggeration,s}s=s.parent}}function Te(e,t,a){return function(r){var i,n,o,s=-1,d=r.data.imagery,c=d.length;for(o=0;o<c;++o)if(i=d[o],n=Object(m["a"])(i.readyImagery,i.loadingImagery),n.imageryLayer===t){s=o;break}if(-1!==s){var u=s+e;if(i=d[u],n=Object(p["a"])(i)?Object(m["a"])(i.readyImagery,i.loadingImagery):void 0,!Object(p["a"])(n)||n.imageryLayer!==t)return!t._createTileImagerySkeletons(r,a,u);for(o=s;o<u;++o)d[o].freeResources();d.splice(s,e)}return!0}}ee.prototype.computeDistanceToTile=function(e,t){var a=Se(e,this.terrainProvider,t),r=e.data,i=r.tileBoundingRegion;if(void 0===a)return 9999999999;if(r.boundingVolumeSourceTile!==a){r.boundingVolumeSourceTile=a;var n=e.rectangle;Object(p["a"])(n)&&(r.orientedBoundingBox=x["a"].fromRectangle(e.rectangle,i.minimumHeight,i.maximumHeight,e.tilingScheme.ellipsoid,r.orientedBoundingBox),r.occludeePointInScaledSpace=be(this,r.orientedBoundingBox.center,e.rectangle,i.minimumHeight,i.maximumHeight,r.occludeePointInScaledSpace))}var o=i.minimumHeight,s=i.maximumHeight;if(r.boundingVolumeSourceTile!==e){var d=t.camera.positionCartographic.height,c=Math.abs(d-o),u=Math.abs(d-s);c>u?(i.minimumHeight=o,i.maximumHeight=o):(i.minimumHeight=s,i.maximumHeight=s)}var l=i.distanceToCamera(t);return i.minimumHeight=o,i.maximumHeight=s,l},ee.prototype.isDestroyed=function(){return!1},ee.prototype.destroy=function(){return this._tileProvider=this._tileProvider&&this._tileProvider.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),Object(f["a"])(this)},ee.prototype._onLayerAdded=function(e,t){if(e.show){var a=this._terrainProvider,r=this,i=e.imageryProvider,n=this._imageryLayersUpdatedEvent;i._reload=function(){e._imageryCache={},r._quadtree.forEachLoadedTile((function(t){if(!Object(p["a"])(t._loadedCallbacks[e._layerIndex])){var r,i=t.data.imagery,n=i.length,o=-1,s=0;for(r=0;r<n;++r){var d=i[r],c=Object(m["a"])(d.readyImagery,d.loadingImagery);if(c.imageryLayer===e)-1===o&&(o=r),++s;else if(-1!==o)break}if(-1!==o){var u=o+s;e._createTileImagerySkeletons(t,a,u)&&(t._loadedCallbacks[e._layerIndex]=Te(s,e,a),t.state=q["a"].LOADING)}}}))},this._quadtree.forEachLoadedTile((function(t){e._createTileImagerySkeletons(t,a)&&(t.state=q["a"].LOADING,0===t.level||t._lastSelectionResultFrame===r.quadtree._lastSelectionFrameNumber&&t._lastSelectionResult===$["a"].RENDERED||(t.renderable=!1))})),this._layerOrderChanged=!0,n.raiseEvent()}},ee.prototype._onLayerRemoved=function(e,t){this._quadtree.forEachLoadedTile((function(t){for(var a=t.data.imagery,r=-1,i=0,n=0,o=a.length;n<o;++n){var s=a[n],d=s.loadingImagery;if(Object(p["a"])(d)||(d=s.readyImagery),d.imageryLayer===e)-1===r&&(r=n),s.freeResources(),++i;else if(-1!==r)break}-1!==r&&a.splice(r,i)})),Object(p["a"])(e.imageryProvider)&&(e.imageryProvider._reload=void 0),this._imageryLayersUpdatedEvent.raiseEvent()},ee.prototype._onLayerMoved=function(e,t,a){this._layerOrderChanged=!0,this._imageryLayersUpdatedEvent.raiseEvent()},ee.prototype._onLayerShownOrHidden=function(e,t,a){a?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)};var Oe,xe,Ee,we=new O["a"];function Ce(e,t){var a={u_initialColor:function(){return this.properties.initialColor},u_fillHighlightColor:function(){return this.properties.fillHighlightColor},u_zoomedOutOceanSpecularIntensity:function(){return this.properties.zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return this.properties.oceanNormalMap},u_lightingFadeDistance:function(){return this.properties.lightingFadeDistance},u_nightFadeDistance:function(){return this.properties.nightFadeDistance},u_center3D:function(){return this.properties.center3D},u_tileRectangle:function(){return this.properties.tileRectangle},u_modifiedModelView:function(){var t=e.context.uniformState.view,a=O["a"].multiplyByPoint(t,this.properties.rtc,fe);return O["a"].setTranslation(t,a,le),le},u_modifiedModelViewProjection:function(){var t=e.context.uniformState.view,a=e.context.uniformState.projection,r=O["a"].multiplyByPoint(t,this.properties.rtc,fe);return O["a"].setTranslation(t,r,he),O["a"].multiply(a,he,he),he},u_dayTextures:function(){return this.properties.dayTextures},u_dayTextureTranslationAndScale:function(){return this.properties.dayTextureTranslationAndScale},u_dayTextureTexCoordsRectangle:function(){return this.properties.dayTextureTexCoordsRectangle},u_dayTextureUseWebMercatorT:function(){return this.properties.dayTextureUseWebMercatorT},u_dayTextureAlpha:function(){return this.properties.dayTextureAlpha},u_dayTextureBrightness:function(){return this.properties.dayTextureBrightness},u_dayTextureContrast:function(){return this.properties.dayTextureContrast},u_dayTextureHue:function(){return this.properties.dayTextureHue},u_dayTextureSaturation:function(){return this.properties.dayTextureSaturation},u_dayTextureOneOverGamma:function(){return this.properties.dayTextureOneOverGamma},u_dayIntensity:function(){return this.properties.dayIntensity},u_southAndNorthLatitude:function(){return this.properties.southAndNorthLatitude},u_southMercatorYAndOneOverHeight:function(){return this.properties.southMercatorYAndOneOverHeight},u_waterMask:function(){return this.properties.waterMask},u_waterMaskTranslationAndScale:function(){return this.properties.waterMaskTranslationAndScale},u_minMaxHeight:function(){return this.properties.minMaxHeight},u_scaleAndBias:function(){return this.properties.scaleAndBias},u_dayTextureSplit:function(){return this.properties.dayTextureSplit},u_dayTextureCutoutRectangles:function(){return this.properties.dayTextureCutoutRectangles},u_clippingPlanes:function(){var a=t._clippingPlanes;return Object(p["a"])(a)&&Object(p["a"])(a.texture)?a.texture:e.context.defaultTexture},u_cartographicLimitRectangle:function(){return this.properties.localizedCartographicLimitRectangle},u_clippingPlanesMatrix:function(){var a=t._clippingPlanes;return Object(p["a"])(a)?O["a"].multiply(e.context.uniformState.view,a.modelMatrix,we):O["a"].IDENTITY},u_clippingPlanesEdgeStyle:function(){var e=this.properties.clippingPlanesEdgeColor;return e.alpha=this.properties.clippingPlanesEdgeWidth,e},u_minimumBrightness:function(){return e.fog.minimumBrightness},u_hsbShift:function(){return this.properties.hsbShift},u_colorsToAlpha:function(){return this.properties.colorsToAlpha},properties:{initialColor:new s["a"](0,0,.5,1),fillHighlightColor:new u["a"](0,0,0,0),zoomedOutOceanSpecularIntensity:.5,oceanNormalMap:void 0,lightingFadeDistance:new n["a"](65e5,9e6),nightFadeDistance:new n["a"](1e7,4e7),hsbShift:new o["a"],center3D:void 0,rtc:new o["a"],modifiedModelView:new O["a"],tileRectangle:new s["a"],dayTextures:[],dayTextureTranslationAndScale:[],dayTextureTexCoordsRectangle:[],dayTextureUseWebMercatorT:[],dayTextureAlpha:[],dayTextureBrightness:[],dayTextureContrast:[],dayTextureHue:[],dayTextureSaturation:[],dayTextureOneOverGamma:[],dayTextureSplit:[],dayTextureCutoutRectangles:[],dayIntensity:0,colorsToAlpha:[],southAndNorthLatitude:new n["a"],southMercatorYAndOneOverHeight:new n["a"],waterMask:void 0,waterMaskTranslationAndScale:new s["a"],minMaxHeight:new n["a"],scaleAndBias:new O["a"],clippingPlanesEdgeColor:u["a"].clone(u["a"].WHITE),clippingPlanesEdgeWidth:0,localizedCartographicLimitRectangle:new s["a"]}};return a}function Ae(e,t,a){var r,i,n=a.data;if(Object(p["a"])(n.vertexArray)?(r=n.mesh,i=n.vertexArray):Object(p["a"])(n.fill)&&Object(p["a"])(n.fill.vertexArray)&&(r=n.fill.mesh,i=n.fill.vertexArray),Object(p["a"])(r)&&Object(p["a"])(i)){if(Object(p["a"])(n.wireframeVertexArray)){if(n.wireframeVertexArray.mesh===r)return;n.wireframeVertexArray.destroy(),n.wireframeVertexArray=void 0}n.wireframeVertexArray=Ie(e,i,r),n.wireframeVertexArray.mesh=r}}function Ie(e,t,a){var r=a.indices,i={indices:r,primitiveType:w["a"].TRIANGLES};_["a"].toWireframe(i);var n=i.indices,o=L["a"].createIndexBuffer({context:e,typedArray:n,usage:j["a"].STATIC_DRAW,indexDatatype:b["a"].fromSizeInBytes(n.BYTES_PER_ELEMENT)});return new B["a"]({context:e,attributes:t._attributes,indexBuffer:o})}(function(){var e,t,a=new y["a"]({geometry:i["a"].fromDimensions({dimensions:new o["a"](2,2,2)})}),r=new y["a"]({geometry:new A["a"]({radius:1})}),n=new O["a"];function s(e){return new Y["a"]({geometryInstances:e,appearance:new W["a"]({translucent:!1,flat:!0}),asynchronous:!1})}Oe=function(r,i){return r===e?t:(Ee(),e=r,n=O["a"].fromRotationTranslation(r.halfAxes,r.center,n),a.modelMatrix=n,a.attributes.color=l["a"].fromColor(i),t=s(a),t)},xe=function(a,i){return a===e?t:(Ee(),e=a,n=O["a"].fromTranslation(a.center,n),n=O["a"].multiplyByUniformScale(n,a.radius,n),r.modelMatrix=n,r.attributes.color=l["a"].fromColor(i),t=s(r),t)},Ee=function(){Object(p["a"])(t)&&(t.destroy(),t=void 0,e=void 0)}})();var Pe=new s["a"](0,0,0,0),De={frameState:void 0,surfaceTile:void 0,numberOfDayTextures:void 0,applyBrightness:void 0,applyContrast:void 0,applyHue:void 0,applySaturation:void 0,applyGamma:void 0,applyAlpha:void 0,applySplit:void 0,showReflectiveOcean:void 0,showOceanWaves:void 0,enableLighting:void 0,dynamicAtmosphereLighting:void 0,dynamicAtmosphereLightingFromSun:void 0,showGroundAtmosphere:void 0,perFragmentGroundAtmosphere:void 0,hasVertexNormals:void 0,useWebMercatorProjection:void 0,enableFog:void 0,enableClippingPlanes:void 0,clippingPlanes:void 0,clippedByBoundaries:void 0,hasImageryLayerCutout:void 0,colorCorrect:void 0,colorToAlpha:void 0};function Le(e,t,a){var i=t.data;Object(p["a"])(i.vertexArray)||(void 0===i.fill&&(i.fill=new Q["a"](t)),i.fill.update(e,a));var n=a.creditDisplay,d=i.terrainData;if(Object(p["a"])(d)&&Object(p["a"])(d.credits))for(var c=d.credits,l=0,m=c.length;l<m;++l)n.addCredit(c[l]);var g=M["a"].maximumTextureImageUnits,f=i.waterMaskTexture,v=i.waterMaskTranslationAndScale;!Object(p["a"])(f)&&Object(p["a"])(i.fill)&&(f=i.fill.waterMaskTexture,v=i.fill.waterMaskTranslationAndScale);var y=e.hasWaterMask&&Object(p["a"])(f),_=e.oceanNormalMap,b=y&&Object(p["a"])(_),S=e.terrainProvider.ready&&e.terrainProvider.hasVertexNormals,E=a.fog.enabled,A=e.showGroundAtmosphere,P=X["a"].castShadows(e.shadows),L=X["a"].receiveShadows(e.shadows),j=e.hueShift,H=e.saturationShift,B=e.brightnessShift,F=!(T["a"].equalsEpsilon(j,0,T["a"].EPSILON7)&&T["a"].equalsEpsilon(H,0,T["a"].EPSILON7)&&T["a"].equalsEpsilon(B,0,T["a"].EPSILON7)),V=!1;if(A){var G,k=a.mode,z=a.camera;G=k===K["a"].SCENE2D||k===K["a"].COLUMBUS_VIEW?z.positionCartographic.height:o["a"].magnitude(z.positionWC);var W=e.nightFadeOutDistance;k!==K["a"].SCENE3D&&(W-=a.mapProjection.ellipsoid.maximumRadius),V=G>W}y&&--g,b&&--g,Object(p["a"])(a.shadowState)&&a.shadowState.shadowsEnabled&&--g,Object(p["a"])(e.clippingPlanes)&&e.clippingPlanes.enabled&&--g;var Y=i.renderedMesh,q=Y.center,J=Y.encoding,Z=me,$=0,ee=0,te=0,ae=0,re=!1;if(a.mode!==K["a"].SCENE3D){var ne=a.mapProjection,oe=ne.project(C["a"].southwest(t.rectangle),ve),de=ne.project(C["a"].northeast(t.rectangle),ye);if(Z.x=oe.x,Z.y=oe.y,Z.z=de.x,Z.w=de.y,a.mode!==K["a"].MORPHING&&(q=ge,q.x=0,q.y=.5*(Z.z+Z.x),q.z=.5*(Z.w+Z.y),Z.x-=q.y,Z.y-=q.z,Z.z-=q.y,Z.w-=q.z),a.mode===K["a"].SCENE2D&&J.quantization===I["a"].BITS12){var ce=1/(Math.pow(2,12)-1)*.5,ue=(Z.z-Z.x)*ce,le=(Z.w-Z.y)*ce;Z.x-=ue,Z.y-=le,Z.z+=ue,Z.w+=le}ne instanceof D["a"]&&($=t.rectangle.south,ee=t.rectangle.north,te=D["a"].geodeticLatitudeToMercatorAngle($),ae=1/(D["a"].geodeticLatitudeToMercatorAngle(ee)-te),re=!0)}var he=De;he.frameState=a,he.surfaceTile=i,he.showReflectiveOcean=y,he.showOceanWaves=b,he.enableLighting=e.enableLighting,he.dynamicAtmosphereLighting=e.dynamicAtmosphereLighting,he.dynamicAtmosphereLightingFromSun=e.dynamicAtmosphereLightingFromSun,he.showGroundAtmosphere=A,he.perFragmentGroundAtmosphere=V,he.hasVertexNormals=S,he.useWebMercatorProjection=re,he.clippedByBoundaries=i.clippedByBoundaries;var fe=i.imagery,_e=0,be=fe.length,Se=e.backFaceCulling?e._renderState:e._disableCullingRenderState,Te=e.backFaceCulling?e._blendRenderState:e._disableCullingBlendRenderState,we=Se,Ie=e._firstPassInitialColor,Le=a.context;Object(p["a"])(e._debug.boundingSphereTile)||Ee();do{var je,Me,Re=0;if(e._drawCommands.length<=e._usedDrawCommands?(je=new R["a"],je.owner=t,je.cull=!1,je.boundingVolume=new r["a"],je.orientedBoundingBox=void 0,Me=Ce(a,e),e._drawCommands.push(je),e._uniformMaps.push(Me)):(je=e._drawCommands[e._usedDrawCommands],Me=e._uniformMaps[e._usedDrawCommands]),je.owner=t,++e._usedDrawCommands,t===e._debug.boundingSphereTile){var Ne=i.orientedBoundingBox;Object(p["a"])(Ne)?Oe(Ne,u["a"].RED).update(a):Object(p["a"])(Y)&&Object(p["a"])(Y.boundingSphere3D)&&xe(Y.boundingSphere3D,u["a"].RED).update(a)}var He=Me.properties;s["a"].clone(Ie,He.initialColor),He.oceanNormalMap=_,He.lightingFadeDistance.x=e.lightingFadeOutDistance,He.lightingFadeDistance.y=e.lightingFadeInDistance,He.nightFadeDistance.x=e.nightFadeOutDistance,He.nightFadeDistance.y=e.nightFadeInDistance,He.zoomedOutOceanSpecularIntensity=e.zoomedOutOceanSpecularIntensity;var Be=!Object(p["a"])(i.vertexArray)&&Object(p["a"])(e.fillHighlightColor)&&e.fillHighlightColor.alpha>0;Be&&u["a"].clone(e.fillHighlightColor,He.fillHighlightColor),He.center3D=Y.center,o["a"].clone(q,He.rtc),s["a"].clone(Z,He.tileRectangle),He.southAndNorthLatitude.x=$,He.southAndNorthLatitude.y=ee,He.southMercatorYAndOneOverHeight.x=te,He.southMercatorYAndOneOverHeight.y=ae;var Fe=pe,Ve=se(t.rectangle,e.cartographicLimitRectangle);o["a"].fromElements(j,H,B,He.hsbShift);var Ge=t.rectangle,ke=1/Ge.width,Ue=1/Ge.height;Fe.x=(Ve.west-Ge.west)*ke,Fe.y=(Ve.south-Ge.south)*Ue,Fe.z=(Ve.east-Ge.west)*ke,Fe.w=(Ve.north-Ge.south)*Ue,s["a"].clone(Fe,He.localizedCartographicLimitRectangle);var ze=E&&T["a"].fog(t._distance,a.fog.density)>T["a"].EPSILON3;F=F&&(ze||A);var We=!1,Ye=!1,qe=!1,Ke=!1,Xe=!1,Qe=!1,Je=!1,Ze=!1,$e=!1;while(Re<g&&_e<be){var et=fe[_e],tt=et.readyImagery;if(++_e,Object(p["a"])(tt)&&0!==tt.imageryLayer.alpha){var at=et.useWebMercatorT?tt.textureWebMercator:tt.texture,rt=tt.imageryLayer;Object(p["a"])(et.textureTranslationAndScale)||(et.textureTranslationAndScale=rt._calculateTextureTranslationAndScale(t,et)),He.dayTextures[Re]=at,He.dayTextureTranslationAndScale[Re]=et.textureTranslationAndScale,He.dayTextureTexCoordsRectangle[Re]=et.textureCoordinateRectangle,He.dayTextureUseWebMercatorT[Re]=et.useWebMercatorT,He.dayTextureAlpha[Re]=rt.alpha,Qe=Qe||1!==He.dayTextureAlpha[Re],He.dayTextureBrightness[Re]=rt.brightness,We=We||He.dayTextureBrightness[Re]!==U["a"].DEFAULT_BRIGHTNESS,He.dayTextureContrast[Re]=rt.contrast,Ye=Ye||He.dayTextureContrast[Re]!==U["a"].DEFAULT_CONTRAST,He.dayTextureHue[Re]=rt.hue,qe=qe||He.dayTextureHue[Re]!==U["a"].DEFAULT_HUE,He.dayTextureSaturation[Re]=rt.saturation,Ke=Ke||He.dayTextureSaturation[Re]!==U["a"].DEFAULT_SATURATION,He.dayTextureOneOverGamma[Re]=1/rt.gamma,Xe=Xe||He.dayTextureOneOverGamma[Re]!==1/U["a"].DEFAULT_GAMMA,He.dayTextureSplit[Re]=rt.splitDirection,Je=Je||0!==He.dayTextureSplit[Re];var it=He.dayTextureCutoutRectangles[Re];if(Object(p["a"])(it)||(it=He.dayTextureCutoutRectangles[Re]=new s["a"]),s["a"].clone(s["a"].ZERO,it),Object(p["a"])(rt.cutoutRectangle)){var nt=se(Ge,rt.cutoutRectangle),ot=C["a"].simpleIntersection(nt,Ge,ie);Ze=Object(p["a"])(ot)||Ze,it.x=(nt.west-Ge.west)*ke,it.y=(nt.south-Ge.south)*Ue,it.z=(nt.east-Ge.west)*ke,it.w=(nt.north-Ge.south)*Ue}var st=He.colorsToAlpha[Re];Object(p["a"])(st)||(st=He.colorsToAlpha[Re]=new s["a"]);var dt=Object(p["a"])(rt.colorToAlpha)&&rt.colorToAlphaThreshold>0;if($e=$e||dt,dt){var ct=rt.colorToAlpha;st.x=ct.red,st.y=ct.green,st.z=ct.blue,st.w=rt.colorToAlphaThreshold}else st.w=-1;if(Object(p["a"])(tt.credits))for(var ut=tt.credits,lt=0,ht=ut.length;lt<ht;++lt)n.addCredit(ut[lt]);++Re}}He.dayTextures.length=Re,He.waterMask=f,s["a"].clone(v,He.waterMaskTranslationAndScale),He.minMaxHeight.x=J.minimumHeight,He.minMaxHeight.y=J.maximumHeight,O["a"].clone(J.matrix,He.scaleAndBias);var mt=e._clippingPlanes,pt=Object(p["a"])(mt)&&mt.enabled&&t.isClipped;pt&&(He.clippingPlanesEdgeColor=u["a"].clone(mt.edgeColor,He.clippingPlanesEdgeColor),He.clippingPlanesEdgeWidth=mt.edgeWidth),Object(p["a"])(e.uniformMap)&&(Me=Object(h["a"])(Me,e.uniformMap)),he.numberOfDayTextures=Re,he.applyBrightness=We,he.applyContrast=Ye,he.applyHue=qe,he.applySaturation=Ke,he.applyGamma=Xe,he.applyAlpha=Qe,he.applySplit=Je,he.enableFog=ze,he.enableClippingPlanes=pt,he.clippingPlanes=mt,he.hasImageryLayerCutout=Ze,he.colorCorrect=F,he.highlightFillTile=Be,he.colorToAlpha=$e;var gt=i.renderedMesh.indices.length;e.showSkirts||(gt=i.renderedMesh.indexCountWithoutSkirts),je.shaderProgram=e._surfaceShaderSet.getShaderProgram(he),je.castShadows=P,je.receiveShadows=L,je.renderState=we,je.primitiveType=w["a"].TRIANGLES,je.vertexArray=i.vertexArray||i.fill.vertexArray,je.count=gt,je.uniformMap=Me,je.pass=N["a"].GLOBE,e._debug.wireframe&&(Ae(Le,e,t),Object(p["a"])(i.wireframeVertexArray)&&(je.vertexArray=i.wireframeVertexArray,je.primitiveType=w["a"].LINES,je.count=2*gt));var ft=je.boundingVolume,vt=je.orientedBoundingBox;if(a.mode!==K["a"].SCENE3D){var yt=i.tileBoundingRegion;r["a"].fromRectangleWithHeights2D(t.rectangle,a.mapProjection,yt.minimumHeight,yt.maximumHeight,ft),o["a"].fromElements(ft.center.z,ft.center.x,ft.center.y,ft.center),a.mode===K["a"].MORPHING&&(ft=r["a"].union(Y.boundingSphere3D,ft,ft))}else je.boundingVolume=r["a"].clone(Y.boundingSphere3D,ft),je.orientedBoundingBox=x["a"].clone(i.orientedBoundingBox,vt);je.dirty=!0,a.commandList.push(je),we=Te,Ie=Pe}while(_e<be)}t["a"]=ee},"324a":function(e,t,a){"use strict";var r=a("7229"),i=a("8dfe"),n=a("535a"),o=a("2f63"),s=a("9f1d"),d=a("21d7"),c=a("5d5c"),u=a("eace"),l=a("d4ed"),h=a("283e"),m=a("a89b"),p=a("d3a0"),g=a("a58e"),f=a("64ac");function v(e){e=Object(n["a"])(e,{});var t=e.url,a=Object(n["a"])(e.path,"/default_map"),r=l["a"].createIfNeeded(t).getDerivedResource({url:"/"===a[0]?a.substring(1):a});r.appendForwardSlash(),this._resource=r,this._url=t,this._path=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new i["a"]('<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="'+v.logoUrl+'" title="Google Imagery"/></a>'),this.defaultGamma=1.9,this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=e.maximumLevel,this._errorEvent=new d["a"],this._ready=!1,this._readyPromise=g["a"].defer();var s,f=r.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),y=this;function _(t){var a,r,i;try{a=JSON.parse(t)}catch(d){a=JSON.parse(t.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}for(var n=0;n<a.layers.length;n++)if(a.layers[n].id===y._channel){r=a.layers[n];break}if(!Object(o["a"])(r))throw i="Could not find layer with channel (id) of "+y._channel+".",s=m["a"].handleError(s,y,y._errorEvent,i,void 0,void 0,void 0,S),new h["a"](i);if(!Object(o["a"])(r.version))throw i="Could not find a version in channel (id) "+y._channel+".",s=m["a"].handleError(s,y,y._errorEvent,i,void 0,void 0,void 0,S),new h["a"](i);if(y._version=r.version,Object(o["a"])(a.projection)&&"flat"===a.projection)y._tilingScheme=new c["a"]({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new u["a"](-Math.PI,-Math.PI,Math.PI,Math.PI),ellipsoid:e.ellipsoid});else{if(Object(o["a"])(a.projection)&&"mercator"!==a.projection)throw i="Unsupported projection "+a.projection+".",s=m["a"].handleError(s,y,y._errorEvent,i,void 0,void 0,void 0,S),new h["a"](i);y._tilingScheme=new p["a"]({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid})}y._ready=!0,y._readyPromise.resolve(!0),m["a"].handleSuccess(s)}function b(e){var t="An error occurred while accessing "+f.url+".";s=m["a"].handleError(s,y,y._errorEvent,t,void 0,void 0,void 0,S),y._readyPromise.reject(new h["a"](t))}function S(){var e=f.fetchText();Object(g["a"])(e,_,b)}S()}Object(s["a"])(v.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._resource.proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},version:{get:function(){return this._version}},requestType:{get:function(){return this._requestType}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),v.prototype.getTileCredits=function(e,t,a){},v.prototype.requestImage=function(e,t,a,r){var i=this._resource.getDerivedResource({url:"query",request:r,queryParameters:{request:this._requestType,channel:this._channel,version:this._version,x:e,y:t,z:a+1}});return f["a"].loadImage(this,i)},v.prototype.pickFeatures=function(e,t,a,r,i){},v._logoUrl=void 0,Object(s["a"])(v,{logoUrl:{get:function(){return Object(o["a"])(v._logoUrl)||(v._logoUrl=Object(r["a"])("Assets/Images/google_earth_credit.png")),v._logoUrl},set:function(e){v._logoUrl=e}}}),t["a"]=v},a0f5:function(e,t,a){"use strict";var r=a("dd06"),i=a("abab"),n=a("535a"),o=a("2f63"),s=a("9f1d"),d=a("7d62"),c=a("4f04"),u=a("d940"),l=a("c888"),h=a("69e5"),m=a("c2aa"),p=a("a894"),g=a("d289"),f=a("6dc0"),v=a("e90c"),y=a("5770"),_=a("9d1c"),b=a("1dca"),S=a("fb17"),T=a("e3b4"),O=a("a58e"),x=a("b7c8"),E=a("5a6c"),w=a("29ab"),C=a("63ae"),A=a("2e78"),I=a("894b"),P=a("a307"),D=a("3626"),L=a("6102"),j=a("25ef");function M(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this._hasPerInstanceColors=!0;var t=e.appearance;Object(o["a"])(t)||(t=new A["a"]),this.appearance=t,this.show=Object(n["a"])(e.show,!0),this.classificationType=Object(n["a"])(e.classificationType,E["a"].BOTH),this.debugShowBoundingVolume=Object(n["a"])(e.debugShowBoundingVolume,!1),this._debugShowShadowVolume=Object(n["a"])(e.debugShowShadowVolume,!1),this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:!1,interleave:Object(n["a"])(e.interleave,!1),releaseGeometryInstances:Object(n["a"])(e.releaseGeometryInstances,!0),allowPicking:Object(n["a"])(e.allowPicking,!0),asynchronous:Object(n["a"])(e.asynchronous,!0),compressVertices:!1,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0},this._zIndex=void 0,this._ready=!1,this._readyPromise=O["a"].defer(),this._primitive=void 0,this._sp=void 0,this._sp2D=void 0,this._spMorph=void 0,this._renderState=N(!1),this._renderState3DTiles=N(!0),this._renderStateMorph=f["a"].fromCache({cull:{enabled:!0,face:w["a"].FRONT},depthTest:{enabled:!0},blending:x["a"].ALPHA_BLEND,depthMask:!1})}function R(e,t,a){var i=t.context,n=e._primitive,s=n._attributeLocations,d=n._batchTable.getVertexShaderCallback()(T["a"]);d=I["a"]._appendShowToShader(n,d),d=I["a"]._appendDistanceDisplayConditionToShader(n,d),d=I["a"]._modifyShaderPosition(e,d,t.scene3DOnly);var c=n._batchTable.getVertexShaderCallback()(S["a"]);c=I["a"]._appendShowToShader(n,c),c=I["a"]._appendDistanceDisplayConditionToShader(n,c),c=I["a"]._modifyShaderPosition(e,c,t.scene3DOnly);var u=n._batchTable.getVertexShaderCallback()(_["a"]),l=["ENABLE_GL_POSITION_LOG_DEPTH_AT_HEIGHT","GLOBE_MINIMUM_ALTITUDE "+t.mapProjection.ellipsoid.minimumRadius.toFixed(1)],h="",m="";Object(o["a"])(a.material)?(m=Object(o["a"])(a.material)?a.material.shaderSource:"",-1!==m.search(/varying\s+float\s+v_polylineAngle;/g)&&l.push("ANGLE_VARYING"),-1!==m.search(/varying\s+float\s+v_width;/g)&&l.push("WIDTH_VARYING")):h="PER_INSTANCE_COLOR",l.push(h);var p=e.debugShowShadowVolume?["DEBUG_SHOW_VOLUME",h]:[h],g=new y["a"]({defines:l,sources:[d]}),f=new y["a"]({defines:p,sources:[m,u]});e._sp=v["a"].replaceCache({context:i,shaderProgram:n._sp,vertexShaderSource:g,fragmentShaderSource:f,attributeLocations:s});var O=i.shaderCache.getDerivedShaderProgram(e._sp,"2dColor");if(!Object(o["a"])(O)){var x=new y["a"]({defines:l.concat(["COLUMBUS_VIEW_2D"]),sources:[d]});O=i.shaderCache.createDerivedShaderProgram(e._sp,"2dColor",{context:i,shaderProgram:e._sp2D,vertexShaderSource:x,fragmentShaderSource:f,attributeLocations:s})}e._sp2D=O;var E=i.shaderCache.getDerivedShaderProgram(e._sp,"MorphColor");if(!Object(o["a"])(E)){var w=new y["a"]({defines:l.concat(["MAX_TERRAIN_HEIGHT "+r["a"]._defaultMaxTerrainHeight.toFixed(1)]),sources:[c]});u=n._batchTable.getVertexShaderCallback()(b["a"]);var C=new y["a"]({defines:p,sources:[m,u]});E=i.shaderCache.createDerivedShaderProgram(e._sp,"MorphColor",{context:i,shaderProgram:e._spMorph,vertexShaderSource:w,fragmentShaderSource:C,attributeLocations:s})}e._spMorph=E}function N(e){return f["a"].fromCache({cull:{enabled:!0},blending:x["a"].ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:L["a"].EQUAL,frontOperation:{fail:j["a"].KEEP,zFail:j["a"].KEEP,zPass:j["a"].KEEP},backFunction:L["a"].EQUAL,backOperation:{fail:j["a"].KEEP,zFail:j["a"].KEEP,zPass:j["a"].KEEP},reference:D["a"].CESIUM_3D_TILE_MASK,mask:D["a"].CESIUM_3D_TILE_MASK}})}function H(e,t,a,r,i,n){var s=e._primitive,d=s._va.length;i.length=d,n.length=d;for(var c=t instanceof C["a"],u=c?{}:a._uniforms,l=s._batchTable.getUniformMapCallback()(u),h=0;h<d;h++){var m=s._va[h],f=i[h];Object(o["a"])(f)||(f=i[h]=new p["a"]({owner:e,primitiveType:s._primitiveType})),f.vertexArray=m,f.renderState=e._renderState,f.shaderProgram=e._sp,f.uniformMap=l,f.pass=g["a"].TERRAIN_CLASSIFICATION,f.pickId="czm_batchTable_pickColor(v_endPlaneNormalEcAndBatchId.w)";var v=p["a"].shallowClone(f,f.derivedCommands.tileset);v.renderState=e._renderState3DTiles,v.pass=g["a"].CESIUM_3D_TILE_CLASSIFICATION,f.derivedCommands.tileset=v;var y=p["a"].shallowClone(f,f.derivedCommands.color2D);y.shaderProgram=e._sp2D,f.derivedCommands.color2D=y;var _=p["a"].shallowClone(v,v.derivedCommands.color2D);_.shaderProgram=e._sp2D,v.derivedCommands.color2D=_;var b=p["a"].shallowClone(f,f.derivedCommands.colorMorph);b.renderState=e._renderStateMorph,b.shaderProgram=e._spMorph,b.pickId="czm_batchTable_pickColor(v_batchId)",f.derivedCommands.colorMorph=b}}function B(e,t,a,r,i,n,o){a.mode===P["a"].MORPHING?t=t.derivedCommands.colorMorph:a.mode!==P["a"].SCENE3D&&(t=t.derivedCommands.color2D),t.modelMatrix=r,t.boundingVolume=n,t.cull=i,t.debugShowBoundingVolume=o,a.commandList.push(t)}function F(e,t,a,r,i,n,s){var d,c=e._primitive;I["a"]._updateBoundingVolumes(c,t,i),t.mode===P["a"].SCENE3D?d=c._boundingSphereWC:t.mode===P["a"].COLUMBUS_VIEW?d=c._boundingSphereCV:t.mode===P["a"].SCENE2D&&Object(o["a"])(c._boundingSphere2D)?d=c._boundingSphere2D:Object(o["a"])(c._boundingSphereMorph)&&(d=c._boundingSphereMorph);var u,l=t.mode===P["a"].MORPHING,h=e.classificationType,m=h!==E["a"].CESIUM_3D_TILE,p=h!==E["a"].TERRAIN&&!l,g=t.passes;if(g.render||g.pick&&c.allowPicking)for(var f=a.length,v=0;v<f;++v){var y=d[v];m&&(u=a[v],B(e,u,t,i,n,y,s)),p&&(u=a[v].derivedCommands.tileset,B(e,u,t,i,n,y,s))}}Object(s["a"])(M.prototype,{interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},debugShowShadowVolume:{get:function(){return this._debugShowShadowVolume}}}),M.initializeTerrainHeights=function(){return r["a"].initialize()},M.prototype.update=function(e){if(Object(o["a"])(this._primitive)||Object(o["a"])(this.geometryInstances))if(r["a"].initialized){var t,a=this,n=this._primitiveOptions;if(!Object(o["a"])(this._primitive)){var s,d=Object(m["a"])(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],p=d.length,g=new Array(p);for(t=0;t<p;++t)if(s=d[t].attributes,!Object(o["a"])(s)||!Object(o["a"])(s.color)){this._hasPerInstanceColors=!1;break}for(t=0;t<p;++t){var f=d[t];s={};var v=f.attributes;for(var y in v)v.hasOwnProperty(y)&&(s[y]=v[y]);Object(o["a"])(s.width)||(s.width=new l["a"]({componentDatatype:i["a"].UNSIGNED_BYTE,componentsPerAttribute:1,value:[f.geometry.width]})),f.geometry._scene3DOnly=e.scene3DOnly,h["a"].setProjectionAndEllipsoid(f.geometry,e.mapProjection),g[t]=new u["a"]({geometry:f.geometry,attributes:s,id:f.id,pickPrimitive:a})}n.geometryInstances=g,n.appearance=this.appearance,n._createShaderProgramFunction=function(e,t,r){R(a,t,r)},n._createCommandsFunction=function(e,t,r,i,n,o,s){H(a,t,r,i,o,s)},n._updateAndQueueCommandsFunction=function(e,t,r,i,n,o,s,d){F(a,t,r,i,n,o,s)},this._primitive=new I["a"](n),this._primitive.readyPromise.then((function(e){a._ready=!0,a.releaseGeometryInstances&&(a.geometryInstances=void 0);var t=e._error;Object(o["a"])(t)?a._readyPromise.reject(t):a._readyPromise.resolve(a)}))}if(this.appearance instanceof C["a"]&&!this._hasPerInstanceColors)throw new c["a"]("All GeometryInstances must have color attributes to use PolylineColorAppearance with GroundPolylinePrimitive.");this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e)}else M.initializeTerrainHeights()},M.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)},M.isSupported=function(e){return e.frameState.context.depthTexture},M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._sp2D=void 0,this._spMorph=void 0,Object(d["a"])(this)},t["a"]=M},acad:function(e,t,a){"use strict";var r=a("dd06"),i=a("cef5"),n=a("be18"),o=a("bef8"),s=a("535a"),d=a("2f63"),c=a("9f1d"),u=a("7d62"),l=a("d940"),h=a("c2aa"),m=a("78e5"),p=a("eace"),g=a("a58e"),f=a("e8b2"),v=a("5a6c"),y=a("3a8e"),_=a("a307"),b=a("2a1b"),S={u_globeMinimumAltitude:function(){return 55e3}};function T(e){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT);var t=e.appearance,a=e.geometryInstances;if(!Object(d["a"])(t)&&Object(d["a"])(a))for(var i=Object(h["a"])(a)?a:[a],n=i.length,o=0;o<n;o++){var c=i[o].attributes;if(Object(d["a"])(c)&&Object(d["a"])(c.color)){t=new y["a"]({flat:!0});break}}this.appearance=t,this.geometryInstances=e.geometryInstances,this.show=Object(s["a"])(e.show,!0),this.classificationType=Object(s["a"])(e.classificationType,v["a"].BOTH),this.debugShowBoundingVolume=Object(s["a"])(e.debugShowBoundingVolume,!1),this.debugShowShadowVolume=Object(s["a"])(e.debugShowShadowVolume,!1),this._boundingVolumes=[],this._boundingVolumes2D=[],this._ready=!1,this._readyPromise=g["a"].defer(),this._primitive=void 0,this._maxHeight=void 0,this._minHeight=void 0,this._maxTerrainHeight=r["a"]._defaultMaxTerrainHeight,this._minTerrainHeight=r["a"]._defaultMinTerrainHeight,this._boundingSpheresKeys=[],this._boundingSpheres=[],this._useFragmentCulling=!1,this._zIndex=void 0;var u=this;this._classificationPrimitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:Object(s["a"])(e.vertexCacheOptimize,!1),interleave:Object(s["a"])(e.interleave,!1),releaseGeometryInstances:Object(s["a"])(e.releaseGeometryInstances,!0),allowPicking:Object(s["a"])(e.allowPicking,!0),asynchronous:Object(s["a"])(e.asynchronous,!0),compressVertices:Object(s["a"])(e.compressVertices,!0),_createBoundingVolumeFunction:void 0,_updateAndQueueCommandsFunction:void 0,_pickPrimitive:u,_extruded:!0,_uniformMap:S}}function O(e){return function(t,a){var r=a.maximumRadius,i=r/Math.cos(.5*t)-r;return e._maxHeight+i}}function x(e){return function(t,a){return e._minHeight}}Object(c["a"])(T.prototype,{vertexCacheOptimize:{get:function(){return this._classificationPrimitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._classificationPrimitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._classificationPrimitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._classificationPrimitiveOptions.allowPicking}},asynchronous:{get:function(){return this._classificationPrimitiveOptions.asynchronous}},compressVertices:{get:function(){return this._classificationPrimitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}}}),T.isSupported=f["a"].isSupported;var E=new n["a"],w=new n["a"],C=new n["a"],A=new o["a"],I=new p["a"];function P(e,t){var a=e.mapProjection.ellipsoid;if(!Object(d["a"])(t.attributes)||!Object(d["a"])(t.attributes.position3DHigh))return Object(d["a"])(t.rectangle)?t.rectangle:void 0;for(var r=t.attributes.position3DHigh.values,i=t.attributes.position3DLow.values,o=r.length,s=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=0;h<o;h+=3){var m=n["a"].unpack(r,h,E),p=n["a"].unpack(i,h,w),g=n["a"].add(m,p,C),f=a.cartesianToCartographic(g,A),v=f.latitude,y=f.longitude;s=Math.min(s,v),c=Math.min(c,y),u=Math.max(u,v),l=Math.max(l,y)}var _=I;return _.north=u,_.south=s,_.east=l,_.west=c,_}function D(e,t,a){var i=r["a"].getMinimumMaximumHeights(t,a);e._minTerrainHeight=i.minimumTerrainHeight,e._maxTerrainHeight=i.maximumTerrainHeight}function L(e,t,a){var r=t.mapProjection.ellipsoid,o=P(t,a),s=m["a"].fromRectangle(o,e._minHeight,e._maxHeight,r);if(e._boundingVolumes.push(s),!t.scene3DOnly){var d=t.mapProjection,c=i["a"].fromRectangleWithHeights2D(o,d,e._maxHeight,e._minHeight);n["a"].fromElements(c.center.z,c.center.x,c.center.y,c.center),e._boundingVolumes2D.push(c)}}function j(e,t){return Math.floor(e%t/3)}function M(e,t,a,r,i,n,o){var s=e._primitive;a.mode!==_["a"].SCENE3D&&t.shaderProgram===s._spColor&&s._needs2DShader&&(t=t.derivedCommands.appearance2D),t.owner=e,t.modelMatrix=r,t.boundingVolume=n,t.cull=i,t.debugShowBoundingVolume=o,a.commandList.push(t)}function R(e,t,a,r,i,n){var o=e._primitive;a.mode!==_["a"].SCENE3D&&t.shaderProgram===o._spPick&&o._needs2DShader&&(t=t.derivedCommands.pick2D),t.owner=e,t.modelMatrix=r,t.boundingVolume=n,t.cull=i,a.commandList.push(t)}function N(e,t,a,r,i,n,o,s){var d;d=t.mode===_["a"].SCENE3D?e._boundingVolumes:e._boundingVolumes2D;var c,u,l,h=e.classificationType,m=h!==v["a"].CESIUM_3D_TILE,p=h!==v["a"].TERRAIN,g=t.passes,f=e._primitive;if(g.render){var y=a.length;for(c=0;c<y;++c)u=d[j(c,y)],m&&(l=a[c],M(e,l,t,i,n,u,o)),p&&(l=a[c].derivedCommands.tileset,M(e,l,t,i,n,u,o));if(t.invertClassification){var b=f._commandsIgnoreShow,S=b.length;for(c=0;c<S;++c)u=d[Math.floor(c/2)],l=b[c],M(e,l,t,i,n,u,o)}}if(g.pick){var T,O=r.length;for(e._useFragmentCulling||(T=f._primitive._pickOffsets),c=0;c<O;++c){if(u=d[j(c,O)],!e._useFragmentCulling){var x=T[j(c,O)];u=d[x.index]}m&&(l=r[c],R(e,l,t,i,n,u)),p&&(l=r[c].derivedCommands.tileset,R(e,l,t,i,n,u))}}}T.initializeTerrainHeights=function(){return r["a"].initialize()},T.prototype.update=function(e){if(Object(d["a"])(this._primitive)||Object(d["a"])(this.geometryInstances))if(r["a"].initialized){var t=this,a=this._classificationPrimitiveOptions;if(!Object(d["a"])(this._primitive)){var i,n,o,s,c,u=e.mapProjection.ellipsoid,m=Object(h["a"])(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],g=m.length,v=new Array(g);for(s=0;s<g;++s){i=m[s],n=i.geometry;var y=P(e,n);Object(d["a"])(c)?Object(d["a"])(y)&&p["a"].union(c,y,c):c=p["a"].clone(y);var _=i.id;if(Object(d["a"])(_)&&Object(d["a"])(y)){var S=r["a"].getBoundingSphere(y,u);this._boundingSpheresKeys.push(_),this._boundingSpheres.push(S)}o=n.constructor,!Object(d["a"])(o)||Object(d["a"])(o.createShadowVolume)}D(this,c,u);var E=e.terrainExaggeration;this._minHeight=this._minTerrainHeight*E,this._maxHeight=this._maxTerrainHeight*E;var w=T._supportsMaterials(e.context);if(this._useFragmentCulling=w,w){var C,A=!0;for(s=0;s<g;++s)if(i=m[s],n=i.geometry,c=P(e,n),b["a"].shouldUseSphericalCoordinates(c)){A=!1;break}for(s=0;s<g;++s){i=m[s],n=i.geometry,o=n.constructor;var I=P(e,n),j=n.textureCoordinateRotationPoints,M=e.context.floatTextureSixPlaces;C=A?b["a"].getPlanarTextureCoordinateAttributes(I,j,u,e.mapProjection,M,this._maxHeight):b["a"].getSphericalExtentGeometryInstanceAttributes(I,j,u,e.mapProjection,M);var R=i.attributes;for(var H in R)R.hasOwnProperty(H)&&(C[H]=R[H]);v[s]=new l["a"]({geometry:o.createShadowVolume(n,x(this),O(this)),attributes:C,id:i.id})}}else for(s=0;s<g;++s)i=m[s],n=i.geometry,o=n.constructor,v[s]=new l["a"]({geometry:o.createShadowVolume(n,x(this),O(this)),attributes:i.attributes,id:i.id});a.geometryInstances=v,a.appearance=this.appearance,a._createBoundingVolumeFunction=function(e,a){L(t,e,a)},a._updateAndQueueCommandsFunction=function(e,a,r,i,n,o,s,d){N(t,a,r,i,n,o,s,d)},this._primitive=new f["a"](a),this._primitive.readyPromise.then((function(e){t._ready=!0,t.releaseGeometryInstances&&(t.geometryInstances=void 0);var a=e._error;Object(d["a"])(a)?t._readyPromise.reject(a):t._readyPromise.resolve(t)}))}this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowShadowVolume=this.debugShowShadowVolume,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e)}else T.initializeTerrainHeights()},T.prototype.getBoundingSphere=function(e){var t=this._boundingSpheresKeys.indexOf(e);if(-1!==t)return this._boundingSpheres[t]},T.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(u["a"])(this)},T._supportsMaterials=function(e){return e.depthTexture},T.supportsMaterials=function(e){return T._supportsMaterials(e.frameState.context)},t["a"]=T}}]);