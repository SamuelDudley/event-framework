(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~9d9b77a3"],{4820:function(t,i,e){"use strict";var o=e("77af"),a=e("670c"),n=e("be18"),s=e("535a"),r=e("2f63"),l=e("9f1d"),c=e("82d9"),d=e("21d7"),h=e("52f0"),u=e("3e44"),_=e("8f7c"),p=e("c26f"),m=e("04e1"),v=e("bdd0"),b=e("44bf"),f=e("a307"),g=e("98be");function y(t){t=Object(s["a"])(t,s["a"].EMPTY_OBJECT),this._enabled=Object(s["a"])(t.enabled,!1),this._pixelRange=Object(s["a"])(t.pixelRange,80),this._minimumClusterSize=Object(s["a"])(t.minimumClusterSize,2),this._clusterBillboards=Object(s["a"])(t.clusterBillboards,!0),this._clusterLabels=Object(s["a"])(t.clusterLabels,!0),this._clusterPoints=Object(s["a"])(t.clusterPoints,!0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new d["a"]}function O(t){return t.coord.x}function C(t){return t.coord.y}function j(t,i){t.x-=i,t.y-=i,t.width+=2*i,t.height+=2*i}var w=new o["a"];function S(t,i,e,a,n){if(Object(r["a"])(t._labelCollection)&&a._clusterLabels?n=p["a"].getScreenSpaceBoundingBox(t,i,n):Object(r["a"])(t._billboardCollection)&&a._clusterBillboards?n=u["a"].getScreenSpaceBoundingBox(t,i,n):Object(r["a"])(t._pointPrimitiveCollection)&&a._clusterPoints&&(n=v["a"].getScreenSpaceBoundingBox(t,i,n)),j(n,e),a._clusterLabels&&!Object(r["a"])(t._labelCollection)&&Object(r["a"])(t.id)&&M(a,t.id.id)&&Object(r["a"])(t.id._label)){var s=a._collectionIndicesByEntity[t.id.id].labelIndex,l=a._labelCollection.get(s),c=p["a"].getScreenSpaceBoundingBox(l,i,w);j(c,e),n=o["a"].union(n,c,n)}return n}function x(t,i){if(t.clusterShow=!0,!Object(r["a"])(t._labelCollection)&&Object(r["a"])(t.id)&&M(i,t.id.id)&&Object(r["a"])(t.id._label)){var e=i._collectionIndicesByEntity[t.id.id].labelIndex,o=i._labelCollection.get(e);o.clusterShow=!0}}function E(t,i,e,o){var a={billboard:o._clusterBillboardCollection.add(),label:o._clusterLabelCollection.add(),point:o._clusterPointCollection.add()};a.billboard.show=!1,a.point.show=!1,a.label.show=!0,a.label.text=i.toLocaleString(),a.label.id=e,a.billboard.position=a.label.position=a.point.position=t,o._clusterEvent.raiseEvent(e,a)}function M(t,i){return Object(r["a"])(t)&&Object(r["a"])(t._collectionIndicesByEntity[i])&&Object(r["a"])(t._collectionIndicesByEntity[i].labelIndex)}function P(t,i,e,o,a){if(Object(r["a"])(t))for(var n=t.length,s=0;s<n;++s){var l=t.get(s);if(l.clusterShow=!1,l.show&&(a._scene.mode!==f["a"].SCENE3D||o.isPointVisible(l.position))){var c=a._clusterLabels&&Object(r["a"])(l._labelCollection),d=a._clusterBillboards&&Object(r["a"])(l.id._billboard),h=a._clusterPoints&&Object(r["a"])(l.id._point);if(!c||!h&&!d){var u=l.computeScreenSpacePosition(e);Object(r["a"])(u)&&i.push({index:s,collection:t,clustered:!1,coord:u})}}}}var D=new o["a"],I=new o["a"],V=new o["a"];function A(t){return function(i){if(!(Object(r["a"])(i)&&i<.05)&&t.enabled){var e=t._scene,s=t._labelCollection,l=t._billboardCollection,d=t._pointCollection;if((Object(r["a"])(s)||Object(r["a"])(l)||Object(r["a"])(d))&&(t._clusterBillboards||t._clusterLabels||t._clusterPoints)){var p=t._clusterLabelCollection,v=t._clusterBillboardCollection,f=t._clusterPointCollection;Object(r["a"])(p)?p.removeAll():p=t._clusterLabelCollection=new m["a"]({scene:e}),Object(r["a"])(v)?v.removeAll():v=t._clusterBillboardCollection=new _["a"]({scene:e}),Object(r["a"])(f)?f.removeAll():f=t._clusterPointCollection=new b["a"];var y,j,w,M,A,U,R,L,N,B,T,H,k=t._pixelRange,z=t._minimumClusterSize,F=t._previousClusters,G=[],W=t._previousHeight,q=e.camera.positionCartographic.height,X=e.mapProjection.ellipsoid,Z=e.camera.positionWC,J=new c["a"](X,Z),Y=[];t._clusterLabels&&P(s,Y,e,J,t),t._clusterBillboards&&P(l,Y,e,J,t),t._clusterPoints&&P(d,Y,e,J,t);var K=Object(g["a"])(Y,O,C,64,Int32Array);if(q<W)for(w=F.length,y=0;y<w;++y){var Q=F[y];if(J.isPointVisible(Q.position)){var $=u["a"]._computeScreenSpacePosition(h["a"].IDENTITY,Q.position,n["a"].ZERO,a["a"].ZERO,e);if(Object(r["a"])($)){var tt=1-q/W,it=Q.width=Q.width*tt,et=Q.height=Q.height*tt;it=Math.max(it,Q.minimumWidth),et=Math.max(et,Q.minimumHeight);var ot=$.x-.5*it,at=$.y-.5*et,nt=$.x+it,st=$.y+et;for(A=K.range(ot,at,nt,st),U=A.length,B=0,N=[],j=0;j<U;++j)R=A[j],L=Y[R],L.clustered||(++B,T=L.collection,H=L.index,N.push(T.get(H).id));if(B>=z)for(E(Q.position,B,N,t),G.push(Q),j=0;j<U;++j)Y[A[j]].clustered=!0}}}for(w=Y.length,y=0;y<w;++y){var rt=Y[y];if(!rt.clustered){rt.clustered=!0,T=rt.collection,H=rt.index;var lt=T.get(H);M=S(lt,rt.coord,k,t,D);var ct=o["a"].clone(M,I);A=K.range(M.x,M.y,M.x+M.width,M.y+M.height),U=A.length;var dt=n["a"].clone(lt.position);for(B=1,N=[lt.id],j=0;j<U;++j)if(R=A[j],L=Y[R],!L.clustered){var ht=L.collection.get(L.index),ut=S(ht,L.coord,k,t,V);n["a"].add(ht.position,dt,dt),o["a"].union(ct,ut,ct),++B,N.push(ht.id)}if(B>=z){var _t=n["a"].multiplyByScalar(dt,1/B,dt);for(E(_t,B,N,t),G.push({position:_t,width:ct.width,height:ct.height,minimumWidth:M.width,minimumHeight:M.height}),j=0;j<U;++j)Y[A[j]].clustered=!0}else x(lt,t)}}0===p.length&&(p.destroy(),t._clusterLabelCollection=void 0),0===v.length&&(v.destroy(),t._clusterBillboardCollection=void 0),0===f.length&&(f.destroy(),t._clusterPointCollection=void 0),t._previousClusters=G,t._previousHeight=q}}}}function U(t,i,e,o){return function(a){var n=this[t];Object(r["a"])(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});var s,l,c=this._collectionIndicesByEntity[a.id];if(Object(r["a"])(c)||(c=this._collectionIndicesByEntity[a.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),Object(r["a"])(n)&&Object(r["a"])(c[o]))return n.get(c[o]);Object(r["a"])(n)||(n=this[t]=new i({scene:this._scene}));var d=this[e];return d.length>0?(s=d.pop(),l=n.get(s)):(l=n.add(),s=n.length-1),c[o]=s,this._clusterDirty=!0,l}}function R(t,i){var e=t._collectionIndicesByEntity[i];Object(r["a"])(e.billboardIndex)||Object(r["a"])(e.labelIndex)||Object(r["a"])(e.pointIndex)||delete t._collectionIndicesByEntity[i]}function L(t){if(Object(r["a"])(t))for(var i=t.length,e=0;e<i;++e)t.get(e).clusterShow=!0}function N(t){t.enabled||(Object(r["a"])(t._clusterLabelCollection)&&t._clusterLabelCollection.destroy(),Object(r["a"])(t._clusterBillboardCollection)&&t._clusterBillboardCollection.destroy(),Object(r["a"])(t._clusterPointCollection)&&t._clusterPointCollection.destroy(),t._clusterLabelCollection=void 0,t._clusterBillboardCollection=void 0,t._clusterPointCollection=void 0,L(t._labelCollection),L(t._billboardCollection),L(t._pointCollection))}y.prototype._initialize=function(t){this._scene=t;var i=A(this);this._cluster=i,this._removeEventListener=t.camera.changed.addEventListener(i)},Object(l["a"])(y.prototype,{enabled:{get:function(){return this._enabled},set:function(t){this._enabledDirty=t!==this._enabled,this._enabled=t}},pixelRange:{get:function(){return this._pixelRange},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._pixelRange,this._pixelRange=t}},minimumClusterSize:{get:function(){return this._minimumClusterSize},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._minimumClusterSize,this._minimumClusterSize=t}},clusterEvent:{get:function(){return this._clusterEvent}},clusterBillboards:{get:function(){return this._clusterBillboards},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterBillboards,this._clusterBillboards=t}},clusterLabels:{get:function(){return this._clusterLabels},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterLabels,this._clusterLabels=t}},clusterPoints:{get:function(){return this._clusterPoints},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterPoints,this._clusterPoints=t}}}),y.prototype.getLabel=U("_labelCollection",m["a"],"_unusedLabelIndices","labelIndex"),y.prototype.removeLabel=function(t){var i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(Object(r["a"])(this._labelCollection)&&Object(r["a"])(i)&&Object(r["a"])(i.labelIndex)){var e=i.labelIndex;i.labelIndex=void 0,R(this,t.id);var o=this._labelCollection.get(e);o.show=!1,o.text="",o.id=void 0,this._unusedLabelIndices.push(e),this._clusterDirty=!0}},y.prototype.getBillboard=U("_billboardCollection",_["a"],"_unusedBillboardIndices","billboardIndex"),y.prototype.removeBillboard=function(t){var i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(Object(r["a"])(this._billboardCollection)&&Object(r["a"])(i)&&Object(r["a"])(i.billboardIndex)){var e=i.billboardIndex;i.billboardIndex=void 0,R(this,t.id);var o=this._billboardCollection.get(e);o.id=void 0,o.show=!1,o.image=void 0,this._unusedBillboardIndices.push(e),this._clusterDirty=!0}},y.prototype.getPoint=U("_pointCollection",b["a"],"_unusedPointIndices","pointIndex"),y.prototype.removePoint=function(t){var i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(Object(r["a"])(this._pointCollection)&&Object(r["a"])(i)&&Object(r["a"])(i.pointIndex)){var e=i.pointIndex;i.pointIndex=void 0,R(this,t.id);var o=this._pointCollection.get(e);o.show=!1,o.id=void 0,this._unusedPointIndices.push(e),this._clusterDirty=!0}},y.prototype.update=function(t){var i;Object(r["a"])(this._labelCollection)&&this._labelCollection.length>0&&0===this._labelCollection.get(0)._glyphs.length&&(i=t.commandList,t.commandList=[],this._labelCollection.update(t),t.commandList=i),Object(r["a"])(this._billboardCollection)&&this._billboardCollection.length>0&&!Object(r["a"])(this._billboardCollection.get(0).width)&&(i=t.commandList,t.commandList=[],this._billboardCollection.update(t),t.commandList=i),this._enabledDirty&&(this._enabledDirty=!1,N(this),this._clusterDirty=!0),this._clusterDirty&&(this._clusterDirty=!1,this._cluster()),Object(r["a"])(this._clusterLabelCollection)&&this._clusterLabelCollection.update(t),Object(r["a"])(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(t),Object(r["a"])(this._clusterPointCollection)&&this._clusterPointCollection.update(t),Object(r["a"])(this._labelCollection)&&this._labelCollection.update(t),Object(r["a"])(this._billboardCollection)&&this._billboardCollection.update(t),Object(r["a"])(this._pointCollection)&&this._pointCollection.update(t)},y.prototype.destroy=function(){this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),Object(r["a"])(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1},i["a"]=y},"4df0":function(t,i,e){"use strict";var o=e("dd06"),a=e("be18"),n=e("bd8d"),s=e("9541"),r=e("2f63"),l=e("77bc"),c=e("a6ac"),d=e("1ac2"),h=e("d940"),u=e("452d"),_=e("c2eb"),p=e("eace"),m=e("ac9c"),v=e("2d75"),b=e("d6db"),f=e("3a8e"),g=e("b83c"),y=e("9171"),O=e("3ba2"),C=e("c6e8"),j=e("ea07"),w=new n["a"],S=a["a"].ZERO,x=new a["a"],E=new p["a"];function M(t){this.id=t,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function P(t,i){C["a"].call(this,{entity:t,scene:i,geometryOptions:new M(t),geometryPropertyName:"ellipse",observedPropertyNames:["availability","position","ellipse"]}),this._onEntityPropertyChanged(t,"ellipse",t.ellipse,void 0)}function D(t,i,e){y["a"].call(this,t,i,e)}Object(r["a"])(Object.create)&&(P.prototype=Object.create(C["a"].prototype),P.prototype.constructor=P),P.prototype.createFillGeometryInstance=function(t){var i,e=this._entity,o=e.isAvailable(t),a={show:new m["a"](o&&e.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),distanceDisplayCondition:l["a"].fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0,color:void 0};this._materialProperty instanceof g["a"]&&(Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||o)&&(i=this._materialProperty.color.getValue(t,w)),Object(r["a"])(i)||(i=n["a"].WHITE),a.color=s["a"].fromColor(i));return Object(r["a"])(this._options.offsetAttribute)&&(a.offset=_["a"].fromCartesian3(j["a"].getValueOrDefault(this._terrainOffsetProperty,t,S,x))),new h["a"]({id:e,geometry:new c["a"](this._options),attributes:a})},P.prototype.createOutlineGeometryInstance=function(t){var i=this._entity,e=i.isAvailable(t),o=j["a"].getValueOrDefault(this._outlineColorProperty,t,n["a"].BLACK,w),a=this._distanceDisplayConditionProperty.getValue(t),c={show:new m["a"](e&&i.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:s["a"].fromColor(o),distanceDisplayCondition:l["a"].fromDistanceDisplayCondition(a),offset:void 0};return Object(r["a"])(this._options.offsetAttribute)&&(c.offset=_["a"].fromCartesian3(j["a"].getValueOrDefault(this._terrainOffsetProperty,t,S,x))),new h["a"]({id:i,geometry:new d["a"](this._options),attributes:c})},P.prototype._computeCenter=function(t,i){return j["a"].getValueOrUndefined(this._entity.position,t,i)},P.prototype._isHidden=function(t,i){var e=t.position;return!Object(r["a"])(e)||!Object(r["a"])(i.semiMajorAxis)||!Object(r["a"])(i.semiMinorAxis)||O["a"].prototype._isHidden.call(this,t,i)},P.prototype._isDynamic=function(t,i){return!t.position.isConstant||!i.semiMajorAxis.isConstant||!i.semiMinorAxis.isConstant||!j["a"].isConstant(i.rotation)||!j["a"].isConstant(i.height)||!j["a"].isConstant(i.extrudedHeight)||!j["a"].isConstant(i.granularity)||!j["a"].isConstant(i.stRotation)||!j["a"].isConstant(i.outlineWidth)||!j["a"].isConstant(i.numberOfVerticalLines)||!j["a"].isConstant(i.zIndex)||this._onTerrain&&!j["a"].isConstant(this._materialProperty)},P.prototype._setStaticOptions=function(t,i){var e=j["a"].getValueOrUndefined(i.height,u["a"].MINIMUM_VALUE),a=j["a"].getValueOrDefault(i.heightReference,u["a"].MINIMUM_VALUE,v["a"].NONE),n=j["a"].getValueOrUndefined(i.extrudedHeight,u["a"].MINIMUM_VALUE),s=j["a"].getValueOrDefault(i.extrudedHeightReference,u["a"].MINIMUM_VALUE,v["a"].NONE);Object(r["a"])(n)&&!Object(r["a"])(e)&&(e=0);var l=this._options;l.vertexFormat=this._materialProperty instanceof g["a"]?f["a"].VERTEX_FORMAT:b["a"].MaterialSupport.TEXTURED.vertexFormat,l.center=t.position.getValue(u["a"].MINIMUM_VALUE,l.center),l.semiMajorAxis=i.semiMajorAxis.getValue(u["a"].MINIMUM_VALUE,l.semiMajorAxis),l.semiMinorAxis=i.semiMinorAxis.getValue(u["a"].MINIMUM_VALUE,l.semiMinorAxis),l.rotation=j["a"].getValueOrUndefined(i.rotation,u["a"].MINIMUM_VALUE),l.granularity=j["a"].getValueOrUndefined(i.granularity,u["a"].MINIMUM_VALUE),l.stRotation=j["a"].getValueOrUndefined(i.stRotation,u["a"].MINIMUM_VALUE),l.numberOfVerticalLines=j["a"].getValueOrUndefined(i.numberOfVerticalLines,u["a"].MINIMUM_VALUE),l.offsetAttribute=C["a"].computeGeometryOffsetAttribute(e,a,n,s),l.height=C["a"].getGeometryHeight(e,a),n=C["a"].getGeometryExtrudedHeight(n,s),n===C["a"].CLAMP_TO_GROUND&&(n=o["a"].getMinimumMaximumHeights(c["a"].computeRectangle(l,E)).minimumTerrainHeight),l.extrudedHeight=n},P.DynamicGeometryUpdater=D,Object(r["a"])(Object.create)&&(D.prototype=Object.create(y["a"].prototype),D.prototype.constructor=D),D.prototype._isHidden=function(t,i,e){var o=this._options;return!Object(r["a"])(o.center)||!Object(r["a"])(o.semiMajorAxis)||!Object(r["a"])(o.semiMinorAxis)||y["a"].prototype._isHidden.call(this,t,i,e)},D.prototype._setOptions=function(t,i,e){var a=this._options,n=j["a"].getValueOrUndefined(i.height,e),s=j["a"].getValueOrDefault(i.heightReference,e,v["a"].NONE),l=j["a"].getValueOrUndefined(i.extrudedHeight,e),d=j["a"].getValueOrDefault(i.extrudedHeightReference,e,v["a"].NONE);Object(r["a"])(l)&&!Object(r["a"])(n)&&(n=0),a.center=j["a"].getValueOrUndefined(t.position,e,a.center),a.semiMajorAxis=j["a"].getValueOrUndefined(i.semiMajorAxis,e),a.semiMinorAxis=j["a"].getValueOrUndefined(i.semiMinorAxis,e),a.rotation=j["a"].getValueOrUndefined(i.rotation,e),a.granularity=j["a"].getValueOrUndefined(i.granularity,e),a.stRotation=j["a"].getValueOrUndefined(i.stRotation,e),a.numberOfVerticalLines=j["a"].getValueOrUndefined(i.numberOfVerticalLines,e),a.offsetAttribute=C["a"].computeGeometryOffsetAttribute(n,s,l,d),a.height=C["a"].getGeometryHeight(n,s),l=C["a"].getGeometryExtrudedHeight(l,d),l===C["a"].CLAMP_TO_GROUND&&(l=o["a"].getMinimumMaximumHeights(c["a"].computeRectangle(a,E)).minimumTerrainHeight),a.extrudedHeight=l},i["a"]=P},"509b":function(t,i,e){"use strict";var o=e("be18"),a=e("bef8"),n=e("71ce"),s=e("535a"),r=e("2f63"),l=e("9f1d"),c=e("21d7"),d=e("93da"),h=e("df07"),u=e("52f0"),_=e("0260"),p=e("f806"),m=e("a0f5"),v=e("acad"),b=e("2d75"),f=e("99f6"),g=e("4b92"),y=e("2bbe"),O=e("3422"),C=e("0a43"),j=e("108c"),w=e("1ce0"),S=e("dde7");function x(t){this._definitionChanged=new c["a"],this._show=void 0,this._showSubscription=void 0,this._semiMajorAxis=void 0,this._semiMajorAxisSubscription=void 0,this._semiMinorAxis=void 0,this._semiMinorAxisSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._numberOfVerticalLines=void 0,this._numberOfVerticalLinesSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(Object(s["a"])(t,s["a"].EMPTY_OBJECT))}Object(l["a"])(x.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:Object(C["a"])("show"),semiMajorAxis:Object(C["a"])("semiMajorAxis"),semiMinorAxis:Object(C["a"])("semiMinorAxis"),height:Object(C["a"])("height"),heightReference:Object(C["a"])("heightReference"),extrudedHeight:Object(C["a"])("extrudedHeight"),extrudedHeightReference:Object(C["a"])("extrudedHeightReference"),rotation:Object(C["a"])("rotation"),stRotation:Object(C["a"])("stRotation"),granularity:Object(C["a"])("granularity"),fill:Object(C["a"])("fill"),material:Object(S["a"])("material"),outline:Object(C["a"])("outline"),outlineColor:Object(C["a"])("outlineColor"),outlineWidth:Object(C["a"])("outlineWidth"),numberOfVerticalLines:Object(C["a"])("numberOfVerticalLines"),shadows:Object(C["a"])("shadows"),distanceDisplayCondition:Object(C["a"])("distanceDisplayCondition"),classificationType:Object(C["a"])("classificationType"),zIndex:Object(C["a"])("zIndex")}),x.prototype.clone=function(t){return Object(r["a"])(t)?(t.show=this.show,t.semiMajorAxis=this.semiMajorAxis,t.semiMinorAxis=this.semiMinorAxis,t.height=this.height,t.heightReference=this.heightReference,t.extrudedHeight=this.extrudedHeight,t.extrudedHeightReference=this.extrudedHeightReference,t.rotation=this.rotation,t.stRotation=this.stRotation,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.numberOfVerticalLines=this.numberOfVerticalLines,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t):new x(this)},x.prototype.merge=function(t){this.show=Object(s["a"])(this.show,t.show),this.semiMajorAxis=Object(s["a"])(this.semiMajorAxis,t.semiMajorAxis),this.semiMinorAxis=Object(s["a"])(this.semiMinorAxis,t.semiMinorAxis),this.height=Object(s["a"])(this.height,t.height),this.heightReference=Object(s["a"])(this.heightReference,t.heightReference),this.extrudedHeight=Object(s["a"])(this.extrudedHeight,t.extrudedHeight),this.extrudedHeightReference=Object(s["a"])(this.extrudedHeightReference,t.extrudedHeightReference),this.rotation=Object(s["a"])(this.rotation,t.rotation),this.stRotation=Object(s["a"])(this.stRotation,t.stRotation),this.granularity=Object(s["a"])(this.granularity,t.granularity),this.fill=Object(s["a"])(this.fill,t.fill),this.material=Object(s["a"])(this.material,t.material),this.outline=Object(s["a"])(this.outline,t.outline),this.outlineColor=Object(s["a"])(this.outlineColor,t.outlineColor),this.outlineWidth=Object(s["a"])(this.outlineWidth,t.outlineWidth),this.numberOfVerticalLines=Object(s["a"])(this.numberOfVerticalLines,t.numberOfVerticalLines),this.shadows=Object(s["a"])(this.shadows,t.shadows),this.distanceDisplayCondition=Object(s["a"])(this.distanceDisplayCondition,t.distanceDisplayCondition),this.classificationType=Object(s["a"])(this.classificationType,t.classificationType),this.zIndex=Object(s["a"])(this.zIndex,t.zIndex)};var E=x;function M(t){this._definitionChanged=new c["a"],this._show=void 0,this._showSubscription=void 0,this._radii=void 0,this._radiiSubscription=void 0,this._innerRadii=void 0,this._innerRadiiSubscription=void 0,this._minimumClock=void 0,this._minimumClockSubscription=void 0,this._maximumClock=void 0,this._maximumClockSubscription=void 0,this._minimumCone=void 0,this._minimumConeSubscription=void 0,this._maximumCone=void 0,this._maximumConeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._stackPartitions=void 0,this._stackPartitionsSubscription=void 0,this._slicePartitions=void 0,this._slicePartitionsSubscription=void 0,this._subdivisions=void 0,this._subdivisionsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(Object(s["a"])(t,s["a"].EMPTY_OBJECT))}Object(l["a"])(M.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:Object(C["a"])("show"),radii:Object(C["a"])("radii"),innerRadii:Object(C["a"])("innerRadii"),minimumClock:Object(C["a"])("minimumClock"),maximumClock:Object(C["a"])("maximumClock"),minimumCone:Object(C["a"])("minimumCone"),maximumCone:Object(C["a"])("maximumCone"),heightReference:Object(C["a"])("heightReference"),fill:Object(C["a"])("fill"),material:Object(S["a"])("material"),outline:Object(C["a"])("outline"),outlineColor:Object(C["a"])("outlineColor"),outlineWidth:Object(C["a"])("outlineWidth"),stackPartitions:Object(C["a"])("stackPartitions"),slicePartitions:Object(C["a"])("slicePartitions"),subdivisions:Object(C["a"])("subdivisions"),shadows:Object(C["a"])("shadows"),distanceDisplayCondition:Object(C["a"])("distanceDisplayCondition")}),M.prototype.clone=function(t){return Object(r["a"])(t)?(t.show=this.show,t.radii=this.radii,t.innerRadii=this.innerRadii,t.minimumClock=this.minimumClock,t.maximumClock=this.maximumClock,t.minimumCone=this.minimumCone,t.maximumCone=this.maximumCone,t.heightReference=this.heightReference,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.stackPartitions=this.stackPartitions,t.slicePartitions=this.slicePartitions,t.subdivisions=this.subdivisions,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new M(this)},M.prototype.merge=function(t){this.show=Object(s["a"])(this.show,t.show),this.radii=Object(s["a"])(this.radii,t.radii),this.innerRadii=Object(s["a"])(this.innerRadii,t.innerRadii),this.minimumClock=Object(s["a"])(this.minimumClock,t.minimumClock),this.maximumClock=Object(s["a"])(this.maximumClock,t.maximumClock),this.minimumCone=Object(s["a"])(this.minimumCone,t.minimumCone),this.maximumCone=Object(s["a"])(this.maximumCone,t.maximumCone),this.heightReference=Object(s["a"])(this.heightReference,t.heightReference),this.fill=Object(s["a"])(this.fill,t.fill),this.material=Object(s["a"])(this.material,t.material),this.outline=Object(s["a"])(this.outline,t.outline),this.outlineColor=Object(s["a"])(this.outlineColor,t.outlineColor),this.outlineWidth=Object(s["a"])(this.outlineWidth,t.outlineWidth),this.stackPartitions=Object(s["a"])(this.stackPartitions,t.stackPartitions),this.slicePartitions=Object(s["a"])(this.slicePartitions,t.slicePartitions),this.subdivisions=Object(s["a"])(this.subdivisions,t.subdivisions),this.shadows=Object(s["a"])(this.shadows,t.shadows),this.distanceDisplayCondition=Object(s["a"])(this.distanceDisplayCondition,t.distanceDisplayCondition)};var P=M,D=e("e0b6"),I=e("d888"),V=e("bd04"),A=e("7fcb"),U=e("a796"),R=e("d9c4"),L=e("05b6"),N=e("8f3e"),B=e("ea07"),T=e("f0a0"),H=e("298a"),k=e("9816"),z=new a["a"];function F(t){return new y["a"](t)}function G(t){return Object(C["a"])(t,void 0,F)}function W(t,i){return Object(C["a"])(t,void 0,(function(t){return t instanceof i?t:new i(t)}))}function q(t){t=Object(s["a"])(t,s["a"].EMPTY_OBJECT);var i=t.id;Object(r["a"])(i)||(i=Object(n["a"])()),this._availability=void 0,this._id=i,this._definitionChanged=new c["a"],this._name=t.name,this._show=Object(s["a"])(t.show,!0),this._parent=void 0,this._propertyNames=["billboard","box","corridor","cylinder","description","ellipse","ellipsoid","label","model","orientation","path","plane","point","polygon","polyline","polylineVolume","position","properties","rectangle","viewFrom","wall"],this._billboard=void 0,this._billboardSubscription=void 0,this._box=void 0,this._boxSubscription=void 0,this._corridor=void 0,this._corridorSubscription=void 0,this._cylinder=void 0,this._cylinderSubscription=void 0,this._description=void 0,this._descriptionSubscription=void 0,this._ellipse=void 0,this._ellipseSubscription=void 0,this._ellipsoid=void 0,this._ellipsoidSubscription=void 0,this._label=void 0,this._labelSubscription=void 0,this._model=void 0,this._modelSubscription=void 0,this._orientation=void 0,this._orientationSubscription=void 0,this._path=void 0,this._pathSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._point=void 0,this._pointSubscription=void 0,this._polygon=void 0,this._polygonSubscription=void 0,this._polyline=void 0,this._polylineSubscription=void 0,this._polylineVolume=void 0,this._polylineVolumeSubscription=void 0,this._position=void 0,this._positionSubscription=void 0,this._properties=void 0,this._propertiesSubscription=void 0,this._rectangle=void 0,this._rectangleSubscription=void 0,this._viewFrom=void 0,this._viewFromSubscription=void 0,this._wall=void 0,this._wallSubscription=void 0,this._children=[],this.entityCollection=void 0,this.parent=t.parent,this.merge(t)}function X(t,i,e){for(var o=i.length,a=0;a<o;a++){var n=i[a],s=n._show,r=!e&&s,l=e&&s;r!==l&&X(n,n._children,e)}t._definitionChanged.raiseEvent(t,"isShowing",e,!e)}Object(l["a"])(q.prototype,{availability:Object(j["a"])("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:Object(j["a"])("name"),show:{get:function(){return this._show},set:function(t){if(t!==this._show){var i=this.isShowing;this._show=t;var e=this.isShowing;i!==e&&X(this,this._children,e),this._definitionChanged.raiseEvent(this,"show",t,!t)}}},isShowing:{get:function(){return this._show&&(!Object(r["a"])(this.entityCollection)||this.entityCollection.show)&&(!Object(r["a"])(this._parent)||this._parent.isShowing)}},parent:{get:function(){return this._parent},set:function(t){var i=this._parent;if(i!==t){var e=this.isShowing;if(Object(r["a"])(i)){var o=i._children.indexOf(this);i._children.splice(o,1)}this._parent=t,Object(r["a"])(t)&&t._children.push(this);var a=this.isShowing;e!==a&&X(this,this._children,a),this._definitionChanged.raiseEvent(this,"parent",t,i)}}},propertyNames:{get:function(){return this._propertyNames}},billboard:W("billboard",f["a"]),box:W("box",g["a"]),corridor:W("corridor",O["a"]),cylinder:W("cylinder",w["a"]),description:Object(C["a"])("description"),ellipse:W("ellipse",E),ellipsoid:W("ellipsoid",P),label:W("label",D["a"]),model:W("model",I["a"]),orientation:Object(C["a"])("orientation"),path:W("path",V["a"]),plane:W("plane",A["a"]),point:W("point",U["a"]),polygon:W("polygon",R["a"]),polyline:W("polyline",L["a"]),polylineVolume:W("polylineVolume",N["a"]),properties:W("properties",T["a"]),position:G("position"),rectangle:W("rectangle",H["a"]),viewFrom:Object(C["a"])("viewFrom"),wall:W("wall",k["a"])}),q.prototype.isAvailable=function(t){var i=this._availability;return!Object(r["a"])(i)||i.contains(t)},q.prototype.addProperty=function(t){var i=this._propertyNames;i.push(t),Object.defineProperty(this,t,Object(j["a"])(t,!0))},q.prototype.removeProperty=function(t){var i=this._propertyNames,e=i.indexOf(t);this._propertyNames.splice(e,1),delete this[t]},q.prototype.merge=function(t){this.name=Object(s["a"])(this.name,t.name),this.availability=Object(s["a"])(this.availability,t.availability);for(var i=this._propertyNames,e=Object(r["a"])(t._propertyNames)?t._propertyNames:Object.keys(t),o=e.length,a=0;a<o;a++){var n=e[a];if("parent"!==n){var l=this[n],c=t[n];Object(r["a"])(l)||-1!==i.indexOf(n)||this.addProperty(n),Object(r["a"])(c)&&(Object(r["a"])(l)?Object(r["a"])(l.merge)&&l.merge(c):Object(r["a"])(c.merge)&&Object(r["a"])(c.clone)?this[n]=c.clone():this[n]=c)}}};var Z=new h["a"],J=new o["a"],Y=new _["a"];q.prototype.computeModelMatrix=function(t,i){var e=B["a"].getValueOrUndefined(this._position,t,J);if(Object(r["a"])(e)){var o=B["a"].getValueOrUndefined(this._orientation,t,Y);return i=Object(r["a"])(o)?u["a"].fromRotationTranslation(h["a"].fromQuaternion(o,Z),e,i):p["a"].eastNorthUpToFixedFrame(e,void 0,i),i}},q.prototype.computeModelMatrixForHeightReference=function(t,i,e,a,n){var s=B["a"].getValueOrDefault(i,t,b["a"].NONE),l=B["a"].getValueOrUndefined(this._position,t,J);if(s===b["a"].NONE||!Object(r["a"])(l)||o["a"].equalsEpsilon(l,o["a"].ZERO,d["a"].EPSILON8))return this.computeModelMatrix(t,n);var c=a.cartesianToCartographic(l,z);s===b["a"].CLAMP_TO_GROUND?c.height=e:c.height+=e,l=a.cartographicToCartesian(c,l);var _=B["a"].getValueOrUndefined(this._orientation,t,Y);return n=Object(r["a"])(_)?u["a"].fromRotationTranslation(h["a"].fromQuaternion(_,Z),l,n):p["a"].eastNorthUpToFixedFrame(l,void 0,n),n},q.supportsMaterialsforEntitiesOnTerrain=function(t){return v["a"].supportsMaterials(t)},q.supportsPolylinesOnTerrain=function(t){return m["a"].isSupported(t)};i["a"]=q},"7d5d":function(t,i,e){"use strict";var o=e("933b"),a=e("71ce"),n=e("2f63"),s=e("9f1d"),r=e("21d7"),l=e("452d"),c=e("5ed2"),d=e("283e"),h=e("ea72"),u=e("509b"),_={id:void 0};function p(t){if(t._firing)t._refire=!0;else if(0===t._suspendCount){var i=t._addedEntities,e=t._removedEntities,o=t._changedEntities;if(0!==o.length||0!==i.length||0!==e.length){t._firing=!0;do{t._refire=!1;var a=i.values.slice(0),n=e.values.slice(0),s=o.values.slice(0);i.removeAll(),e.removeAll(),o.removeAll(),t._collectionChanged.raiseEvent(t,a,n,s)}while(t._refire);t._firing=!1}}}function m(t){this._owner=t,this._entities=new o["a"],this._addedEntities=new o["a"],this._removedEntities=new o["a"],this._changedEntities=new o["a"],this._suspendCount=0,this._collectionChanged=new r["a"],this._id=Object(a["a"])(),this._show=!0,this._firing=!1,this._refire=!1}m.prototype.suspendEvents=function(){this._suspendCount++},m.prototype.resumeEvents=function(){this._suspendCount--,p(this)},m.collectionChangedEventCallback=void 0,Object(s["a"])(m.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._entities.values}},show:{get:function(){return this._show},set:function(t){if(t!==this._show){var i;this.suspendEvents();var e=[],o=this._entities.values,a=o.length;for(i=0;i<a;i++)e.push(o[i].isShowing);for(this._show=t,i=0;i<a;i++){var n=e[i],s=o[i];n!==s.isShowing&&s.definitionChanged.raiseEvent(s,"isShowing",s.isShowing,n)}this.resumeEvents()}}},owner:{get:function(){return this._owner}}}),m.prototype.computeAvailability=function(){for(var t=l["a"].MAXIMUM_VALUE,i=l["a"].MINIMUM_VALUE,e=this._entities.values,o=0,a=e.length;o<a;o++){var s=e[o],r=s.availability;if(Object(n["a"])(r)){var d=r.start,u=r.stop;c["a"].lessThan(d,t)&&!d.equals(l["a"].MINIMUM_VALUE)&&(t=d),c["a"].greaterThan(u,i)&&!u.equals(l["a"].MAXIMUM_VALUE)&&(i=u)}}return l["a"].MAXIMUM_VALUE.equals(t)&&(t=l["a"].MINIMUM_VALUE),l["a"].MINIMUM_VALUE.equals(i)&&(i=l["a"].MAXIMUM_VALUE),new h["a"]({start:t,stop:i})},m.prototype.add=function(t){t instanceof u["a"]||(t=new u["a"](t));var i=t.id,e=this._entities;if(e.contains(i))throw new d["a"]("An entity with id "+i+" already exists in this collection.");return t.entityCollection=this,e.set(i,t),this._removedEntities.remove(i)||this._addedEntities.set(i,t),t.definitionChanged.addEventListener(m.prototype._onEntityDefinitionChanged,this),p(this),t},m.prototype.remove=function(t){return!!Object(n["a"])(t)&&this.removeById(t.id)},m.prototype.contains=function(t){return this._entities.get(t.id)===t},m.prototype.removeById=function(t){if(!Object(n["a"])(t))return!1;var i=this._entities,e=i.get(t);return!!this._entities.remove(t)&&(this._addedEntities.remove(t)||(this._removedEntities.set(t,e),this._changedEntities.remove(t)),this._entities.remove(t),e.definitionChanged.removeEventListener(m.prototype._onEntityDefinitionChanged,this),p(this),!0)},m.prototype.removeAll=function(){for(var t=this._entities,i=t.length,e=t.values,o=this._addedEntities,a=this._removedEntities,s=0;s<i;s++){var r=e[s],l=r.id,c=o.get(l);Object(n["a"])(c)||(r.definitionChanged.removeEventListener(m.prototype._onEntityDefinitionChanged,this),a.set(l,r))}t.removeAll(),o.removeAll(),this._changedEntities.removeAll(),p(this)},m.prototype.getById=function(t){return this._entities.get(t)},m.prototype.getOrCreateEntity=function(t){var i=this._entities.get(t);return Object(n["a"])(i)||(_.id=t,i=new u["a"](_),this.add(i)),i},m.prototype._onEntityDefinitionChanged=function(t){var i=t.id;this._addedEntities.contains(i)||this._changedEntities.set(i,t),p(this)},i["a"]=m},"8be7":function(t,i,e){"use strict";var o=e("be18"),a=e("bd8d"),n=e("9541"),s=e("535a"),r=e("2f63"),l=e("9f1d"),c=e("aee6"),d=e("77bc"),h=e("6cae"),u=e("bcbd"),_=e("d940"),p=e("0276"),m=e("452d"),v=e("52f0"),b=e("c2eb"),f=e("ac9c"),g=e("2d75"),y=e("d6db"),O=e("3a8e"),C=e("894b"),j=e("a307"),w=e("b83c"),S=e("9171"),x=e("3ba2"),E=e("6fa2"),M=e("40b2"),P=e("ea07"),D=new w["a"](a["a"].WHITE),I=o["a"].ZERO,V=new o["a"],A=new o["a"],U=new o["a"],R=new a["a"],L=new o["a"](1,1,1);function N(t){this.id=t,this.vertexFormat=void 0,this.radii=void 0,this.innerRadii=void 0,this.minimumClock=void 0,this.maximumClock=void 0,this.minimumCone=void 0,this.maximumCone=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function B(t,i){x["a"].call(this,{entity:t,scene:i,geometryOptions:new N(t),geometryPropertyName:"ellipsoid",observedPropertyNames:["availability","position","orientation","ellipsoid"]}),this._onEntityPropertyChanged(t,"ellipsoid",t.ellipsoid,void 0)}function T(t,i,e){S["a"].call(this,t,i,e),this._scene=t._scene,this._modelMatrix=new v["a"],this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new o["a"],this._material={}}Object(r["a"])(Object.create)&&(B.prototype=Object.create(x["a"].prototype),B.prototype.constructor=B),Object(l["a"])(B.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),B.prototype.createFillGeometryInstance=function(t,i,e){var o,s,l=this._entity,c=l.isAvailable(t),u=new f["a"](c&&l.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),p=this._distanceDisplayConditionProperty.getValue(t),m=d["a"].fromDistanceDisplayCondition(p),v={show:u,distanceDisplayCondition:m,color:void 0,offset:void 0};this._materialProperty instanceof w["a"]&&(Object(r["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||c)&&(s=this._materialProperty.color.getValue(t,R)),Object(r["a"])(s)||(s=a["a"].WHITE),o=n["a"].fromColor(s),v.color=o);return Object(r["a"])(this._options.offsetAttribute)&&(v.offset=b["a"].fromCartesian3(P["a"].getValueOrDefault(this._terrainOffsetProperty,t,I,V))),new _["a"]({id:l,geometry:new h["a"](this._options),modelMatrix:i?void 0:l.computeModelMatrixForHeightReference(t,l.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,e),attributes:v})},B.prototype.createOutlineGeometryInstance=function(t,i,e){var o=this._entity,s=o.isAvailable(t),l=P["a"].getValueOrDefault(this._outlineColorProperty,t,a["a"].BLACK,R),c=this._distanceDisplayConditionProperty.getValue(t),h={show:new f["a"](s&&o.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:n["a"].fromColor(l),distanceDisplayCondition:d["a"].fromDistanceDisplayCondition(c),offset:void 0};return Object(r["a"])(this._options.offsetAttribute)&&(h.offset=b["a"].fromCartesian3(P["a"].getValueOrDefault(this._terrainOffsetProperty,t,I,V))),new _["a"]({id:o,geometry:new u["a"](this._options),modelMatrix:i?void 0:o.computeModelMatrixForHeightReference(t,o.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,e),attributes:h})},B.prototype._computeCenter=function(t,i){return P["a"].getValueOrUndefined(this._entity.position,t,i)},B.prototype._isHidden=function(t,i){return!Object(r["a"])(t.position)||!Object(r["a"])(i.radii)||x["a"].prototype._isHidden.call(this,t,i)},B.prototype._isDynamic=function(t,i){return!t.position.isConstant||!P["a"].isConstant(t.orientation)||!i.radii.isConstant||!P["a"].isConstant(i.innerRadii)||!P["a"].isConstant(i.stackPartitions)||!P["a"].isConstant(i.slicePartitions)||!P["a"].isConstant(i.outlineWidth)||!P["a"].isConstant(i.minimumClock)||!P["a"].isConstant(i.maximumClock)||!P["a"].isConstant(i.minimumCone)||!P["a"].isConstant(i.maximumCone)||!P["a"].isConstant(i.subdivisions)},B.prototype._setStaticOptions=function(t,i){var e=P["a"].getValueOrDefault(i.heightReference,m["a"].MINIMUM_VALUE,g["a"].NONE),o=this._options;o.vertexFormat=this._materialProperty instanceof w["a"]?O["a"].VERTEX_FORMAT:y["a"].MaterialSupport.TEXTURED.vertexFormat,o.radii=i.radii.getValue(m["a"].MINIMUM_VALUE,o.radii),o.innerRadii=P["a"].getValueOrUndefined(i.innerRadii,o.radii),o.minimumClock=P["a"].getValueOrUndefined(i.minimumClock,m["a"].MINIMUM_VALUE),o.maximumClock=P["a"].getValueOrUndefined(i.maximumClock,m["a"].MINIMUM_VALUE),o.minimumCone=P["a"].getValueOrUndefined(i.minimumCone,m["a"].MINIMUM_VALUE),o.maximumCone=P["a"].getValueOrUndefined(i.maximumCone,m["a"].MINIMUM_VALUE),o.stackPartitions=P["a"].getValueOrUndefined(i.stackPartitions,m["a"].MINIMUM_VALUE),o.slicePartitions=P["a"].getValueOrUndefined(i.slicePartitions,m["a"].MINIMUM_VALUE),o.subdivisions=P["a"].getValueOrUndefined(i.subdivisions,m["a"].MINIMUM_VALUE),o.offsetAttribute=e!==g["a"].NONE?p["a"].ALL:void 0},B.prototype._onEntityPropertyChanged=E["a"],B.DynamicGeometryUpdater=T,Object(r["a"])(Object.create)&&(T.prototype=Object.create(S["a"].prototype),T.prototype.constructor=T),T.prototype.update=function(t){var i=this._entity,e=i.ellipsoid;if(!i.isShowing||!i.isAvailable(t)||!P["a"].getValueOrDefault(e.show,t,!0))return Object(r["a"])(this._primitive)&&(this._primitive.show=!1),void(Object(r["a"])(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));var l=P["a"].getValueOrUndefined(e.radii,t,A),h=Object(r["a"])(l)?i.computeModelMatrixForHeightReference(t,e.heightReference,.5*l.z,this._scene.mapProjection.ellipsoid,this._modelMatrix):void 0;if(!Object(r["a"])(h)||!Object(r["a"])(l))return Object(r["a"])(this._primitive)&&(this._primitive.show=!1),void(Object(r["a"])(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));var u=P["a"].getValueOrDefault(e.fill,t,!0),_=P["a"].getValueOrDefault(e.outline,t,!1),m=P["a"].getValueOrClonedDefault(e.outlineColor,t,a["a"].BLACK,R),w=M["a"].getValue(t,Object(s["a"])(e.material,D),this._material),S=P["a"].getValueOrUndefined(e.innerRadii,t,U),x=P["a"].getValueOrUndefined(e.minimumClock,t),E=P["a"].getValueOrUndefined(e.maximumClock,t),N=P["a"].getValueOrUndefined(e.minimumCone,t),B=P["a"].getValueOrUndefined(e.maximumCone,t),T=P["a"].getValueOrUndefined(e.stackPartitions,t),H=P["a"].getValueOrUndefined(e.slicePartitions,t),k=P["a"].getValueOrUndefined(e.subdivisions,t),z=P["a"].getValueOrDefault(e.outlineWidth,t,1),F=P["a"].getValueOrDefault(e.heightReference,t,g["a"].NONE),G=F!==g["a"].NONE?p["a"].ALL:void 0,W=this._scene.mode,q=W===j["a"].SCENE3D&&F===g["a"].NONE,X=this._options,Z=this._geometryUpdater.shadowsProperty.getValue(t),J=this._geometryUpdater.distanceDisplayConditionProperty,Y=J.getValue(t),K=P["a"].getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,t,I,V),Q=!q||this._lastSceneMode!==W||!Object(r["a"])(this._primitive)||X.stackPartitions!==T||X.slicePartitions!==H||Object(r["a"])(S)&&!o["a"].equals(X.innerRadii!==S)||X.minimumClock!==x||X.maximumClock!==E||X.minimumCone!==N||X.maximumCone!==B||X.subdivisions!==k||this._lastOutlineWidth!==z||X.offsetAttribute!==G;if(Q){var $=this._primitives;if($.removeAndDestroy(this._primitive),$.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=W,this._lastOutlineWidth=z,X.stackPartitions=T,X.slicePartitions=H,X.subdivisions=k,X.offsetAttribute=G,X.radii=o["a"].clone(q?L:l,X.radii),Object(r["a"])(S))if(q){var tt=o["a"].magnitude(l);X.innerRadii=o["a"].fromElements(S.x/tt,S.y/tt,S.z/tt,X.innerRadii)}else X.innerRadii=o["a"].clone(S,X.innerRadii);else X.innerRadii=void 0;X.minimumClock=x,X.maximumClock=E,X.minimumCone=N,X.maximumCone=B;var it=new y["a"]({material:w,translucent:w.isTranslucent(),closed:!0});X.vertexFormat=it.vertexFormat;var et=this._geometryUpdater.createFillGeometryInstance(t,q,this._modelMatrix);this._primitive=$.add(new C["a"]({geometryInstances:et,appearance:it,asynchronous:!1,shadows:Z}));var ot=this._geometryUpdater.createOutlineGeometryInstance(t,q,this._modelMatrix);this._outlinePrimitive=$.add(new C["a"]({geometryInstances:ot,appearance:new O["a"]({flat:!0,translucent:255!==ot.attributes.color.value[3],renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(z)}}),asynchronous:!1,shadows:Z})),this._lastShow=u,this._lastOutlineShow=_,this._lastOutlineColor=a["a"].clone(m,this._lastOutlineColor),this._lastDistanceDisplayCondition=Y,this._lastOffset=o["a"].clone(K,this._lastOffset)}else if(this._primitive.ready){var at=this._primitive,nt=this._outlinePrimitive;at.show=!0,nt.show=!0,at.appearance.material=w;var st=this._attributes;Object(r["a"])(st)||(st=at.getGeometryInstanceAttributes(i),this._attributes=st),u!==this._lastShow&&(st.show=f["a"].toValue(u,st.show),this._lastShow=u);var rt=this._outlineAttributes;Object(r["a"])(rt)||(rt=nt.getGeometryInstanceAttributes(i),this._outlineAttributes=rt),_!==this._lastOutlineShow&&(rt.show=f["a"].toValue(_,rt.show),this._lastOutlineShow=_),a["a"].equals(m,this._lastOutlineColor)||(rt.color=n["a"].toValue(m,rt.color),a["a"].clone(m,this._lastOutlineColor)),c["a"].equals(Y,this._lastDistanceDisplayCondition)||(st.distanceDisplayCondition=d["a"].toValue(Y,st.distanceDisplayCondition),rt.distanceDisplayCondition=d["a"].toValue(Y,rt.distanceDisplayCondition),c["a"].clone(Y,this._lastDistanceDisplayCondition)),o["a"].equals(K,this._lastOffset)||(st.offset=b["a"].toValue(K,st.offset),rt.offset=b["a"].toValue(K,st.offset),o["a"].clone(K,this._lastOffset))}q&&(l.x=Math.max(l.x,.001),l.y=Math.max(l.y,.001),l.z=Math.max(l.z,.001),h=v["a"].multiplyByScale(h,l,h),this._primitive.modelMatrix=h,this._outlinePrimitive.modelMatrix=h)},i["a"]=B},9023:function(t,i,e){"use strict";var o=e("9f1d"),a=e("4f04");function n(){a["a"].throwInstantiationError()}Object(o["a"])(n.prototype,{name:{get:a["a"].throwInstantiationError},clock:{get:a["a"].throwInstantiationError},entities:{get:a["a"].throwInstantiationError},isLoading:{get:a["a"].throwInstantiationError},changedEvent:{get:a["a"].throwInstantiationError},errorEvent:{get:a["a"].throwInstantiationError},loadingEvent:{get:a["a"].throwInstantiationError},show:{get:a["a"].throwInstantiationError},clustering:{get:a["a"].throwInstantiationError}}),n.prototype.update=a["a"].throwInstantiationError,n.setLoading=function(t,i){t._isLoading!==i&&(i?t._entityCollection.suspendEvents():t._entityCollection.resumeEvents(),t._isLoading=i,t._loading.raiseEvent(t,i))},i["a"]=n},9171:function(t,i,e){"use strict";var o=e("cef5"),a=e("2f63"),n=e("7d62"),s=e("4f04"),r=e("acad"),l=e("d6db"),c=e("3a8e"),d=e("894b"),h=e("2d19"),u=e("b83c"),_=e("40b2"),p=e("ea07");function m(t,i,e){this._primitives=i,this._orderedGroundPrimitives=e,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=t,this._options=t._options,this._entity=t._entity,this._material=void 0}m.prototype._isHidden=function(t,i,e){return!t.isShowing||!t.isAvailable(e)||!p["a"].getValueOrDefault(i.show,e,!0)},m.prototype._setOptions=s["a"].throwInstantiationError,m.prototype.update=function(t){var i=this._geometryUpdater,e=i._onTerrain,o=this._primitives,n=this._orderedGroundPrimitives;e?n.remove(this._primitive):(o.removeAndDestroy(this._primitive),o.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;var s=this._entity,h=s[this._geometryUpdater._geometryPropertyName];if(this._setOptions(s,h,t),!this._isHidden(s,h,t)){var m=this._geometryUpdater.shadowsProperty.getValue(t),v=this._options;if(!Object(a["a"])(h.fill)||h.fill.getValue(t)){var b,f=i.fillMaterialProperty,g=f instanceof u["a"],y=i._getIsClosed(v);if(g)b=new c["a"]({closed:y,flat:e&&!i._supportsMaterialsforEntitiesOnTerrain});else{var O=_["a"].getValue(t,f,this._material);this._material=O,b=new l["a"]({material:O,translucent:O.isTranslucent(),closed:y})}if(e)v.vertexFormat=c["a"].VERTEX_FORMAT,this._primitive=n.add(new r["a"]({geometryInstances:this._geometryUpdater.createFillGeometryInstance(t),appearance:b,asynchronous:!1,shadows:m,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(t)}),p["a"].getValueOrUndefined(this._geometryUpdater.zIndex,t));else{v.vertexFormat=b.vertexFormat;var C=this._geometryUpdater.createFillGeometryInstance(t);g&&(b.translucent=255!==C.attributes.color.value[3]),this._primitive=o.add(new d["a"]({geometryInstances:C,appearance:b,asynchronous:!1,shadows:m}))}}if(!e&&Object(a["a"])(h.outline)&&h.outline.getValue(t)){var j=this._geometryUpdater.createOutlineGeometryInstance(t),w=p["a"].getValueOrDefault(h.outlineWidth,t,1);this._outlinePrimitive=o.add(new d["a"]({geometryInstances:j,appearance:new c["a"]({flat:!0,translucent:255!==j.attributes.color.value[3],renderState:{lineWidth:i._scene.clampLineWidth(w)}}),asynchronous:!1,shadows:m}))}}},m.prototype.getBoundingSphere=function(t){var i,e=this._entity,n=this._primitive,s=this._outlinePrimitive;return Object(a["a"])(n)&&n.show&&n.ready&&(i=n.getGeometryInstanceAttributes(e),Object(a["a"])(i)&&Object(a["a"])(i.boundingSphere))?(o["a"].clone(i.boundingSphere,t),h["a"].DONE):Object(a["a"])(s)&&s.show&&s.ready&&(i=s.getGeometryInstanceAttributes(e),Object(a["a"])(i)&&Object(a["a"])(i.boundingSphere))?(o["a"].clone(i.boundingSphere,t),h["a"].DONE):Object(a["a"])(n)&&!n.ready||Object(a["a"])(s)&&!s.ready?h["a"].PENDING:h["a"].FAILED},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){var t=this._primitives,i=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?i.remove(this._primitive):t.removeAndDestroy(this._primitive),t.removeAndDestroy(this._outlinePrimitive),Object(n["a"])(this)},i["a"]=m},a64a:function(t,i,e){"use strict";var o=e("be18"),a=e("535a"),n=e("2f63"),s=e("9f1d"),r=e("c52f"),l=e("4f77"),c=e("5ed2"),d=e("93da"),h=e("df07"),u=e("52f0"),_=e("f806"),p=e("a307"),m=new h["a"],v=new h["a"],b=new h["a"],f=new u["a"],g=new o["a"],y=new o["a"],O=new o["a"],C=new o["a"],j=new o["a"],w=new o["a"],S=new c["a"],x=1.25;function E(t,i,e,a,s,r,l){var u=t.scene.mode,E=s.getValue(r,t._lastCartesian);if(Object(n["a"])(E)){var M,P,D,I,V,A,U=!1,R=!1;if(u===p["a"].SCENE3D){c["a"].addSeconds(r,.001,S);var L=s.getValue(S,g);if(Object(n["a"])(L)||(c["a"].addSeconds(r,-.001,S),L=s.getValue(S,g),R=!0),Object(n["a"])(L)){var N,B=_["a"].computeFixedToIcrfMatrix(r,m),T=_["a"].computeFixedToIcrfMatrix(S,v);Object(n["a"])(B)&&Object(n["a"])(T)?N=h["a"].transpose(B,b):(N=_["a"].computeTemeToPseudoFixedMatrix(r,b),B=h["a"].transpose(N,m),T=_["a"].computeTemeToPseudoFixedMatrix(S,v),h["a"].transpose(T,T));var H=h["a"].multiplyByVector(B,E,j),k=h["a"].multiplyByVector(T,L,w);o["a"].subtract(H,k,C);var z=1e3*o["a"].magnitude(C),F=d["a"].GRAVITATIONALPARAMETER,G=-F/(z*z-2*F/o["a"].magnitude(H));G<0||G>x*l.maximumRadius?(M=y,o["a"].normalize(E,M),o["a"].negate(M,M),D=o["a"].clone(o["a"].UNIT_Z,O),P=o["a"].cross(D,M,g),o["a"].magnitude(P)>d["a"].EPSILON7&&(o["a"].normalize(M,M),o["a"].normalize(P,P),D=o["a"].cross(M,P,O),o["a"].normalize(D,D),U=!0)):o["a"].equalsEpsilon(E,L,d["a"].EPSILON7)||(D=y,o["a"].normalize(H,D),o["a"].normalize(k,k),P=o["a"].cross(D,k,O),R&&(P=o["a"].multiplyByScalar(P,-1,P)),o["a"].equalsEpsilon(P,o["a"].ZERO,d["a"].EPSILON7)||(M=o["a"].cross(P,D,g),h["a"].multiplyByVector(N,M,M),h["a"].multiplyByVector(N,P,P),h["a"].multiplyByVector(N,D,D),o["a"].normalize(M,M),o["a"].normalize(P,P),o["a"].normalize(D,D),U=!0))}}Object(n["a"])(t.boundingSphere)&&(E=t.boundingSphere.center),a&&(I=o["a"].clone(i.position,C),V=o["a"].clone(i.direction,j),A=o["a"].clone(i.up,w));var W=f;U?(W[0]=M.x,W[1]=M.y,W[2]=M.z,W[3]=0,W[4]=P.x,W[5]=P.y,W[6]=P.z,W[7]=0,W[8]=D.x,W[9]=D.y,W[10]=D.z,W[11]=0,W[12]=E.x,W[13]=E.y,W[14]=E.z,W[15]=0):_["a"].eastNorthUpToFixedFrame(E,l,W),i._setTransform(W),a&&(o["a"].clone(I,i.position),o["a"].clone(V,i.direction),o["a"].clone(A,i.up),o["a"].cross(V,A,i.right))}if(e){var q=u===p["a"].SCENE2D||o["a"].equals(t._offset3D,o["a"].ZERO)?void 0:t._offset3D;i.lookAtTransform(i.transform,q)}}function M(t,i,e){this.entity=t,this.scene=i,this.ellipsoid=Object(a["a"])(e,r["a"].WGS84),this.boundingSphere=void 0,this._lastEntity=void 0,this._mode=void 0,this._lastCartesian=new o["a"],this._defaultOffset3D=void 0,this._offset3D=new o["a"]}Object(s["a"])(M,{defaultOffset3D:{get:function(){return this._defaultOffset3D},set:function(t){this._defaultOffset3D=o["a"].clone(t,new o["a"])}}}),M.defaultOffset3D=new o["a"](-14e3,3500,3500);var P=new l["a"],D=new o["a"];M.prototype.update=function(t,i){var e=this.scene,a=this.ellipsoid,s=e.mode;if(s!==p["a"].MORPHING){var r=this.entity,l=r.position;if(Object(n["a"])(l)){var c=r!==this._lastEntity,h=s!==this._mode,u=e.camera,_=c||h,m=!0;if(c){var v=r.viewFrom,b=Object(n["a"])(v);if(!b&&Object(n["a"])(i)){P.pitch=-d["a"].PI_OVER_FOUR,P.range=0;var f=l.getValue(t,D);if(Object(n["a"])(f)){var g=2-1/Math.max(1,o["a"].magnitude(f)/a.maximumRadius);P.pitch*=g}u.viewBoundingSphere(i,P),this.boundingSphere=i,_=!1,m=!1}else b&&Object(n["a"])(v.getValue(t,this._offset3D))||o["a"].clone(M._defaultOffset3D,this._offset3D)}else h||this._mode===p["a"].SCENE2D||o["a"].clone(u.position,this._offset3D);this._lastEntity=r,this._mode=s,E(this,u,_,m,l,t,a)}}},i["a"]=M},b3a7:function(t,i,e){"use strict";var o=e("535a"),a=e("9f1d"),n=e("7d62"),s=e("21d7"),r=e("93da"),l=e("a58e");function c(){this._dataSources=[],this._dataSourceAdded=new s["a"],this._dataSourceRemoved=new s["a"],this._dataSourceMoved=new s["a"]}function d(t,i){var e=t.indexOf(i);return e}function h(t,i,e){var o=t._dataSources,a=o.length-1;if(i=r["a"].clamp(i,0,a),e=r["a"].clamp(e,0,a),i!==e){var n=o[i];o[i]=o[e],o[e]=n,t.dataSourceMoved.raiseEvent(n,e,i)}}Object(a["a"])(c.prototype,{length:{get:function(){return this._dataSources.length}},dataSourceAdded:{get:function(){return this._dataSourceAdded}},dataSourceRemoved:{get:function(){return this._dataSourceRemoved}},dataSourceMoved:{get:function(){return this._dataSourceMoved}}}),c.prototype.add=function(t){var i=this,e=this._dataSources;return Object(l["a"])(t,(function(t){return e===i._dataSources&&(i._dataSources.push(t),i._dataSourceAdded.raiseEvent(i,t)),t}))},c.prototype.remove=function(t,i){i=Object(o["a"])(i,!1);var e=this._dataSources.indexOf(t);return-1!==e&&(this._dataSources.splice(e,1),this._dataSourceRemoved.raiseEvent(this,t),i&&"function"===typeof t.destroy&&t.destroy(),!0)},c.prototype.removeAll=function(t){t=Object(o["a"])(t,!1);for(var i=this._dataSources,e=0,a=i.length;e<a;++e){var n=i[e];this._dataSourceRemoved.raiseEvent(this,n),t&&"function"===typeof n.destroy&&n.destroy()}this._dataSources=[]},c.prototype.contains=function(t){return-1!==this.indexOf(t)},c.prototype.indexOf=function(t){return this._dataSources.indexOf(t)},c.prototype.get=function(t){return this._dataSources[t]},c.prototype.getByName=function(t){return this._dataSources.filter((function(i){return i.name===t}))},c.prototype.raise=function(t){var i=d(this._dataSources,t);h(this,i,i+1)},c.prototype.lower=function(t){var i=d(this._dataSources,t);h(this,i,i-1)},c.prototype.raiseToTop=function(t){var i=d(this._dataSources,t);i!==this._dataSources.length-1&&(this._dataSources.splice(i,1),this._dataSources.push(t),this.dataSourceMoved.raiseEvent(t,this._dataSources.length-1,i))},c.prototype.lowerToBottom=function(t){var i=d(this._dataSources,t);0!==i&&(this._dataSources.splice(i,1),this._dataSources.splice(0,0,t),this.dataSourceMoved.raiseEvent(t,0,i))},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.removeAll(!0),Object(n["a"])(this)},i["a"]=c},cab1:function(t,i,e){"use strict";var o=e("933b"),a=e("2f63"),n=e("2d19");function s(t,i){this._primitives=t,this._orderedGroundPrimitives=i,this._dynamicUpdaters=new o["a"]}s.prototype.add=function(t,i){this._dynamicUpdaters.set(i.id,i.createDynamicUpdater(this._primitives,this._orderedGroundPrimitives))},s.prototype.remove=function(t){var i=t.id,e=this._dynamicUpdaters.get(i);Object(a["a"])(e)&&(this._dynamicUpdaters.remove(i),e.destroy())},s.prototype.update=function(t){for(var i=this._dynamicUpdaters.values,e=0,o=i.length;e<o;e++)i[e].update(t);return!0},s.prototype.removeAllPrimitives=function(){for(var t=this._dynamicUpdaters.values,i=0,e=t.length;i<e;i++)t[i].destroy();this._dynamicUpdaters.removeAll()},s.prototype.getBoundingSphere=function(t,i){return t=this._dynamicUpdaters.get(t.id),Object(a["a"])(t)&&Object(a["a"])(t.getBoundingSphere)?t.getBoundingSphere(i):n["a"].FAILED},i["a"]=s},e22d:function(t,i,e){"use strict";var o=e("dd06"),a=e("cef5"),n=e("535a"),s=e("2f63"),r=e("9f1d"),l=e("7d62"),c=e("eff8"),d=e("a0f5"),h=e("acad"),u=e("3d43"),_=e("738d"),p=e("448f"),m=e("2d19"),v=e("dde1"),b=e("70fd"),f=e("5174"),g=e("a10a"),y=e("091c"),O=e("b4c8"),C=e("203c");function j(t){h["a"].initializeTerrainHeights(),d["a"].initializeTerrainHeights();var i=t.scene,e=t.dataSourceCollection;this._eventHelper=new c["a"],this._eventHelper.add(e.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(e.dataSourceRemoved,this._onDataSourceRemoved,this),this._eventHelper.add(e.dataSourceMoved,this._onDataSourceMoved,this),this._eventHelper.add(i.postRender,this._postRender,this),this._dataSourceCollection=e,this._scene=i,this._visualizersCallback=Object(n["a"])(t.visualizersCallback,j.defaultVisualizersCallback);var o=!1,a=new _["a"],s=new _["a"];e.length>0&&(i.primitives.add(a),i.groundPrimitives.add(s),o=!0),this._primitives=a,this._groundPrimitives=s;for(var r=0,l=e.length;r<l;r++)this._onDataSourceAdded(e,e.get(r));var u,p,m=new v["a"];if(this._onDataSourceAdded(void 0,m),this._defaultDataSource=m,!o){var b=this,f=function(){i.primitives.add(a),i.groundPrimitives.add(s),u(),p(),b._removeDefaultDataSourceListener=void 0,b._removeDataSourceCollectionListener=void 0};u=m.entities.collectionChanged.addEventListener(f),p=e.dataSourceAdded.addEventListener(f)}this._removeDefaultDataSourceListener=u,this._removeDataSourceCollectionListener=p,this._ready=!1}j.defaultVisualizersCallback=function(t,i,e){var o=e.entities;return[new p["a"](i,o),new b["a"](t,o,e._primitives,e._groundPrimitives),new f["a"](i,o),new g["a"](t,o),new O["a"](i,o),new y["a"](t,o),new C["a"](t,o,e._primitives,e._groundPrimitives)]},Object(r["a"])(j.prototype,{scene:{get:function(){return this._scene}},dataSources:{get:function(){return this._dataSourceCollection}},defaultDataSource:{get:function(){return this._defaultDataSource}},ready:{get:function(){return this._ready}}}),j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){this._eventHelper.removeAll();for(var t=this._dataSourceCollection,i=0,e=t.length;i<e;++i)this._onDataSourceRemoved(this._dataSourceCollection,t.get(i));return this._onDataSourceRemoved(void 0,this._defaultDataSource),Object(s["a"])(this._removeDefaultDataSourceListener)?(this._removeDefaultDataSourceListener(),this._removeDataSourceCollectionListener()):(this._scene.primitives.remove(this._primitives),this._scene.groundPrimitives.remove(this._groundPrimitives)),Object(l["a"])(this)},j.prototype.update=function(t){if(!o["a"].initialized)return this._ready=!1,!1;var i,e,a,n,r=!0,l=this._dataSourceCollection,c=l.length;for(i=0;i<c;i++){var d=l.get(i);for(Object(s["a"])(d.update)&&(r=d.update(t)&&r),a=d._visualizers,n=a.length,e=0;e<n;e++)r=a[e].update(t)&&r}for(a=this._defaultDataSource._visualizers,n=a.length,e=0;e<n;e++)r=a[e].update(t)&&r;return this._ready=r,r},j.prototype._postRender=function(){for(var t=this._scene.frameState,i=this._dataSourceCollection,e=i.length,o=0;o<e;o++){var a=i.get(o),n=a.credit;Object(s["a"])(n)&&t.creditDisplay.addCredit(n);var r=a._resourceCredits;if(Object(s["a"])(r))for(var l=r.length,c=0;c<l;c++)t.creditDisplay.addCredit(r[c])}};var w=[],S=new a["a"];j.prototype.getBoundingSphere=function(t,i,e){if(!this._ready)return m["a"].PENDING;var o,n,r=this._defaultDataSource;if(!r.entities.contains(t)){r=void 0;var l=this._dataSourceCollection;for(n=l.length,o=0;o<n;o++){var c=l.get(o);if(c.entities.contains(t)){r=c;break}}}if(!Object(s["a"])(r))return m["a"].FAILED;var d=w,h=S,u=0,_=m["a"].DONE,p=r._visualizers,v=p.length;for(o=0;o<v;o++){var b=p[o];if(Object(s["a"])(b.getBoundingSphere)){if(_=p[o].getBoundingSphere(t,h),!i&&_===m["a"].PENDING)return m["a"].PENDING;_===m["a"].DONE&&(d[u]=a["a"].clone(h,d[u]),u++)}}return 0===u?m["a"].FAILED:(d.length=u,a["a"].fromBoundingSpheres(d,e),m["a"].DONE)},j.prototype._onDataSourceAdded=function(t,i){var e=this._scene,o=this._primitives,a=this._groundPrimitives,n=o.add(new _["a"]),s=a.add(new u["a"]);i._primitives=n,i._groundPrimitives=s;var r=i.clustering;r._initialize(e),n.add(r),i._visualizers=this._visualizersCallback(e,r,i)},j.prototype._onDataSourceRemoved=function(t,i){var e=this._primitives,o=this._groundPrimitives,a=i._primitives,n=i._groundPrimitives,s=i.clustering;a.remove(s);for(var r=i._visualizers,l=r.length,c=0;c<l;c++)r[c].destroy();e.remove(a),o.remove(n),i._visualizers=void 0},j.prototype._onDataSourceMoved=function(t,i,e){var o=this._primitives,a=this._groundPrimitives,n=t._primitives,s=t._groundPrimitives;i===e+1?(o.raise(n),a.raise(s)):i===e-1?(o.lower(n),a.lower(s)):0===i?(o.lowerToBottom(n),a.lowerToBottom(s),o.raise(n),a.raise(s)):(o.raiseToTop(n),a.raiseToTop(s))},i["a"]=j}}]);