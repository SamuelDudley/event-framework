(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~1acf902e"],{"06f0":function(e,t,a){"use strict";var r=a("0e25"),n=a("daa2"),i={NEVER:n["a"].NEVER,LESS:n["a"].LESS,EQUAL:n["a"].EQUAL,LESS_OR_EQUAL:n["a"].LEQUAL,GREATER:n["a"].GREATER,NOT_EQUAL:n["a"].NOTEQUAL,GREATER_OR_EQUAL:n["a"].GEQUAL,ALWAYS:n["a"].ALWAYS};t["a"]=Object(r["a"])(i)},"0838":function(e,t,a){"use strict";var r=a("be18"),n=a("2f63"),i=a("93da"),o=a("a307");function s(){this.enabled=!0,this.density=2e-4,this.screenSpaceErrorFactor=2,this.minimumBrightness=.03}for(var u=[359.393,800.749,1275.6501,2151.1192,3141.7763,4777.5198,6281.2493,12364.307,15900.765,49889.0549,78026.8259,99260.7344,120036.3873,151011.0158,156091.1953,203849.3112,274866.9803,319916.3149,493552.0528,628733.5874],c=[2e-5,2e-4,1e-4,7e-5,5e-5,4e-5,3e-5,19e-6,1e-5,85e-7,62e-7,58e-7,53e-7,52e-7,51e-7,42e-7,4e-6,34e-7,26e-7,22e-7],f=0;f<c.length;++f)c[f]*=1e6;for(var l=c[1],h=c[c.length-1],d=0;d<c.length;++d)c[d]=(c[d]-h)/(l-h);var m=0;function p(e){var t,a=u,r=a.length;if(e<a[0])return m=0,m;if(e>a[r-1])return m=r-2,m;if(e>=a[m]){if(m+1<r&&e<a[m+1])return m;if(m+2<r&&e<a[m+2])return++m,m}else if(m-1>=0&&e>=a[m-1])return--m,m;for(t=0;t<r-2;++t)if(e>=a[t]&&e<a[t+1])break;return m=t,m}var _=new r["a"];s.prototype.update=function(e){var t=e.fog.enabled=this.enabled;if(t){var a=e.camera,s=a.positionCartographic;if(!Object(n["a"])(s)||s.height>8e5||e.mode!==o["a"].SCENE3D)e.fog.enabled=!1;else{var f=s.height,d=p(f),m=i["a"].clamp((f-u[d])/(u[d+1]-u[d]),0,1),v=i["a"].lerp(c[d],c[d+1],m),g=1e6*this.density,y=g/l*h;v=v*(g-y)*1e-6;var b=r["a"].normalize(a.positionWC,_),w=Math.abs(r["a"].dot(a.directionWC,b));v*=1-w,e.fog.density=v,e.fog.sse=this.screenSpaceErrorFactor,e.fog.minimumBrightness=this.minimumBrightness}}},t["a"]=s},"08b8":function(e,t,a){"use strict";var r=a("1d87"),n=a("abab"),i=a("2f63"),o=a("5e57"),s=a("6a29"),u=a("77d1"),c=a("a58e");function f(){}function l(e,t){var a="runtime."+Object.keys(e.createdBufferViews).length,r=e.buffers,n=Object.keys(r).length;return r[n]=t,e.createdBufferViews[a]={buffer:n,byteOffset:0,byteLength:t.byteLength},a}function h(e,t,a){var r=t._loadResources,n=l(r,e);return r.vertexBuffersToCreate.enqueue(n),n}function d(e,t,a){var r=e.typedArray,i=t._loadResources,o=l(i,r);return i.indexBuffersToCreate.enqueue({id:o,componentType:n["a"].fromTypedArray(r)}),{bufferViewId:o,numberOfIndices:e.numberOfIndices}}function m(e,t,a,r){if(f._taskProcessorReady){var n=a.primitivesToDecode.peek();if(Object(i["a"])(n)){var o=e.scheduleTask(n,[n.array.buffer]);if(Object(i["a"])(o))return a.activeDecodingTasks++,a.primitivesToDecode.dequeue(),o.then((function(e){a.activeDecodingTasks--;var i=d(e.indexArray,t,r),o={},s=e.attributeData;for(var u in s)if(s.hasOwnProperty(u)){var c=s[u],f=c.array,l=h(f,t,r),m=c.data;m.bufferView=l,o[u]=m}t._decodedData[n.mesh+".primitive."+n.primitive]={bufferView:i.bufferViewId,numberOfIndices:i.numberOfIndices,attributes:o}}))}}}f._maxDecodingConcurrency=Math.max(o["a"].hardwareConcurrency-1,1),f._decoderTaskProcessor=void 0,f._taskProcessorReady=!1,f._getDecoderTaskProcessor=function(){if(!Object(i["a"])(f._decoderTaskProcessor)){var e=new s["a"]("decodeDraco",f._maxDecodingConcurrency);e.initWebAssemblyModule({modulePath:"ThirdParty/Workers/draco_wasm_wrapper.js",wasmBinaryFile:"ThirdParty/draco_decoder.wasm",fallbackModulePath:"ThirdParty/Workers/draco_decoder.js"}).then((function(){f._taskProcessorReady=!0})),f._decoderTaskProcessor=e}return f._decoderTaskProcessor},f.hasExtension=function(e){return Object(i["a"])(e.extensionsRequired.KHR_draco_mesh_compression)||Object(i["a"])(e.extensionsUsed.KHR_draco_mesh_compression)},f._decodedModelResourceCache=void 0,f.parse=function(e,t){if(f.hasExtension(e)){var a=e._loadResources,n=e.cacheKey;if(Object(i["a"])(n)){Object(i["a"])(f._decodedModelResourceCache)||(Object(i["a"])(t.cache.modelDecodingCache)||(t.cache.modelDecodingCache={}),f._decodedModelResourceCache=t.cache.modelDecodingCache);var o=f._decodedModelResourceCache[n];if(Object(i["a"])(o))return o.count++,void(a.pendingDecodingCache=!0)}var s=e._dequantizeInShader,c=e.gltf;u["a"].mesh(c,(function(e,t){u["a"].meshPrimitive(e,(function(e,n){if(Object(i["a"])(e.extensions)){var o=e.extensions.KHR_draco_mesh_compression;if(Object(i["a"])(o)){var u=c.bufferViews[o.bufferView],f=Object(r["a"])(c.buffers[u.buffer].extras._pipeline.source,u.byteOffset,u.byteOffset+u.byteLength);a.primitivesToDecode.enqueue({mesh:t,primitive:n,array:f,bufferView:u,compressedAttributes:o.attributes,dequantizeInShader:s})}}}))}))}},f.decodeModel=function(e,t){if(!f.hasExtension(e))return c["a"].resolve();var a=e._loadResources,r=e.cacheKey;if(Object(i["a"])(r)&&Object(i["a"])(f._decodedModelResourceCache)){var n=f._decodedModelResourceCache[r];if(Object(i["a"])(n)&&a.pendingDecodingCache)return Object(c["a"])(n.ready,(function(){e._decodedData=n.data,a.pendingDecodingCache=!1}));f._decodedModelResourceCache[r]={ready:!1,count:1,data:void 0}}if(0===a.primitivesToDecode.length)return c["a"].resolve();var o=f._getDecoderTaskProcessor(),s=[],u=m(o,e,a,t);while(Object(i["a"])(u))s.push(u),u=m(o,e,a,t);return c["a"].all(s)},f.decodePointCloud=function(e){var t=f._getDecoderTaskProcessor();if(f._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])},f.cacheDataForModel=function(e){var t=e.cacheKey;if(Object(i["a"])(t)&&Object(i["a"])(f._decodedModelResourceCache)){var a=f._decodedModelResourceCache[t];Object(i["a"])(a)&&(a.ready=!0,a.data=e._decodedData)}},f.destroyCachedDataForModel=function(e){var t=e.cacheKey;if(Object(i["a"])(t)&&Object(i["a"])(f._decodedModelResourceCache)){var a=f._decodedModelResourceCache[t];Object(i["a"])(a)&&0===--a.count&&delete f._decodedModelResourceCache[t]}},t["a"]=f},1360:function(e,t,a){"use strict";var r,n=a("2f63"),i=a("9f1d");function o(e){}o.prototype.isReady=function(){return!0},o.prototype.shouldDiscardImage=function(e){return o.EMPTY_IMAGE===e},Object(i["a"])(o,{EMPTY_IMAGE:{get:function(){return Object(n["a"])(r)||(r=new Image,r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),r}}}),t["a"]=o},"37eb":function(e,t,a){"use strict";var r=a("cef5"),n=a("b482"),i=a("be18"),o=a("2bb9"),s=a("535a"),u=a("2f63"),c=a("7d62"),f=a("52f0"),l=a("0541"),h=a("8b68"),d=a("a894"),m=a("d289"),p=a("6dc0"),_=a("e90c"),v=a("5770"),g=a("7c5e"),y=a("fc40"),b=a("ed46"),w=a("b7c8"),E=a("29ab"),O=a("aea3"),A=a("a307"),L={position:0};function C(e){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT),this.center=i["a"].clone(Object(s["a"])(e.center,i["a"].ZERO)),this._center=new i["a"],this.radii=i["a"].clone(e.radii),this._radii=new i["a"],this._oneOverEllipsoidRadiiSquared=new i["a"],this._boundingSphere=new r["a"],this.modelMatrix=f["a"].clone(Object(s["a"])(e.modelMatrix,f["a"].IDENTITY)),this._modelMatrix=new f["a"],this._computedModelMatrix=new f["a"],this.show=Object(s["a"])(e.show,!0),this.material=Object(s["a"])(e.material,O["a"].fromType(O["a"].ColorType)),this._material=void 0,this._translucent=void 0,this.id=e.id,this._id=void 0,this.debugShowBoundingVolume=Object(s["a"])(e.debugShowBoundingVolume,!1),this.onlySunLighting=Object(s["a"])(e.onlySunLighting,!1),this._onlySunLighting=!1,this._depthTestEnabled=Object(s["a"])(e.depthTestEnabled,!0),this._useLogDepth=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new d["a"]({owner:Object(s["a"])(e._owner,this)}),this._pickCommand=new d["a"]({owner:Object(s["a"])(e._owner,this),pickOnly:!0});var t=this;this._uniforms={u_radii:function(){return t.radii},u_oneOverEllipsoidRadiiSquared:function(){return t._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return t._pickId.color}}}function x(e){var t=e.cache.ellipsoidPrimitive_vertexArray;if(Object(u["a"])(t))return t;var a=n["a"].createGeometry(n["a"].fromDimensions({dimensions:new i["a"](2,2,2),vertexFormat:l["a"].POSITION_ONLY}));return t=g["a"].fromGeometry({context:e,geometry:a,attributeLocations:L,bufferUsage:h["a"].STATIC_DRAW,interleave:!0}),e.cache.ellipsoidPrimitive_vertexArray=t,t}var R="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";C.prototype.update=function(e){if(this.show&&e.mode===A["a"].SCENE3D&&Object(u["a"])(this.center)&&Object(u["a"])(this.radii)){var t=e.context,a=this.material.isTranslucent(),n=this._translucent!==a;Object(u["a"])(this._rs)&&!n||(this._translucent=a,this._rs=p["a"].fromCache({cull:{enabled:!0,face:E["a"].FRONT},depthTest:{enabled:this._depthTestEnabled},depthMask:!a&&t.fragmentDepth,blending:a?w["a"].ALPHA_BLEND:void 0})),Object(u["a"])(this._va)||(this._va=x(t));var s=!1,c=this.radii;if(!i["a"].equals(this._radii,c)){i["a"].clone(c,this._radii);var l=this._oneOverEllipsoidRadiiSquared;l.x=1/(c.x*c.x),l.y=1/(c.y*c.y),l.z=1/(c.z*c.z),s=!0}f["a"].equals(this.modelMatrix,this._modelMatrix)&&i["a"].equals(this.center,this._center)||(f["a"].clone(this.modelMatrix,this._modelMatrix),i["a"].clone(this.center,this._center),f["a"].multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),s=!0),s&&(i["a"].clone(i["a"].ZERO,this._boundingSphere.center),this._boundingSphere.radius=i["a"].maximumComponent(c),r["a"].transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));var h=this._material!==this.material;this._material=this.material,this._material.update(t);var d=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;var g=e.useLogDepth,O=this._useLogDepth!==g;this._useLogDepth=g;var C,I,S=this._colorCommand;(h||d||n||O)&&(C=new v["a"]({sources:[b["a"]]}),I=new v["a"]({sources:[this.material.shaderSource,y["a"]]}),this.onlySunLighting&&I.defines.push("ONLY_SUN_LIGHTING"),!a&&t.fragmentDepth&&I.defines.push("WRITE_DEPTH"),this._useLogDepth&&(C.defines.push("LOG_DEPTH","DISABLE_GL_POSITION_LOG_DEPTH"),I.defines.push("LOG_DEPTH"),I.sources.push(R)),this._sp=_["a"].replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:C,fragmentShaderSource:I,attributeLocations:L}),S.vertexArray=this._va,S.renderState=this._rs,S.shaderProgram=this._sp,S.uniformMap=Object(o["a"])(this._uniforms,this.material._uniforms),S.executeInClosestFrustum=a);var T=e.commandList,N=e.passes;if(N.render&&(S.boundingVolume=this._boundingSphere,S.debugShowBoundingVolume=this.debugShowBoundingVolume,S.modelMatrix=this._computedModelMatrix,S.pass=a?m["a"].TRANSLUCENT:m["a"].OPAQUE,T.push(S)),N.pick){var P=this._pickCommand;Object(u["a"])(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=t.createPickId({primitive:this,id:this.id})),(h||d||!Object(u["a"])(this._pickSP)||O)&&(C=new v["a"]({sources:[b["a"]]}),I=new v["a"]({sources:[this.material.shaderSource,y["a"]],pickColorQualifier:"uniform"}),this.onlySunLighting&&I.defines.push("ONLY_SUN_LIGHTING"),!a&&t.fragmentDepth&&I.defines.push("WRITE_DEPTH"),this._useLogDepth&&(C.defines.push("LOG_DEPTH"),I.defines.push("LOG_DEPTH"),I.sources.push(R)),this._pickSP=_["a"].replaceCache({context:t,shaderProgram:this._pickSP,vertexShaderSource:C,fragmentShaderSource:I,attributeLocations:L}),P.vertexArray=this._va,P.renderState=this._rs,P.shaderProgram=this._pickSP,P.uniformMap=Object(o["a"])(Object(o["a"])(this._uniforms,this._pickUniforms),this.material._uniforms),P.executeInClosestFrustum=a),P.boundingVolume=this._boundingSphere,P.modelMatrix=this._computedModelMatrix,P.pass=a?m["a"].TRANSLUCENT:m["a"].OPAQUE,T.push(P)}}},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),Object(c["a"])(this)},t["a"]=C},6928:function(e,t,a){"use strict";var r=a("670c"),n=a("be18"),i=a("a561"),o=a("bd8d"),s=a("2f63"),u=a("9f1d"),c=a("c2aa"),f=a("93da"),l=a("283e"),h=a("e787"),d=a("0e25"),m={VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18},p=Object(d["a"])(m);function _(e,t){var a;this._expression=e,e=G(e,t),e=V(q(e)),h["a"].addBinaryOp("=~",0),h["a"].addBinaryOp("!~",0);try{a=Object(h["a"])(e)}catch(r){throw new l["a"](r)}this._runtimeAst=ee(this,a)}Object(u["a"])(_.prototype,{expression:{get:function(){return this._expression}}});var v={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new r["a"]],cartesian3Array:[new n["a"]],cartesian4Array:[new i["a"]],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);var e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new r["a"]),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new n["a"]),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new i["a"]),this.cartesian4Array[this.cartesian4Index++]}};_.prototype.evaluate=function(e,t){v.reset();var a=this._runtimeAst.evaluate(e);return t instanceof o["a"]&&a instanceof i["a"]?o["a"].fromCartesian4(a,t):a instanceof r["a"]||a instanceof n["a"]||a instanceof i["a"]?a.clone(t):a},_.prototype.evaluateColor=function(e,t){v.reset();var a=this._runtimeAst.evaluate(e);return o["a"].fromCartesian4(a,t)},_.prototype.getShaderFunction=function(e,t,a,r){var n=this.getShaderExpression(t,a);return n=r+" "+e+"() \n{ \n    return "+n+"; \n} \n",n},_.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)};var g=["!","-","+"],y=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],b=/\${(.*?)}/g,w=/\\/g,E="@#%",O=/@#%/g,A=new o["a"],L={abs:T(Math.abs),sqrt:T(Math.sqrt),cos:T(Math.cos),sin:T(Math.sin),tan:T(Math.tan),acos:T(Math.acos),asin:T(Math.asin),atan:T(Math.atan),radians:T(f["a"].toRadians),degrees:T(f["a"].toDegrees),sign:T(f["a"].sign),floor:T(Math.floor),ceil:T(Math.ceil),round:T(Math.round),exp:T(Math.exp),exp2:T(I),log:T(Math.log),log2:T(S),fract:T(R),length:j,normalize:M},C={atan2:N(Math.atan2,!1),pow:N(Math.pow,!1),min:N(Math.min,!0),max:N(Math.max,!0),distance:D,dot:B,cross:k},x={clamp:P(f["a"].clamp,!0),mix:P(f["a"].lerp,!0)};function R(e){return e-Math.floor(e)}function I(e){return Math.pow(2,e)}function S(e){return f["a"].log2(e)}function T(e){return function(t,a){if("number"===typeof a)return e(a);if(a instanceof r["a"])return r["a"].fromElements(e(a.x),e(a.y),v.getCartesian2());if(a instanceof n["a"])return n["a"].fromElements(e(a.x),e(a.y),e(a.z),v.getCartesian3());if(a instanceof i["a"])return i["a"].fromElements(e(a.x),e(a.y),e(a.z),e(a.w),v.getCartesian4());throw new l["a"]('Function "'+t+'" requires a vector or number argument. Argument is '+a+".")}}function N(e,t){return function(a,o,s){if(t&&"number"===typeof s){if("number"===typeof o)return e(o,s);if(o instanceof r["a"])return r["a"].fromElements(e(o.x,s),e(o.y,s),v.getCartesian2());if(o instanceof n["a"])return n["a"].fromElements(e(o.x,s),e(o.y,s),e(o.z,s),v.getCartesian3());if(o instanceof i["a"])return i["a"].fromElements(e(o.x,s),e(o.y,s),e(o.z,s),e(o.w,s),v.getCartesian4())}if("number"===typeof o&&"number"===typeof s)return e(o,s);if(o instanceof r["a"]&&s instanceof r["a"])return r["a"].fromElements(e(o.x,s.x),e(o.y,s.y),v.getCartesian2());if(o instanceof n["a"]&&s instanceof n["a"])return n["a"].fromElements(e(o.x,s.x),e(o.y,s.y),e(o.z,s.z),v.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"])return i["a"].fromElements(e(o.x,s.x),e(o.y,s.y),e(o.z,s.z),e(o.w,s.w),v.getCartesian4());throw new l["a"]('Function "'+a+'" requires vector or number arguments of matching types. Arguments are '+o+" and "+s+".")}}function P(e,t){return function(a,o,s,u){if(t&&"number"===typeof u){if("number"===typeof o&&"number"===typeof s)return e(o,s,u);if(o instanceof r["a"]&&s instanceof r["a"])return r["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),v.getCartesian2());if(o instanceof n["a"]&&s instanceof n["a"])return n["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),e(o.z,s.z,u),v.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"])return i["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),e(o.z,s.z,u),e(o.w,s.w,u),v.getCartesian4())}if("number"===typeof o&&"number"===typeof s&&"number"===typeof u)return e(o,s,u);if(o instanceof r["a"]&&s instanceof r["a"]&&u instanceof r["a"])return r["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),v.getCartesian2());if(o instanceof n["a"]&&s instanceof n["a"]&&u instanceof n["a"])return n["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),e(o.z,s.z,u.z),v.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"]&&u instanceof i["a"])return i["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),e(o.z,s.z,u.z),e(o.w,s.w,u.w),v.getCartesian4());throw new l["a"]('Function "'+a+'" requires vector or number arguments of matching types. Arguments are '+o+", "+s+", and "+u+".")}}function j(e,t){if("number"===typeof t)return Math.abs(t);if(t instanceof r["a"])return r["a"].magnitude(t);if(t instanceof n["a"])return n["a"].magnitude(t);if(t instanceof i["a"])return i["a"].magnitude(t);throw new l["a"]('Function "'+e+'" requires a vector or number argument. Argument is '+t+".")}function M(e,t){if("number"===typeof t)return 1;if(t instanceof r["a"])return r["a"].normalize(t,v.getCartesian2());if(t instanceof n["a"])return n["a"].normalize(t,v.getCartesian3());if(t instanceof i["a"])return i["a"].normalize(t,v.getCartesian4());throw new l["a"]('Function "'+e+'" requires a vector or number argument. Argument is '+t+".")}function D(e,t,a){if("number"===typeof t&&"number"===typeof a)return Math.abs(t-a);if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].distance(t,a);if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].distance(t,a);if(t instanceof i["a"]&&a instanceof i["a"])return i["a"].distance(t,a);throw new l["a"]('Function "'+e+'" requires vector or number arguments of matching types. Arguments are '+t+" and "+a+".")}function B(e,t,a){if("number"===typeof t&&"number"===typeof a)return t*a;if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].dot(t,a);if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].dot(t,a);if(t instanceof i["a"]&&a instanceof i["a"])return i["a"].dot(t,a);throw new l["a"]('Function "'+e+'" requires vector or number arguments of matching types. Arguments are '+t+" and "+a+".")}function k(e,t,a){if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].cross(t,a,v.getCartesian3());throw new l["a"]('Function "'+e+'" requires vec3 arguments. Arguments are '+t+" and "+a+".")}function U(e,t,a,r,n){this._type=e,this._value=t,this._left=a,this._right=r,this._test=n,this.evaluate=void 0,te(this)}function G(e,t){if(!Object(s["a"])(t))return e;for(var a in t)if(t.hasOwnProperty(a)){var r=new RegExp("\\$\\{"+a+"\\}","g"),n="("+t[a]+")";Object(s["a"])(n)&&(e=e.replace(r,n))}return e}function q(e){return e.replace(w,E)}function z(e){return e.replace(O,"\\")}function V(e){var t=e,a="",r=t.indexOf("${");while(r>=0){var n,i=t.indexOf("'"),o=t.indexOf('"');if(i>=0&&i<r)n=t.indexOf("'",i+1),a+=t.substr(0,n+1),t=t.substr(n+1),r=t.indexOf("${");else if(o>=0&&o<r)n=t.indexOf('"',o+1),a+=t.substr(0,n+1),t=t.substr(n+1),r=t.indexOf("${");else{a+=t.substr(0,r);var s=t.indexOf("}");if(s<0)throw new l["a"]("Unmatched {.");a+="czm_"+t.substr(r+2,s-(r+2)),t=t.substr(s+1),r=t.indexOf("${")}}return a+=t,a}function F(e){var t=typeof e.value;return null===e.value?new U(p.LITERAL_NULL,null):"boolean"===t?new U(p.LITERAL_BOOLEAN,e.value):"number"===t?new U(p.LITERAL_NUMBER,e.value):"string"===t?e.value.indexOf("${")>=0?new U(p.VARIABLE_IN_STRING,e.value):new U(p.LITERAL_STRING,z(e.value)):void 0}function Y(e,t){var a,r,n,i,o=t.arguments,u=o.length;if("MemberExpression"===t.callee.type){a=t.callee.property.name;var c=t.callee.object;if("test"===a||"exec"===a){if("regExp"!==c.callee.name)throw new l["a"](a+" is not a function.");return 0===u?"test"===a?new U(p.LITERAL_BOOLEAN,!1):new U(p.LITERAL_NULL,null):(n=ee(e,c),i=ee(e,o[0]),new U(p.FUNCTION_CALL,a,n,i))}if("toString"===a)return r=ee(e,c),new U(p.FUNCTION_CALL,a,r);throw new l["a"]('Unexpected function call "'+a+'".')}if(a=t.callee.name,"color"===a){if(0===u)return new U(p.LITERAL_COLOR,a);if(r=ee(e,o[0]),Object(s["a"])(o[1])){var f=ee(e,o[1]);return new U(p.LITERAL_COLOR,a,[r,f])}return new U(p.LITERAL_COLOR,a,[r])}if("rgb"===a||"hsl"===a){if(u<3)throw new l["a"](a+" requires three arguments.");return r=[ee(e,o[0]),ee(e,o[1]),ee(e,o[2])],new U(p.LITERAL_COLOR,a,r)}if("rgba"===a||"hsla"===a){if(u<4)throw new l["a"](a+" requires four arguments.");return r=[ee(e,o[0]),ee(e,o[1]),ee(e,o[2]),ee(e,o[3])],new U(p.LITERAL_COLOR,a,r)}if("vec2"===a||"vec3"===a||"vec4"===a){r=new Array(u);for(var h=0;h<u;++h)r[h]=ee(e,o[h]);return new U(p.LITERAL_VECTOR,a,r)}if("isNaN"===a||"isFinite"===a)return 0===u?new U(p.LITERAL_BOOLEAN,"isNaN"===a):(r=ee(e,o[0]),new U(p.UNARY,a,r));if("isExactClass"===a||"isClass"===a){if(u<1||u>1)throw new l["a"](a+" requires exactly one argument.");return r=ee(e,o[0]),new U(p.UNARY,a,r)}if("getExactClassName"===a){if(u>0)throw new l["a"](a+" does not take any argument.");return new U(p.UNARY,a)}if(Object(s["a"])(L[a])){if(1!==u)throw new l["a"](a+" requires exactly one argument.");return r=ee(e,o[0]),new U(p.UNARY,a,r)}if(Object(s["a"])(C[a])){if(2!==u)throw new l["a"](a+" requires exactly two arguments.");return n=ee(e,o[0]),i=ee(e,o[1]),new U(p.BINARY,a,n,i)}if(Object(s["a"])(x[a])){if(3!==u)throw new l["a"](a+" requires exactly three arguments.");n=ee(e,o[0]),i=ee(e,o[1]);var d=ee(e,o[2]);return new U(p.TERNARY,a,n,i,d)}if("Boolean"===a)return 0===u?new U(p.LITERAL_BOOLEAN,!1):(r=ee(e,o[0]),new U(p.UNARY,a,r));if("Number"===a)return 0===u?new U(p.LITERAL_NUMBER,0):(r=ee(e,o[0]),new U(p.UNARY,a,r));if("String"===a)return 0===u?new U(p.LITERAL_STRING,""):(r=ee(e,o[0]),new U(p.UNARY,a,r));if("regExp"===a)return H(e,t);throw new l["a"]('Unexpected function call "'+a+'".')}function H(e,t){var a=t.arguments;if(0===a.length)return new U(p.LITERAL_REGEX,new RegExp);var r,n=ee(e,a[0]);if(a.length>1){var i=ee(e,a[1]);if($(n)&&$(i)){try{r=new RegExp(z(String(n._value)),i._value)}catch(o){throw new l["a"](o)}return new U(p.LITERAL_REGEX,r)}return new U(p.REGEX,n,i)}if($(n)){try{r=new RegExp(z(String(n._value)))}catch(o){throw new l["a"](o)}return new U(p.LITERAL_REGEX,r)}return new U(p.REGEX,n)}function X(e){if(J(e.name)){var t=Z(e.name);return"tiles3d_"===t.substr(0,8)?new U(p.BUILTIN_VARIABLE,t):new U(p.VARIABLE,t)}if("NaN"===e.name)return new U(p.LITERAL_NUMBER,NaN);if("Infinity"===e.name)return new U(p.LITERAL_NUMBER,1/0);if("undefined"===e.name)return new U(p.LITERAL_UNDEFINED,void 0);throw new l["a"](e.name+" is not defined.")}function W(e){var t=e.property.name;return"PI"===t?new U(p.LITERAL_NUMBER,Math.PI):"E"===t?new U(p.LITERAL_NUMBER,Math.E):void 0}function Q(e){var t=e.property.name;if("POSITIVE_INFINITY"===t)return new U(p.LITERAL_NUMBER,Number.POSITIVE_INFINITY)}function K(e,t){if("Math"===t.object.name)return W(t);if("Number"===t.object.name)return Q(t);var a,r=ee(e,t.object);return t.computed?(a=ee(e,t.property),new U(p.MEMBER,"brackets",r,a)):(a=new U(p.LITERAL_STRING,t.property.name),new U(p.MEMBER,"dot",r,a))}function $(e){return e._type>=p.LITERAL_NULL}function J(e){return"czm_"===e.substr(0,4)}function Z(e){return e.substr(4)}function ee(e,t){var a,r,n,i;if("Literal"===t.type)a=F(t);else if("CallExpression"===t.type)a=Y(e,t);else if("Identifier"===t.type)a=X(t);else if("UnaryExpression"===t.type){r=t.operator;var o=ee(e,t.argument);if(!(g.indexOf(r)>-1))throw new l["a"]('Unexpected operator "'+r+'".');a=new U(p.UNARY,r,o)}else if("BinaryExpression"===t.type){if(r=t.operator,n=ee(e,t.left),i=ee(e,t.right),!(y.indexOf(r)>-1))throw new l["a"]('Unexpected operator "'+r+'".');a=new U(p.BINARY,r,n,i)}else if("LogicalExpression"===t.type)r=t.operator,n=ee(e,t.left),i=ee(e,t.right),y.indexOf(r)>-1&&(a=new U(p.BINARY,r,n,i));else if("ConditionalExpression"===t.type){var s=ee(e,t.test);n=ee(e,t.consequent),i=ee(e,t.alternate),a=new U(p.CONDITIONAL,"?",n,i,s)}else if("MemberExpression"===t.type)a=K(e,t);else{if("ArrayExpression"!==t.type)throw"Compound"===t.type?new l["a"]("Provide exactly one expression."):new l["a"]("Cannot parse expression.");for(var u=[],c=0;c<t.elements.length;c++)u[c]=ee(e,t.elements[c]);a=new U(p.ARRAY,u)}return a}function te(e){e._type===p.CONDITIONAL?e.evaluate=e._evaluateConditional:e._type===p.FUNCTION_CALL?"test"===e._value?e.evaluate=e._evaluateRegExpTest:"exec"===e._value?e.evaluate=e._evaluateRegExpExec:"toString"===e._value&&(e.evaluate=e._evaluateToString):e._type===p.UNARY?"!"===e._value?e.evaluate=e._evaluateNot:"-"===e._value?e.evaluate=e._evaluateNegative:"+"===e._value?e.evaluate=e._evaluatePositive:"isNaN"===e._value?e.evaluate=e._evaluateNaN:"isFinite"===e._value?e.evaluate=e._evaluateIsFinite:"isExactClass"===e._value?e.evaluate=e._evaluateIsExactClass:"isClass"===e._value?e.evaluate=e._evaluateIsClass:"getExactClassName"===e._value?e.evaluate=e._evaluateGetExactClassName:"Boolean"===e._value?e.evaluate=e._evaluateBooleanConversion:"Number"===e._value?e.evaluate=e._evaluateNumberConversion:"String"===e._value?e.evaluate=e._evaluateStringConversion:Object(s["a"])(L[e._value])&&(e.evaluate=re(e._value)):e._type===p.BINARY?"+"===e._value?e.evaluate=e._evaluatePlus:"-"===e._value?e.evaluate=e._evaluateMinus:"*"===e._value?e.evaluate=e._evaluateTimes:"/"===e._value?e.evaluate=e._evaluateDivide:"%"===e._value?e.evaluate=e._evaluateMod:"==="===e._value?e.evaluate=e._evaluateEqualsStrict:"!=="===e._value?e.evaluate=e._evaluateNotEqualsStrict:"<"===e._value?e.evaluate=e._evaluateLessThan:"<="===e._value?e.evaluate=e._evaluateLessThanOrEquals:">"===e._value?e.evaluate=e._evaluateGreaterThan:">="===e._value?e.evaluate=e._evaluateGreaterThanOrEquals:"&&"===e._value?e.evaluate=e._evaluateAnd:"||"===e._value?e.evaluate=e._evaluateOr:"=~"===e._value?e.evaluate=e._evaluateRegExpMatch:"!~"===e._value?e.evaluate=e._evaluateRegExpNotMatch:Object(s["a"])(C[e._value])&&(e.evaluate=ne(e._value)):e._type===p.TERNARY?e.evaluate=ie(e._value):e._type===p.MEMBER?"brackets"===e._value?e.evaluate=e._evaluateMemberBrackets:e.evaluate=e._evaluateMemberDot:e._type===p.ARRAY?e.evaluate=e._evaluateArray:e._type===p.VARIABLE?e.evaluate=e._evaluateVariable:e._type===p.VARIABLE_IN_STRING?e.evaluate=e._evaluateVariableString:e._type===p.LITERAL_COLOR?e.evaluate=e._evaluateLiteralColor:e._type===p.LITERAL_VECTOR?e.evaluate=e._evaluateLiteralVector:e._type===p.LITERAL_STRING?e.evaluate=e._evaluateLiteralString:e._type===p.REGEX?e.evaluate=e._evaluateRegExp:e._type===p.BUILTIN_VARIABLE?"tiles3d_tileset_time"===e._value&&(e.evaluate=ae):e.evaluate=e._evaluateLiteral}function ae(e){return Object(s["a"])(e)?e.content.tileset.timeSinceLoad:0}function re(e){var t=L[e];return function(a){var r=this._left.evaluate(a);return t(e,r)}}function ne(e){var t=C[e];return function(a){var r=this._left.evaluate(a),n=this._right.evaluate(a);return t(e,r,n)}}function ie(e){var t=x[e];return function(a){var r=this._left.evaluate(a),n=this._right.evaluate(a),i=this._test.evaluate(a);return t(e,r,n,i)}}function oe(e,t){if(Object(s["a"])(e))return e.getProperty(t)}function se(e){return"feature"===e._value}function ue(e){for(var t=e._left,a=t.length,r=0;r<a;++r)if(t[r]._type!==p.LITERAL_NUMBER)return;var n=t[0]._value,i=t[1]._value,s=t[2]._value,u=4===a?t[3]._value:1;return o["a"].fromHsl(n,i,s,u,A)}function ce(e){for(var t=e._left,a=t.length,r=0;r<a;++r)if(t[r]._type!==p.LITERAL_NUMBER)return;var n=A;return n.red=t[0]._value/255,n.green=t[1]._value/255,n.blue=t[2]._value/255,n.alpha=4===a?t[3]._value:1,n}function fe(e){return e%1===0?e.toFixed(1):e.toString()}function le(e){var t=fe(e.red),a=fe(e.green),r=fe(e.blue);return"vec3("+t+", "+a+", "+r+")"}function he(e){var t=fe(e.red),a=fe(e.green),r=fe(e.blue),n=fe(e.alpha);return"vec4("+t+", "+a+", "+r+", "+n+")"}function de(e,t,a,r){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i[o]=e[o].getShaderExpression(t,a,r);return i}U.prototype._evaluateLiteral=function(){return this._value},U.prototype._evaluateLiteralColor=function(e){var t=A,a=this._left;if("color"===this._value)Object(s["a"])(a)?a.length>1?(o["a"].fromCssColorString(a[0].evaluate(e),t),t.alpha=a[1].evaluate(e)):o["a"].fromCssColorString(a[0].evaluate(e),t):o["a"].fromBytes(255,255,255,255,t);else if("rgb"===this._value)o["a"].fromBytes(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),255,t);else if("rgba"===this._value){var r=255*a[3].evaluate(e);o["a"].fromBytes(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),r,t)}else"hsl"===this._value?o["a"].fromHsl(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),1,t):"hsla"===this._value&&o["a"].fromHsl(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),a[3].evaluate(e),t);return i["a"].fromColor(t,v.getCartesian4())},U.prototype._evaluateLiteralVector=function(e){for(var t=v.getArray(),a=this._value,o=this._left,s=o.length,u=0;u<s;++u){var c=o[u].evaluate(e);if("number"===typeof c)t.push(c);else if(c instanceof r["a"])t.push(c.x,c.y);else if(c instanceof n["a"])t.push(c.x,c.y,c.z);else{if(!(c instanceof i["a"]))throw new l["a"](a+" argument must be a vector or number. Argument is "+c+".");t.push(c.x,c.y,c.z,c.w)}}var f=t.length,h=parseInt(a.charAt(3));if(0===f)throw new l["a"]("Invalid "+a+" constructor. No valid arguments.");if(f<h&&f>1)throw new l["a"]("Invalid "+a+" constructor. Not enough arguments.");if(f>h&&s>1)throw new l["a"]("Invalid "+a+" constructor. Too many arguments.");if(1===f){var d=t[0];t.push(d,d,d)}return"vec2"===a?r["a"].fromArray(t,0,v.getCartesian2()):"vec3"===a?n["a"].fromArray(t,0,v.getCartesian3()):"vec4"===a?i["a"].fromArray(t,0,v.getCartesian4()):void 0},U.prototype._evaluateLiteralString=function(){return this._value},U.prototype._evaluateVariableString=function(e){var t=this._value,a=b.exec(t);while(null!==a){var r=a[0],n=a[1],i=oe(e,n);Object(s["a"])(i)||(i=""),t=t.replace(r,i),a=b.exec(t)}return t},U.prototype._evaluateVariable=function(e){return oe(e,this._value)},U.prototype._evaluateMemberDot=function(e){if(se(this._left))return oe(e,this._right.evaluate(e));var t=this._left.evaluate(e);if(Object(s["a"])(t)){var a=this._right.evaluate(e);if(t instanceof r["a"]||t instanceof n["a"]||t instanceof i["a"]){if("r"===a)return t.x;if("g"===a)return t.y;if("b"===a)return t.z;if("a"===a)return t.w}return t[a]}},U.prototype._evaluateMemberBrackets=function(e){if(se(this._left))return oe(e,this._right.evaluate(e));var t=this._left.evaluate(e);if(Object(s["a"])(t)){var a=this._right.evaluate(e);if(t instanceof r["a"]||t instanceof n["a"]||t instanceof i["a"]){if(0===a||"r"===a)return t.x;if(1===a||"g"===a)return t.y;if(2===a||"b"===a)return t.z;if(3===a||"a"===a)return t.w}return t[a]}},U.prototype._evaluateArray=function(e){for(var t=[],a=0;a<this._value.length;a++)t[a]=this._value[a].evaluate(e);return t},U.prototype._evaluateNot=function(e){var t=this._left.evaluate(e);if("boolean"!==typeof t)throw new l["a"]('Operator "!" requires a boolean argument. Argument is '+t+".");return!t},U.prototype._evaluateNegative=function(e){var t=this._left.evaluate(e);if(t instanceof r["a"])return r["a"].negate(t,v.getCartesian2());if(t instanceof n["a"])return n["a"].negate(t,v.getCartesian3());if(t instanceof i["a"])return i["a"].negate(t,v.getCartesian4());if("number"===typeof t)return-t;throw new l["a"]('Operator "-" requires a vector or number argument. Argument is '+t+".")},U.prototype._evaluatePositive=function(e){var t=this._left.evaluate(e);if(!(t instanceof r["a"]||t instanceof n["a"]||t instanceof i["a"]||"number"===typeof t))throw new l["a"]('Operator "+" requires a vector or number argument. Argument is '+t+".");return t},U.prototype._evaluateLessThan=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new l["a"]('Operator "<" requires number arguments. Arguments are '+t+" and "+a+".");return t<a},U.prototype._evaluateLessThanOrEquals=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new l["a"]('Operator "<=" requires number arguments. Arguments are '+t+" and "+a+".");return t<=a},U.prototype._evaluateGreaterThan=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new l["a"]('Operator ">" requires number arguments. Arguments are '+t+" and "+a+".");return t>a},U.prototype._evaluateGreaterThanOrEquals=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new l["a"]('Operator ">=" requires number arguments. Arguments are '+t+" and "+a+".");return t>=a},U.prototype._evaluateOr=function(e){var t=this._left.evaluate(e);if("boolean"!==typeof t)throw new l["a"]('Operator "||" requires boolean arguments. First argument is '+t+".");if(t)return!0;var a=this._right.evaluate(e);if("boolean"!==typeof a)throw new l["a"]('Operator "||" requires boolean arguments. Second argument is '+a+".");return t||a},U.prototype._evaluateAnd=function(e){var t=this._left.evaluate(e);if("boolean"!==typeof t)throw new l["a"]('Operator "&&" requires boolean arguments. First argument is '+t+".");if(!t)return!1;var a=this._right.evaluate(e);if("boolean"!==typeof a)throw new l["a"]('Operator "&&" requires boolean arguments. Second argument is '+a+".");return t&&a},U.prototype._evaluatePlus=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].add(t,a,v.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].add(t,a,v.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].add(t,a,v.getCartesian4());if("string"===typeof t||"string"===typeof a)return t+a;if("number"===typeof t&&"number"===typeof a)return t+a;throw new l["a"]('Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are '+t+" and "+a+".")},U.prototype._evaluateMinus=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].subtract(t,a,v.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].subtract(t,a,v.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].subtract(t,a,v.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t-a;throw new l["a"]('Operator "-" requires vector or number arguments of matching types. Arguments are '+t+" and "+a+".")},U.prototype._evaluateTimes=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].multiplyComponents(t,a,v.getCartesian2());if(a instanceof r["a"]&&"number"===typeof t)return r["a"].multiplyByScalar(a,t,v.getCartesian2());if(t instanceof r["a"]&&"number"===typeof a)return r["a"].multiplyByScalar(t,a,v.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].multiplyComponents(t,a,v.getCartesian3());if(a instanceof n["a"]&&"number"===typeof t)return n["a"].multiplyByScalar(a,t,v.getCartesian3());if(t instanceof n["a"]&&"number"===typeof a)return n["a"].multiplyByScalar(t,a,v.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].multiplyComponents(t,a,v.getCartesian4());if(a instanceof i["a"]&&"number"===typeof t)return i["a"].multiplyByScalar(a,t,v.getCartesian4());if(t instanceof i["a"]&&"number"===typeof a)return i["a"].multiplyByScalar(t,a,v.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t*a;throw new l["a"]('Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are '+t+" and "+a+".")},U.prototype._evaluateDivide=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].divideComponents(t,a,v.getCartesian2());if(t instanceof r["a"]&&"number"===typeof a)return r["a"].divideByScalar(t,a,v.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].divideComponents(t,a,v.getCartesian3());if(t instanceof n["a"]&&"number"===typeof a)return n["a"].divideByScalar(t,a,v.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].divideComponents(t,a,v.getCartesian4());if(t instanceof i["a"]&&"number"===typeof a)return i["a"].divideByScalar(t,a,v.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t/a;throw new l["a"]('Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are '+t+" and "+a+".")},U.prototype._evaluateMod=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].fromElements(t.x%a.x,t.y%a.y,v.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].fromElements(t.x%a.x,t.y%a.y,t.z%a.z,v.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].fromElements(t.x%a.x,t.y%a.y,t.z%a.z,t.w%a.w,v.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t%a;throw new l["a"]('Operator "%" requires vector or number arguments of matching types. Arguments are '+t+" and "+a+".")},U.prototype._evaluateEqualsStrict=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);return a instanceof r["a"]&&t instanceof r["a"]||a instanceof n["a"]&&t instanceof n["a"]||a instanceof i["a"]&&t instanceof i["a"]?t.equals(a):t===a},U.prototype._evaluateNotEqualsStrict=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);return a instanceof r["a"]&&t instanceof r["a"]||a instanceof n["a"]&&t instanceof n["a"]||a instanceof i["a"]&&t instanceof i["a"]?!t.equals(a):t!==a},U.prototype._evaluateConditional=function(e){var t=this._test.evaluate(e);if("boolean"!==typeof t)throw new l["a"]("Conditional argument of conditional expression must be a boolean. Argument is "+t+".");return t?this._left.evaluate(e):this._right.evaluate(e)},U.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))},U.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))},U.prototype._evaluateIsExactClass=function(e){return!!Object(s["a"])(e)&&e.isExactClass(this._left.evaluate(e))},U.prototype._evaluateIsClass=function(e){return!!Object(s["a"])(e)&&e.isClass(this._left.evaluate(e))},U.prototype._evaluateGetExactClassName=function(e){if(Object(s["a"])(e))return e.getExactClassName()},U.prototype._evaluateBooleanConversion=function(e){return Boolean(this._left.evaluate(e))},U.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))},U.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))},U.prototype._evaluateRegExp=function(e){var t,a=this._value.evaluate(e),r="";Object(s["a"])(this._left)&&(r=this._left.evaluate(e));try{t=new RegExp(a,r)}catch(n){throw new l["a"](n)}return t},U.prototype._evaluateRegExpTest=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof a))throw new l["a"]("RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are "+t+" and "+a+".");return t.test(a)},U.prototype._evaluateRegExpMatch=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof a)return t.test(a);if(a instanceof RegExp&&"string"===typeof t)return a.test(t);throw new l["a"]('Operator "=~" requires one RegExp argument and one string argument. Arguments are '+t+" and "+a+".")},U.prototype._evaluateRegExpNotMatch=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof a)return!t.test(a);if(a instanceof RegExp&&"string"===typeof t)return!a.test(t);throw new l["a"]('Operator "!~" requires one RegExp argument and one string argument. Arguments are '+t+" and "+a+".")},U.prototype._evaluateRegExpExec=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof a))throw new l["a"]("RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are "+t+" and "+a+".");var r=t.exec(a);return Object(s["a"])(r)?r[1]:null},U.prototype._evaluateToString=function(e){var t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof r["a"]||t instanceof n["a"]||t instanceof i["a"])return String(t);throw new l["a"]('Unexpected function call "'+this._value+'".')},U.prototype.getShaderExpression=function(e,t,a){var r,n,i,u,f=this._type,h=this._value;switch(Object(s["a"])(this._left)&&(n=Object(c["a"])(this._left)?de(this._left,e,t,this):this._left.getShaderExpression(e,t,this)),Object(s["a"])(this._right)&&(i=this._right.getShaderExpression(e,t,this)),Object(s["a"])(this._test)&&(u=this._test.getShaderExpression(e,t,this)),Object(c["a"])(this._value)&&(h=de(this._value,e,t,this)),f){case p.VARIABLE:return e+h;case p.UNARY:if("Boolean"===h)return"bool("+n+")";if("Number"===h)return"float("+n+")";if("round"===h)return"floor("+n+" + 0.5)";if(Object(s["a"])(L[h]))return h+"("+n+")";if("isNaN"===h||"isFinite"===h||"String"===h||"isExactClass"===h||"isClass"===h||"getExactClassName"===h)throw new l["a"]('Error generating style shader: "'+h+'" is not supported.');return Object(s["a"])(L[h])?h+"("+n+")":h+n;case p.BINARY:return"%"===h?"mod("+n+", "+i+")":"==="===h?"("+n+" == "+i+")":"!=="===h?"("+n+" != "+i+")":"atan2"===h?"atan("+n+", "+i+")":Object(s["a"])(C[h])?h+"("+n+", "+i+")":"("+n+" "+h+" "+i+")";case p.TERNARY:if(Object(s["a"])(x[h]))return h+"("+n+", "+i+", "+u+")";break;case p.CONDITIONAL:return"("+u+" ? "+n+" : "+i+")";case p.MEMBER:return"r"===i||"x"===i||"0.0"===i?n+"[0]":"g"===i||"y"===i||"1.0"===i?n+"[1]":"b"===i||"z"===i||"2.0"===i?n+"[2]":"a"===i||"w"===i||"3.0"===i?n+"[3]":n+"[int("+i+")]";case p.FUNCTION_CALL:throw new l["a"]('Error generating style shader: "'+h+'" is not supported.');case p.ARRAY:if(4===h.length)return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")";if(3===h.length)return"vec3("+h[0]+", "+h[1]+", "+h[2]+")";if(2===h.length)return"vec2("+h[0]+", "+h[1]+")";throw new l["a"]("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case p.REGEX:throw new l["a"]("Error generating style shader: Regular expressions are not supported.");case p.VARIABLE_IN_STRING:throw new l["a"]("Error generating style shader: Converting a variable to a string is not supported.");case p.LITERAL_NULL:throw new l["a"]("Error generating style shader: null is not supported.");case p.LITERAL_BOOLEAN:return h?"true":"false";case p.LITERAL_NUMBER:return fe(h);case p.LITERAL_STRING:if(Object(s["a"])(a)&&a._type===p.MEMBER&&("r"===h||"g"===h||"b"===h||"a"===h||"x"===h||"y"===h||"z"===h||"w"===h))return h;if(r=o["a"].fromCssColorString(h,A),Object(s["a"])(r))return le(r);throw new l["a"]("Error generating style shader: String literals are not supported.");case p.LITERAL_COLOR:var d=n;if("color"===h){if(!Object(s["a"])(d))return"vec4(1.0)";if(d.length>1){var m=d[0],_=d[1];return"1.0"!==_&&(t.translucent=!0),"vec4("+m+", "+_+")"}return"vec4("+d[0]+", 1.0)"}if("rgb"===h)return r=ce(this),Object(s["a"])(r)?he(r):"vec4("+d[0]+" / 255.0, "+d[1]+" / 255.0, "+d[2]+" / 255.0, 1.0)";if("rgba"===h)return"1.0"!==d[3]&&(t.translucent=!0),r=ce(this),Object(s["a"])(r)?he(r):"vec4("+d[0]+" / 255.0, "+d[1]+" / 255.0, "+d[2]+" / 255.0, "+d[3]+")";if("hsl"===h)return r=ue(this),Object(s["a"])(r)?he(r):"vec4(czm_HSLToRGB(vec3("+d[0]+", "+d[1]+", "+d[2]+")), 1.0)";if("hsla"===h)return r=ue(this),Object(s["a"])(r)?(1!==r.alpha&&(t.translucent=!0),he(r)):("1.0"!==d[3]&&(t.translucent=!0),"vec4(czm_HSLToRGB(vec3("+d[0]+", "+d[1]+", "+d[2]+")), "+d[3]+")");break;case p.LITERAL_VECTOR:for(var v=n.length,g=h+"(",y=0;y<v;++y)g+=n[y],y<v-1&&(g+=", ");return g+=")",g;case p.LITERAL_REGEX:throw new l["a"]("Error generating style shader: Regular expressions are not supported.");case p.LITERAL_UNDEFINED:throw new l["a"]("Error generating style shader: undefined is not supported.");case p.BUILTIN_VARIABLE:if("tiles3d_tileset_time"===h)return"u_time"}};t["a"]=_},"71af":function(e,t,a){"use strict";var r=a("535a"),n=a("2f63"),i=a("2720"),o=a("d4ed");function s(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;var t=o["a"].createIfNeeded(e.missingImageUrl),a=this;function s(t){Object(n["a"])(t.blob)&&(a._missingImageByteLength=t.blob.size);var r=Object(i["a"])(t);if(e.disableCheckIfAllPixelsAreTransparent){for(var o=!0,s=t.width,u=e.pixelsToCheck,c=0,f=u.length;o&&c<f;++c){var l=u[c],h=4*l.x+l.y*s,d=r[h+3];d>0&&(o=!1)}o&&(r=void 0)}a._missingImagePixels=r,a._isReady=!0}function u(){a._missingImagePixels=void 0,a._isReady=!0}t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then(s).otherwise(u)}s.prototype.isReady=function(){return this._isReady},s.prototype.shouldDiscardImage=function(e){var t=this._pixelsToCheck,a=this._missingImagePixels;if(!Object(n["a"])(a))return!1;if(Object(n["a"])(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;for(var r=Object(i["a"])(e),o=e.width,s=0,u=t.length;s<u;++s)for(var c=t[s],f=4*c.x+c.y*o,l=0;l<4;++l){var h=f+l;if(r[h]!==a[h])return!1}return!0},t["a"]=s},"81e1":function(e,t,a){"use strict";var r=a("cef5"),n=a("be18"),i=a("abab"),o=a("2f63"),s=a("5e57"),u=a("d2c7"),c=a("81d7"),f=a("1b8d"),l=a("8b68"),h=a("a894"),d=a("d289"),m=a("6dc0"),p=a("e90c"),_=a("5770"),v=a("7c5e"),g=a("9182"),y=a("9c6c"),b=a("a307");function w(){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1}var E=s["a"].supportsTypedArrays()?new Float32Array(12):[],O=new n["a"],A=new n["a"],L=new n["a"],C=new n["a"];function x(e,t){var a=e.radii,r=t.camera.positionWC,i=n["a"].multiplyComponents(e.oneOverRadii,r,O),o=n["a"].magnitude(i),s=n["a"].normalize(i,A),u=n["a"].normalize(n["a"].cross(n["a"].UNIT_Z,i,L),L),c=n["a"].normalize(n["a"].cross(s,u,C),C),f=Math.sqrt(n["a"].magnitudeSquared(i)-1),l=n["a"].multiplyByScalar(s,1/o,O),h=f/o,d=n["a"].multiplyByScalar(u,h,A),m=n["a"].multiplyByScalar(c,h,L),p=n["a"].add(l,m,C);n["a"].subtract(p,d,p),n["a"].multiplyComponents(a,p,p),n["a"].pack(p,E,0);var _=n["a"].subtract(l,m,C);n["a"].subtract(_,d,_),n["a"].multiplyComponents(a,_,_),n["a"].pack(_,E,3);var v=n["a"].add(l,m,C);n["a"].add(v,d,v),n["a"].multiplyComponents(a,v,v),n["a"].pack(v,E,6);var g=n["a"].subtract(l,m,C);return n["a"].add(g,d,g),n["a"].multiplyComponents(a,g,g),n["a"].pack(g,E,9),E}w.prototype.update=function(e){if(this._mode=e.mode,e.mode===b["a"].SCENE3D){var t=e.context,a=e.mapProjection.ellipsoid,s=e.useLogDepth;if(Object(o["a"])(this._command)||(this._rs=m["a"].fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new h["a"]({renderState:this._rs,boundingVolume:new r["a"](n["a"].ZERO,a.maximumRadius),pass:d["a"].OPAQUE,owner:this})),!Object(o["a"])(this._sp)||this._useLogDepth!==s){this._useLogDepth=s;var w=new _["a"]({sources:[y["a"]]}),E=new _["a"]({sources:[g["a"]]});if(s){var O="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";E.sources.push(O),E.defines.push("LOG_DEPTH"),w.defines.push("LOG_DEPTH"),w.defines.push("DISABLE_GL_POSITION_LOG_DEPTH")}this._sp=p["a"].replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:w,fragmentShaderSource:E,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}var A=x(a,e);if(Object(o["a"])(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(A);else{var L=new u["a"]({attributes:{position:new c["a"]({componentDatatype:i["a"].FLOAT,componentsPerAttribute:3,values:A})},indices:[0,1,2,2,1,3],primitiveType:f["a"].TRIANGLES});this._va=v["a"].fromGeometry({context:t,geometry:L,attributeLocations:{position:0},bufferUsage:l["a"].DYNAMIC_DRAW}),this._command.vertexArray=this._va}}},w.prototype.execute=function(e,t){this._mode===b["a"].SCENE3D&&this._command.execute(e,t)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()},t["a"]=w},"9cff":function(e,t,a){"use strict";var r=a("2f63"),n=a("7d62"),i=a("93da"),o=a("df07"),s=a("0260");function u(e){this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;var t=this;function a(e){var a=e.alpha;if(!Object(r["a"])(a))return t._alpha=void 0,t._beta=void 0,void(t._gamma=void 0);t._alpha=i["a"].toRadians(a),t._beta=i["a"].toRadians(e.beta),t._gamma=i["a"].toRadians(e.gamma)}window.addEventListener("deviceorientation",a,!1),this._removeListener=function(){window.removeEventListener("deviceorientation",a,!1)}}var c=new s["a"],f=new s["a"],l=new o["a"];function h(e,t,a,r){var n=e.direction,i=e.right,u=e.up,h=s["a"].fromAxisAngle(n,a,f),d=s["a"].fromAxisAngle(i,r,c),m=s["a"].multiply(d,h,d),p=s["a"].fromAxisAngle(u,t,f);s["a"].multiply(p,m,m);var _=o["a"].fromQuaternion(m,l);o["a"].multiplyByVector(_,i,i),o["a"].multiplyByVector(_,u,u),o["a"].multiplyByVector(_,n,n)}u.prototype.update=function(){if(Object(r["a"])(this._alpha)){Object(r["a"])(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);var e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,a=this._lastGamma-this._gamma;h(this._scene.camera,-e,t,a),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma}},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._removeListener(),Object(n["a"])(this)},t["a"]=u},c872:function(e,t,a){"use strict";var r=a("9f1d"),n=a("7d62");function i(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object(r["a"])(i.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},batchTable:{get:function(){}}}),i.prototype.hasProperty=function(e,t){return!1},i.prototype.getFeature=function(e){},i.prototype.applyDebugSettings=function(e,t){},i.prototype.applyStyle=function(e){},i.prototype.update=function(e,t){},i.prototype.isDestroyed=function(){return!1},i.prototype.destroy=function(){return Object(n["a"])(this)},t["a"]=i},c965:function(e,t,a){"use strict";var r=a("be18"),n=a("bd8d"),i=a("9541"),o=a("535a"),s=a("7d62"),u=a("8d4e"),c=a("797c"),f=a("d940"),l=a("df07"),h=a("713f"),d=a("c34a"),m=a("4e1a"),p=a("4dc8"),_=a("0260"),v=a("3a8e"),g=a("894b");function y(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._camera=e.camera,this._color=Object(o["a"])(e.color,n["a"].CYAN),this._updateOnChange=Object(o["a"])(e.updateOnChange,!0),this.show=Object(o["a"])(e.show,!0),this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}var b=new r["a"],w=new l["a"],E=new _["a"],O=new m["a"],A=new p["a"],L=new h["a"],C=new d["a"],x=new n["a"],R=[1,1e5];y.prototype.update=function(e){if(this.show){var t,a,o=this._planesPrimitives,s=this._outlinePrimitives;if(this._updateOnChange){for(a=o.length,t=0;t<a;++t)s[t]=s[t]&&s[t].destroy(),o[t]=o[t]&&o[t].destroy();o.length=0,s.length=0}if(0===o.length){var d,y=this._camera,I=y.frustum;d=I instanceof m["a"]?O:I instanceof p["a"]?A:I instanceof h["a"]?L:C,d=I.clone(d);var S=e.frustumSplits,T=S.length-1;T<=0&&(S=R,S[0]=this._camera.frustum.near,S[1]=this._camera.frustum.far,T=1);var N=y.positionWC,P=y.directionWC,j=y.upWC,M=y.rightWC;M=r["a"].negate(M,b);var D=w;l["a"].setColumn(D,0,M,D),l["a"].setColumn(D,1,j,D),l["a"].setColumn(D,2,P,D);var B=_["a"].fromRotationMatrix(D,E);for(o.length=s.length=T,t=0;t<T;++t)d.near=S[t],d.far=S[t+1],o[t]=new g["a"]({geometryInstances:new f["a"]({geometry:new u["a"]({origin:N,orientation:B,frustum:d,_drawNearPlane:0===t}),attributes:{color:i["a"].fromColor(n["a"].fromAlpha(this._color,.1,x))},id:this.id,pickPrimitive:this}),appearance:new v["a"]({translucent:!0,flat:!0}),asynchronous:!1}),s[t]=new g["a"]({geometryInstances:new f["a"]({geometry:new c["a"]({origin:N,orientation:B,frustum:d,_drawNearPlane:0===t}),attributes:{color:i["a"].fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new v["a"]({translucent:!1,flat:!0}),asynchronous:!1})}for(a=o.length,t=0;t<a;++t)s[t].update(e),o[t].update(e)}},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){for(var e=this._planesPrimitives.length,t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return Object(s["a"])(this)},t["a"]=y},ed8b:function(e,t,a){"use strict";var r=a("2f63"),n=a("a894"),i=a("6dc0"),o=a("5770");function s(){}var u=/\bgl_FragDepthEXT\b/,c=/\bdiscard\b/;function f(e,t){var a=e.shaderCache.getDerivedShaderProgram(t,"depthOnly");if(!Object(r["a"])(a)){var n,i=t._attributeLocations,s=t.fragmentShaderSource,f=!1,l=s.sources,h=l.length;for(n=0;n<h;++n)if(u.test(l[n])||c.test(l[n])){f=!0;break}var d,m=!1,p=s.defines;for(h=p.length,n=0;n<h;++n)if("LOG_DEPTH"===p[n]){m=!0;break}f||m?!f&&m&&(d="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\nvoid main() \n{ \n    gl_FragColor = vec4(1.0); \n    czm_writeLogDepth(); \n} \n",s=new o["a"]({defines:["LOG_DEPTH"],sources:[d]})):(d="void main() \n{ \n    gl_FragColor = vec4(1.0); \n} \n",s=new o["a"]({sources:[d]})),a=e.shaderCache.createDerivedShaderProgram(t,"depthOnly",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:s,attributeLocations:i})}return a}function l(e,t){var a=e._depthOnlyRenderStateCache,n=a[t.id];if(!Object(r["a"])(n)){var o=i["a"].getState(t);o.depthMask=!0,o.colorMask={red:!1,green:!1,blue:!1,alpha:!1},n=i["a"].fromCache(o),a[t.id]=n}return n}s.createDepthOnlyDerivedCommand=function(e,t,a,i){var o,s;return Object(r["a"])(i)||(i={}),Object(r["a"])(i.depthOnlyCommand)&&(o=i.depthOnlyCommand.shaderProgram,s=i.depthOnlyCommand.renderState),i.depthOnlyCommand=n["a"].shallowClone(t,i.depthOnlyCommand),Object(r["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.depthOnlyCommand.shaderProgram=o,i.depthOnlyCommand.renderState=s):(i.depthOnlyCommand.shaderProgram=f(a,t.shaderProgram),i.depthOnlyCommand.renderState=l(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i};var h=/\s+czm_writeLogDepth\(/,d=/\s+czm_vertexLogDepth\(/,m=/\s*#extension\s+GL_EXT_frag_depth\s*:\s*enable/;function p(e,t){var a=e.shaderCache.getDerivedShaderProgram(t,"logDepth");if(!Object(r["a"])(a)){var n,i,s=t._attributeLocations,u=t.vertexShaderSource.clone(),c=t.fragmentShaderSource.clone();u.defines=Object(r["a"])(u.defines)?u.defines.slice(0):[],u.defines.push("LOG_DEPTH"),c.defines=Object(r["a"])(c.defines)?c.defines.slice(0):[],c.defines.push("LOG_DEPTH");var f=!1,l=u.sources,p=l.length;for(n=0;n<p;++n)if(d.test(l[n])){f=!0;break}if(!f){for(n=0;n<p;++n)l[n]=o["a"].replaceMain(l[n],"czm_log_depth_main");i="\n\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_vertexLogDepth(); \n} \n",l.push(i)}var _=!0;for(f=!1,l=c.sources,p=l.length,n=0;n<p;++n)h.test(l[n])&&(f=!0),m.test(l[n])&&(_=!1);var v="";if(_&&(v+="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n"),!f){for(n=0;n<p;n++)l[n]=o["a"].replaceMain(l[n],"czm_log_depth_main");v+="\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_writeLogDepth(); \n} \n"}l.push(v),a=e.shaderCache.createDerivedShaderProgram(t,"logDepth",{vertexShaderSource:u,fragmentShaderSource:c,attributeLocations:s})}return a}function _(e,t,a){var n=e.shaderCache.getDerivedShaderProgram(t,"pick");if(!Object(r["a"])(n)){for(var i=t._attributeLocations,s=t.fragmentShaderSource,u=s.sources,c=u.length,f="void main() \n{ \n    czm_non_pick_main(); \n    if (gl_FragColor.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = "+a+"; \n} \n",l=new Array(c+1),h=0;h<c;++h)l[h]=o["a"].replaceMain(u[h],"czm_non_pick_main");l[c]=f,s=new o["a"]({sources:l,defines:s.defines}),n=e.shaderCache.createDerivedShaderProgram(t,"pick",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:s,attributeLocations:i})}return n}function v(e,t){var a=e.picking.pickRenderStateCache,n=a[t.id];if(!Object(r["a"])(n)){var o=i["a"].getState(t);o.blending.enabled=!1,o.depthMask=!0,n=i["a"].fromCache(o),a[t.id]=n}return n}function g(e,t){var a=e.shaderCache.getDerivedShaderProgram(t,"HDR");if(!Object(r["a"])(a)){var n=t._attributeLocations,i=t.vertexShaderSource.clone(),o=t.fragmentShaderSource.clone();i.defines=Object(r["a"])(i.defines)?i.defines.slice(0):[],i.defines.push("HDR"),o.defines=Object(r["a"])(o.defines)?o.defines.slice(0):[],o.defines.push("HDR"),a=e.shaderCache.createDerivedShaderProgram(t,"HDR",{vertexShaderSource:i,fragmentShaderSource:o,attributeLocations:n})}return a}s.createLogDepthCommand=function(e,t,a){var i;return Object(r["a"])(a)||(a={}),Object(r["a"])(a.command)&&(i=a.command.shaderProgram),a.command=n["a"].shallowClone(e,a.command),Object(r["a"])(i)&&a.shaderProgramId===e.shaderProgram.id?a.command.shaderProgram=i:(a.command.shaderProgram=p(t,e.shaderProgram),a.shaderProgramId=e.shaderProgram.id),a},s.createPickDerivedCommand=function(e,t,a,i){var o,s;return Object(r["a"])(i)||(i={}),Object(r["a"])(i.pickCommand)&&(o=i.pickCommand.shaderProgram,s=i.pickCommand.renderState),i.pickCommand=n["a"].shallowClone(t,i.pickCommand),Object(r["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.pickCommand.shaderProgram=o,i.pickCommand.renderState=s):(i.pickCommand.shaderProgram=_(a,t.shaderProgram,t.pickId),i.pickCommand.renderState=v(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i},s.createHdrCommand=function(e,t,a){var i;return Object(r["a"])(a)||(a={}),Object(r["a"])(a.command)&&(i=a.command.shaderProgram),a.command=n["a"].shallowClone(e,a.command),Object(r["a"])(i)&&a.shaderProgramId===e.shaderProgram.id?a.command.shaderProgram=i:(a.command.shaderProgram=g(t,e.shaderProgram),a.shaderProgramId=e.shaderProgram.id),a},t["a"]=s}}]);