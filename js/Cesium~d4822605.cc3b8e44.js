(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~d4822605"],{8773:function(e,t,r){"use strict";var i=r("77af"),a=r("2f63"),n=r("7d62"),o=r("e42d"),s=r("ac3b"),c=r("00f8"),u=r("6ef5"),f=r("a913");function h(){this._depthStencilTexture=void 0,this._framebuffer=void 0,this._passState=void 0}function p(e){e._framebuffer=e._framebuffer&&e._framebuffer.destroy(),e._depthStencilTexture=e._depthStencilTexture&&e._depthStencilTexture.destroy()}function d(e,t){var r=t.drawingBufferWidth,a=t.drawingBufferHeight;e._depthStencilTexture=new f["a"]({context:t,width:r,height:a,pixelFormat:o["a"].DEPTH_STENCIL,pixelDatatype:u["a"].UNSIGNED_INT_24_8}),e._framebuffer=new s["a"]({context:t,depthStencilTexture:e._depthStencilTexture,destroyAttachments:!1});var n=new c["a"](t);n.blendingEnabled=!1,n.scissorTest={enabled:!0,rectangle:new i["a"]},n.viewport=new i["a"],e._passState=n}h.prototype.update=function(e,t,r){var i=r.width,n=r.height;Object(a["a"])(this._framebuffer)&&i===this._depthStencilTexture.width&&n===this._depthStencilTexture.height||(p(this),d(this,e));var o=this._framebuffer,s=this._passState;return s.framebuffer=o,s.viewport.width=i,s.viewport.height=n,s.scissorTest.rectangle.x=t.x,s.scissorTest.rectangle.y=n-t.y,s.scissorTest.rectangle.width=1,s.scissorTest.rectangle.height=1,s},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return p(this),Object(n["a"])(this)},t["a"]=h},d572:function(e,t,r){"use strict";var i=r("dd06"),a=r("77af"),n=r("670c"),o=r("be18"),s=r("bef8"),c=r("bd8d"),u=r("535a"),f=r("2f63"),h=r("52f0"),p=r("713f"),d=r("c34a"),m=r("4e1a"),l=r("4dc8"),v=r("2ac3"),w=r("ac9c"),_=r("a58e"),g=r("9dbf"),b=r("5af0"),y=r("d150"),x=r("56d3"),C=r("a561"),D=r("7d62"),O=r("e42d"),j=r("ac3b"),T=r("6ef5"),k=r("6dc0"),P=r("5770"),S=r("a913");function F(){this._framebuffer=void 0,this._depthTexture=void 0,this._textureToCopy=void 0,this._copyDepthCommand=void 0,this._useLogDepth=void 0,this._debugPickDepthViewportCommand=void 0}function E(e,t,r,i){if(!Object(f["a"])(e._debugPickDepthViewportCommand)||i!==e._useLogDepth){var a="uniform sampler2D u_texture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    float z_window = czm_unpackDepth(texture2D(u_texture, v_textureCoordinates));\n    z_window = czm_reverseLogDepth(z_window); \n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    float z_ndc = (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n    float scale = pow(z_ndc * 0.5 + 0.5, 8.0);\n    gl_FragColor = vec4(mix(vec3(0.0), vec3(1.0), scale), 1.0);\n}\n",n=new P["a"]({defines:[i?"LOG_DEPTH":""],sources:[a]});e._debugPickDepthViewportCommand=t.createViewportQuadCommand(n,{uniformMap:{u_texture:function(){return e._depthTexture}},owner:e}),e._useLogDepth=i}e._debugPickDepthViewportCommand.execute(t,r)}function V(e){e._depthTexture=e._depthTexture&&!e._depthTexture.isDestroyed()&&e._depthTexture.destroy()}function R(e){e._framebuffer=e._framebuffer&&!e._framebuffer.isDestroyed()&&e._framebuffer.destroy()}function B(e,t,r,i){e._depthTexture=new S["a"]({context:t,width:r,height:i,pixelFormat:O["a"].RGBA,pixelDatatype:T["a"].UNSIGNED_BYTE})}function M(e,t,r,i){V(e),R(e),B(e,t,r,i),e._framebuffer=new j["a"]({context:t,colorTextures:[e._depthTexture],destroyAttachments:!1})}function z(e,t,r){var i=r.width,a=r.height,n=e._depthTexture,o=!Object(f["a"])(n)||n.width!==i||n.height!==a;Object(f["a"])(e._framebuffer)&&!o||M(e,t,i,a)}function A(e,t,r){if(!Object(f["a"])(e._copyDepthCommand)){var i="uniform sampler2D u_texture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    gl_FragColor = czm_packDepth(texture2D(u_texture, v_textureCoordinates).r);\n}\n";e._copyDepthCommand=t.createViewportQuadCommand(i,{renderState:k["a"].fromCache(),uniformMap:{u_texture:function(){return e._textureToCopy}},owner:e})}e._textureToCopy=r,e._copyDepthCommand.framebuffer=e._framebuffer}F.prototype.executeDebugPickDepth=function(e,t,r){E(this,e,t,r)},F.prototype.update=function(e,t){z(this,e,t),A(this,e,t)};var N=new C["a"],W=new C["a"](1,1/255,1/65025,1/16581375);F.prototype.getDepth=function(e,t,r){var i=e.readPixels({x:t,y:r,width:1,height:1,framebuffer:this._framebuffer}),a=C["a"].unpack(i,0,N);return C["a"].divideByScalar(a,255,a),C["a"].dot(a,W)},F.prototype.executeCopyDepth=function(e,t){this._copyDepthCommand.execute(e,t)},F.prototype.isDestroyed=function(){return!1},F.prototype.destroy=function(){return V(this),R(this),this._copyDepthCommand.shaderProgram=Object(f["a"])(this._copyDepthCommand.shaderProgram)&&this._copyDepthCommand.shaderProgram.destroy(),Object(D["a"])(this)};var L=F,H=r("738d"),I=r("a307"),G=r("0c80"),q=r("ef77"),U=.1,J=new x["a"]({pass:y["a"].MOST_DETAILED_PRELOAD}),K=new x["a"]({pass:y["a"].MOST_DETAILED_PICK}),Q=new x["a"]({pass:y["a"].PICK});function Y(e){this._mostDetailedRayPicks=[],this.pickRenderStateCache={},this._pickPositionCache={},this._pickPositionCacheDirty=!1;var t=new a["a"](0,0,1,1),r=new g["a"](e);r.frustum=new p["a"]({width:U,aspectRatio:1,near:.1}),this._pickOffscreenView=new q["a"](e,r,t)}Y.prototype.update=function(){this._pickPositionCacheDirty=!0},Y.prototype.getPickDepth=function(e,t){var r=e.view.pickDepths,i=r[t];return Object(f["a"])(i)||(i=new L,r[t]=i),i};var X=new d["a"],Z=new o["a"],$=new o["a"],ee=new n["a"],te=new h["a"];function re(e,t,r,i,a){var n=e.camera,s=n.frustum;Object(f["a"])(s._offCenterFrustum)&&(s=s._offCenterFrustum);var c=2*(t.x-a.x)/a.width-1;c*=.5*(s.right-s.left);var u=2*(a.height-t.y-a.y)/a.height-1;u*=.5*(s.top-s.bottom);var p=h["a"].clone(n.transform,te);n._setTransform(h["a"].IDENTITY);var d=o["a"].clone(n.position,Z);o["a"].multiplyByScalar(n.right,c,$),o["a"].add($,d,d),o["a"].multiplyByScalar(n.up,u,$),o["a"].add($,d,d),n._setTransform(p),e.mode===I["a"].SCENE2D&&o["a"].fromElements(d.z,d.x,d.y,d);var m=s.getPixelDimensions(a.width,a.height,1,1,ee),l=X;return l.right=.5*m.x,l.left=-l.right,l.top=.5*m.y,l.bottom=-l.top,l.near=s.near,l.far=s.far,l.computeCullingVolume(d,n.directionWC,n.upWC)}var ie=new l["a"],ae=new n["a"];function ne(e,t,r,i,a){var n=e.camera,o=n.frustum,s=o.near,c=Math.tan(.5*o.fovy),u=o.aspectRatio*c,f=2*(t.x-a.x)/a.width-1,h=2*(a.height-t.y-a.y)/a.height-1,p=f*s*u,d=h*s*c,m=o.getPixelDimensions(a.width,a.height,1,1,ae),l=m.x*r*.5,v=m.y*i*.5,w=ie;return w.top=d+v,w.bottom=d-v,w.right=p+l,w.left=p-l,w.near=s,w.far=o.far,w.computeCullingVolume(n.positionWC,n.directionWC,n.upWC)}function oe(e,t,r,i,a){var n=e.camera.frustum;return n instanceof p["a"]||n instanceof d["a"]?re(e,t,r,i,a):ne(e,t,r,i,a)}var se=3,ce=3,ue=new a["a"](0,0,se,ce),fe=new n["a"],he=new c["a"](0,0,0,0);function pe(e,t){var r=e.context,i=e.frameState,n=e.environmentState,o=e.defaultView;e.view=o;var s=o.viewport;s.x=0,s.y=0,s.width=r.drawingBufferWidth,s.height=r.drawingBufferHeight;var c=o.passState;c.viewport=a["a"].clone(s,c.viewport),e.clearPasses(i.passes),i.passes.pick=!0,i.passes.depth=!0,i.cullingVolume=oe(e,t,1,1,s),i.tilesetPassState=Q,e.updateEnvironment(),n.renderTranslucentDepthForPick=!0,c=o.pickDepthFramebuffer.update(r,t,s),e.updateAndExecuteCommands(c,he),e.resolveFramebuffers(c),r.endFrame()}Y.prototype.pick=function(e,t,r,i){se=Object(u["a"])(r,3),ce=Object(u["a"])(i,se);var n=e.context,o=n.uniformState,s=e.frameState,c=e.defaultView;e.view=c;var f=c.viewport;f.x=0,f.y=0,f.width=n.drawingBufferWidth,f.height=n.drawingBufferHeight;var h=c.passState;h.viewport=a["a"].clone(f,h.viewport);var p=G["a"].transformWindowToDrawingBuffer(e,t,fe);e.jobScheduler.disableThisFrame(),e.updateFrameState(),s.cullingVolume=oe(e,p,se,ce,f),s.invertClassification=!1,s.passes.pick=!0,s.tilesetPassState=Q,o.update(s),e.updateEnvironment(),ue.x=p.x-.5*(se-1),ue.y=e.drawingBufferHeight-p.y-.5*(ce-1),ue.width=se,ue.height=ce,h=c.pickFramebuffer.begin(ue,c.viewport),e.updateAndExecuteCommands(h,he),e.resolveFramebuffers(h);var d=c.pickFramebuffer.end(ue);return n.endFrame(),d};var de=new m["a"],me=new l["a"],le=new p["a"],ve=new d["a"];Y.prototype.pickPositionWorldCoordinates=function(e,t,r){if(e.useDepthPicking){var i=t.toString();if(this._pickPositionCacheDirty)this._pickPositionCache={},this._pickPositionCacheDirty=!1;else if(this._pickPositionCache.hasOwnProperty(i))return o["a"].clone(this._pickPositionCache[i],r);var a=e.frameState,n=e.context,s=n.uniformState,c=e.defaultView;e.view=c;var u=G["a"].transformWindowToDrawingBuffer(e,t,fe);e.pickTranslucentDepth?pe(e,u):(e.updateFrameState(),s.update(a),e.updateEnvironment()),u.y=e.drawingBufferHeight-u.y;var h,p=e.camera;h=Object(f["a"])(p.frustum.fov)?p.frustum.clone(de):Object(f["a"])(p.frustum.infiniteProjectionMatrix)?p.frustum.clone(me):Object(f["a"])(p.frustum.width)?p.frustum.clone(le):p.frustum.clone(ve);for(var d=c.frustumCommandsList,m=d.length,l=0;l<m;++l){var v=this.getPickDepth(e,l),w=v.getDepth(n,u.x,u.y);if(w>0&&w<1){var _,g=d[l];return e.mode===I["a"].SCENE2D?(_=p.position.z,p.position.z=_-g.near+1,h.far=Math.max(1,g.far-g.near),h.near=1,s.update(a),s.updateFrustum(h)):(h.near=g.near*(0!==l?e.opaqueFrustumNearOffset:1),h.far=g.far,s.updateFrustum(h)),r=G["a"].drawingBufferToWgs84Coordinates(e,u,w,r),e.mode===I["a"].SCENE2D&&(p.position.z=_,s.update(a)),this._pickPositionCache[i]=o["a"].clone(r),r}}this._pickPositionCache[i]=void 0}};var we=new s["a"];function _e(e,t){var r,i,a=[],n=[],o=[],s=[];Object(f["a"])(e)||(e=Number.MAX_VALUE);var c=t();while(Object(f["a"])(c)){var u=c.object,h=c.position,p=c.exclude;if(Object(f["a"])(h)&&!Object(f["a"])(u)){a.push(c);break}if(!Object(f["a"])(u)||!Object(f["a"])(u.primitive))break;if(!p&&(a.push(c),0>=--e))break;var d=u.primitive,m=!1;"function"===typeof d.getGeometryInstanceAttributes&&Object(f["a"])(u.id)&&(i=d.getGeometryInstanceAttributes(u.id),Object(f["a"])(i)&&Object(f["a"])(i.show)&&(m=!0,i.show=w["a"].toValue(!1,i.show),o.push(i))),u instanceof b["a"]&&(m=!0,u.show=!1,s.push(u)),m||(d.show=!1,n.push(d)),c=t()}for(r=0;r<n.length;++r)n[r].show=!0;for(r=0;r<o.length;++r)i=o[r],i.show=w["a"].toValue(!0,i.show);for(r=0;r<s.length;++r)s[r].show=!0;return a}Y.prototype.pickPosition=function(e,t,r){if(r=this.pickPositionWorldCoordinates(e,t,r),Object(f["a"])(r)&&e.mode!==I["a"].SCENE3D){o["a"].fromElements(r.y,r.z,r.x,r);var i=e.mapProjection,a=i.ellipsoid,n=i.unproject(r,we);a.cartographicToCartesian(n,r)}return r},Y.prototype.drillPick=function(e,t,r,i,a){var n=this,o=function(){var r=n.pick(e,t,i,a);if(Object(f["a"])(r))return{object:r,position:void 0,exclude:!1}},s=_e(r,o);return s.map((function(e){return e.object}))};var ge=new o["a"],be=new o["a"];function ye(e,t,r){this.ray=e,this.width=t,this.tilesets=r,this.ready=!1,this.deferred=_["a"].defer(),this.promise=this.deferred.promise}function xe(e,t,r,i){var a=t.direction,n=o["a"].mostOrthogonalAxis(a,ge),s=o["a"].cross(a,n,ge),c=o["a"].cross(a,s,be);return i.position=t.origin,i.direction=a,i.up=c,i.right=s,i.frustum.width=Object(u["a"])(r,U),i.frustum.computeCullingVolume(i.positionWC,i.directionWC,i.upWC)}function Ce(e,t,r){var i=t.frameState,a=r.ray,n=r.width,o=r.tilesets,s=e._pickOffscreenView.camera,c=xe(e,a,n,s),u=J;u.camera=s,u.cullingVolume=c;for(var f=!0,h=o.length,p=0;p<h;++p){var d=o[p];d.show&&t.primitives.contains(d)&&(d.updateForPass(i,u),f=f&&u.ready)}return f&&r.deferred.resolve(),f}function De(e,t,r){for(var i=e.length,a=0;a<i;++a){var n=e.get(a);n.show&&(Object(f["a"])(n.isCesium3DTileset)?Object(f["a"])(t)&&-1!==t.indexOf(n)||r.push(n):n instanceof H["a"]&&De(n,t,r))}}function Oe(e,t,r,i,a,n){var o=[];if(De(t.primitives,i,o),0===o.length)return _["a"].resolve(n());var s=new ye(r,a,o);return e._mostDetailedRayPicks.push(s),s.promise.then((function(){return n()}))}function je(e,t){return!(!Object(f["a"])(e)||!Object(f["a"])(t)||0===t.length)&&(t.indexOf(e)>-1||t.indexOf(e.primitive)>-1||t.indexOf(e.id)>-1)}function Te(e,t,r,i,n,o,s){var c=t.context,u=c.uniformState,h=t.frameState,p=e._pickOffscreenView;t.view=p,xe(e,r,n,p.camera),ue=a["a"].clone(p.viewport,ue);var d,m=p.pickFramebuffer.begin(ue,p.viewport);t.jobScheduler.disableThisFrame(),t.updateFrameState(),h.invertClassification=!1,h.passes.pick=!0,h.passes.offscreen=!0,h.tilesetPassState=s?K:Q,u.update(h),t.updateEnvironment(),t.updateAndExecuteCommands(m,he),t.resolveFramebuffers(m);var l=p.pickFramebuffer.end(c);if(t.context.depthTexture)for(var w=p.frustumCommandsList.length,_=0;_<w;++_){var g=e.getPickDepth(t,_),b=g.getDepth(c,0,0);if(b>0&&b<1){var y=p.frustumCommandsList[_],x=y.near*(0!==_?t.opaqueFrustumNearOffset:1),C=y.far,D=x+b*(C-x);d=v["a"].getPoint(r,D);break}}if(t.view=t.defaultView,c.endFrame(),Object(f["a"])(l)||Object(f["a"])(d))return{object:l,position:d,exclude:!Object(f["a"])(d)&&o||je(l,i)}}function ke(e,t,r,i,a,n,o,s){var c=function(){return Te(e,t,r,a,n,o,s)};return _e(i,c)}function Pe(e,t,r,i,a,n,o){var s=ke(e,t,r,1,i,a,n,o);if(s.length>0)return s[0]}function Se(e,t,r,i,a,n,o,s){return ke(e,t,r,i,a,n,o,s)}function Fe(e,t){var r=_["a"].defer();return t.then((function(t){var i=e.postRender.addEventListener((function(){r.resolve(t),i()}));e.requestRender()})).otherwise((function(e){r.reject(e)})),r.promise}Y.prototype.updateMostDetailedRayPicks=function(e){for(var t=this._mostDetailedRayPicks,r=0;r<t.length;++r)Ce(this,e,t[r])&&t.splice(r--,1)},Y.prototype.pickFromRay=function(e,t,r,i){return Pe(this,e,t,r,i,!1,!1)},Y.prototype.drillPickFromRay=function(e,t,r,i,a){return Se(this,e,t,r,i,a,!1,!1)},Y.prototype.pickFromRayMostDetailed=function(e,t,r,i){var a=this;return t=v["a"].clone(t),r=Object(f["a"])(r)?r.slice():r,Fe(e,Oe(a,e,t,r,i,(function(){return Pe(a,e,t,r,i,!1,!0)})))},Y.prototype.drillPickFromRayMostDetailed=function(e,t,r,i,a){var n=this;return t=v["a"].clone(t),i=Object(f["a"])(i)?i.slice():i,Fe(e,Oe(n,e,t,i,a,(function(){return Se(n,e,t,r,i,a,!1,!0)})))};var Ee=new o["a"],Ve=new o["a"],Re=new v["a"],Be=new s["a"];function Me(e,t){var r=e.globe,a=Object(f["a"])(r)?r.ellipsoid:e.mapProjection.ellipsoid,n=i["a"]._defaultMaxTerrainHeight,c=a.geodeticSurfaceNormalCartographic(t,Ve),u=s["a"].toCartesian(t,a,Ee),h=Re;h.origin=u,h.direction=c;var p=new v["a"];return v["a"].getPoint(h,n,p.origin),o["a"].negate(c,p.direction),p}function ze(e,t){var r=e.globe,i=Object(f["a"])(r)?r.ellipsoid:e.mapProjection.ellipsoid,a=s["a"].fromCartesian(t,i,Be);return Me(e,a)}function Ae(e,t){var r=e.globe,i=Object(f["a"])(r)?r.ellipsoid:e.mapProjection.ellipsoid,a=s["a"].fromCartesian(t,i,Be);return a.height}function Ne(e,t,r,i,a){var n=Me(t,r);return Oe(e,t,n,i,a,(function(){var r=Pe(e,t,n,i,a,!0,!0);if(Object(f["a"])(r))return Ae(t,r.position)}))}function We(e,t,r,i,a,n){var s=ze(t,r);return Oe(e,t,s,i,a,(function(){var r=Pe(e,t,s,i,a,!0,!0);if(Object(f["a"])(r))return o["a"].clone(r.position,n)}))}Y.prototype.sampleHeight=function(e,t,r,i){var a=Me(e,t),n=Pe(this,e,a,r,i,!0,!1);if(Object(f["a"])(n))return Ae(e,n.position)},Y.prototype.clampToHeight=function(e,t,r,i,a){var n=ze(e,t),s=Pe(this,e,n,r,i,!0,!1);if(Object(f["a"])(s))return o["a"].clone(s.position,a)},Y.prototype.sampleHeightMostDetailed=function(e,t,r,i){r=Object(f["a"])(r)?r.slice():r;for(var a=t.length,n=new Array(a),o=0;o<a;++o)n[o]=Ne(this,e,t[o],r,i);return Fe(e,_["a"].all(n).then((function(e){for(var r=e.length,i=0;i<r;++i)t[i].height=e[i];return t})))},Y.prototype.clampToHeightMostDetailed=function(e,t,r,i){r=Object(f["a"])(r)?r.slice():r;for(var a=t.length,n=new Array(a),o=0;o<a;++o)n[o]=We(this,e,t[o],r,i,t[o]);return Fe(e,_["a"].all(n).then((function(e){for(var r=e.length,i=0;i<r;++i)t[i]=e[i];return t})))},Y.prototype.destroy=function(){this._pickOffscreenView=this._pickOffscreenView&&this._pickOffscreenView.destroy()};t["a"]=Y},e0bc:function(e,t,r){"use strict";var i=r("77af"),a=r("bd8d"),n=r("535a"),o=r("2f63"),s=r("7d62"),c=r("ac3b"),u=r("00f8"),f=r("8a65"),h=r("3550"),p=r("a913");function d(e){var t=new u["a"](e);t.blendingEnabled=!1,t.scissorTest={enabled:!0,rectangle:new i["a"]},t.viewport=new i["a"],this._context=e,this._fb=void 0,this._passState=t,this._width=0,this._height=0}d.prototype.begin=function(e,t){var r=this._context,a=t.width,n=t.height;return i["a"].clone(e,this._passState.scissorTest.rectangle),Object(o["a"])(this._fb)&&this._width===a&&this._height===n||(this._width=a,this._height=n,this._fb=this._fb&&this._fb.destroy(),this._fb=new c["a"]({context:r,colorTextures:[new p["a"]({context:r,width:a,height:n})],depthStencilRenderbuffer:new f["a"]({context:r,width:a,height:n,format:h["a"].DEPTH_STENCIL})}),this._passState.framebuffer=this._fb),this._passState.viewport.width=a,this._passState.viewport.height=n,this._passState};var m=new a["a"];d.prototype.end=function(e){for(var t=Object(n["a"])(e.width,1),r=Object(n["a"])(e.height,1),i=this._context,s=i.readPixels({x:e.x,y:e.y,width:t,height:r,framebuffer:this._fb}),c=Math.max(t,r),u=c*c,f=Math.floor(.5*t),h=Math.floor(.5*r),p=0,d=0,l=0,v=-1,w=0;w<u;++w){if(-f<=p&&p<=f&&-h<=d&&d<=h){var _=4*((h-d)*t+p+f);m.red=a["a"].byteToFloat(s[_]),m.green=a["a"].byteToFloat(s[_+1]),m.blue=a["a"].byteToFloat(s[_+2]),m.alpha=a["a"].byteToFloat(s[_+3]);var g=i.getObjectByPickColor(m);if(Object(o["a"])(g))return g}if(p===d||p<0&&-p===d||p>0&&p===1-d){var b=l;l=-v,v=b}p+=l,d+=v}},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this._fb=this._fb&&this._fb.destroy(),Object(s["a"])(this)},t["a"]=d}}]);