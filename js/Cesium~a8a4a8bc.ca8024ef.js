(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~a8a4a8bc"],{"0134":function(e,t,i){"use strict";var r=i("77af"),n=i("670c"),a=i("be18"),o=i("a561"),s=i("bef8"),u=i("bd8d"),c=i("535a"),l=i("2f63"),h=i("9f1d"),_=i("6cbd"),f=i("93da"),v=i("df07"),m=i("52f0"),p=i("713f"),y=i("08db"),d=i("f806"),g=i("a307");function w(){this.globeDepthTexture=void 0,this.gamma=void 0,this._viewport=new r["a"],this._viewportCartesian4=new o["a"],this._viewportDirty=!1,this._viewportOrthographicMatrix=m["a"].clone(m["a"].IDENTITY),this._viewportTransformation=m["a"].clone(m["a"].IDENTITY),this._model=m["a"].clone(m["a"].IDENTITY),this._view=m["a"].clone(m["a"].IDENTITY),this._inverseView=m["a"].clone(m["a"].IDENTITY),this._projection=m["a"].clone(m["a"].IDENTITY),this._infiniteProjection=m["a"].clone(m["a"].IDENTITY),this._entireFrustum=new n["a"],this._currentFrustum=new n["a"],this._frustumPlanes=new o["a"],this._log2FarDistance=void 0,this._log2FarPlusOne=void 0,this._log2NearDistance=void 0,this._frameState=void 0,this._temeToPseudoFixed=v["a"].clone(m["a"].IDENTITY),this._view3DDirty=!0,this._view3D=new m["a"],this._inverseView3DDirty=!0,this._inverseView3D=new m["a"],this._inverseModelDirty=!0,this._inverseModel=new m["a"],this._inverseTransposeModelDirty=!0,this._inverseTransposeModel=new v["a"],this._viewRotation=new v["a"],this._inverseViewRotation=new v["a"],this._viewRotation3D=new v["a"],this._inverseViewRotation3D=new v["a"],this._inverseProjectionDirty=!0,this._inverseProjection=new m["a"],this._modelViewDirty=!0,this._modelView=new m["a"],this._modelView3DDirty=!0,this._modelView3D=new m["a"],this._modelViewRelativeToEyeDirty=!0,this._modelViewRelativeToEye=new m["a"],this._inverseModelViewDirty=!0,this._inverseModelView=new m["a"],this._inverseModelView3DDirty=!0,this._inverseModelView3D=new m["a"],this._viewProjectionDirty=!0,this._viewProjection=new m["a"],this._inverseViewProjectionDirty=!0,this._inverseViewProjection=new m["a"],this._modelViewProjectionDirty=!0,this._modelViewProjection=new m["a"],this._inverseModelViewProjectionDirty=!0,this._inverseModelViewProjection=new m["a"],this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewProjectionRelativeToEye=new m["a"],this._modelViewInfiniteProjectionDirty=!0,this._modelViewInfiniteProjection=new m["a"],this._normalDirty=!0,this._normal=new v["a"],this._normal3DDirty=!0,this._normal3D=new v["a"],this._inverseNormalDirty=!0,this._inverseNormal=new v["a"],this._inverseNormal3DDirty=!0,this._inverseNormal3D=new v["a"],this._encodedCameraPositionMCDirty=!0,this._encodedCameraPositionMC=new _["a"],this._cameraPosition=new a["a"],this._sunPositionWC=new a["a"],this._sunPositionColumbusView=new a["a"],this._sunDirectionWC=new a["a"],this._sunDirectionEC=new a["a"],this._sunColor=new a["a"],this._moonDirectionEC=new a["a"],this._pass=void 0,this._mode=void 0,this._mapProjection=void 0,this._cameraDirection=new a["a"],this._cameraRight=new a["a"],this._cameraUp=new a["a"],this._frustum2DWidth=0,this._eyeHeight2D=new n["a"],this._pixelRatio=1,this._orthographicIn3D=!1,this._backgroundColor=new u["a"],this._brdfLut=void 0,this._environmentMap=void 0,this._sphericalHarmonicCoefficients=void 0,this._specularEnvironmentMaps=void 0,this._specularEnvironmentMapsDimensions=new n["a"],this._specularEnvironmentMapsMaximumLOD=void 0,this._fogDensity=void 0,this._invertClassificationColor=void 0,this._imagerySplitPosition=0,this._pixelSizePerMeter=void 0,this._geometricToleranceOverMeter=void 0,this._minimumDisableDepthTestDistance=void 0}function D(e,t){m["a"].clone(t,e._view),m["a"].getMatrix3(t,e._viewRotation),e._view3DDirty=!0,e._inverseView3DDirty=!0,e._modelViewDirty=!0,e._modelView3DDirty=!0,e._modelViewRelativeToEyeDirty=!0,e._inverseModelViewDirty=!0,e._inverseModelView3DDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0,e._modelViewInfiniteProjectionDirty=!0,e._normalDirty=!0,e._inverseNormalDirty=!0,e._normal3DDirty=!0,e._inverseNormal3DDirty=!0}function x(e,t){m["a"].clone(t,e._inverseView),m["a"].getMatrix3(t,e._inverseViewRotation)}function A(e,t){m["a"].clone(t,e._projection),e._inverseProjectionDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0}function b(e,t){m["a"].clone(t,e._infiniteProjection),e._modelViewInfiniteProjectionDirty=!0}function T(e,t){a["a"].clone(t.positionWC,e._cameraPosition),a["a"].clone(t.directionWC,e._cameraDirection),a["a"].clone(t.rightWC,e._cameraRight),a["a"].clone(t.upWC,e._cameraUp),e._encodedCameraPositionMCDirty=!0}Object(h["a"])(w.prototype,{frameState:{get:function(){return this._frameState}},viewport:{get:function(){return this._viewport},set:function(e){if(!r["a"].equals(e,this._viewport)){r["a"].clone(e,this._viewport);var t=this._viewport,i=this._viewportCartesian4;i.x=t.x,i.y=t.y,i.z=t.width,i.w=t.height,this._viewportDirty=!0}}},viewportCartesian4:{get:function(){return this._viewportCartesian4}},viewportOrthographic:{get:function(){return M(this),this._viewportOrthographicMatrix}},viewportTransformation:{get:function(){return M(this),this._viewportTransformation}},model:{get:function(){return this._model},set:function(e){m["a"].clone(e,this._model),this._modelView3DDirty=!0,this._inverseModelView3DDirty=!0,this._inverseModelDirty=!0,this._inverseTransposeModelDirty=!0,this._modelViewDirty=!0,this._inverseModelViewDirty=!0,this._modelViewRelativeToEyeDirty=!0,this._inverseModelViewDirty=!0,this._modelViewProjectionDirty=!0,this._inverseModelViewProjectionDirty=!0,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewInfiniteProjectionDirty=!0,this._normalDirty=!0,this._inverseNormalDirty=!0,this._normal3DDirty=!0,this._inverseNormal3DDirty=!0,this._encodedCameraPositionMCDirty=!0}},inverseModel:{get:function(){return this._inverseModelDirty&&(this._inverseModelDirty=!1,m["a"].inverse(this._model,this._inverseModel)),this._inverseModel}},inverseTransposeModel:{get:function(){var e=this._inverseTransposeModel;return this._inverseTransposeModelDirty&&(this._inverseTransposeModelDirty=!1,m["a"].getMatrix3(this.inverseModel,e),v["a"].transpose(e,e)),e}},view:{get:function(){return this._view}},view3D:{get:function(){return re(this),this._view3D}},viewRotation:{get:function(){return re(this),this._viewRotation}},viewRotation3D:{get:function(){return re(this),this._viewRotation3D}},inverseView:{get:function(){return this._inverseView}},inverseView3D:{get:function(){return ne(this),this._inverseView3D}},inverseViewRotation:{get:function(){return this._inverseViewRotation}},inverseViewRotation3D:{get:function(){return ne(this),this._inverseViewRotation3D}},projection:{get:function(){return this._projection}},inverseProjection:{get:function(){return j(this),this._inverseProjection}},infiniteProjection:{get:function(){return this._infiniteProjection}},modelView:{get:function(){return R(this),this._modelView}},modelView3D:{get:function(){return V(this),this._modelView3D}},modelViewRelativeToEye:{get:function(){return S(this),this._modelViewRelativeToEye}},inverseModelView:{get:function(){return B(this),this._inverseModelView}},inverseModelView3D:{get:function(){return C(this),this._inverseModelView3D}},viewProjection:{get:function(){return N(this),this._viewProjection}},inverseViewProjection:{get:function(){return L(this),this._inverseViewProjection}},modelViewProjection:{get:function(){return F(this),this._modelViewProjection}},inverseModelViewProjection:{get:function(){return z(this),this._inverseModelViewProjection}},modelViewProjectionRelativeToEye:{get:function(){return U(this),this._modelViewProjectionRelativeToEye}},modelViewInfiniteProjection:{get:function(){return Y(this),this._modelViewInfiniteProjection}},normal:{get:function(){return G(this),this._normal}},normal3D:{get:function(){return W(this),this._normal3D}},inverseNormal:{get:function(){return H(this),this._inverseNormal}},inverseNormal3D:{get:function(){return k(this),this._inverseNormal3D}},entireFrustum:{get:function(){return this._entireFrustum}},currentFrustum:{get:function(){return this._currentFrustum}},frustumPlanes:{get:function(){return this._frustumPlanes}},log2FarDistance:{get:function(){return this._log2FarDistance}},log2FarPlusOne:{get:function(){return this._log2FarPlusOne}},log2NearDistance:{get:function(){return this._log2NearDistance}},eyeHeight2D:{get:function(){return this._eyeHeight2D}},sunPositionWC:{get:function(){return this._sunPositionWC}},sunPositionColumbusView:{get:function(){return this._sunPositionColumbusView}},sunDirectionWC:{get:function(){return this._sunDirectionWC}},sunDirectionEC:{get:function(){return this._sunDirectionEC}},sunColor:{get:function(){return this._sunColor}},moonDirectionEC:{get:function(){return this._moonDirectionEC}},encodedCameraPositionMCHigh:{get:function(){return q(this),this._encodedCameraPositionMC.high}},encodedCameraPositionMCLow:{get:function(){return q(this),this._encodedCameraPositionMC.low}},temeToPseudoFixedMatrix:{get:function(){return this._temeToPseudoFixed}},pixelRatio:{get:function(){return this._pixelRatio}},fogDensity:{get:function(){return this._fogDensity}},geometricToleranceOverMeter:{get:function(){return this._geometricToleranceOverMeter}},pass:{get:function(){return this._pass}},backgroundColor:{get:function(){return this._backgroundColor}},brdfLut:{get:function(){return this._brdfLut}},environmentMap:{get:function(){return this._environmentMap}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps}},specularEnvironmentMapsDimensions:{get:function(){return this._specularEnvironmentMapsDimensions}},specularEnvironmentMapsMaximumLOD:{get:function(){return this._specularEnvironmentMapsMaximumLOD}},imagerySplitPosition:{get:function(){return this._imagerySplitPosition}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance}},invertClassificationColor:{get:function(){return this._invertClassificationColor}},orthographicIn3D:{get:function(){return this._orthographicIn3D}}});var E=new v["a"],P=new s["a"];function O(e,t){Object(l["a"])(d["a"].computeIcrfToFixedMatrix(t.time,E))||(E=d["a"].computeTemeToPseudoFixedMatrix(t.time,E));var i=y["a"].computeSunPositionInEarthInertialFrame(t.time,e._sunPositionWC);v["a"].multiplyByVector(E,i,i),a["a"].normalize(i,e._sunDirectionWC),i=v["a"].multiplyByVector(e.viewRotation3D,i,e._sunDirectionEC),a["a"].normalize(i,i),i=y["a"].computeMoonPositionInEarthInertialFrame(t.time,e._moonDirectionEC),v["a"].multiplyByVector(E,i,i),v["a"].multiplyByVector(e.viewRotation3D,i,i),a["a"].normalize(i,i);var r=t.mapProjection,n=r.ellipsoid,o=n.cartesianToCartographic(e._sunPositionWC,P);r.project(o,e._sunPositionColumbusView)}w.prototype.updateCamera=function(e){D(this,e.viewMatrix),x(this,e.inverseViewMatrix),T(this,e),this._entireFrustum.x=e.frustum.near,this._entireFrustum.y=e.frustum.far,this.updateFrustum(e.frustum),this._orthographicIn3D=this._mode!==g["a"].SCENE2D&&e.frustum instanceof p["a"]},w.prototype.updateFrustum=function(e){A(this,e.projectionMatrix),Object(l["a"])(e.infiniteProjectionMatrix)&&b(this,e.infiniteProjectionMatrix),this._currentFrustum.x=e.near,this._currentFrustum.y=e.far,this._log2FarDistance=2/f["a"].log2(e.far+1),this._log2FarPlusOne=f["a"].log2(e.far+1),this._log2NearDistance=f["a"].log2(e.near),Object(l["a"])(e._offCenterFrustum)&&(e=e._offCenterFrustum),this._frustumPlanes.x=e.top,this._frustumPlanes.y=e.bottom,this._frustumPlanes.z=e.left,this._frustumPlanes.w=e.right},w.prototype.updatePass=function(e){this._pass=e};var I=[];function M(e){if(e._viewportDirty){var t=e._viewport;m["a"].computeOrthographicOffCenter(t.x,t.x+t.width,t.y,t.y+t.height,0,1,e._viewportOrthographicMatrix),m["a"].computeViewportTransformation(t,0,1,e._viewportTransformation),e._viewportDirty=!1}}function j(e){e._inverseProjectionDirty&&(e._inverseProjectionDirty=!1,e._mode===g["a"].SCENE2D||e._mode===g["a"].MORPHING||e._orthographicIn3D?m["a"].clone(m["a"].ZERO,e._inverseProjection):m["a"].inverse(e._projection,e._inverseProjection))}function R(e){e._modelViewDirty&&(e._modelViewDirty=!1,m["a"].multiplyTransformation(e._view,e._model,e._modelView))}function V(e){e._modelView3DDirty&&(e._modelView3DDirty=!1,m["a"].multiplyTransformation(e.view3D,e._model,e._modelView3D))}function B(e){e._inverseModelViewDirty&&(e._inverseModelViewDirty=!1,m["a"].inverse(e.modelView,e._inverseModelView))}function C(e){e._inverseModelView3DDirty&&(e._inverseModelView3DDirty=!1,m["a"].inverse(e.modelView3D,e._inverseModelView3D))}function N(e){e._viewProjectionDirty&&(e._viewProjectionDirty=!1,m["a"].multiply(e._projection,e._view,e._viewProjection))}function L(e){e._inverseViewProjectionDirty&&(e._inverseViewProjectionDirty=!1,m["a"].inverse(e.viewProjection,e._inverseViewProjection))}function F(e){e._modelViewProjectionDirty&&(e._modelViewProjectionDirty=!1,m["a"].multiply(e._projection,e.modelView,e._modelViewProjection))}function S(e){if(e._modelViewRelativeToEyeDirty){e._modelViewRelativeToEyeDirty=!1;var t=e.modelView,i=e._modelViewRelativeToEye;i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=0,i[13]=0,i[14]=0,i[15]=t[15]}}function z(e){e._inverseModelViewProjectionDirty&&(e._inverseModelViewProjectionDirty=!1,m["a"].inverse(e.modelViewProjection,e._inverseModelViewProjection))}function U(e){e._modelViewProjectionRelativeToEyeDirty&&(e._modelViewProjectionRelativeToEyeDirty=!1,m["a"].multiply(e._projection,e.modelViewRelativeToEye,e._modelViewProjectionRelativeToEye))}function Y(e){e._modelViewInfiniteProjectionDirty&&(e._modelViewInfiniteProjectionDirty=!1,m["a"].multiply(e._infiniteProjection,e.modelView,e._modelViewInfiniteProjection))}function G(e){if(e._normalDirty){e._normalDirty=!1;var t=e._normal;m["a"].getMatrix3(e.inverseModelView,t),v["a"].getRotation(t,t),v["a"].transpose(t,t)}}function W(e){if(e._normal3DDirty){e._normal3DDirty=!1;var t=e._normal3D;m["a"].getMatrix3(e.inverseModelView3D,t),v["a"].getRotation(t,t),v["a"].transpose(t,t)}}function H(e){e._inverseNormalDirty&&(e._inverseNormalDirty=!1,m["a"].getMatrix3(e.inverseModelView,e._inverseNormal),v["a"].getRotation(e._inverseNormal,e._inverseNormal))}function k(e){e._inverseNormal3DDirty&&(e._inverseNormal3DDirty=!1,m["a"].getMatrix3(e.inverseModelView3D,e._inverseNormal3D),v["a"].getRotation(e._inverseNormal3D,e._inverseNormal3D))}w.prototype.update=function(e){this._mode=e.mode,this._mapProjection=e.mapProjection,this._pixelRatio=e.pixelRatio;var t=e.camera;this.updateCamera(t),e.mode===g["a"].SCENE2D?(this._frustum2DWidth=t.frustum.right-t.frustum.left,this._eyeHeight2D.x=.5*this._frustum2DWidth,this._eyeHeight2D.y=this._eyeHeight2D.x*this._eyeHeight2D.x):(this._frustum2DWidth=0,this._eyeHeight2D.x=0,this._eyeHeight2D.y=0),O(this,e),this._sunColor=a["a"].clone(e.sunColor,this._sunColor);var i=e.brdfLutGenerator,r=Object(l["a"])(i)?i.colorTexture:void 0;this._brdfLut=r,this._environmentMap=Object(c["a"])(e.environmentMap,e.context.defaultCubeMap),this._sphericalHarmonicCoefficients=Object(c["a"])(e.sphericalHarmonicCoefficients,I),this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapsMaximumLOD=e.specularEnvironmentMapsMaximumLOD,Object(l["a"])(this._specularEnvironmentMaps)&&n["a"].clone(this._specularEnvironmentMaps.dimensions,this._specularEnvironmentMapsDimensions),this._fogDensity=e.fog.density,this._invertClassificationColor=e.invertClassificationColor,this._frameState=e,this._temeToPseudoFixed=d["a"].computeTemeToPseudoFixedMatrix(e.time,this._temeToPseudoFixed),this._imagerySplitPosition=e.imagerySplitPosition*e.context.drawingBufferWidth;var o,s=t.frustum.fov,h=this._viewport;o=h.height>h.width?2*Math.tan(.5*s)/h.height:2*Math.tan(.5*s)/h.width,this._geometricToleranceOverMeter=o*e.maximumScreenSpaceError,u["a"].clone(e.backgroundColor,this._backgroundColor),this._minimumDisableDepthTestDistance=e.minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance*=this._minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance===Number.POSITIVE_INFINITY&&(this._minimumDisableDepthTestDistance=-1)};var X=new a["a"];function q(e){e._encodedCameraPositionMCDirty&&(e._encodedCameraPositionMCDirty=!1,m["a"].multiplyByPoint(e.inverseModel,e._cameraPosition,X),_["a"].fromCartesian(X,e._encodedCameraPositionMC))}var K=new a["a"],J=new a["a"],$=new a["a"],Z=new a["a"],Q=new s["a"],ee=new a["a"],te=new m["a"];function ie(e,t,i,r,n,o,s,u){var c=K;c.x=e.y,c.y=e.z,c.z=e.x;var h=J;h.x=i.y,h.y=i.z,h.z=i.x;var _=$;_.x=r.y,_.y=r.z,_.z=r.x;var v=Z;v.x=t.y,v.y=t.z,v.z=t.x,o===g["a"].SCENE2D&&(c.z=.5*n);var p=s.unproject(c,Q);p.longitude=f["a"].clamp(p.longitude,-Math.PI,Math.PI),p.latitude=f["a"].clamp(p.latitude,-f["a"].PI_OVER_TWO,f["a"].PI_OVER_TWO);var y=s.ellipsoid,w=y.cartographicToCartesian(p,ee),D=d["a"].eastNorthUpToFixedFrame(w,y,te);return m["a"].multiplyByPointAsVector(D,h,h),m["a"].multiplyByPointAsVector(D,_,_),m["a"].multiplyByPointAsVector(D,v,v),Object(l["a"])(u)||(u=new m["a"]),u[0]=h.x,u[1]=_.x,u[2]=-v.x,u[3]=0,u[4]=h.y,u[5]=_.y,u[6]=-v.y,u[7]=0,u[8]=h.z,u[9]=_.z,u[10]=-v.z,u[11]=0,u[12]=-a["a"].dot(h,w),u[13]=-a["a"].dot(_,w),u[14]=a["a"].dot(v,w),u[15]=1,u}function re(e){e._view3DDirty&&(e._mode===g["a"].SCENE3D?m["a"].clone(e._view,e._view3D):ie(e._cameraPosition,e._cameraDirection,e._cameraRight,e._cameraUp,e._frustum2DWidth,e._mode,e._mapProjection,e._view3D),m["a"].getMatrix3(e._view3D,e._viewRotation3D),e._view3DDirty=!1)}function ne(e){e._inverseView3DDirty&&(m["a"].inverseTransformation(e.view3D,e._inverseView3D),m["a"].getMatrix3(e._inverseView3D,e._inverseViewRotation3D),e._inverseView3DDirty=!1)}t["a"]=w},"03f1":function(e,t,i){"use strict";var r=i("0e25"),n=i("daa2"),a={NEAREST:n["a"].NEAREST,LINEAR:n["a"].LINEAR,NEAREST_MIPMAP_NEAREST:n["a"].NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:n["a"].LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:n["a"].NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:n["a"].LINEAR_MIPMAP_LINEAR,validate:function(e){return e===a.NEAREST||e===a.LINEAR||e===a.NEAREST_MIPMAP_NEAREST||e===a.LINEAR_MIPMAP_NEAREST||e===a.NEAREST_MIPMAP_LINEAR||e===a.LINEAR_MIPMAP_LINEAR}};t["a"]=Object(r["a"])(a)},"0e06":function(e,t,i){"use strict";var r=i("e42d"),n=i("1a60"),a=i("5b54"),o=i("aec5"),s=i("ac3b"),u=i("6ef5"),c=i("a913");function l(e){if(!e.floatingPointTexture)return!1;var t=new o["a"](e),i=new c["a"]({context:e,width:1,height:1,pixelFormat:r["a"].RGBA}),u=new c["a"]({context:e,width:1,height:1,pixelFormat:r["a"].RGBA,pixelDatatype:l._getFloatPixelType(),source:{width:1,height:1,arrayBufferView:l._getArray([123456,0,0,0])}}),h=new s["a"]({context:e,colorTextures:[i],destroyAttachments:!1}),_={framebuffer:h,x:0,y:0,width:1,height:1},f=!1,v=new a["a"]({fragmentShaderSource:n["a"],outputTexture:i,uniformMap:{u_floatTexture:function(){return u}},persists:!1,postExecute:function(){var t=e.readPixels(_);f=0===t[0]}});return v.execute(t),t.destroy(),h.destroy(),f}l._getFloatPixelType=function(){return u["a"].FLOAT},l._getArray=function(e){return new Float32Array(e)},t["a"]=l},"1ca0":function(e,t,i){"use strict";var r=i("670c"),n=i("be18"),a=i("a561"),o=i("bd8d"),s=i("2f63"),u=i("9e11"),c=i("df07"),l=i("52f0"),h=i("283e");function _(e,t,i,r){switch(t.type){case e.FLOAT:return new f(e,t,i,r);case e.FLOAT_VEC2:return new v(e,t,i,r);case e.FLOAT_VEC3:return new m(e,t,i,r);case e.FLOAT_VEC4:return new p(e,t,i,r);case e.SAMPLER_2D:case e.SAMPLER_CUBE:return new y(e,t,i,r);case e.INT:case e.BOOL:return new d(e,t,i,r);case e.INT_VEC2:case e.BOOL_VEC2:return new g(e,t,i,r);case e.INT_VEC3:case e.BOOL_VEC3:return new w(e,t,i,r);case e.INT_VEC4:case e.BOOL_VEC4:return new D(e,t,i,r);case e.FLOAT_MAT2:return new x(e,t,i,r);case e.FLOAT_MAT3:return new A(e,t,i,r);case e.FLOAT_MAT4:return new b(e,t,i,r);default:throw new h["a"]("Unrecognized uniform type: "+t.type+' for uniform "'+i+'".')}}function f(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Float32Array(n),this._gl=e,this._location=r[0]}function v(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Float32Array(2*n),this._gl=e,this._location=r[0]}function m(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Float32Array(3*n),this._gl=e,this._location=r[0]}function p(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Float32Array(4*n),this._gl=e,this._location=r[0]}function y(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Float32Array(n),this._gl=e,this._locations=r,this.textureUnitIndex=void 0}function d(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Int32Array(n),this._gl=e,this._location=r[0]}function g(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Int32Array(2*n),this._gl=e,this._location=r[0]}function w(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Int32Array(3*n),this._gl=e,this._location=r[0]}function D(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Int32Array(4*n),this._gl=e,this._location=r[0]}function x(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Float32Array(4*n),this._gl=e,this._location=r[0]}function A(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Float32Array(9*n),this._gl=e,this._location=r[0]}function b(e,t,i,r){var n=r.length;this.name=i,this.value=new Array(n),this._value=new Float32Array(16*n),this._gl=e,this._location=r[0]}f.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,r=!1,n=0;n<t;++n){var a=e[n];a!==i[n]&&(i[n]=a,r=!0)}r&&this._gl.uniform1fv(this._location,i)},v.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,n=!1,a=0,o=0;o<t;++o){var s=e[o];r["a"].equalsArray(s,i,a)||(r["a"].pack(s,i,a),n=!0),a+=2}n&&this._gl.uniform2fv(this._location,i)},m.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,r=!1,a=0,o=0;o<t;++o){var u=e[o];Object(s["a"])(u.red)?u.red===i[a]&&u.green===i[a+1]&&u.blue===i[a+2]||(i[a]=u.red,i[a+1]=u.green,i[a+2]=u.blue,r=!0):Object(s["a"])(u.x)&&(n["a"].equalsArray(u,i,a)||(n["a"].pack(u,i,a),r=!0)),a+=3}r&&this._gl.uniform3fv(this._location,i)},p.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,r=!1,n=0,u=0;u<t;++u){var c=e[u];Object(s["a"])(c.red)?o["a"].equalsArray(c,i,n)||(o["a"].pack(c,i,n),r=!0):Object(s["a"])(c.x)&&(a["a"].equalsArray(c,i,n)||(a["a"].pack(c,i,n),r=!0)),n+=4}r&&this._gl.uniform4fv(this._location,i)},y.prototype.set=function(){for(var e=this._gl,t=e.TEXTURE0+this.textureUnitIndex,i=this.value,r=i.length,n=0;n<r;++n){var a=i[n];e.activeTexture(t+n),e.bindTexture(a._target,a._texture)}},y.prototype._setSampler=function(e){this.textureUnitIndex=e;for(var t=this._locations,i=t.length,r=0;r<i;++r){var n=e+r;this._gl.uniform1i(t[r],n)}return e+i},d.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,r=!1,n=0;n<t;++n){var a=e[n];a!==i[n]&&(i[n]=a,r=!0)}r&&this._gl.uniform1iv(this._location,i)},g.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,n=!1,a=0,o=0;o<t;++o){var s=e[o];r["a"].equalsArray(s,i,a)||(r["a"].pack(s,i,a),n=!0),a+=2}n&&this._gl.uniform2iv(this._location,i)},w.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,r=!1,a=0,o=0;o<t;++o){var s=e[o];n["a"].equalsArray(s,i,a)||(n["a"].pack(s,i,a),r=!0),a+=3}r&&this._gl.uniform3iv(this._location,i)},D.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,r=!1,n=0,o=0;o<t;++o){var s=e[o];a["a"].equalsArray(s,i,n)||(a["a"].pack(s,i,n),r=!0),n+=4}r&&this._gl.uniform4iv(this._location,i)},x.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,r=!1,n=0,a=0;a<t;++a){var o=e[a];u["a"].equalsArray(o,i,n)||(u["a"].pack(o,i,n),r=!0),n+=4}r&&this._gl.uniformMatrix2fv(this._location,!1,i)},A.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,r=!1,n=0,a=0;a<t;++a){var o=e[a];c["a"].equalsArray(o,i,n)||(c["a"].pack(o,i,n),r=!0),n+=9}r&&this._gl.uniformMatrix3fv(this._location,!1,i)},b.prototype.set=function(){for(var e=this.value,t=e.length,i=this._value,r=!1,n=0,a=0;a<t;++a){var o=e[a];l["a"].equalsArray(o,i,n)||(l["a"].pack(o,i,n),r=!0),n+=16}r&&this._gl.uniformMatrix4fv(this._location,!1,i)},t["a"]=_},"23b6":function(e,t,i){"use strict";var r=i("0e25"),n=i("daa2"),a={CLAMP_TO_EDGE:n["a"].CLAMP_TO_EDGE,REPEAT:n["a"].REPEAT,MIRRORED_REPEAT:n["a"].MIRRORED_REPEAT,validate:function(e){return e===a.CLAMP_TO_EDGE||e===a.REPEAT||e===a.MIRRORED_REPEAT}};t["a"]=Object(r["a"])(a)},3022:function(e,t,i){"use strict";var r=i("0e25"),n=i("daa2"),a={NEAREST:n["a"].NEAREST,LINEAR:n["a"].LINEAR,validate:function(e){return e===a.NEAREST||e===a.LINEAR}};t["a"]=Object(r["a"])(a)},"5bfa":function(e,t,i){"use strict";var r=i("670c"),n=i("be18"),a=i("a561"),o=i("bd8d"),s=i("2f63"),u=i("9e11"),c=i("df07"),l=i("52f0"),h=i("283e");function _(e,t,i,r){switch(t.type){case e.FLOAT:return new f(e,t,i,r);case e.FLOAT_VEC2:return new v(e,t,i,r);case e.FLOAT_VEC3:return new m(e,t,i,r);case e.FLOAT_VEC4:return new p(e,t,i,r);case e.SAMPLER_2D:case e.SAMPLER_CUBE:return new y(e,t,i,r);case e.INT:case e.BOOL:return new d(e,t,i,r);case e.INT_VEC2:case e.BOOL_VEC2:return new g(e,t,i,r);case e.INT_VEC3:case e.BOOL_VEC3:return new w(e,t,i,r);case e.INT_VEC4:case e.BOOL_VEC4:return new D(e,t,i,r);case e.FLOAT_MAT2:return new A(e,t,i,r);case e.FLOAT_MAT3:return new T(e,t,i,r);case e.FLOAT_MAT4:return new P(e,t,i,r);default:throw new h["a"]("Unrecognized uniform type: "+t.type+' for uniform "'+i+'".')}}function f(e,t,i,r){this.name=i,this.value=void 0,this._value=0,this._gl=e,this._location=r}function v(e,t,i,n){this.name=i,this.value=void 0,this._value=new r["a"],this._gl=e,this._location=n}function m(e,t,i,r){this.name=i,this.value=void 0,this._value=void 0,this._gl=e,this._location=r}function p(e,t,i,r){this.name=i,this.value=void 0,this._value=void 0,this._gl=e,this._location=r}function y(e,t,i,r){this.name=i,this.value=void 0,this._gl=e,this._location=r,this.textureUnitIndex=void 0}function d(e,t,i,r){this.name=i,this.value=void 0,this._value=0,this._gl=e,this._location=r}function g(e,t,i,n){this.name=i,this.value=void 0,this._value=new r["a"],this._gl=e,this._location=n}function w(e,t,i,r){this.name=i,this.value=void 0,this._value=new n["a"],this._gl=e,this._location=r}function D(e,t,i,r){this.name=i,this.value=void 0,this._value=new a["a"],this._gl=e,this._location=r}f.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1f(this._location,this.value))},v.prototype.set=function(){var e=this.value;r["a"].equals(e,this._value)||(r["a"].clone(e,this._value),this._gl.uniform2f(this._location,e.x,e.y))},m.prototype.set=function(){var e=this.value;Object(s["a"])(e.red)?o["a"].equals(e,this._value)||(this._value=o["a"].clone(e,this._value),this._gl.uniform3f(this._location,e.red,e.green,e.blue)):Object(s["a"])(e.x)&&(n["a"].equals(e,this._value)||(this._value=n["a"].clone(e,this._value),this._gl.uniform3f(this._location,e.x,e.y,e.z)))},p.prototype.set=function(){var e=this.value;Object(s["a"])(e.red)?o["a"].equals(e,this._value)||(this._value=o["a"].clone(e,this._value),this._gl.uniform4f(this._location,e.red,e.green,e.blue,e.alpha)):Object(s["a"])(e.x)&&(a["a"].equals(e,this._value)||(this._value=a["a"].clone(e,this._value),this._gl.uniform4f(this._location,e.x,e.y,e.z,e.w)))},y.prototype.set=function(){var e=this._gl;e.activeTexture(e.TEXTURE0+this.textureUnitIndex);var t=this.value;e.bindTexture(t._target,t._texture)},y.prototype._setSampler=function(e){return this.textureUnitIndex=e,this._gl.uniform1i(this._location,e),e+1},d.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1i(this._location,this.value))},g.prototype.set=function(){var e=this.value;r["a"].equals(e,this._value)||(r["a"].clone(e,this._value),this._gl.uniform2i(this._location,e.x,e.y))},w.prototype.set=function(){var e=this.value;n["a"].equals(e,this._value)||(n["a"].clone(e,this._value),this._gl.uniform3i(this._location,e.x,e.y,e.z))},D.prototype.set=function(){var e=this.value;a["a"].equals(e,this._value)||(a["a"].clone(e,this._value),this._gl.uniform4i(this._location,e.x,e.y,e.z,e.w))};var x=new Float32Array(4);function A(e,t,i,r){this.name=i,this.value=void 0,this._value=new u["a"],this._gl=e,this._location=r}A.prototype.set=function(){if(!u["a"].equalsArray(this.value,this._value,0)){u["a"].clone(this.value,this._value);var e=u["a"].toArray(this.value,x);this._gl.uniformMatrix2fv(this._location,!1,e)}};var b=new Float32Array(9);function T(e,t,i,r){this.name=i,this.value=void 0,this._value=new c["a"],this._gl=e,this._location=r}T.prototype.set=function(){if(!c["a"].equalsArray(this.value,this._value,0)){c["a"].clone(this.value,this._value);var e=c["a"].toArray(this.value,b);this._gl.uniformMatrix3fv(this._location,!1,e)}};var E=new Float32Array(16);function P(e,t,i,r){this.name=i,this.value=void 0,this._value=new l["a"],this._gl=e,this._location=r}P.prototype.set=function(){if(!l["a"].equalsArray(this.value,this._value,0)){l["a"].clone(this.value,this._value);var e=l["a"].toArray(this.value,E);this._gl.uniformMatrix4fv(this._location,!1,e)}},t["a"]=_},"61ec":function(e,t,i){"use strict";var r=i("2f63"),n=i("9f1d"),a=i("7d62");function o(){this._textures={},this._numberOfTextures=0,this._texturesToRelease={}}Object(n["a"])(o.prototype,{numberOfTextures:{get:function(){return this._numberOfTextures}}}),o.prototype.getTexture=function(e){var t=this._textures[e];if(Object(r["a"])(t))return delete this._texturesToRelease[e],++t.count,t.texture},o.prototype.addTexture=function(e,t){var i={texture:t,count:1};t.finalDestroy=t.destroy;var r=this;t.destroy=function(){0===--i.count&&(r._texturesToRelease[e]=i)},this._textures[e]=i,++this._numberOfTextures},o.prototype.destroyReleasedTextures=function(){var e=this._texturesToRelease;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];delete this._textures[t],i.texture.finalDestroy(),--this._numberOfTextures}this._texturesToRelease={}},o.prototype.isDestroyed=function(){return!1},o.prototype.destroy=function(){var e=this._textures;for(var t in e)e.hasOwnProperty(t)&&e[t].texture.finalDestroy();return Object(a["a"])(this)},t["a"]=o},"7c5e":function(e,t,i){"use strict";var r=i("abab"),n=i("535a"),a=i("2f63"),o=i("9f1d"),s=i("7d62"),u=i("d2c7"),c=i("0123"),l=i("93da"),h=i("283e"),_=i("f20a"),f=i("8b68"),v=i("b997");function m(e,t,i,o){var s=Object(a["a"])(t.vertexBuffer),u=Object(a["a"])(t.value),c=t.value?t.value.length:t.componentsPerAttribute,l={index:Object(n["a"])(t.index,i),enabled:Object(n["a"])(t.enabled,!0),vertexBuffer:t.vertexBuffer,value:u?t.value.slice(0):void 0,componentsPerAttribute:c,componentDatatype:Object(n["a"])(t.componentDatatype,r["a"].FLOAT),normalize:Object(n["a"])(t.normalize,!1),offsetInBytes:Object(n["a"])(t.offsetInBytes,0),strideInBytes:Object(n["a"])(t.strideInBytes,0),instanceDivisor:Object(n["a"])(t.instanceDivisor,0)};if(s)l.vertexAttrib=function(e){var t=this.index;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),e.vertexAttribPointer(t,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),e.enableVertexAttribArray(t),this.instanceDivisor>0&&(o.glVertexAttribDivisor(t,this.instanceDivisor),o._vertexAttribDivisors[t]=this.instanceDivisor,o._previousDrawInstanced=!0)},l.disableVertexAttribArray=function(e){e.disableVertexAttribArray(this.index),this.instanceDivisor>0&&o.glVertexAttribDivisor(i,0)};else{switch(l.componentsPerAttribute){case 1:l.vertexAttrib=function(e){e.vertexAttrib1fv(this.index,this.value)};break;case 2:l.vertexAttrib=function(e){e.vertexAttrib2fv(this.index,this.value)};break;case 3:l.vertexAttrib=function(e){e.vertexAttrib3fv(this.index,this.value)};break;case 4:l.vertexAttrib=function(e){e.vertexAttrib4fv(this.index,this.value)};break}l.disableVertexAttribArray=function(e){}}e.push(l)}function p(e,t,i){for(var r=0;r<t.length;++r){var n=t[r];n.enabled&&n.vertexAttrib(e)}Object(a["a"])(i)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i._getBuffer())}function y(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);var t,i,o=e.context,s=o._gl,u=e.attributes,c=e.indexBuffer,l=[],h=1,_=!1,f=!1,v=u.length;for(t=0;t<v;++t)m(l,u[t],t,o);for(v=l.length,t=0;t<v;++t){var y=l[t];if(Object(a["a"])(y.vertexBuffer)&&0===y.instanceDivisor){var d=y.strideInBytes||y.componentsPerAttribute*r["a"].getSizeInBytes(y.componentDatatype);h=y.vertexBuffer.sizeInBytes/d;break}}for(t=0;t<v;++t)l[t].instanceDivisor>0&&(_=!0),Object(a["a"])(l[t].value)&&(f=!0);o.vertexArrayObject&&(i=o.glCreateVertexArray(),o.glBindVertexArray(i),p(s,l,c),o.glBindVertexArray(null)),this._numberOfVertices=h,this._hasInstancedAttributes=_,this._hasConstantAttributes=f,this._context=o,this._gl=s,this._vao=i,this._attributes=l,this._indexBuffer=c}function d(e){return e.values.length/e.componentsPerAttribute}function g(e){return r["a"].getSizeInBytes(e.componentDatatype)*e.componentsPerAttribute}function w(e){var t,i,n,o,s=[];for(i in e)e.hasOwnProperty(i)&&Object(a["a"])(e[i])&&Object(a["a"])(e[i].values)&&(s.push(i),e[i].componentDatatype===r["a"].DOUBLE&&(e[i].componentDatatype=r["a"].FLOAT,e[i].values=r["a"].createTypedArray(r["a"].FLOAT,e[i].values)));var u=s.length;if(u>0)for(o=d(e[s[0]]),t=1;t<u;++t){var c=d(e[s[t]]);if(c!==o)throw new h["a"]("Each attribute list must have the same number of vertices.  Attribute "+s[t]+" has a different number of vertices ("+c.toString()+") than attribute "+s[0]+" ("+o.toString()+").")}s.sort((function(t,i){return r["a"].getSizeInBytes(e[i].componentDatatype)-r["a"].getSizeInBytes(e[t].componentDatatype)}));var l=0,_={};for(t=0;t<u;++t)i=s[t],n=e[i],_[i]=l,l+=g(n);if(l>0){var f=r["a"].getSizeInBytes(e[s[0]].componentDatatype),v=l%f;0!==v&&(l+=f-v);var m=o*l,p=new ArrayBuffer(m),y={};for(t=0;t<u;++t){i=s[t];var w=r["a"].getSizeInBytes(e[i].componentDatatype);y[i]={pointer:r["a"].createTypedArray(e[i].componentDatatype,p),index:_[i]/w,strideInComponentType:l/w}}for(t=0;t<o;++t)for(var D=0;D<u;++D){i=s[D],n=e[i];for(var x=n.values,A=y[i],b=A.pointer,T=n.componentsPerAttribute,E=0;E<T;++E)b[A.index+E]=x[t*T+E];A.index+=A.strideInComponentType}return{buffer:p,offsetsInBytes:_,vertexSizeInBytes:l}}}function D(e){var t=e._context,i=e._hasInstancedAttributes;if(i||t._previousDrawInstanced){t._previousDrawInstanced=i;var r,n=t._vertexAttribDivisors,a=e._attributes,o=v["a"].maximumVertexAttributes;if(i){var s=a.length;for(r=0;r<s;++r){var u=a[r];if(u.enabled){var c=u.instanceDivisor,l=u.index;c!==n[l]&&(t.glVertexAttribDivisor(l,c),n[l]=c)}}}else for(r=0;r<o;++r)n[r]>0&&(t.glVertexAttribDivisor(r,0),n[r]=0)}}function x(e,t){for(var i=e._attributes,r=i.length,n=0;n<r;++n){var o=i[n];o.enabled&&Object(a["a"])(o.value)&&o.vertexAttrib(t)}}y.fromGeometry=function(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);var t,i,o,s,h=e.context,v=Object(n["a"])(e.geometry,n["a"].EMPTY_OBJECT),m=Object(n["a"])(e.bufferUsage,f["a"].DYNAMIC_DRAW),p=Object(n["a"])(e.attributeLocations,n["a"].EMPTY_OBJECT),d=Object(n["a"])(e.interleave,!1),g=e.vertexArrayAttributes,D=Object(a["a"])(g)?g:[],x=v.attributes;if(d){var A=w(x);if(Object(a["a"])(A)){o=_["a"].createVertexBuffer({context:h,typedArray:A.buffer,usage:m});var b=A.offsetsInBytes,T=A.vertexSizeInBytes;for(t in x)x.hasOwnProperty(t)&&Object(a["a"])(x[t])&&(i=x[t],Object(a["a"])(i.values)?D.push({index:p[t],vertexBuffer:o,componentDatatype:i.componentDatatype,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize,offsetInBytes:b[t],strideInBytes:T}):D.push({index:p[t],value:i.value,componentDatatype:i.componentDatatype,normalize:i.normalize}))}}else for(t in x)if(x.hasOwnProperty(t)&&Object(a["a"])(x[t])){i=x[t];var E=i.componentDatatype;E===r["a"].DOUBLE&&(E=r["a"].FLOAT),o=void 0,Object(a["a"])(i.values)&&(o=_["a"].createVertexBuffer({context:h,typedArray:r["a"].createTypedArray(E,i.values),usage:m})),D.push({index:p[t],vertexBuffer:o,value:i.value,componentDatatype:E,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize})}var P=v.indices;return Object(a["a"])(P)&&(s=u["a"].computeNumberOfVertices(v)>=l["a"].SIXTY_FOUR_KILOBYTES&&h.elementIndexUint?_["a"].createIndexBuffer({context:h,typedArray:new Uint32Array(P),usage:m,indexDatatype:c["a"].UNSIGNED_INT}):_["a"].createIndexBuffer({context:h,typedArray:new Uint16Array(P),usage:m,indexDatatype:c["a"].UNSIGNED_SHORT})),new y({context:h,attributes:D,indexBuffer:s})},Object(o["a"])(y.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}}),y.prototype.getAttribute=function(e){return this._attributes[e]},y.prototype._bind=function(){Object(a["a"])(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&D(this),this._hasConstantAttributes&&x(this,this._gl)):p(this._gl,this._attributes,this._indexBuffer)},y.prototype._unBind=function(){if(Object(a["a"])(this._vao))this._context.glBindVertexArray(null);else{for(var e=this._attributes,t=this._gl,i=0;i<e.length;++i){var r=e[i];r.enabled&&r.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){for(var e=this._attributes,t=0;t<e.length;++t){var i=e[t].vertexBuffer;Object(a["a"])(i)&&!i.isDestroyed()&&i.vertexArrayDestroyable&&i.destroy()}var r=this._indexBuffer;return Object(a["a"])(r)&&!r.isDestroyed()&&r.vertexArrayDestroyable&&r.destroy(),Object(a["a"])(this._vao)&&this._context.glDeleteVertexArray(this._vao),Object(s["a"])(this)},t["a"]=y},"99fe":function(e,t,i){"use strict";var r=i("2f63"),n=i("4f04");function a(e,t){var i=/#define OUTPUT_DECLARATION/,r=e.split("\n");if(/#version 300 es/g.test(e))return e;var a,s,f=-1;for(a=0;a<r.length;++a)if(s=r[a],i.test(s)){f=a;break}if(-1===f)throw new n["a"]("Could not find a #define OUTPUT_DECLARATION!");var v=[];for(a=0;a<10;a++){var m="gl_FragData\\["+a+"\\]",p="czm_out"+a,y=new RegExp(m,"g");y.test(e)&&(l(p,v),o(m,p,r),r.splice(f,0,"layout(location = "+a+") out vec4 "+p+";"),f+=1)}var d="czm_fragColor";u("gl_FragColor",r)&&(l(d,v),o("gl_FragColor",d,r),r.splice(f,0,"layout(location = 0) out vec4 czm_fragColor;"),f+=1);var g=h(v,r),w={};for(a=0;a<r.length;a++)for(var D in s=r[a],g)if(g.hasOwnProperty(D)){var x=new RegExp("(layout)[^]+(out)[^]+("+D+")[^]+","g");x.test(s)&&(w[s]=D)}for(var A in w)if(w.hasOwnProperty(A)){var b,T=w[A],E=r.indexOf(A),P=g[T],O=P.length;for(b=0;b<O;b++)r.splice(E,0,P[b]);for(E+=O+1,b=O-1;b>=0;b--)r.splice(E,0,"#endif //"+P[b])}var I="#version 300 es",M=!1;for(a=0;a<r.length;a++)/#version/.test(r[a])&&(r[a]=I,M=!0);return M||r.splice(0,0,I),_("EXT_draw_buffers",r),_("EXT_frag_depth",r),o("texture2D","texture",r),o("texture3D","texture",r),o("textureCube","texture",r),o("gl_FragDepthEXT","gl_FragDepth",r),t?o("varying","in",r):(o("attribute","in",r),o("varying","out",r)),c(r)}function o(e,t,i){for(var r="(^|[^\\w])("+e+")($|[^\\w])",n=new RegExp(r,"g"),a=i.length,o=0;o<a;++o){var s=i[o];i[o]=s.replace(n,"$1"+t+"$3")}}function s(e,t,i){for(var r=i.length,n=0;n<r;++n){var a=i[n];i[n]=a.replace(e,t)}}function u(e,t){for(var i="(^|[^\\w])("+e+")($|[^\\w])",r=new RegExp(i,"g"),n=t.length,a=0;a<n;++a){var o=t[a];if(r.test(o))return!0}return!1}function c(e){for(var t="",i=e.length,r=0;r<i;++r)t+=e[r]+"\n";return t}function l(e,t){-1===t.indexOf(e)&&t.push(e)}function h(e,t){for(var i={},n=e.length,a=[],o=0;o<t.length;++o){var s=t[o],u=/(#ifdef|#if)/g.test(s),c=/#else/g.test(s),l=/#endif/g.test(s);if(u)a.push(s);else if(c){var h=a[a.length-1],_=h.replace("ifdef","ifndef");/if/g.test(_)&&(_=_.replace(/(#if\s+)(\S*)([^]*)/,"$1!($2)$3")),a.pop(),a.push(_)}else if(l)a.pop();else if(!/layout/g.test(s))for(var f=0;f<n;++f){var v=e[f];-1!==s.indexOf(v)&&(Object(r["a"])(i[v])?i[v]=i[v].filter((function(e){return a.indexOf(e)>=0})):i[v]=a.slice())}}return i}function _(e,t){var i="#extension\\s+GL_"+e+"\\s+:\\s+[a-zA-Z0-9]+\\s*$";s(new RegExp(i,"g"),"",t)}t["a"]=a},"9d80":function(e,t,i){"use strict";var r=i("abab"),n=i("535a"),a=i("2f63"),o=i("7d62"),s=i("93da"),u=i("f20a"),c=i("8b68"),l=i("7c5e");function h(e,t,i,o){var s=h._verifyAttributes(t);i=Object(n["a"])(i,0);for(var u,c,l=[],_={},f=s.length,v=0;v<f;++v){var m=s[v];m.vertexBuffer?l.push(m):(c=m.usage,u=_[c],Object(a["a"])(u)||(u=_[c]=[]),u.push(m))}function p(e,t){return r["a"].getSizeInBytes(t.componentDatatype)-r["a"].getSizeInBytes(e.componentDatatype)}for(c in this._allBuffers=[],_)if(_.hasOwnProperty(c)){u=_[c],u.sort(p);var y=h._vertexSizeInBytes(u),d=u[0].usage,g={vertexSizeInBytes:y,vertexBuffer:void 0,usage:d,needsCommit:!1,arrayBuffer:void 0,arrayViews:h._createArrayViews(u,y)};this._allBuffers.push(g)}this._size=0,this._instanced=Object(n["a"])(o,!1),this._precreated=l,this._context=e,this.writers=void 0,this.va=void 0,this.resize(i)}h._verifyAttributes=function(e){for(var t=[],i=0;i<e.length;++i){var a=e[i],o={index:Object(n["a"])(a.index,i),enabled:Object(n["a"])(a.enabled,!0),componentsPerAttribute:a.componentsPerAttribute,componentDatatype:Object(n["a"])(a.componentDatatype,r["a"].FLOAT),normalize:Object(n["a"])(a.normalize,!1),vertexBuffer:a.vertexBuffer,usage:Object(n["a"])(a.usage,c["a"].STATIC_DRAW)};t.push(o)}for(var s=new Array(t.length),u=0;u<t.length;++u){var l=t[u],h=l.index;s[h]=!0}return t},h._vertexSizeInBytes=function(e){for(var t=0,i=e.length,n=0;n<i;++n){var a=e[n];t+=a.componentsPerAttribute*r["a"].getSizeInBytes(a.componentDatatype)}var o=i>0?r["a"].getSizeInBytes(e[0].componentDatatype):0,s=o>0?t%o:0,u=0===s?0:o-s;return t+=u,t},h._createArrayViews=function(e,t){for(var i=[],n=0,a=e.length,o=0;o<a;++o){var s=e[o],u=s.componentDatatype;i.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:u,normalize:s.normalize,offsetInBytes:n,vertexSizeInComponentType:t/r["a"].getSizeInBytes(u),view:void 0}),n+=s.componentsPerAttribute*r["a"].getSizeInBytes(u)}return i},h.prototype.resize=function(e){this._size=e;var t=this._allBuffers;this.writers=[];for(var i=0,r=t.length;i<r;++i){var n=t[i];h._resize(n,this._size),h._appendWriters(this.writers,n)}m(this)},h._resize=function(e,t){if(e.vertexSizeInBytes>0){var i=new ArrayBuffer(t*e.vertexSizeInBytes);if(Object(a["a"])(e.arrayBuffer))for(var n=new Uint8Array(i),o=new Uint8Array(e.arrayBuffer),s=o.length,u=0;u<s;++u)n[u]=o[u];for(var c=e.arrayViews,l=c.length,h=0;h<l;++h){var _=c[h];_.view=r["a"].createArrayBufferView(_.componentDatatype,i,_.offsetInBytes)}e.arrayBuffer=i}};var _=[function(e,t,i){return function(r,n){t[r*i]=n,e.needsCommit=!0}},function(e,t,i){return function(r,n,a){var o=r*i;t[o]=n,t[o+1]=a,e.needsCommit=!0}},function(e,t,i){return function(r,n,a,o){var s=r*i;t[s]=n,t[s+1]=a,t[s+2]=o,e.needsCommit=!0}},function(e,t,i){return function(r,n,a,o,s){var u=r*i;t[u]=n,t[u+1]=a,t[u+2]=o,t[u+3]=s,e.needsCommit=!0}}];function f(e,t){if(t.needsCommit&&t.vertexSizeInBytes>0){t.needsCommit=!1;var i=t.vertexBuffer,r=e._size*t.vertexSizeInBytes,n=Object(a["a"])(i);if(!n||i.sizeInBytes<r)return n&&i.destroy(),t.vertexBuffer=u["a"].createVertexBuffer({context:e._context,typedArray:t.arrayBuffer,usage:t.usage}),t.vertexBuffer.vertexArrayDestroyable=!1,!0;t.vertexBuffer.copyFromArrayView(t.arrayBuffer)}return!1}function v(e,t,i){if(e.needsCommit&&e.vertexSizeInBytes>0){var r=e.vertexSizeInBytes*t,n=e.vertexSizeInBytes*i;e.vertexBuffer.copyFromArrayView(new Uint8Array(e.arrayBuffer,r,n),r)}}function m(e){var t=e.va;if(Object(a["a"])(t)){for(var i=t.length,r=0;r<i;++r)t[r].va.destroy();e.va=void 0}}h._appendWriters=function(e,t){for(var i=t.arrayViews,r=i.length,n=0;n<r;++n){var a=i[n];e[a.index]=_[a.componentsPerAttribute-1](t,a.view,a.vertexSizeInComponentType)}},h.prototype.commit=function(e){var t,i,r,n=!1,o=this._allBuffers;for(i=0,r=o.length;i<r;++i)t=o[i],n=f(this,t)||n;if(n||!Object(a["a"])(this.va)){m(this);for(var u=this.va=[],c=s["a"].SIXTY_FOUR_KILOBYTES-4,_=Object(a["a"])(e)&&!this._instanced?Math.ceil(this._size/c):1,v=0;v<_;++v){var p=[];for(i=0,r=o.length;i<r;++i){t=o[i];var y=v*(t.vertexSizeInBytes*c);h._appendAttributes(p,t,y,this._instanced)}p=p.concat(this._precreated),u.push({va:new l["a"]({context:this._context,attributes:p,indexBuffer:e}),indicesCount:1.5*(v!==_-1?c:this._size%c)})}}},h._appendAttributes=function(e,t,i,r){for(var n=t.arrayViews,a=n.length,o=0;o<a;++o){var s=n[o];e.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:s.componentDatatype,normalize:s.normalize,vertexBuffer:t.vertexBuffer,offsetInBytes:i+s.offsetInBytes,strideInBytes:t.vertexSizeInBytes,instanceDivisor:r?1:0})}},h.prototype.subCommit=function(e,t){for(var i=this._allBuffers,r=0,n=i.length;r<n;++r)v(i[r],e,t)},h.prototype.endSubCommits=function(){for(var e=this._allBuffers,t=0,i=e.length;t<i;++t)e[t].needsCommit=!1},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){for(var e=this._allBuffers,t=0,i=e.length;t<i;++t){var r=e[t];r.vertexBuffer=r.vertexBuffer&&r.vertexBuffer.destroy()}return m(this),Object(o["a"])(this)},t["a"]=h},a913:function(e,t,i){"use strict";var r=i("670c"),n=i("71ce"),a=i("535a"),o=i("2f63"),s=i("9f1d"),u=i("7d62"),c=i("e42d"),l=i("daa2"),h=i("b0e6"),_=i("6ef5"),f=i("6c84"),v=i("3022"),m=i("03f1");function p(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);var t=e.context,i=e.width,s=e.height,u=e.source;Object(o["a"])(u)&&(Object(o["a"])(i)||(i=Object(a["a"])(u.videoWidth,u.width)),Object(o["a"])(s)||(s=Object(a["a"])(u.videoHeight,u.height)));var h=Object(a["a"])(e.pixelFormat,c["a"].RGBA),v=Object(a["a"])(e.pixelDatatype,_["a"].UNSIGNED_BYTE),m=h,p=c["a"].isCompressedFormat(m);if(t.webgl2)if(h===c["a"].DEPTH_STENCIL?m=l["a"].DEPTH24_STENCIL8:h===c["a"].DEPTH_COMPONENT&&(v===_["a"].UNSIGNED_SHORT?m=l["a"].DEPTH_COMPONENT16:v===_["a"].UNSIGNED_INT&&(m=l["a"].DEPTH_COMPONENT24)),v===_["a"].FLOAT)switch(h){case c["a"].RGBA:m=l["a"].RGBA32F;break;case c["a"].RGB:m=l["a"].RGB32F;break;case c["a"].RG:m=l["a"].RG32F;break;case c["a"].R:m=l["a"].R32F;break}else if(v===_["a"].HALF_FLOAT)switch(h){case c["a"].RGBA:m=l["a"].RGBA16F;break;case c["a"].RGB:m=l["a"].RGB16F;break;case c["a"].RG:m=l["a"].RG16F;break;case c["a"].R:m=l["a"].R16F;break}var y=e.preMultiplyAlpha||h===c["a"].RGB||h===c["a"].LUMINANCE,d=Object(a["a"])(e.flipY,!0),g=!0,w=t._gl,D=w.TEXTURE_2D,x=w.createTexture();w.activeTexture(w.TEXTURE0),w.bindTexture(D,x);var A,b=4;if(Object(o["a"])(u)&&Object(o["a"])(u.arrayBufferView)&&!p&&(b=c["a"].alignmentInBytes(h,v,i)),w.pixelStorei(w.UNPACK_ALIGNMENT,b),Object(o["a"])(u))if(Object(o["a"])(u.arrayBufferView)){w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,!1);var T=u.arrayBufferView;p?w.compressedTexImage2D(D,0,m,i,s,0,T):(d&&(T=c["a"].flipY(T,h,v,i,s)),w.texImage2D(D,0,m,i,s,0,h,v,T))}else Object(o["a"])(u.framebuffer)?(w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,!1),u.framebuffer!==t.defaultFramebuffer&&u.framebuffer._bind(),w.copyTexImage2D(D,0,m,u.xOffset,u.yOffset,i,s,0),u.framebuffer!==t.defaultFramebuffer&&u.framebuffer._unBind()):(w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y),w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,d),w.texImage2D(D,0,m,h,v,u));else w.texImage2D(D,0,m,i,s,0,h,v,null),g=!1;w.bindTexture(D,null),A=p?c["a"].compressedTextureSizeInBytes(h,i,s):c["a"].textureSizeInBytes(h,v,i,s),this._id=Object(n["a"])(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=D,this._texture=x,this._pixelFormat=h,this._pixelDatatype=v,this._width=i,this._height=s,this._dimensions=new r["a"](i,s),this._hasMipmap=!1,this._sizeInBytes=A,this._preMultiplyAlpha=y,this._flipY=d,this._initialized=g,this._sampler=void 0,this.sampler=Object(o["a"])(e.sampler)?e.sampler:new f["a"]}p.create=function(e){return new p(e)},p.fromFramebuffer=function(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);var t=e.context,i=t._gl,r=Object(a["a"])(e.pixelFormat,c["a"].RGB),n=Object(a["a"])(e.framebufferXOffset,0),s=Object(a["a"])(e.framebufferYOffset,0),u=Object(a["a"])(e.width,i.drawingBufferWidth),l=Object(a["a"])(e.height,i.drawingBufferHeight),h=e.framebuffer,_=new p({context:t,width:u,height:l,pixelFormat:r,source:{framebuffer:Object(o["a"])(h)?h:t.defaultFramebuffer,xOffset:n,yOffset:s,width:u,height:l}});return _},Object(s["a"])(p.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){var t=e.minificationFilter,i=e.magnificationFilter,r=t===m["a"].NEAREST_MIPMAP_NEAREST||t===m["a"].NEAREST_MIPMAP_LINEAR||t===m["a"].LINEAR_MIPMAP_NEAREST||t===m["a"].LINEAR_MIPMAP_LINEAR,n=this._context,a=this._pixelDatatype;(a===_["a"].FLOAT&&!n.textureFloatLinear||a===_["a"].HALF_FLOAT&&!n.textureHalfFloatLinear)&&(t=r?m["a"].NEAREST_MIPMAP_NEAREST:m["a"].NEAREST,i=v["a"].NEAREST);var s=n._gl,u=this._textureTarget;s.activeTexture(s.TEXTURE0),s.bindTexture(u,this._texture),s.texParameteri(u,s.TEXTURE_MIN_FILTER,t),s.texParameteri(u,s.TEXTURE_MAG_FILTER,i),s.texParameteri(u,s.TEXTURE_WRAP_S,e.wrapS),s.texParameteri(u,s.TEXTURE_WRAP_T,e.wrapT),Object(o["a"])(this._textureFilterAnisotropic)&&s.texParameteri(u,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.maximumAnisotropy),s.bindTexture(u,null),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(4*this._sizeInBytes/3):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}}),p.prototype.copyFrom=function(e,t,i){t=Object(a["a"])(t,0),i=Object(a["a"])(i,0);var r=this._context._gl,n=this._textureTarget;r.activeTexture(r.TEXTURE0),r.bindTexture(n,this._texture);var s=e.width,u=e.height,l=e.arrayBufferView,h=this._width,_=this._height,f=this._pixelFormat,v=this._pixelDatatype,m=this._preMultiplyAlpha,p=this._flipY,y=4;Object(o["a"])(l)&&(y=c["a"].alignmentInBytes(f,v,s)),r.pixelStorei(r.UNPACK_ALIGNMENT,y);var d=!1;if(!this._initialized){if(0===t&&0===i&&s===h&&u===_)Object(o["a"])(l)?(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),p&&(l=c["a"].flipY(l,f,v,h,_)),r.texImage2D(n,0,f,h,_,0,f,v,l)):(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,p),r.texImage2D(n,0,f,f,v,e)),d=!0;else{r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);var g=c["a"].createTypedArray(f,v,h,_);r.texImage2D(n,0,f,h,_,0,f,v,g)}this._initialized=!0}d||(Object(o["a"])(l)?(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),p&&(l=c["a"].flipY(l,f,v,s,u)),r.texSubImage2D(n,0,t,i,s,u,f,v,l)):(r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,p),r.texSubImage2D(n,0,t,i,f,v,e))),r.bindTexture(n,null)},p.prototype.copyFromFramebuffer=function(e,t,i,r,n,o){e=Object(a["a"])(e,0),t=Object(a["a"])(t,0),i=Object(a["a"])(i,0),r=Object(a["a"])(r,0),n=Object(a["a"])(n,this._width),o=Object(a["a"])(o,this._height);var s=this._context._gl,u=this._textureTarget;s.activeTexture(s.TEXTURE0),s.bindTexture(u,this._texture),s.copyTexSubImage2D(u,0,e,t,i,r,n,o),s.bindTexture(u,null),this._initialized=!0},p.prototype.generateMipmap=function(e){e=Object(a["a"])(e,h["a"].DONT_CARE),this._hasMipmap=!0;var t=this._context._gl,i=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(i,this._texture),t.generateMipmap(i),t.bindTexture(i,null)},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),Object(u["a"])(this)},t["a"]=p},b0b5:function(e,t,i){"use strict";var r=i("d4ed"),n=i("a58e"),a=i("9ab9");function o(e,t){var i={flipY:!0,preferImageBitmap:!0},o=[r["a"].createIfNeeded(t.positiveX).fetchImage(i),r["a"].createIfNeeded(t.negativeX).fetchImage(i),r["a"].createIfNeeded(t.positiveY).fetchImage(i),r["a"].createIfNeeded(t.negativeY).fetchImage(i),r["a"].createIfNeeded(t.positiveZ).fetchImage(i),r["a"].createIfNeeded(t.negativeZ).fetchImage(i)];return n["a"].all(o,(function(t){return new a["a"]({context:e,source:{positiveX:t[0],negativeX:t[1],positiveY:t[2],negativeY:t[3],positiveZ:t[4],negativeZ:t[5]}})}))}t["a"]=o}}]);