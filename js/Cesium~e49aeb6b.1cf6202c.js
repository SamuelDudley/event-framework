(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~e49aeb6b"],{"56d3":function(e,t,i){"use strict";function n(e){this.pass=e.pass,this.commandList=e.commandList,this.camera=e.camera,this.cullingVolume=e.cullingVolume,this.ready=!1}t["a"]=n},"5af0":function(e,t,i){"use strict";var n=i("bd8d"),r=i("2f63"),a=i("9f1d");function o(e,t){this._content=e,this._batchId=t,this._color=void 0}Object(a["a"])(o.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(e){this._content.batchTable.setShow(this._batchId,e)}},color:{get:function(){return Object(r["a"])(this._color)||(this._color=new n["a"]),this._content.batchTable.getColor(this._batchId,this._color)},set:function(e){this._content.batchTable.setColor(this._batchId,e)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}}),o.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},o.prototype.getPropertyNames=function(e){return this._content.batchTable.getPropertyNames(this._batchId,e)},o.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},o.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},o.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},o.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},o.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)},t["a"]=o},6380:function(e,t,i){"use strict";var n=i("0e25"),r={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};t["a"]=Object(n["a"])(r)},"656b":function(e,t,i){"use strict";var n=i("0e25"),r={HIGHLIGHT:0,REPLACE:1,MIX:2};t["a"]=Object(n["a"])(r)},6596:function(e,t,i){"use strict";var n=i("2c34"),r=i("670c"),a=i("a561"),o=i("dc1c"),s=i("bd8d"),c=i("2bb9"),l=i("abab"),u=i("535a"),h=i("2f63"),_=i("9f1d"),f=i("45c5"),d=i("7d62"),b=(i("4f04"),i("93da")),p=i("e42d"),m=i("283e"),g=i("b997"),y=i("a894"),v=i("d289"),O=i("6ef5"),T=i("6dc0"),S=i("6c84"),C=i("5770"),E=i("a913"),D=i("3022"),P=i("03f1"),x=i("1da3"),j=i("b7c8"),I=i("656b"),A=i("29ab"),R=i("c13c"),V=i("3626"),w=i("6102"),L=i("25ef"),B=s["a"].WHITE,N=!0;function M(e,t,i,n,o){var s;this.featuresLength=t,this._translucentFeaturesLength=0,Object(h["a"])(i)&&(s=i.extensions),this._extensions=Object(u["a"])(s,{});var c,l,_=k(i);if(this._properties=_,this._batchTableHierarchy=U(this,i,n),this._batchTableBinaryProperties=z(t,_,n),this._showAlphaProperties=void 0,this._batchValues=void 0,this._batchValuesDirty=!1,this._batchTexture=void 0,this._defaultTexture=void 0,this._pickTexture=void 0,this._pickIds=[],this._content=e,this._colorChangedCallback=o,t>0){var f=Math.min(t,g["a"].maximumTextureSize),d=Math.ceil(t/g["a"].maximumTextureSize),b=1/f,p=.5*b,m=1/d,y=.5*m;c=new r["a"](f,d),l=new a["a"](b,p,m,y)}this._textureDimensions=c,this._textureStep=l}function k(e){var t={};if(!Object(h["a"])(e))return t;for(var i in e)e.hasOwnProperty(i)&&"HIERARCHY"!==i&&"extensions"!==i&&"extras"!==i&&(t[i]=Object(o["a"])(e[i],!0));return t}function U(e,t,i){if(Object(h["a"])(t)){var n=e._extensions["3DTILES_batch_table_hierarchy"],r=t.HIERARCHY;if(Object(h["a"])(r)&&(M._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),e._extensions["3DTILES_batch_table_hierarchy"]=r,n=r),Object(h["a"])(n))return q(n,i)}}function q(e,t){var i,r,a,o,s=e.instancesLength,_=e.classes,f=e.classIds,d=e.parentCounts,b=e.parentIds,p=s;if(Object(h["a"])(f.byteOffset)&&(f.componentType=Object(u["a"])(f.componentType,l["a"].UNSIGNED_SHORT),f.type=x["a"].SCALAR,a=Object(R["a"])(f),f=a.createArrayBufferView(t.buffer,t.byteOffset+f.byteOffset,s)),Object(h["a"])(d))for(Object(h["a"])(d.byteOffset)&&(d.componentType=Object(u["a"])(d.componentType,l["a"].UNSIGNED_SHORT),d.type=x["a"].SCALAR,a=Object(R["a"])(d),d=a.createArrayBufferView(t.buffer,t.byteOffset+d.byteOffset,s)),o=new Uint16Array(s),p=0,i=0;i<s;++i)o[i]=p,p+=d[i];Object(h["a"])(b)&&Object(h["a"])(b.byteOffset)&&(b.componentType=Object(u["a"])(b.componentType,l["a"].UNSIGNED_SHORT),b.type=x["a"].SCALAR,a=Object(R["a"])(b),b=a.createArrayBufferView(t.buffer,t.byteOffset+b.byteOffset,p));var m=_.length;for(i=0;i<m;++i){var g=_[i].length,y=_[i].instances,v=z(g,y,t);_[i].instances=Object(c["a"])(v,y)}var O=Object(n["a"])(new Array(m),0),T=new Uint16Array(s);for(i=0;i<s;++i)r=f[i],T[i]=O[r],++O[r];var S={classes:_,classIds:f,classIndexes:T,parentCounts:d,parentIndexes:o,parentIds:b};return S}function z(e,t,i){var n;for(var r in t)if(t.hasOwnProperty(r)){var a=t[r],o=a.byteOffset;if(Object(h["a"])(o)){var s=a.componentType,c=a.type;if(!Object(h["a"])(s))throw new m["a"]("componentType is required.");if(!Object(h["a"])(c))throw new m["a"]("type is required.");if(!Object(h["a"])(i))throw new m["a"]("Property "+r+" requires a batch table binary.");var l=Object(R["a"])(a),u=l.componentsPerAttribute,_=l.classType,f=l.createArrayBufferView(i.buffer,i.byteOffset+o,e);Object(h["a"])(n)||(n={}),n[r]={typedArray:f,componentCount:u,type:_}}}return n}function F(e){var t=e._textureDimensions;return t.x*t.y*4}function H(e){if(!Object(h["a"])(e._batchValues)){var t=F(e),i=new Uint8Array(t);Object(n["a"])(i,255),e._batchValues=i}return e._batchValues}function W(e){if(!Object(h["a"])(e._showAlphaProperties)){var t=2*e.featuresLength,i=new Uint8Array(t);Object(n["a"])(i,255),e._showAlphaProperties=i}return e._showAlphaProperties}M._deprecationWarning=f["a"],Object(_["a"])(M.prototype,{memorySizeInBytes:{get:function(){var e=0;return Object(h["a"])(this._pickTexture)&&(e+=this._pickTexture.sizeInBytes),Object(h["a"])(this._batchTexture)&&(e+=this._batchTexture.sizeInBytes),e}}}),M.getBinaryProperties=function(e,t,i){return z(e,t,i)},M.prototype.setShow=function(e,t){if(!t||Object(h["a"])(this._showAlphaProperties)){var i=W(this),n=2*e,r=t?255:0;if(i[n]!==r){i[n]=r;var a=H(this),o=4*e+3;a[o]=t?i[n+1]:0,this._batchValuesDirty=!0}}},M.prototype.setAllShow=function(e){for(var t=this.featuresLength,i=0;i<t;++i)this.setShow(i,e)},M.prototype.getShow=function(e){if(!Object(h["a"])(this._showAlphaProperties))return!0;var t=2*e;return 255===this._showAlphaProperties[t]};var K=new Array(4);M.prototype.setColor=function(e,t){if(!s["a"].equals(t,B)||Object(h["a"])(this._batchValues)){var i=t.toBytes(K),n=i[3],r=H(this),a=4*e,o=W(this),c=2*e;if(r[a]!==i[0]||r[a+1]!==i[1]||r[a+2]!==i[2]||o[c+1]!==n){r[a]=i[0],r[a+1]=i[1],r[a+2]=i[2];var l=255!==o[c+1],u=0!==o[c];r[a+3]=u?n:0,o[c+1]=n;var _=255!==n;_&&!l?++this._translucentFeaturesLength:!_&&l&&--this._translucentFeaturesLength,this._batchValuesDirty=!0,Object(h["a"])(this._colorChangedCallback)&&this._colorChangedCallback(e,t)}}},M.prototype.setAllColor=function(e){for(var t=this.featuresLength,i=0;i<t;++i)this.setColor(i,e)},M.prototype.getColor=function(e,t){if(!Object(h["a"])(this._batchValues))return s["a"].clone(B,t);var i=this._batchValues,n=4*e,r=this._showAlphaProperties,a=2*e;return s["a"].fromBytes(i[n],i[n+1],i[n+2],r[a+1],t)},M.prototype.getPickColor=function(e){return this._pickIds[e]};var G=new s["a"];function Y(e,t){var i=e.typedArray,n=e.componentCount;return 1===n?i[t]:e.type.unpack(i,t*n)}function X(e,t,i){var n=e.typedArray,r=e.componentCount;1===r?n[t]=i:e.type.pack(i,n,t*r)}M.prototype.applyStyle=function(e){if(!Object(h["a"])(e))return this.setAllColor(B),void this.setAllShow(N);for(var t=this._content,i=this.featuresLength,n=0;n<i;++n){var r=t.getFeature(n),a=Object(h["a"])(e.color)?e.color.evaluateColor(r,G):B,o=Object(h["a"])(e.show)?e.show.evaluate(r):N;this.setColor(n,a),this.setShow(n,o)}};var Q=[],Z=[],J=0;function $(e,t,i){var n=e.classIds,r=e.parentCounts,a=e.parentIds,o=e.parentIndexes,s=n.length,c=Q;c.length=Math.max(c.length,s);var l=++J,u=Z;u.length=0,u.push(t);while(u.length>0)if(t=u.pop(),c[t]!==l){c[t]=l;var _=i(e,t);if(Object(h["a"])(_))return _;for(var f=r[t],d=o[t],b=0;b<f;++b){var p=a[d+b];p!==t&&u.push(p)}}}function ee(e,t,i){var n=!0;while(n){var r=i(e,t);if(Object(h["a"])(r))return r;var a=e.parentIds[t];n=a!==t,t=a}}function te(e,t,i){var n=e.parentCounts,r=e.parentIds;return Object(h["a"])(r)?Object(h["a"])(n)?$(e,t,i):ee(e,t,i):i(e,t)}function ie(e,t,i){var n=e._batchTableHierarchy,r=te(n,t,(function(e,t){var n=e.classIds[t],r=e.classes[n].instances;if(Object(h["a"])(r[i]))return!0}));return Object(h["a"])(r)}function ne(e,t,i){var n=e._batchTableHierarchy;te(n,t,(function(e,t){var n=e.classIds[t],r=e.classes[n].instances;for(var a in r)r.hasOwnProperty(a)&&-1===i.indexOf(a)&&i.push(a)}))}function re(e,t,i){var n=e._batchTableHierarchy;return te(n,t,(function(e,t){var n=e.classIds[t],r=e.classes[n],a=e.classIndexes[t],s=r.instances[i];if(Object(h["a"])(s))return Object(h["a"])(s.typedArray)?Y(s,a):Object(o["a"])(s[a],!0)}))}function ae(e,t,i,n){var r=e._batchTableHierarchy,a=te(r,t,(function(e,t){var r=e.classIds[t],a=e.classes[r],s=e.classIndexes[t],c=a.instances[i];if(Object(h["a"])(c))return Object(h["a"])(c.typedArray)?X(c,s,n):c[s]=Object(o["a"])(n,!0),!0}));return Object(h["a"])(a)}function oe(e){return 1===e._textureDimensions.y?"uniform vec4 tile_textureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    return vec2(centerX + (batchId * stepX), 0.5); \n} \n":"uniform vec4 tile_textureStep; \nuniform vec2 tile_textureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    float stepY = tile_textureStep.z; \n    float centerY = tile_textureStep.w; \n    float xId = mod(batchId, tile_textureDimensions.x); \n    float yId = floor(batchId / tile_textureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n"}function se(e,t){return e=C["a"].replaceMain(e,"tile_main"),t?e+"uniform float tile_colorBlend; \nvoid tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n} \n":e+"void tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n} \n"}function ce(e,t){var i,n="texture2D("+t,r=0,a=e.indexOf(n,r);while(a>-1){for(var o=0,s=a;s<e.length;++s){var c=e.charAt(s);if("("===c)++o;else if(")"===c&&(--o,0===o)){i=s+1;break}}var l=e.slice(a,i),u="tile_diffuse_final("+l+", tile_diffuse)";e=e.slice(0,a)+u+e.slice(i),r=a+u.length,a=e.indexOf(n,r)}return e}function le(e,t,i){if(!Object(h["a"])(t))return se(e,i);var n=new RegExp("(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+"+t+";"),r=e.match(n);if(!Object(h["a"])(r))return se(e,i);var a=r[0],o=r[2];e=C["a"].replaceMain(e,"tile_main"),e=e.replace(a,"");var s,c="bool isWhite(vec3 color) \n{ \n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); \n} \nvec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) \n{ \n    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); \n    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; \n    return vec4(diffuse.rgb, sourceDiffuse.a); \n} \n",l="    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n";if("vec3"===o||"vec4"===o){var u="vec3"===o?"vec4("+t+", 1.0)":t,_="vec3"===o?"tile_diffuse.xyz":"tile_diffuse";n=new RegExp(t,"g"),e=e.replace(n,_),s="    vec4 source = "+u+"; \n    tile_diffuse = tile_diffuse_final(source, tile_featureColor); \n    tile_main(); \n"}else"sampler2D"===o&&(e=ce(e,t),s="    tile_diffuse = tile_featureColor; \n    tile_main(); \n");return e="uniform float tile_colorBlend; \nvec4 tile_diffuse = vec4(1.0); \n"+c+a+"\n"+e+"\nvoid tile_color(vec4 tile_featureColor) \n{ \n"+s,i&&(e+=l),e+="} \n",e}function ue(e){var t=e._content.tileset,i=t.colorBlendMode,n=t.colorBlendAmount;return i===I["a"].HIGHLIGHT?0:i===I["a"].REPLACE?1:i===I["a"].MIX?b["a"].clamp(n,b["a"].EPSILON4,1):void 0}M.prototype.isClass=function(e,t){var i=this._batchTableHierarchy;if(!Object(h["a"])(i))return!1;var n=te(i,e,(function(e,i){var n=e.classIds[i],r=e.classes[n];if(r.name===t)return!0}));return Object(h["a"])(n)},M.prototype.isExactClass=function(e,t){return this.getExactClassName(e)===t},M.prototype.getExactClassName=function(e){var t=this._batchTableHierarchy;if(Object(h["a"])(t)){var i=t.classIds[e],n=t.classes[i];return n.name}},M.prototype.hasProperty=function(e,t){return Object(h["a"])(this._properties[t])||Object(h["a"])(this._batchTableHierarchy)&&ie(this,e,t)},M.prototype.getPropertyNames=function(e,t){t=Object(h["a"])(t)?t:[],t.length=0;var i=Object.keys(this._properties);return t.push.apply(t,i),Object(h["a"])(this._batchTableHierarchy)&&ne(this,e,t),t},M.prototype.getProperty=function(e,t){if(Object(h["a"])(this._batchTableBinaryProperties)){var i=this._batchTableBinaryProperties[t];if(Object(h["a"])(i))return Y(i,e)}var n=this._properties[t];if(Object(h["a"])(n))return Object(o["a"])(n[e],!0);if(Object(h["a"])(this._batchTableHierarchy)){var r=re(this,e,t);if(Object(h["a"])(r))return r}},M.prototype.setProperty=function(e,t,i){var n=this.featuresLength;if(Object(h["a"])(this._batchTableBinaryProperties)){var r=this._batchTableBinaryProperties[t];if(Object(h["a"])(r))return void X(r,e,i)}if(!Object(h["a"])(this._batchTableHierarchy)||!ae(this,e,t,i)){var a=this._properties[t];Object(h["a"])(a)||(this._properties[t]=new Array(n),a=this._properties[t]),a[e]=Object(o["a"])(i,!0)}},M.prototype.getVertexShaderCallback=function(e,t,i){if(0!==this.featuresLength){var n=this;return function(r){var a,o=le(r,i,!1);return g["a"].maximumVertexTextureImageUnits>0?(a="",e&&(a+="uniform bool tile_translucentCommand; \n"),a+="uniform sampler2D tile_batchTexture; \nvarying vec4 tile_featureColor; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec2 st = computeSt("+t+"); \n    vec4 featureProperties = texture2D(tile_batchTexture, st); \n    tile_color(featureProperties); \n    float show = ceil(featureProperties.a); \n    gl_Position *= show; \n",e&&(a+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n"),a+="    tile_featureColor = featureProperties; \n    tile_featureSt = st; \n}"):a="varying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_color(vec4(1.0)); \n    tile_featureSt = computeSt("+t+"); \n}",o+"\n"+oe(n)+a}}},M.prototype.getFragmentShaderCallback=function(e,t){if(0!==this.featuresLength)return function(i){return i=le(i,t,!0),g["a"].maximumVertexTextureImageUnits>0?i+="uniform sampler2D tile_pickTexture; \nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_color(tile_featureColor); \n}":(e&&(i+="uniform bool tile_translucentCommand; \n"),i+="uniform sampler2D tile_pickTexture; \nuniform sampler2D tile_batchTexture; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n",e&&(i+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            discard; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            discard; \n        } \n    } \n"),i+="    tile_color(featureProperties); \n} \n"),i}},M.prototype.getClassificationFragmentShaderCallback=function(){if(0!==this.featuresLength)return function(e){return e=C["a"].replaceMain(e,"tile_main"),g["a"].maximumVertexTextureImageUnits>0?e+="uniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_main(); \n    gl_FragColor = tile_featureColor; \n}":e+="uniform sampler2D tile_batchTexture; \nuniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_main(); \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = featureProperties; \n} \n",e}},M.prototype.getUniformMapCallback=function(){if(0!==this.featuresLength){var e=this;return function(t){var i={tile_batchTexture:function(){return Object(u["a"])(e._batchTexture,e._defaultTexture)},tile_textureDimensions:function(){return e._textureDimensions},tile_textureStep:function(){return e._textureStep},tile_colorBlend:function(){return ue(e)},tile_pickTexture:function(){return e._pickTexture}};return Object(c["a"])(t,i)}}},M.prototype.getPickId=function(){return"texture2D(tile_pickTexture, tile_featureSt)"};var he={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};function _e(e){var t=e._translucentFeaturesLength;return 0===t?he.ALL_OPAQUE:t===e.featuresLength?he.ALL_TRANSLUCENT:he.OPAQUE_AND_TRANSLUCENT}function fe(e){var t=y["a"].shallowClone(e),i=t.pass===v["a"].TRANSLUCENT;return t.uniformMap=Object(h["a"])(t.uniformMap)?t.uniformMap:{},t.uniformMap.tile_translucentCommand=function(){return i},t}function de(e){var t=y["a"].shallowClone(e);return t.pass=v["a"].TRANSLUCENT,t.renderState=ve(e.renderState),t}function be(e){var t=y["a"].shallowClone(e);return t.renderState=Oe(e.renderState),t}function pe(e,t){var i=e.shaderCache.getDerivedShaderProgram(t,"zBackfaceLogDepth");if(!Object(h["a"])(i)){var n=t.fragmentShaderSource.clone();n.defines=Object(h["a"])(n.defines)?n.defines.slice(0):[],n.defines.push("DISABLE_LOG_DEPTH_FRAGMENT_WRITE"),i=e.shaderCache.createDerivedShaderProgram(t,"zBackfaceLogDepth",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:n,attributeLocations:t._attributeLocations})}return i}function me(e,t){var i=y["a"].shallowClone(t),n=Object(o["a"])(i.renderState,!0);return n.cull.enabled=!0,n.cull.face=A["a"].FRONT,n.colorMask={red:!1,green:!1,blue:!1,alpha:!1},n.polygonOffset={enabled:!0,factor:5,units:5},n.stencilTest=V["a"].setCesium3DTileBit(),n.stencilMask=V["a"].CESIUM_3D_TILE_MASK,i.renderState=T["a"].fromCache(n),i.castShadows=!1,i.receiveShadows=!1,i.shaderProgram=pe(e,t.shaderProgram),i}function ge(e,t){var i=y["a"].shallowClone(e),n=Object(o["a"])(i.renderState,!0);return n.stencilTest.enabled=!0,n.stencilTest.mask=V["a"].SKIP_LOD_MASK,n.stencilTest.reference=V["a"].CESIUM_3D_TILE_MASK|t<<V["a"].SKIP_LOD_BIT_SHIFT,n.stencilTest.frontFunction=w["a"].GREATER_OR_EQUAL,n.stencilTest.frontOperation.zPass=L["a"].REPLACE,n.stencilTest.backFunction=w["a"].GREATER_OR_EQUAL,n.stencilTest.backOperation.zPass=L["a"].REPLACE,n.stencilMask=V["a"].CESIUM_3D_TILE_MASK|V["a"].SKIP_LOD_MASK,i.renderState=T["a"].fromCache(n),i}function ye(e){var t=e.renderState.stencilTest.reference;return(t&V["a"].SKIP_LOD_MASK)>>>V["a"].SKIP_LOD_BIT_SHIFT}function ve(e){var t=Object(o["a"])(e,!0);return t.cull.enabled=!1,t.depthTest.enabled=!0,t.depthMask=!1,t.blending=j["a"].ALPHA_BLEND,T["a"].fromCache(t)}function Oe(e){var t=Object(o["a"])(e,!0);return t.stencilTest=V["a"].setCesium3DTileBit(),t.stencilMask=V["a"].CESIUM_3D_TILE_MASK,T["a"].fromCache(t)}function Te(e,t,i){var n=e._textureDimensions;return new E["a"]({context:t,pixelFormat:p["a"].RGBA,pixelDatatype:O["a"].UNSIGNED_BYTE,source:{width:n.x,height:n.y,arrayBufferView:i},flipY:!1,sampler:new S["a"]({minificationFilter:P["a"].NEAREST,magnificationFilter:D["a"].NEAREST})})}function Se(e,t){var i=e.featuresLength;if(!Object(h["a"])(e._pickTexture)&&i>0){for(var n=e._pickIds,r=F(e),a=new Uint8Array(r),o=e._content,c=0;c<i;++c){var l=t.createPickId(o.getFeature(c));n.push(l);var u=l.color,_=4*c;a[_]=s["a"].floatToByte(u.red),a[_+1]=s["a"].floatToByte(u.green),a[_+2]=s["a"].floatToByte(u.blue),a[_+3]=s["a"].floatToByte(u.alpha)}e._pickTexture=Te(e,t,a),o.tileset._statistics.batchTableByteLength+=e._pickTexture.sizeInBytes}}function Ce(e){var t=e._textureDimensions;e._batchTexture.copyFrom({width:t.x,height:t.y,arrayBufferView:e._batchValues})}M.prototype.addDerivedCommands=function(e,t){for(var i=e.commandList,n=i.length,r=this._content._tile,a=r._finalResolution,o=r.tileset,s=o._skipLevelOfDetail&&o._hasMixedContent&&e.context.stencilBuffer,c=_e(this),l=t;l<n;++l){var u=i[l],_=u.derivedCommands.tileset;Object(h["a"])(_)&&!u.dirty||(_={},u.derivedCommands.tileset=_,_.originalCommand=fe(u),u.dirty=!1);var f=_.originalCommand;c!==he.ALL_OPAQUE&&u.pass!==v["a"].TRANSLUCENT&&(Object(h["a"])(_.translucent)||(_.translucent=de(f))),c!==he.ALL_TRANSLUCENT&&u.pass!==v["a"].TRANSLUCENT&&(Object(h["a"])(_.opaque)||(_.opaque=be(f)),s&&(a||(Object(h["a"])(_.zback)||(_.zback=me(e.context,f)),o._backfaceCommands.push(_.zback)),Object(h["a"])(_.stencil)&&r._selectionDepth===ye(_.stencil)||(u.renderState.depthMask?_.stencil=ge(f,r._selectionDepth):_.stencil=_.opaque)));var d=s?_.stencil:_.opaque,b=_.translucent;u.pass!==v["a"].TRANSLUCENT?(c===he.ALL_OPAQUE&&(i[l]=d),c===he.ALL_TRANSLUCENT&&(i[l]=b),c===he.OPAQUE_AND_TRANSLUCENT&&(i[l]=d,i.push(b))):i[l]=f}},M.prototype.update=function(e,t){var i=t.context;this._defaultTexture=i.defaultTexture;var n=t.passes;(n.pick||n.postProcess)&&Se(this,i),this._batchValuesDirty&&(this._batchValuesDirty=!1,Object(h["a"])(this._batchTexture)||(this._batchTexture=Te(this,i,this._batchValues),e._statistics.batchTableByteLength+=this._batchTexture.sizeInBytes),Ce(this))},M.prototype.isDestroyed=function(){return!1},M.prototype.destroy=function(){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),this._pickTexture=this._pickTexture&&this._pickTexture.destroy();for(var e=this._pickIds,t=e.length,i=0;i<t;++i)e[i].destroy();return Object(d["a"])(this)},t["a"]=M},7950:function(e,t,i){"use strict";var n=i("bef8"),r=i("bd8d"),a=i("535a"),o=i("2f63"),s=i("9f1d"),c=i("add9");function l(e,t,i,n,r){this._content=e,this._billboard=i,this._label=n,this._polyline=r,this._batchId=t,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),h(this)}var u=new n["a"];function h(e){var t=e._billboard;if(Object(o["a"])(e._billboardImage)&&e._billboardImage!==t.image)t.image=e._billboardImage;else if(!Object(o["a"])(e._billboardImage)){var i=Object(a["a"])(e._color,l.defaultColor),n=Object(a["a"])(e._pointOutlineColor,l.defaultPointOutlineColor),s=Object(a["a"])(e._pointOutlineWidth,l.defaultPointOutlineWidth),u=Object(a["a"])(e._pointSize,l.defaultPointSize),h=e._billboardColor,_=e._billboardOutlineColor,f=e._billboardOutlineWidth,d=e._billboardSize;if(!r["a"].equals(i,h)||!r["a"].equals(n,_)||s!==f||u!==d){e._billboardColor=r["a"].clone(i,e._billboardColor),e._billboardOutlineColor=r["a"].clone(n,e._billboardOutlineColor),e._billboardOutlineWidth=s,e._billboardSize=u;var b=i.alpha,p=i.toCssColorString(),m=n.toCssColorString(),g=JSON.stringify([p,u,m,s]);t.setImage(g,Object(c["a"])(b,p,m,s,u))}}}Object(s["a"])(l.prototype,{show:{get:function(){return this._label.show},set:function(e){this._label.show=e,this._billboard.show=e,this._polyline.show=e}},color:{get:function(){return this._color},set:function(e){this._color=r["a"].clone(e,this._color),h(this)}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=e,h(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=r["a"].clone(e,this._pointOutlineColor),h(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=e,h(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(e){this._label.fillColor=e,this._polyline.show=this._label.show&&e.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(e){this._label.outlineColor=e}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(e){this._label.outlineWidth=e}},font:{get:function(){return this._label.font},set:function(e){this._label.font=e}},labelStyle:{get:function(){return this._label.style},set:function(e){this._label.style=e}},labelText:{get:function(){return this._label.text},set:function(e){Object(o["a"])(e)||(e=""),this._label.text=e}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(e){this._label.backgroundColor=e}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(e){this._label.backgroundPadding=e}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(e){this._label.showBackground=e}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(e){this._label.scaleByDistance=e,this._billboard.scaleByDistance=e}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(e){this._label.translucencyByDistance=e,this._billboard.translucencyByDistance=e}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(e){this._label.distanceDisplayCondition=e,this._polyline.distanceDisplayCondition=e,this._billboard.distanceDisplayCondition=e}},heightOffset:{get:function(){return this._heightOffset},set:function(e){var t=Object(a["a"])(this._heightOffset,0),i=this._content.tileset.ellipsoid,n=i.cartesianToCartographic(this._billboard.position,u);n.height=n.height-t+e;var r=i.cartographicToCartesian(n);this._billboard.position=r,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],r],this._heightOffset=e}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(e){this._polyline.show=e}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(e){this._polyline.material.uniforms.color=r["a"].clone(e,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(e){var t=this._billboardImage!==e;this._billboardImage=e,t&&h(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(e){this._label.disableDepthTestDistance=e,this._billboard.disableDepthTestDistance=e}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(e){this._billboard.horizontalOrigin=e}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(e){this._billboard.verticalOrigin=e}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(e){this._label.horizontalOrigin=e}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(e){this._label.verticalOrigin=e}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){var e=this._pickIds;return e[0]=this._billboard.pickId,e[1]=this._label.pickId,e[2]=this._polyline.pickId,e}}}),l.defaultColor=r["a"].WHITE,l.defaultPointOutlineColor=r["a"].BLACK,l.defaultPointOutlineWidth=0,l.defaultPointSize=8,l.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},l.prototype.getPropertyNames=function(e){return this._content.batchTable.getPropertyNames(this._batchId,e)},l.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},l.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},l.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},l.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},l.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)},t["a"]=l},"7abe":function(e,t,i){"use strict";var n=i("0e25"),r={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5};t["a"]=Object(n["a"])(r)},9889:function(e,t,i){"use strict";var n=i("abab"),r=i("535a"),a=i("2f63");function o(e,t){this.json=e,this.buffer=t,this._cachedTypedArrays={},this.featuresLength=0}function s(e,t,i,r,o,s){var c=e._cachedTypedArrays,l=c[t];return Object(a["a"])(l)||(l=n["a"].createArrayBufferView(i,e.buffer.buffer,e.buffer.byteOffset+s,o*r),c[t]=l),l}function c(e,t,i,r){var o=e._cachedTypedArrays,s=o[t];return Object(a["a"])(s)||(s=n["a"].createTypedArray(i,r),o[t]=s),s}o.prototype.getGlobalProperty=function(e,t,i){var o=this.json[e];if(Object(a["a"])(o))return Object(a["a"])(o.byteOffset)?(t=Object(r["a"])(t,n["a"].UNSIGNED_INT),i=Object(r["a"])(i,1),s(this,e,t,i,1,o.byteOffset)):o},o.prototype.getPropertyArray=function(e,t,i){var r=this.json[e];if(Object(a["a"])(r))return Object(a["a"])(r.byteOffset)?(Object(a["a"])(r.componentType)&&(t=n["a"].fromName(r.componentType)),s(this,e,t,i,this.featuresLength,r.byteOffset)):c(this,e,t,r)},o.prototype.getProperty=function(e,t,i,n,r){var o=this.json[e];if(Object(a["a"])(o)){var s=this.getPropertyArray(e,t,i);if(1===i)return s[n];for(var c=0;c<i;++c)r[c]=s[i*n+c];return r}},t["a"]=o},"9e51":function(e,t,i){"use strict";var n=i("2f63"),r=i("9f1d");function a(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object(r["a"])(a.prototype,{style:{get:function(){return this._style},set:function(e){this._style=e,this._styleDirty=!0}}}),a.prototype.makeDirty=function(){this._styleDirty=!0},a.prototype.applyStyle=function(e,t){if(e.ready&&(!Object(n["a"])(this._style)||this._style.ready)){var i=this._styleDirty;t.passes.render&&(this._styleDirty=!1),i&&++this._lastStyleTime;for(var r=this._lastStyleTime,a=e._statistics,o=i?e._selectedTiles:e._selectedTilesToStyle,s=o.length,c=0;c<s;++c){var l=o[c];if(l.lastStyleTime!==r){var u=l.content;l.lastStyleTime=r,u.applyStyle(this._style),a.numberOfFeaturesStyled+=u.featuresLength,++a.numberOfTilesStyled}}}},t["a"]=a},"9f0f":function(e,t,i){"use strict";var n=i("be18"),r=i("6380"),a=i("1ec0"),o=i("8cfb"),s={},c=new n["a"];s.checkChildrenWithinParent=function(e){var t=e.children,i=t.length,s=e.boundingVolume;if(s instanceof o["a"]||s instanceof a["a"]){var l=s._orientedBoundingBox;e._optimChildrenWithinParent=r["a"].USE_OPTIMIZATION;for(var u=0;u<i;++u){var h=t[u],_=h.boundingVolume;if(!(_ instanceof o["a"]||_ instanceof a["a"])){e._optimChildrenWithinParent=r["a"].SKIP_OPTIMIZATION;break}var f=_._orientedBoundingBox,d=n["a"].subtract(f.center,l.center,c),b=n["a"].magnitude(d);n["a"].divideByScalar(d,b,d);var p=Math.abs(l.halfAxes[0]*d.x)+Math.abs(l.halfAxes[1]*d.y)+Math.abs(l.halfAxes[2]*d.z)+Math.abs(l.halfAxes[3]*d.x)+Math.abs(l.halfAxes[4]*d.y)+Math.abs(l.halfAxes[5]*d.z)+Math.abs(l.halfAxes[6]*d.x)+Math.abs(l.halfAxes[7]*d.y)+Math.abs(l.halfAxes[8]*d.z),m=Math.abs(f.halfAxes[0]*d.x)+Math.abs(f.halfAxes[1]*d.y)+Math.abs(f.halfAxes[2]*d.z)+Math.abs(f.halfAxes[3]*d.x)+Math.abs(f.halfAxes[4]*d.y)+Math.abs(f.halfAxes[5]*d.z)+Math.abs(f.halfAxes[6]*d.x)+Math.abs(f.halfAxes[7]*d.y)+Math.abs(f.halfAxes[8]*d.z);if(p<=m+b){e._optimChildrenWithinParent=r["a"].SKIP_OPTIMIZATION;break}}}return e._optimChildrenWithinParent===r["a"].USE_OPTIMIZATION},t["a"]=s},c0a9:function(e,t,i){"use strict";var n=i("cef5"),r=i("be18"),a=i("bd8d"),o=i("9541"),s=i("2384"),c=i("535a"),l=i("2f63"),u=i("9f1d"),h=i("45c5"),_=i("7d62"),f=i("c52f"),d=i("974b"),b=i("66bf"),p=i("5ed2"),m=i("93da"),g=i("df07"),y=i("52f0"),v=i("78e5"),O=i("713f"),T=i("eace"),S=i("de66"),C=i("75b2"),E=i("8a39"),D=i("b82e"),P=i("d4ed"),x=i("283e"),j=i("a58e"),I=i("61aa"),A=i("c2ce"),R=i("09e7"),V=i("490e"),w=i("a994"),L=i("3995"),B=i("364c"),N={b3dm:function(e,t,i,n,r){return new I["a"](e,t,i,n,r)},pnts:function(e,t,i,n,r){return new w["a"](e,t,i,n,r)},i3dm:function(e,t,i,n,r){return new V["a"](e,t,i,n,r)},cmpt:function(e,t,i,n,r){return new A["a"](e,t,i,n,r,N)},json:function(e,t,i,n,r){return new L["a"](e,t,i,n,r)},geom:function(e,t,i,n,r){return new R["a"](e,t,i,n,r)},vctr:function(e,t,i,n,r){return new B["a"](e,t,i,n,r)}},M=N,k=i("7abe"),U=i("6380"),q=i("d150"),z=i("c4a1"),F=i("c872"),H=i("a307"),W=i("1ec0"),K=i("eb1f"),G=i("8cfb");function Y(e,t,i,n){this._tileset=e,this._header=i;var r=i.content;this.transform=Object(l["a"])(i.transform)?y["a"].unpack(i.transform):y["a"].clone(y["a"].IDENTITY);var o,s,c,u,h,_,f,d,b=Object(l["a"])(n)?n.computedTransform:e.modelMatrix,m=y["a"].multiply(b,this.transform,new y["a"]),g=Object(l["a"])(n)?n._initialTransform:y["a"].IDENTITY;if(this._initialTransform=y["a"].multiply(g,this.transform,new y["a"]),this.computedTransform=m,this._boundingVolume=this.createBoundingVolume(i.boundingVolume,m),this._boundingVolume2D=void 0,Object(l["a"])(r)&&Object(l["a"])(r.boundingVolume)&&(o=this.createBoundingVolume(r.boundingVolume,m)),this._contentBoundingVolume=o,this._contentBoundingVolume2D=void 0,Object(l["a"])(i.viewerRequestVolume)&&(s=this.createBoundingVolume(i.viewerRequestVolume,m)),this._viewerRequestVolume=s,this.geometricError=i.geometricError,this._geometricError=i.geometricError,Object(l["a"])(this._geometricError)||(this._geometricError=Object(l["a"])(n)?n.geometricError:e._geometricError,Y._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale(),Object(l["a"])(i.refine)?("replace"!==i.refine&&"add"!==i.refine||Y._deprecationWarning("lowercase-refine",'This tile uses a lowercase refine "'+i.refine+'". Instead use "'+i.refine.toUpperCase()+'".'),c="REPLACE"===i.refine.toUpperCase()?z["a"].REPLACE:z["a"].ADD):c=Object(l["a"])(n)?n.refine:z["a"].REPLACE,this.refine=c,this.children=[],this.parent=n,t=P["a"].createIfNeeded(t),Object(l["a"])(r)){var v=r.uri;Object(l["a"])(r.url)&&(Y._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),v=r.url),h=!1,_=k["a"].UNLOADED,f=t.getDerivedResource({url:v}),d=C["a"].getServerKey(f.getUrlComponent())}else u=new F["a"](e,this),h=!0,_=k["a"].READY;this._content=u,this._contentResource=f,this._contentState=_,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this._expiredContent=void 0,this._serverKey=d,this.hasEmptyContent=h,this.hasTilesetContent=!1,this.cacheNode=void 0;var O,T,S=i.expire;Object(l["a"])(S)&&(O=S.duration,Object(l["a"])(S.date)&&(T=p["a"].fromIso8601(S.date))),this.expireDuration=O,this.expireDate=T,this.lastStyleTime=0,this._optimChildrenWithinParent=U["a"].NOT_COMPUTED,this.clippingPlanesDirty=!1,this.priorityDeferred=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._clippingPlanesState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=a["a"].fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new p["a"],this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}Y._deprecationWarning=h["a"],Object(u["a"])(Y.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return Object(c["a"])(this._contentBoundingVolume,this._boundingVolume)}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},extras:{get:function(){return this._header.extras}},color:{get:function(){return Object(l["a"])(this._color)||(this._color=new a["a"]),a["a"].clone(this._color)},set:function(e){this._color=a["a"].clone(e,this._color),this._colorDirty=!0}},contentAvailable:{get:function(){return this.contentReady&&!this.hasEmptyContent&&!this.hasTilesetContent||Object(l["a"])(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===k["a"].READY}},contentUnloaded:{get:function(){return this._contentState===k["a"].UNLOADED}},contentExpired:{get:function(){return this._contentState===k["a"].EXPIRED}},contentFailed:{get:function(){return this._contentState===k["a"].FAILED}},contentReadyToProcessPromise:{get:function(){if(Object(l["a"])(this._contentReadyToProcessPromise))return this._contentReadyToProcessPromise.promise}},contentReadyPromise:{get:function(){if(Object(l["a"])(this._contentReadyPromise))return this._contentReadyPromise.promise}},commandsLength:{get:function(){return this._commandsLength}}});var X=new r["a"];function Q(e,t){var i=e._tileset,n=t.camera,a=e.boundingSphere,o=a.radius,s=r["a"].multiplyByScalar(n.directionWC,e._centerZDepth,X),c=r["a"].add(n.positionWC,s,X),u=r["a"].subtract(c,a.center,X),h=r["a"].magnitude(u),_=h>o;if(_){var f=r["a"].normalize(u,X),d=r["a"].multiplyByScalar(f,o,X),b=r["a"].add(a.center,d,X),p=r["a"].subtract(b,n.positionWC,X),g=r["a"].normalize(p,X);e._foveatedFactor=1-Math.abs(r["a"].dot(n.directionWC,g))}else e._foveatedFactor=0;var y=e.refine===z["a"].REPLACE,v=i._skipLevelOfDetail;if(y&&!v||!i.foveatedScreenSpaceError||1===i.foveatedConeSize||e._priorityProgressiveResolution&&y&&v||i._pass===q["a"].PRELOAD_FLIGHT||i._pass===q["a"].PRELOAD)return!1;var O=1-Math.cos(.5*n.frustum.fov),T=i.foveatedConeSize*O;if(e._foveatedFactor<=T)return!1;var S=O-T,C=m["a"].clamp((e._foveatedFactor-T)/S,0,1),E=i.foveatedInterpolationCallback(i.foveatedMinimumScreenSpaceErrorRelaxation,i.maximumScreenSpaceError,C),D=0===e._screenSpaceError&&Object(l["a"])(e.parent)?.5*e.parent._screenSpaceError:e._screenSpaceError;return i.maximumScreenSpaceError-E<=D}var Z=new p["a"];function J(e,t){if(e.progressiveResolutionHeightFraction<=0||e.progressiveResolutionHeightFraction>.5)return!1;var i=t._screenSpaceErrorProgressiveResolution>e._maximumScreenSpaceError;t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;var n=t.parent,r=e._maximumScreenSpaceError,a=t._screenSpaceErrorProgressiveResolution<=r,o=Object(l["a"])(n)&&n._screenSpaceErrorProgressiveResolution>r;return a&&o&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,i=!0),i}function $(e,t){var i=t.parent,n=Object(l["a"])(i)&&(!e._skipLevelOfDetail||0===t._screenSpaceError||i.hasTilesetContent),r=n?i._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-r}function ee(e){if(Object(l["a"])(e.expireDuration)){var t=p["a"].now(Z);p["a"].addSeconds(t,e.expireDuration,t),Object(l["a"])(e.expireDate)?p["a"].lessThan(e.expireDate,t)&&p["a"].clone(t,e.expireDate):e.expireDate=p["a"].clone(t)}}function te(e,t){return function(i){e._contentState===k["a"].PROCESSING?--t.statistics.numberOfTilesProcessing:--t.statistics.numberOfPendingRequests,e._contentState=k["a"].FAILED,e._contentReadyPromise.reject(i),e._contentReadyToProcessPromise.reject(i)}}function ie(e){return function(){return e._priority}}Y.prototype.getScreenSpaceError=function(e,t,i){var n=this._tileset,r=Object(c["a"])(i,1),a=Object(l["a"])(this.parent)?this.parent.geometricError:n._geometricError,o=t?a:this.geometricError;if(0===o)return 0;var s,u=e.camera,h=u.frustum,_=e.context,f=_.drawingBufferWidth,d=_.drawingBufferHeight*r;if(e.mode===H["a"].SCENE2D||h instanceof O["a"]){Object(l["a"])(h._offCenterFrustum)&&(h=h._offCenterFrustum);var b=Math.max(h.top-h.bottom,h.right-h.left)/Math.max(f,d);s=o/b}else{var p=Math.max(this._distanceToCamera,m["a"].EPSILON7),g=u.frustum.sseDenominator;if(s=o*d/(p*g),n.dynamicScreenSpaceError){var y=n._dynamicScreenSpaceErrorComputedDensity,v=n.dynamicScreenSpaceErrorFactor,T=m["a"].fog(p,y)*v;s-=T}}return s/=e.pixelRatio,s},Y.prototype.updateVisibility=function(e){var t=this.parent,i=this._tileset,n=Object(l["a"])(t)?t.computedTransform:i.modelMatrix,r=Object(l["a"])(t)?t._visibilityPlaneMask:s["a"].MASK_INDETERMINATE;this.updateTransform(n),this._distanceToCamera=this.distanceToTile(e),this._centerZDepth=this.distanceToTileCenter(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(e,!1,i.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(e,r),this._visible=this._visibilityPlaneMask!==s["a"].MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priorityReverseScreenSpaceError=$(i,this),this._priorityProgressiveResolution=J(i,this),this.priorityDeferred=Q(this,e)},Y.prototype.updateExpiration=function(){if(Object(l["a"])(this.expireDate)&&this.contentReady&&!this.hasEmptyContent){var e=p["a"].now(Z);p["a"].lessThan(this.expireDate,e)&&(this._contentState=k["a"].EXPIRED,this._expiredContent=this._content)}},Y.prototype.requestContent=function(){var e=this,t=this._tileset;if(this.hasEmptyContent)return!1;var i=this._contentResource.clone(),n=this.contentExpired;n&&i.setQueryParameters({expired:this.expireDate.toString()});var r=new S["a"]({throttle:!0,throttleByServer:!0,type:D["a"].TILES3D,priorityFunction:ie(this),serverKey:this._serverKey});this._request=r,i.request=r;var a=i.fetchArrayBuffer();if(!Object(l["a"])(a))return!1;var o=this._contentState;this._contentState=k["a"].LOADING,this._contentReadyToProcessPromise=j["a"].defer(),this._contentReadyPromise=j["a"].defer(),n&&(this.expireDate=void 0);var s=te(this,t);return a.then((function(i){if(!e.isDestroyed()){var n,r=new Uint8Array(i),a=Object(d["a"])(r),o=M[a];return t._disableSkipLevelOfDetail=t._disableSkipLevelOfDetail||"vctr"===a||"geom"===a,Object(l["a"])(o)?n=o(t,e,e._contentResource,i,0):(n=M.json(t,e,e._contentResource,i,0),e.hasTilesetContent=!0),e._content=n,e._contentState=k["a"].PROCESSING,e._contentReadyToProcessPromise.resolve(n),n.readyPromise.then((function(t){e.isDestroyed()?s():(ee(e),e._selectedFrame=0,e.lastStyleTime=0,p["a"].now(e._loadTimestamp),e._contentState=k["a"].READY,e._contentReadyPromise.resolve(t))}))}s()})).otherwise((function(i){if(r.state===E["a"].CANCELLED)return e._contentState=o,--t.statistics.numberOfPendingRequests,void++t.statistics.numberOfAttemptedRequests;s(i)})),!0},Y.prototype.unloadContent=function(){this.hasEmptyContent||this.hasTilesetContent||(this._content=this._content&&this._content.destroy(),this._contentState=k["a"].UNLOADED,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this.lastStyleTime=0,this.clippingPlanesDirty=0===this._clippingPlanesState,this._clippingPlanesState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};var ne=new n["a"];function re(e,t){if(t.mode!==H["a"].SCENE3D&&!Object(l["a"])(e._boundingVolume2D)){var i=e._boundingVolume.boundingSphere,r=n["a"].projectTo2D(i,t.mapProjection,ne);e._boundingVolume2D=new K["a"](r.center,r.radius)}return t.mode!==H["a"].SCENE3D?e._boundingVolume2D:e._boundingVolume}function ae(e,t){if(t.mode!==H["a"].SCENE3D&&!Object(l["a"])(e._contentBoundingVolume2D)){var i=e._contentBoundingVolume.boundingSphere,r=n["a"].projectTo2D(i,t.mapProjection,ne);e._contentBoundingVolume2D=new K["a"](r.center,r.radius)}return t.mode!==H["a"].SCENE3D?e._contentBoundingVolume2D:e._contentBoundingVolume}Y.prototype.visibility=function(e,t){var i=e.cullingVolume,n=re(this,e),r=this._tileset,a=r.clippingPlanes;if(Object(l["a"])(a)&&a.enabled){var o=a.computeIntersectionWithBoundingVolume(n,r.clippingPlanesOriginMatrix);if(this._isClipped=o!==b["a"].INSIDE,o===b["a"].OUTSIDE)return s["a"].MASK_OUTSIDE}return i.computeVisibilityWithPlaneMask(n,t)},Y.prototype.contentVisibility=function(e){if(!Object(l["a"])(this._contentBoundingVolume))return b["a"].INSIDE;if(this._visibilityPlaneMask===s["a"].MASK_INSIDE)return b["a"].INSIDE;var t=e.cullingVolume,i=ae(this,e),n=this._tileset,r=n.clippingPlanes;if(Object(l["a"])(r)&&r.enabled){var a=r.computeIntersectionWithBoundingVolume(i,n.clippingPlanesOriginMatrix);if(this._isClipped=a!==b["a"].INSIDE,a===b["a"].OUTSIDE)return b["a"].OUTSIDE}return t.computeVisibility(i)},Y.prototype.distanceToTile=function(e){var t=re(this,e);return t.distanceToCamera(e)};var oe=new r["a"];Y.prototype.distanceToTileCenter=function(e){var t=re(this,e),i=t.boundingVolume,n=r["a"].subtract(i.center,e.camera.positionWC,oe);return r["a"].dot(e.camera.directionWC,n)},Y.prototype.insideViewerRequestVolume=function(e){var t=this._viewerRequestVolume;return!Object(l["a"])(t)||0===t.distanceToCamera(e)};var se=new g["a"],ce=new r["a"],le=new g["a"],ue=new r["a"],he=new T["a"],_e=new v["a"],fe=new y["a"];function de(e,t,i){var n=r["a"].fromElements(e[0],e[1],e[2],ue),a=g["a"].fromArray(e,3,le);n=y["a"].multiplyByPoint(t,n,n);var o=y["a"].getMatrix3(t,se);return a=g["a"].multiply(o,a,a),Object(l["a"])(i)?(i.update(n,a),i):new G["a"](n,a)}function be(e,t,i,n){var r=T["a"].unpack(e,0,he),a=e[4],o=e[5],s=v["a"].fromRectangle(r,a,o,f["a"].WGS84,_e),c=s.center,u=s.halfAxes;t=y["a"].multiplyTransformation(t,y["a"].inverseTransformation(i,fe),fe),c=y["a"].multiplyByPoint(t,c,c);var h=y["a"].getMatrix3(t,se);return u=g["a"].multiply(h,u,u),Object(l["a"])(n)&&n instanceof G["a"]?(n.update(c,u),n):new G["a"](c,u)}function pe(e,t,i,n){if(!y["a"].equalsEpsilon(t,i,m["a"].EPSILON8))return be(e,t,i,n);if(Object(l["a"])(n))return n;var r=T["a"].unpack(e,0,he);return new W["a"]({rectangle:r,minimumHeight:e[4],maximumHeight:e[5]})}function me(e,t,i){var n=r["a"].fromElements(e[0],e[1],e[2],ue),a=e[3];n=y["a"].multiplyByPoint(t,n,n);var o=y["a"].getScale(t,ce),s=r["a"].maximumComponent(o);return a*=s,Object(l["a"])(i)?(i.update(n,a),i):new K["a"](n,a)}function ge(e,t,i){if(i.passes.render){var n=Object(l["a"])(e._header.content)&&Object(l["a"])(e._header.content.boundingVolume),r=e.hasEmptyContent||e.hasTilesetContent,s=t.debugShowBoundingVolume||t.debugShowContentBoundingVolume&&!n;if(s){var c;c=e._finalResolution?r?a["a"].DARKGRAY:a["a"].WHITE:a["a"].YELLOW,Object(l["a"])(e._debugBoundingVolume)||(e._debugBoundingVolume=e._boundingVolume.createDebugVolume(c)),e._debugBoundingVolume.update(i);var u=e._debugBoundingVolume.getGeometryInstanceAttributes("outline");u.color=o["a"].toValue(c,u.color)}else!s&&Object(l["a"])(e._debugBoundingVolume)&&(e._debugBoundingVolume=e._debugBoundingVolume.destroy());t.debugShowContentBoundingVolume&&n?(Object(l["a"])(e._debugContentBoundingVolume)||(e._debugContentBoundingVolume=e._contentBoundingVolume.createDebugVolume(a["a"].BLUE)),e._debugContentBoundingVolume.update(i)):!t.debugShowContentBoundingVolume&&Object(l["a"])(e._debugContentBoundingVolume)&&(e._debugContentBoundingVolume=e._debugContentBoundingVolume.destroy()),t.debugShowViewerRequestVolume&&Object(l["a"])(e._viewerRequestVolume)?(Object(l["a"])(e._debugViewerRequestVolume)||(e._debugViewerRequestVolume=e._viewerRequestVolume.createDebugVolume(a["a"].YELLOW)),e._debugViewerRequestVolume.update(i)):!t.debugShowViewerRequestVolume&&Object(l["a"])(e._debugViewerRequestVolume)&&(e._debugViewerRequestVolume=e._debugViewerRequestVolume.destroy());var h=t.debugColorizeTiles&&!e._debugColorizeTiles||Object(l["a"])(t._heatmap.tilePropertyName),_=!t.debugColorizeTiles&&e._debugColorizeTiles;h?(t._heatmap.colorize(e,i),e._debugColorizeTiles=!0,e.color=e._debugColor):_&&(e._debugColorizeTiles=!1,e.color=a["a"].WHITE),e._colorDirty&&(e._colorDirty=!1,e._content.applyDebugSettings(!0,e._color)),_&&t.makeStyleDirty()}}function ye(e,t,i){var n=e._content,r=e._expiredContent;if(Object(l["a"])(r)){if(!e.contentReady)return void r.update(t,i);e._expiredContent.destroy(),e._expiredContent=void 0}n.update(t,i)}function ve(e,t){var i=t.clippingPlanes,n=0;Object(l["a"])(i)&&e._isClipped&&i.enabled&&(n=i.clippingPlanesState),n!==e._clippingPlanesState&&(e._clippingPlanesState=n,e.clippingPlanesDirty=!0)}Y.prototype.createBoundingVolume=function(e,t,i){if(!Object(l["a"])(e))throw new x["a"]("boundingVolume must be defined");if(Object(l["a"])(e.box))return de(e.box,t,i);if(Object(l["a"])(e.region))return pe(e.region,t,this._initialTransform,i);if(Object(l["a"])(e.sphere))return me(e.sphere,t,i);throw new x["a"]("boundingVolume must contain a sphere, region, or box")},Y.prototype.updateTransform=function(e){e=Object(c["a"])(e,y["a"].IDENTITY);var t=y["a"].multiply(e,this.transform,fe),i=!y["a"].equals(t,this.computedTransform);if(i){y["a"].clone(t,this.computedTransform);var n=this._header,r=this._header.content;this._boundingVolume=this.createBoundingVolume(n.boundingVolume,this.computedTransform,this._boundingVolume),Object(l["a"])(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(r.boundingVolume,this.computedTransform,this._contentBoundingVolume)),Object(l["a"])(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(n.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()}},Y.prototype.updateGeometricErrorScale=function(){var e=y["a"].getScale(this.computedTransform,ce),t=r["a"].maximumComponent(e);this.geometricError=this._geometricError*t},Y.prototype.update=function(e,t){var i=t.commandList.length;ve(this,e),ge(this,e,t),ye(this,e,t),this._commandsLength=t.commandList.length-i,this.clippingPlanesDirty=!1};var Oe=[];function Te(e,t,i){var n=e*Math.pow(10,t),r=parseInt(n);return r*Math.pow(10,i)}function Se(e,t,i){return Math.max(m["a"].normalize(e,t,i)-m["a"].EPSILON7,0)}Y.prototype.process=function(e,t){var i=t.commandList;t.commandList=Oe,this._content.update(e,t),Oe.length=0,t.commandList=i},Y.prototype.updatePriority=function(){var e=this.tileset,t=e.preferLeaves,i=e._minimumPriority,n=e._maximumPriority,r=4,a=1,o=0,s=r,c=o+s,l=r,u=c+l,h=a,_=Math.pow(10,u),f=u+h,d=a,b=Math.pow(10,f),p=f+d,m=Math.pow(10,p),g=Se(this._depth,i.depth,n.depth);g=t?1-g:g;var y=!e._skipLevelOfDetail&&this.refine===z["a"].REPLACE,v=y?Se(this._priorityHolder._distanceToCamera,i.distance,n.distance):Se(this._priorityReverseScreenSpaceError,i.reverseScreenSpaceError,n.reverseScreenSpaceError),O=Te(v,s,o),T=this._priorityProgressiveResolution?0:_,S=Se(this._priorityHolder._foveatedFactor,i.foveatedFactor,n.foveatedFactor),C=Te(S,l,c),E=this.priorityDeferred?b:0,D=e._pass===q["a"].PRELOAD_FLIGHT?0:m;this._priority=g+O+T+C+E+D},Y.prototype.isDestroyed=function(){return!1},Y.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),Object(_["a"])(this)};t["a"]=Y},c4a1:function(e,t,i){"use strict";var n=i("0e25"),r={ADD:0,REPLACE:1};t["a"]=Object(n["a"])(r)},d150:function(e,t,i){"use strict";var n=i("0e25"),r=i("8981"),a=i("859c"),o={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},s=new Array(o.NUMBER_OF_PASSES);s[o.RENDER]=Object(n["a"])({traversal:a["a"],isRender:!0,requestTiles:!0,ignoreCommands:!1}),s[o.PICK]=Object(n["a"])({traversal:a["a"],isRender:!1,requestTiles:!1,ignoreCommands:!1}),s[o.SHADOW]=Object(n["a"])({traversal:a["a"],isRender:!1,requestTiles:!0,ignoreCommands:!1}),s[o.PRELOAD]=Object(n["a"])({traversal:a["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),s[o.PRELOAD_FLIGHT]=Object(n["a"])({traversal:a["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),s[o.REQUEST_RENDER_MODE_DEFER_CHECK]=Object(n["a"])({traversal:a["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),s[o.MOST_DETAILED_PRELOAD]=Object(n["a"])({traversal:r["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),s[o.MOST_DETAILED_PICK]=Object(n["a"])({traversal:r["a"],isRender:!1,requestTiles:!1,ignoreCommands:!1}),o.getPassOptions=function(e){return s[e]},t["a"]=Object(n["a"])(o)}}]);