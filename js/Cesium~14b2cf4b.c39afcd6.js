(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~14b2cf4b"],{"02a7":function(t,e,i){"use strict";var a=i("933b"),r=i("be18"),s=i("bd8d"),o=i("9541"),n=i("2f63"),h=i("aee6"),l=i("77bc"),d=i("c2eb"),p=i("ac9c"),c=i("894b"),u=i("2d19"),v=i("b83c"),f=i("40b2"),m=i("ea07"),g=new s["a"],y=new h["a"],_=new h["a"],b=r["a"].ZERO,O=new r["a"];function w(t,e,i,r,s,o,h){var l;this.translucent=e,this.appearanceType=i,this.depthFailAppearanceType=r,this.depthFailMaterialProperty=s,this.depthFailMaterial=void 0,this.closed=o,this.shadows=h,this.primitives=t,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new a["a"],this.updaters=new a["a"],this.updatersWithAttributes=new a["a"],this.attributes=new a["a"],this.subscriptions=new a["a"],this.showsUpdated=new a["a"],this.itemsToRemove=[],this.invalidated=!1,Object(n["a"])(s)&&(l=s.definitionChanged.addEventListener(w.prototype.onMaterialChanged,this)),this.removeMaterialSubscription=l}function C(t,e,i,a,r){this._solidItems=[],this._translucentItems=[],this._primitives=t,this._appearanceType=e,this._depthFailAppearanceType=i,this._closed=a,this._shadows=r}function j(t,e){for(var i=t.length,a=i-1;a>=0;a--){var r=t[a];if(r.remove(e))return 0===r.updaters.length&&(t.splice(a,1),r.destroy()),!0}return!1}function P(t,e,i){for(var a=!1,r=e.length,s=0;s<r;++s){var o=e[s],n=o.itemsToRemove,h=n.length;if(h>0)for(s=0;s<h;s++){var l=n[s];o.remove(l),t.add(i,l),a=!0}}return a}function D(t,e,i,a){var r,s=e.length;for(r=s-1;r>=0;r--){var o=e[r];if(o.invalidated){e.splice(r,1);for(var n=o.updaters.values,h=n.length,l=0;l<h;l++)t.add(i,n[l]);o.destroy()}}for(s=e.length,r=0;r<s;++r)a=e[r].update(i)&&a;return a}function E(t,e,i){for(var a=t.length,r=0;r<a;r++){var s=t[r];if(s.contains(e))return s.getBoundingSphere(e,i)}return u["a"].FAILED}function I(t){for(var e=t.length,i=0;i<e;i++)t[i].destroy();t.length=0}w.prototype.onMaterialChanged=function(){this.invalidated=!0},w.prototype.isMaterial=function(t){var e=this.depthFailMaterialProperty,i=t.depthFailMaterialProperty;return i===e||!!Object(n["a"])(e)&&e.equals(i)},w.prototype.add=function(t,e){var i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&m["a"].isConstant(t.distanceDisplayConditionProperty)&&m["a"].isConstant(t.terrainOffsetProperty)){var a=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(e,i,r,s){"isShowing"===i&&a.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t)},w.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return Object(n["a"])(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},w.prototype.update=function(t){var e,i=!0,a=0,u=this.primitive,w=this.primitives;if(this.createPrimitive){var C=this.geometry.values,j=C.length;if(j>0){var P;Object(n["a"])(u)&&(Object(n["a"])(this.oldPrimitive)?w.remove(u):this.oldPrimitive=u),Object(n["a"])(this.depthFailAppearanceType)&&(Object(n["a"])(this.depthFailMaterialProperty)&&(this.depthFailMaterial=f["a"].getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial)),P=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.translucent,closed:this.closed})),u=new c["a"]({show:!1,asynchronous:!0,geometryInstances:C,appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed}),depthFailAppearance:P,shadows:this.shadows}),w.add(u),i=!1}else{Object(n["a"])(u)&&(w.remove(u),u=void 0);var D=this.oldPrimitive;Object(n["a"])(D)&&(w.remove(D),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=u,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(Object(n["a"])(u)&&u.ready){u.show=!0,Object(n["a"])(this.oldPrimitive)&&(w.remove(this.oldPrimitive),this.oldPrimitive=void 0),!Object(n["a"])(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof v["a"]||(this.depthFailMaterial=f["a"].getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);var E=this.updatersWithAttributes.values,I=E.length,A=this.waitingOnCreate;for(e=0;e<I;e++){var T=E[e],F=this.geometry.get(T.id),S=this.attributes.get(F.id.id);if(Object(n["a"])(S)||(S=u.getGeometryInstanceAttributes(F.id),this.attributes.set(F.id.id,S)),!T.fillMaterialProperty.isConstant||A){var V=T.fillMaterialProperty.color,M=m["a"].getValueOrDefault(V,t,s["a"].WHITE,g);s["a"].equals(S._lastColor,M)||(S._lastColor=s["a"].clone(M,S._lastColor),S.color=o["a"].toValue(M,S.color),(this.translucent&&255===S.color[3]||!this.translucent&&255!==S.color[3])&&(this.itemsToRemove[a++]=T))}if(Object(n["a"])(this.depthFailAppearanceType)&&T.depthFailMaterialProperty instanceof v["a"]&&(!T.depthFailMaterialProperty.isConstant||A)){var x=T.depthFailMaterialProperty.color,H=m["a"].getValueOrDefault(x,t,s["a"].WHITE,g);s["a"].equals(S._lastDepthFailColor,H)||(S._lastDepthFailColor=s["a"].clone(H,S._lastDepthFailColor),S.depthFailColor=o["a"].toValue(H,S.depthFailColor))}var R=T.entity.isShowing&&(T.hasConstantFill||T.isFilled(t)),N=1===S.show[0];R!==N&&(S.show=p["a"].toValue(R,S.show));var L=T.distanceDisplayConditionProperty;if(!m["a"].isConstant(L)){var U=m["a"].getValueOrDefault(L,t,_,y);h["a"].equals(U,S._lastDistanceDisplayCondition)||(S._lastDistanceDisplayCondition=h["a"].clone(U,S._lastDistanceDisplayCondition),S.distanceDisplayCondition=l["a"].toValue(U,S.distanceDisplayCondition))}var k=T.terrainOffsetProperty;if(!m["a"].isConstant(k)){var W=m["a"].getValueOrDefault(k,t,b,O);r["a"].equals(W,S._lastOffset)||(S._lastOffset=r["a"].clone(W,S._lastOffset),S.offset=d["a"].toValue(W,S.offset))}}this.updateShows(u),this.waitingOnCreate=!1}else Object(n["a"])(u)&&!u.ready&&(i=!1);return this.itemsToRemove.length=a,i},w.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,a=0;a<i;a++){var r=e[a],s=this.geometry.get(r.id),o=this.attributes.get(s.id.id);Object(n["a"])(o)||(o=t.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,o));var h=r.entity.isShowing,l=1===o.show[0];h!==l&&(o.show=p["a"].toValue(h,o.show),s.attributes.show.value[0]=o.show[0])}this.showsUpdated.removeAll()},w.prototype.contains=function(t){return this.updaters.contains(t.id)},w.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return u["a"].PENDING;var a=i.getGeometryInstanceAttributes(t.entity);return!Object(n["a"])(a)||!Object(n["a"])(a.boundingSphere)||Object(n["a"])(a.show)&&0===a.show[0]?u["a"].FAILED:(a.boundingSphere.clone(e),u["a"].DONE)},w.prototype.destroy=function(){var t=this.primitive,e=this.primitives;Object(n["a"])(t)&&e.remove(t);var i=this.oldPrimitive;Object(n["a"])(i)&&e.remove(i),Object(n["a"])(this.removeMaterialSubscription)&&this.removeMaterialSubscription()},C.prototype.add=function(t,e){var i,a,r=e.createFillGeometryInstance(t);255===r.attributes.color.value[3]?(i=this._solidItems,a=!1):(i=this._translucentItems,a=!0);for(var s=i.length,o=0;o<s;o++){var n=i[o];if(n.isMaterial(e))return void n.add(e,r)}var h=new w(this._primitives,a,this._appearanceType,this._depthFailAppearanceType,e.depthFailMaterialProperty,this._closed,this._shadows);h.add(e,r),i.push(h)},C.prototype.remove=function(t){j(this._solidItems,t)||j(this._translucentItems,t)},C.prototype.update=function(t){var e=D(this,this._solidItems,t,!0);e=D(this,this._translucentItems,t,e)&&e;var i=P(this,this._solidItems,t),a=P(this,this._translucentItems,t);return(i||a)&&(e=D(this,this._solidItems,t,e)&&e,e=D(this,this._translucentItems,t,e)&&e),e},C.prototype.getBoundingSphere=function(t,e){var i=E(this._solidItems,t,e);return i===u["a"].FAILED?E(this._translucentItems,t,e):i},C.prototype.removeAllPrimitives=function(){I(this._solidItems),I(this._translucentItems)},e["a"]=C},1142:function(t,e,i){"use strict";var a=i("2f63"),r=i("9f1d"),s=i("21d7"),o=i("283e"),n=i("ea07");function h(t){var e=!0;if(t._resolveEntity){var i=t._targetCollection.getById(t._targetId);if(Object(a["a"])(i)?(i.definitionChanged.addEventListener(d.prototype._onTargetEntityDefinitionChanged,t),t._targetEntity=i,t._resolveEntity=!1):(i=t._targetEntity,e=!1),!Object(a["a"])(i))throw new o["a"]('target entity "'+t._targetId+'" could not be resolved.')}return e}function l(t){var e=t._targetProperty;if(t._resolveProperty){var i=h(t),r=t._targetPropertyNames;e=t._targetEntity;for(var s=r.length,n=0;n<s&&Object(a["a"])(e);n++)e=e[r[n]];if(Object(a["a"])(e))t._targetProperty=e,t._resolveProperty=!i;else if(!Object(a["a"])(t._targetProperty))throw new o["a"]('targetProperty "'+t._targetId+"."+r.join(".")+'" could not be resolved.')}return e}function d(t,e,i){this._targetCollection=t,this._targetId=e,this._targetPropertyNames=i,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new s["a"],this._resolveEntity=!0,this._resolveProperty=!0,t.collectionChanged.addEventListener(d.prototype._onCollectionChanged,this)}Object(r["a"])(d.prototype,{isConstant:{get:function(){return n["a"].isConstant(l(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return l(this).referenceFrame}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return l(this)}}}),d.fromString=function(t,e){for(var i,a=[],r=!0,s=!1,o="",n=0;n<e.length;++n){var h=e.charAt(n);s?(o+=h,s=!1):"\\"===h?s=!0:r&&"#"===h?(i=o,r=!1,o=""):r||"."!==h?o+=h:(a.push(o),o="")}return a.push(o),new d(t,i,a)},d.prototype.getValue=function(t,e){return l(this).getValue(t,e)},d.prototype.getValueInReferenceFrame=function(t,e,i){return l(this).getValueInReferenceFrame(t,e,i)},d.prototype.getType=function(t){return l(this).getType(t)},d.prototype.equals=function(t){if(this===t)return!0;var e=this._targetPropertyNames,i=t._targetPropertyNames;if(this._targetCollection!==t._targetCollection||this._targetId!==t._targetId||e.length!==i.length)return!1;for(var a=this._targetPropertyNames.length,r=0;r<a;r++)if(e[r]!==i[r])return!1;return!0},d.prototype._onTargetEntityDefinitionChanged=function(t,e,i,a){this._targetPropertyNames[0]===e&&(this._resolveProperty=!0,this._definitionChanged.raiseEvent(this))},d.prototype._onCollectionChanged=function(t,e,i){var r=this._targetEntity;Object(a["a"])(r)&&(-1!==i.indexOf(r)?(r.definitionChanged.removeEventListener(d.prototype._onTargetEntityDefinitionChanged,this),this._resolveEntity=!0,this._resolveProperty=!0):this._resolveEntity&&(l(this),this._resolveEntity||this._definitionChanged.raiseEvent(this)))},e["a"]=d},2198:function(t,e,i){"use strict";var a=i("be18"),r=i("535a"),s=i("2f63"),o=i("9f1d"),n=i("21d7"),h=i("7749"),l=i("c21f"),d=i("ea07"),p=i("e438"),c=i("d8fa"),u=i("5ed2"),v=i("eb20"),f={packedLength:1,pack:function(t,e,i){i=Object(r["a"])(i,0),e[i]=t},unpack:function(t,e,i){return e=Object(r["a"])(e,0),t[e]}};function m(t,e,i){var a,r=t.length,s=i.length,o=r+s;if(t.length=o,r!==e){var n=r-1;for(a=o-1;a>=e;a--)t[a]=t[n--]}for(a=0;a<s;a++)t[e++]=i[a]}function g(t,e){return t instanceof u["a"]?t:"string"===typeof t?u["a"].fromIso8601(t):u["a"].addSeconds(e,t,new u["a"])}var y=[],_=[];function b(t,e,i,a,r){var o,n,h,l,d,c,v=0;while(v<a.length){d=g(a[v],t),h=Object(p["a"])(e,d,u["a"].compare);var f=0,b=0;if(h<0){h=~h,l=h*r,n=void 0,c=e[h];while(v<a.length){if(d=g(a[v],t),Object(s["a"])(n)&&u["a"].compare(n,d)>=0||Object(s["a"])(c)&&u["a"].compare(d,c)>=0)break;for(y[f++]=d,v+=1,o=0;o<r;o++)_[b++]=a[v],v+=1;n=d}f>0&&(_.length=b,m(i,l,_),y.length=f,m(e,h,y))}else{for(o=0;o<r;o++)v++,i[h*r+o]=a[v];v++}}}function O(t,e){var i=t;i===Number&&(i=f);var a,o=i.packedLength,h=Object(r["a"])(i.packedInterpolationLength,o),l=0;if(Object(s["a"])(e)){var d=e.length;a=new Array(d);for(var p=0;p<d;p++){var u=e[p];u===Number&&(u=f);var m=u.packedLength;o+=m,h+=Object(r["a"])(u.packedInterpolationLength,m),a[p]=u}l=d}this._type=t,this._innerType=i,this._interpolationDegree=1,this._interpolationAlgorithm=v["a"],this._numberOfPoints=0,this._times=[],this._values=[],this._xTable=[],this._yTable=[],this._packedLength=o,this._packedInterpolationLength=h,this._updateTableLength=!0,this._interpolationResult=new Array(h),this._definitionChanged=new n["a"],this._derivativeTypes=e,this._innerDerivativeTypes=a,this._inputOrder=l,this._forwardExtrapolationType=c["a"].NONE,this._forwardExtrapolationDuration=0,this._backwardExtrapolationType=c["a"].NONE,this._backwardExtrapolationDuration=0}function w(t,e,i){var a=t._packedLength;t._times.splice(e,i),t._values.splice(e*a,i*a),t._updateTableLength=!0,t._definitionChanged.raiseEvent(t)}Object(o["a"])(O.prototype,{isConstant:{get:function(){return 0===this._values.length}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(t){this._forwardExtrapolationType!==t&&(this._forwardExtrapolationType=t,this._definitionChanged.raiseEvent(this))}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(t){this._forwardExtrapolationDuration!==t&&(this._forwardExtrapolationDuration=t,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(t){this._backwardExtrapolationType!==t&&(this._backwardExtrapolationType=t,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(t){this._backwardExtrapolationDuration!==t&&(this._backwardExtrapolationDuration=t,this._definitionChanged.raiseEvent(this))}}}),O.prototype.getValue=function(t,e){var i=this._times,a=i.length;if(0!==a){var r,o=this._innerType,n=this._values,h=Object(p["a"])(i,t,u["a"].compare);if(h<0){if(h=~h,0===h){var l=i[h];if(r=this._backwardExtrapolationDuration,this._backwardExtrapolationType===c["a"].NONE||0!==r&&u["a"].secondsDifference(l,t)>r)return;if(this._backwardExtrapolationType===c["a"].HOLD)return o.unpack(n,0,e)}if(h>=a){h=a-1;var d=i[h];if(r=this._forwardExtrapolationDuration,this._forwardExtrapolationType===c["a"].NONE||0!==r&&u["a"].secondsDifference(t,d)>r)return;if(this._forwardExtrapolationType===c["a"].HOLD)return h=a-1,o.unpack(n,h*o.packedLength,e)}var v=this._xTable,f=this._yTable,m=this._interpolationAlgorithm,g=this._packedInterpolationLength,y=this._inputOrder;if(this._updateTableLength){this._updateTableLength=!1;var _=Math.min(m.getRequiredDataPoints(this._interpolationDegree,y),a);_!==this._numberOfPoints&&(this._numberOfPoints=_,v.length=_,f.length=_*g)}var b=this._numberOfPoints-1;if(b<1)return;var O=0,w=a-1,C=w-O+1;if(C>=b+1){var j=h-(b/2|0)-1;j<O&&(j=O);var P=j+b;P>w&&(P=w,j=P-b,j<O&&(j=O)),O=j,w=P}for(var D=w-O+1,E=0;E<D;++E)v[E]=u["a"].secondsDifference(i[O+E],i[w]);if(Object(s["a"])(o.convertPackedArrayForInterpolation))o.convertPackedArrayForInterpolation(n,O,w,f);else{var I=0,A=this._packedLength,T=O*A,F=(w+1)*A;while(T<F)f[I]=n[T],T++,I++}var S,V=u["a"].secondsDifference(t,i[w]);if(0!==y&&Object(s["a"])(m.interpolate)){var M=Math.floor(g/(y+1));S=m.interpolate(V,v,f,M,y,y,this._interpolationResult)}else S=m.interpolateOrderZero(V,v,f,g,this._interpolationResult);return Object(s["a"])(o.unpackInterpolationResult)?o.unpackInterpolationResult(S,n,O,w,e):o.unpack(S,0,e)}return o.unpack(n,h*this._packedLength,e)}},O.prototype.setInterpolationOptions=function(t){if(Object(s["a"])(t)){var e=!1,i=t.interpolationAlgorithm,a=t.interpolationDegree;Object(s["a"])(i)&&this._interpolationAlgorithm!==i&&(this._interpolationAlgorithm=i,e=!0),Object(s["a"])(a)&&this._interpolationDegree!==a&&(this._interpolationDegree=a,e=!0),e&&(this._updateTableLength=!0,this._definitionChanged.raiseEvent(this))}},O.prototype.addSample=function(t,e,i){var a=this._innerDerivativeTypes,r=Object(s["a"])(a),o=this._innerType,n=[];if(n.push(t),o.pack(e,n,n.length),r)for(var h=a.length,l=0;l<h;l++)a[l].pack(i[l],n,n.length);b(void 0,this._times,this._values,n,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},O.prototype.addSamples=function(t,e,i){for(var a=this._innerDerivativeTypes,r=Object(s["a"])(a),o=this._innerType,n=t.length,h=[],l=0;l<n;l++)if(h.push(t[l]),o.pack(e[l],h,h.length),r)for(var d=i[l],p=a.length,c=0;c<p;c++)a[c].pack(d[c],h,h.length);b(void 0,this._times,this._values,h,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},O.prototype.addSamplesPackedArray=function(t,e){b(e,this._times,this._values,t,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},O.prototype.removeSample=function(t){var e=Object(p["a"])(this._times,t,u["a"].compare);return!(e<0)&&(w(this,e,1),!0)},O.prototype.removeSamples=function(t){var e=this._times,i=Object(p["a"])(e,t.start,u["a"].compare);i<0?i=~i:t.isStartIncluded||++i;var a=Object(p["a"])(e,t.stop,u["a"].compare);a<0?a=~a:t.isStopIncluded&&++a,w(this,i,a-i)},O.prototype.equals=function(t){if(this===t)return!0;if(!Object(s["a"])(t))return!1;if(this._type!==t._type||this._interpolationDegree!==t._interpolationDegree||this._interpolationAlgorithm!==t._interpolationAlgorithm)return!1;var e,i,a=this._derivativeTypes,r=Object(s["a"])(a),o=t._derivativeTypes,n=Object(s["a"])(o);if(r!==n)return!1;if(r){if(i=a.length,i!==o.length)return!1;for(e=0;e<i;e++)if(a[e]!==o[e])return!1}var h=this._times,l=t._times;if(i=h.length,i!==l.length)return!1;for(e=0;e<i;e++)if(!u["a"].equals(h[e],l[e]))return!1;var d=this._values,p=t._values;for(e=0;e<i;e++)if(d[e]!==p[e])return!1;return!0},O._mergeNewSamples=b;var C=O;function j(t,e){var i;if(e=Object(r["a"])(e,0),e>0){i=new Array(e);for(var s=0;s<e;s++)i[s]=a["a"]}this._numberOfDerivatives=e,this._property=new C(a["a"],i),this._definitionChanged=new n["a"],this._referenceFrame=Object(r["a"])(t,h["a"].FIXED),this._property._definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this)}),this)}Object(o["a"])(j.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(t){this._property.forwardExtrapolationType=t}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(t){this._property.forwardExtrapolationDuration=t}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(t){this._property.backwardExtrapolationType=t}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(t){this._property.backwardExtrapolationDuration=t}}}),j.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,h["a"].FIXED,e)},j.prototype.getValueInReferenceFrame=function(t,e,i){if(i=this._property.getValue(t,i),Object(s["a"])(i))return l["a"].convertToReferenceFrame(t,i,this._referenceFrame,e,i)},j.prototype.setInterpolationOptions=function(t){this._property.setInterpolationOptions(t)},j.prototype.addSample=function(t,e,i){this._numberOfDerivatives;this._property.addSample(t,e,i)},j.prototype.addSamples=function(t,e,i){this._property.addSamples(t,e,i)},j.prototype.addSamplesPackedArray=function(t,e){this._property.addSamplesPackedArray(t,e)},j.prototype.removeSample=function(t){this._property.removeSample(t)},j.prototype.removeSamples=function(t){this._property.removeSamples(t)},j.prototype.equals=function(t){return this===t||t instanceof j&&d["a"].equals(this._property,t._property)&&this._referenceFrame===t._referenceFrame};e["a"]=j},"298a":function(t,e,i){"use strict";var a=i("535a"),r=i("2f63"),s=i("9f1d"),o=i("21d7"),n=i("dde7"),h=i("0a43");function l(t){this._definitionChanged=new o["a"],this._show=void 0,this._showSubscription=void 0,this._coordinates=void 0,this._coordinatesSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distancedisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(Object(a["a"])(t,a["a"].EMPTY_OBJECT))}Object(s["a"])(l.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:Object(h["a"])("show"),coordinates:Object(h["a"])("coordinates"),height:Object(h["a"])("height"),heightReference:Object(h["a"])("heightReference"),extrudedHeight:Object(h["a"])("extrudedHeight"),extrudedHeightReference:Object(h["a"])("extrudedHeightReference"),rotation:Object(h["a"])("rotation"),stRotation:Object(h["a"])("stRotation"),granularity:Object(h["a"])("granularity"),fill:Object(h["a"])("fill"),material:Object(n["a"])("material"),outline:Object(h["a"])("outline"),outlineColor:Object(h["a"])("outlineColor"),outlineWidth:Object(h["a"])("outlineWidth"),shadows:Object(h["a"])("shadows"),distanceDisplayCondition:Object(h["a"])("distanceDisplayCondition"),classificationType:Object(h["a"])("classificationType"),zIndex:Object(h["a"])("zIndex")}),l.prototype.clone=function(t){return Object(r["a"])(t)?(t.show=this.show,t.coordinates=this.coordinates,t.height=this.height,t.heightReference=this.heightReference,t.extrudedHeight=this.extrudedHeight,t.extrudedHeightReference=this.extrudedHeightReference,t.rotation=this.rotation,t.stRotation=this.stRotation,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t):new l(this)},l.prototype.merge=function(t){this.show=Object(a["a"])(this.show,t.show),this.coordinates=Object(a["a"])(this.coordinates,t.coordinates),this.height=Object(a["a"])(this.height,t.height),this.heightReference=Object(a["a"])(this.heightReference,t.heightReference),this.extrudedHeight=Object(a["a"])(this.extrudedHeight,t.extrudedHeight),this.extrudedHeightReference=Object(a["a"])(this.extrudedHeightReference,t.extrudedHeightReference),this.rotation=Object(a["a"])(this.rotation,t.rotation),this.stRotation=Object(a["a"])(this.stRotation,t.stRotation),this.granularity=Object(a["a"])(this.granularity,t.granularity),this.fill=Object(a["a"])(this.fill,t.fill),this.material=Object(a["a"])(this.material,t.material),this.outline=Object(a["a"])(this.outline,t.outline),this.outlineColor=Object(a["a"])(this.outlineColor,t.outlineColor),this.outlineWidth=Object(a["a"])(this.outlineWidth,t.outlineWidth),this.shadows=Object(a["a"])(this.shadows,t.shadows),this.distanceDisplayCondition=Object(a["a"])(this.distanceDisplayCondition,t.distanceDisplayCondition),this.classificationType=Object(a["a"])(this.classificationType,t.classificationType),this.zIndex=Object(a["a"])(this.zIndex,t.zIndex)},e["a"]=l},"2fd1":function(t,e,i){"use strict";var a=i("933b"),r=i("be18"),s=i("bd8d"),o=i("9541"),n=i("2f63"),h=i("aee6"),l=i("77bc"),d=i("c2eb"),p=i("ac9c"),c=i("3a8e"),u=i("894b"),v=i("2d19"),f=i("ea07"),m=new s["a"],g=new h["a"],y=new h["a"],_=r["a"].ZERO,b=new r["a"];function O(t,e,i,r){this.translucent=e,this.width=i,this.shadows=r,this.primitives=t,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new a["a"],this.updaters=new a["a"],this.updatersWithAttributes=new a["a"],this.attributes=new a["a"],this.itemsToRemove=[],this.subscriptions=new a["a"],this.showsUpdated=new a["a"]}function w(t,e,i){this._primitives=t,this._scene=e,this._shadows=i,this._solidBatches=new a["a"],this._translucentBatches=new a["a"]}O.prototype.add=function(t,e){var i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantOutline&&t.outlineColorProperty.isConstant&&f["a"].isConstant(t.distanceDisplayConditionProperty)&&f["a"].isConstant(t.terrainOffsetProperty)){var a=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(e,i,r,s){"isShowing"===i&&a.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t)},O.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return Object(n["a"])(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},O.prototype.update=function(t){var e,i=!0,a=0,v=this.primitive,O=this.primitives;if(this.createPrimitive){var w=this.geometry.values,C=w.length;if(C>0)Object(n["a"])(v)&&(Object(n["a"])(this.oldPrimitive)?O.remove(v):this.oldPrimitive=v),v=new u["a"]({show:!1,asynchronous:!0,geometryInstances:w,appearance:new c["a"]({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}}),shadows:this.shadows}),O.add(v),i=!1;else{Object(n["a"])(v)&&(O.remove(v),v=void 0);var j=this.oldPrimitive;Object(n["a"])(j)&&(O.remove(j),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=v,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(Object(n["a"])(v)&&v.ready){v.show=!0,Object(n["a"])(this.oldPrimitive)&&(O.remove(this.oldPrimitive),this.oldPrimitive=void 0);var P=this.updatersWithAttributes.values,D=P.length,E=this.waitingOnCreate;for(e=0;e<D;e++){var I=P[e],A=this.geometry.get(I.id),T=this.attributes.get(A.id.id);if(Object(n["a"])(T)||(T=v.getGeometryInstanceAttributes(A.id),this.attributes.set(A.id.id,T)),!I.outlineColorProperty.isConstant||E){var F=I.outlineColorProperty,S=f["a"].getValueOrDefault(F,t,s["a"].WHITE,m);s["a"].equals(T._lastColor,S)||(T._lastColor=s["a"].clone(S,T._lastColor),T.color=o["a"].toValue(S,T.color),(this.translucent&&255===T.color[3]||!this.translucent&&255!==T.color[3])&&(this.itemsToRemove[a++]=I))}var V=I.entity.isShowing&&(I.hasConstantOutline||I.isOutlineVisible(t)),M=1===T.show[0];V!==M&&(T.show=p["a"].toValue(V,T.show));var x=I.distanceDisplayConditionProperty;if(!f["a"].isConstant(x)){var H=f["a"].getValueOrDefault(x,t,y,g);h["a"].equals(H,T._lastDistanceDisplayCondition)||(T._lastDistanceDisplayCondition=h["a"].clone(H,T._lastDistanceDisplayCondition),T.distanceDisplayCondition=l["a"].toValue(H,T.distanceDisplayCondition))}var R=I.terrainOffsetProperty;if(!f["a"].isConstant(R)){var N=f["a"].getValueOrDefault(R,t,_,b);r["a"].equals(N,T._lastOffset)||(T._lastOffset=r["a"].clone(N,T._lastOffset),T.offset=d["a"].toValue(N,T.offset))}}this.updateShows(v),this.waitingOnCreate=!1}else Object(n["a"])(v)&&!v.ready&&(i=!1);return this.itemsToRemove.length=a,i},O.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,a=0;a<i;a++){var r=e[a],s=this.geometry.get(r.id),o=this.attributes.get(s.id.id);Object(n["a"])(o)||(o=t.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,o));var h=r.entity.isShowing,l=1===o.show[0];h!==l&&(o.show=p["a"].toValue(h,o.show),s.attributes.show.value[0]=o.show[0])}this.showsUpdated.removeAll()},O.prototype.contains=function(t){return this.updaters.contains(t.id)},O.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return v["a"].PENDING;var a=i.getGeometryInstanceAttributes(t.entity);return!Object(n["a"])(a)||!Object(n["a"])(a.boundingSphere)||Object(n["a"])(a.show)&&0===a.show[0]?v["a"].FAILED:(a.boundingSphere.clone(e),v["a"].DONE)},O.prototype.removeAllPrimitives=function(){var t=this.primitives,e=this.primitive;Object(n["a"])(e)&&(t.remove(e),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());var i=this.oldPrimitive;Object(n["a"])(i)&&(t.remove(i),this.oldPrimitive=void 0)},w.prototype.add=function(t,e){var i,a,r=e.createOutlineGeometryInstance(t),s=this._scene.clampLineWidth(e.outlineWidth);255===r.attributes.color.value[3]?(i=this._solidBatches,a=i.get(s),Object(n["a"])(a)||(a=new O(this._primitives,!1,s,this._shadows),i.set(s,a)),a.add(e,r)):(i=this._translucentBatches,a=i.get(s),Object(n["a"])(a)||(a=new O(this._primitives,!0,s,this._shadows),i.set(s,a)),a.add(e,r))},w.prototype.remove=function(t){var e,i=this._solidBatches.values,a=i.length;for(e=0;e<a;e++)if(i[e].remove(t))return;var r=this._translucentBatches.values,s=r.length;for(e=0;e<s;e++)if(r[e].remove(t))return},w.prototype.update=function(t){var e,i,a,r,s,o=this._solidBatches.values,n=o.length,h=this._translucentBatches.values,l=h.length,d=!0,p=!1;do{for(p=!1,i=0;i<n;i++){r=o[i],d=r.update(t),s=r.itemsToRemove;var c=s.length;if(c>0)for(p=!0,e=0;e<c;e++)a=s[e],r.remove(a),this.add(t,a)}for(i=0;i<l;i++){r=h[i],d=r.update(t),s=r.itemsToRemove;var u=s.length;if(u>0)for(p=!0,e=0;e<u;e++)a=s[e],r.remove(a),this.add(t,a)}}while(p);return d},w.prototype.getBoundingSphere=function(t,e){var i,a=this._solidBatches.values,r=a.length;for(i=0;i<r;i++){var s=a[i];if(s.contains(t))return s.getBoundingSphere(t,e)}var o=this._translucentBatches.values,n=o.length;for(i=0;i<n;i++){var h=o[i];if(h.contains(t))return h.getBoundingSphere(t,e)}return v["a"].FAILED},w.prototype.removeAllPrimitives=function(){var t,e=this._solidBatches.values,i=e.length;for(t=0;t<i;t++)e[t].removeAllPrimitives();var a=this._translucentBatches.values,r=a.length;for(t=0;t<r;t++)a[t].removeAllPrimitives()},e["a"]=w},"5f9f":function(t,e,i){"use strict";var a=i("933b"),r=i("bd8d"),s=i("2f63"),o=i("aee6"),n=i("77bc"),h=i("ac9c"),l=i("acad"),d=i("2d19"),p=i("ea07"),c=new r["a"],u=new o["a"],v=new o["a"];function f(t,e,i,r,s){this.primitives=t,this.zIndex=s,this.classificationType=e,this.color=i,this.key=r,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new a["a"],this.updaters=new a["a"],this.updatersWithAttributes=new a["a"],this.attributes=new a["a"],this.subscriptions=new a["a"],this.showsUpdated=new a["a"],this.itemsToRemove=[],this.isDirty=!1}f.prototype.add=function(t,e){var i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&p["a"].isConstant(t.distanceDisplayConditionProperty)){var a=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(e,i,r,s){"isShowing"===i&&a.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t)},f.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return Object(s["a"])(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1};var m=new Array(4);function g(t,e){this._batches=new a["a"],this._primitives=t,this._classificationType=e}f.prototype.update=function(t){var e,i=!0,a=0,d=this.primitive,f=this.primitives;if(this.createPrimitive){var g=this.geometry.values,y=g.length;if(y>0)Object(s["a"])(d)&&(Object(s["a"])(this.oldPrimitive)?f.remove(d):this.oldPrimitive=d),d=new l["a"]({show:!1,asynchronous:!0,geometryInstances:g,classificationType:this.classificationType}),f.add(d,this.zIndex),i=!1;else{Object(s["a"])(d)&&(f.remove(d),d=void 0);var _=this.oldPrimitive;Object(s["a"])(_)&&(f.remove(_),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=d,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(Object(s["a"])(d)&&d.ready){d.show=!0,Object(s["a"])(this.oldPrimitive)&&(f.remove(this.oldPrimitive),this.oldPrimitive=void 0);var b=this.updatersWithAttributes.values,O=b.length,w=this.waitingOnCreate;for(e=0;e<O;e++){var C=b[e],j=this.geometry.get(C.id),P=this.attributes.get(j.id.id);if(Object(s["a"])(P)||(P=d.getGeometryInstanceAttributes(j.id),this.attributes.set(j.id.id,P)),!C.fillMaterialProperty.isConstant||w){var D=C.fillMaterialProperty.color,E=p["a"].getValueOrDefault(D,t,r["a"].WHITE,c);if(!r["a"].equals(P._lastColor,E)){P._lastColor=r["a"].clone(E,P._lastColor);var I=this.color,A=E.toBytes(m);I[0]===A[0]&&I[1]===A[1]&&I[2]===A[2]&&I[3]===A[3]||(this.itemsToRemove[a++]=C)}}var T=C.entity.isShowing&&(C.hasConstantFill||C.isFilled(t)),F=1===P.show[0];T!==F&&(P.show=h["a"].toValue(T,P.show));var S=C.distanceDisplayConditionProperty;if(!p["a"].isConstant(S)){var V=p["a"].getValueOrDefault(S,t,v,u);o["a"].equals(V,P._lastDistanceDisplayCondition)||(P._lastDistanceDisplayCondition=o["a"].clone(V,P._lastDistanceDisplayCondition),P.distanceDisplayCondition=n["a"].toValue(V,P.distanceDisplayCondition))}}this.updateShows(d),this.waitingOnCreate=!1}else Object(s["a"])(d)&&!d.ready&&(i=!1);return this.itemsToRemove.length=a,i},f.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,a=0;a<i;a++){var r=e[a],o=this.geometry.get(r.id),n=this.attributes.get(o.id.id);Object(s["a"])(n)||(n=t.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,n));var l=r.entity.isShowing,d=1===n.show[0];l!==d&&(n.show=h["a"].toValue(l,n.show),o.attributes.show.value[0]=n.show[0])}this.showsUpdated.removeAll()},f.prototype.contains=function(t){return this.updaters.contains(t.id)},f.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return d["a"].PENDING;var a=i.getBoundingSphere(t.entity);return Object(s["a"])(a)?(a.clone(e),d["a"].DONE):d["a"].FAILED},f.prototype.removeAllPrimitives=function(){var t=this.primitives,e=this.primitive;Object(s["a"])(e)&&(t.remove(e),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());var i=this.oldPrimitive;Object(s["a"])(i)&&(t.remove(i),this.oldPrimitive=void 0)},g.prototype.add=function(t,e){var i,a=e.createFillGeometryInstance(t),r=this._batches,s=p["a"].getValueOrDefault(e.zIndex,0),o=new Uint32Array(a.attributes.color.value.buffer)[0]+":"+s;return r.contains(o)?i=r.get(o):(i=new f(this._primitives,this._classificationType,a.attributes.color.value,o,s),r.set(o,i)),i.add(e,a),i},g.prototype.remove=function(t){for(var e=this._batches.values,i=e.length,a=0;a<i;++a)if(e[a].remove(t))return},g.prototype.update=function(t){var e,i,a=!0,r=this._batches,s=r.values,o=s.length;for(e=0;e<o;++e)a=s[e].update(t)&&a;for(e=0;e<o;++e)for(var n=s[e],h=n.itemsToRemove,l=h.length,d=0;d<l;d++){i=h[d],n.remove(i);var p=this.add(t,i);n.isDirty=!0,p.isDirty=!0}var c=s.slice(),u=c.length;for(e=0;e<u;++e){var v=c[e];v.isDirty&&(a=c[e].update(t)&&a,v.isDirty=!1),0===v.geometry.length&&r.remove(v.key)}return a},g.prototype.getBoundingSphere=function(t,e){for(var i=this._batches.values,a=i.length,r=0;r<a;++r){var s=i[r];if(s.contains(t))return s.getBoundingSphere(t,e)}return d["a"].FAILED},g.prototype.removeAllPrimitives=function(){for(var t=this._batches.values,e=t.length,i=0;i<e;++i)t[i].removeAllPrimitives()},e["a"]=g},9816:function(t,e,i){"use strict";var a=i("535a"),r=i("2f63"),s=i("9f1d"),o=i("21d7"),n=i("dde7"),h=i("0a43");function l(t){this._definitionChanged=new o["a"],this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._minimumHeights=void 0,this._minimumHeightsSubscription=void 0,this._maximumHeights=void 0,this._maximumHeightsSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(Object(a["a"])(t,a["a"].EMPTY_OBJECT))}Object(s["a"])(l.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:Object(h["a"])("show"),positions:Object(h["a"])("positions"),minimumHeights:Object(h["a"])("minimumHeights"),maximumHeights:Object(h["a"])("maximumHeights"),granularity:Object(h["a"])("granularity"),fill:Object(h["a"])("fill"),material:Object(n["a"])("material"),outline:Object(h["a"])("outline"),outlineColor:Object(h["a"])("outlineColor"),outlineWidth:Object(h["a"])("outlineWidth"),shadows:Object(h["a"])("shadows"),distanceDisplayCondition:Object(h["a"])("distanceDisplayCondition")}),l.prototype.clone=function(t){return Object(r["a"])(t)?(t.show=this.show,t.positions=this.positions,t.minimumHeights=this.minimumHeights,t.maximumHeights=this.maximumHeights,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new l(this)},l.prototype.merge=function(t){this.show=Object(a["a"])(this.show,t.show),this.positions=Object(a["a"])(this.positions,t.positions),this.minimumHeights=Object(a["a"])(this.minimumHeights,t.minimumHeights),this.maximumHeights=Object(a["a"])(this.maximumHeights,t.maximumHeights),this.granularity=Object(a["a"])(this.granularity,t.granularity),this.fill=Object(a["a"])(this.fill,t.fill),this.material=Object(a["a"])(this.material,t.material),this.outline=Object(a["a"])(this.outline,t.outline),this.outlineColor=Object(a["a"])(this.outlineColor,t.outlineColor),this.outlineWidth=Object(a["a"])(this.outlineWidth,t.outlineWidth),this.shadows=Object(a["a"])(this.shadows,t.shadows),this.distanceDisplayCondition=Object(a["a"])(this.distanceDisplayCondition,t.distanceDisplayCondition)},e["a"]=l},"9ea2":function(t,e,i){"use strict";var a=i("dd06"),r=i("be18"),s=i("bef8"),o=i("bd8d"),n=i("9541"),h=i("2f63"),l=i("77bc"),d=i("c52f"),p=i("d940"),c=i("452d"),u=i("c2eb"),v=i("eace"),f=i("372a"),m=i("24a2"),g=i("ac9c"),y=i("2d75"),_=i("d6db"),b=i("3a8e"),O=i("b83c"),w=i("9171"),C=i("3ba2"),j=i("c6e8"),P=i("ea07"),D=new o["a"],E=r["a"].ZERO,I=new r["a"],A=new v["a"],T=new v["a"],F=new s["a"];function S(t){this.id=t,this.vertexFormat=void 0,this.rectangle=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0,this.offsetAttribute=void 0}function V(t,e){j["a"].call(this,{entity:t,scene:e,geometryOptions:new S(t),geometryPropertyName:"rectangle",observedPropertyNames:["availability","rectangle"]}),this._onEntityPropertyChanged(t,"rectangle",t.rectangle,void 0)}function M(t,e,i){w["a"].call(this,t,e,i)}Object(h["a"])(Object.create)&&(V.prototype=Object.create(j["a"].prototype),V.prototype.constructor=V),V.prototype.createFillGeometryInstance=function(t){var e,i=this._entity,a=i.isAvailable(t),r={show:new g["a"](a&&i.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),distanceDisplayCondition:l["a"].fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0,color:void 0};this._materialProperty instanceof O["a"]&&(Object(h["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||a)&&(e=this._materialProperty.color.getValue(t,D)),Object(h["a"])(e)||(e=o["a"].WHITE),r.color=n["a"].fromColor(e));return Object(h["a"])(this._options.offsetAttribute)&&(r.offset=u["a"].fromCartesian3(P["a"].getValueOrDefault(this._terrainOffsetProperty,t,E,I))),new p["a"]({id:i,geometry:new f["a"](this._options),attributes:r})},V.prototype.createOutlineGeometryInstance=function(t){var e=this._entity,i=e.isAvailable(t),a=P["a"].getValueOrDefault(this._outlineColorProperty,t,o["a"].BLACK,D),r=this._distanceDisplayConditionProperty.getValue(t),s={show:new g["a"](i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:n["a"].fromColor(a),distanceDisplayCondition:l["a"].fromDistanceDisplayCondition(r),offset:void 0};return Object(h["a"])(this._options.offsetAttribute)&&(s.offset=u["a"].fromCartesian3(P["a"].getValueOrDefault(this._terrainOffsetProperty,t,E,I))),new p["a"]({id:e,geometry:new m["a"](this._options),attributes:s})},V.prototype._computeCenter=function(t,e){var i=P["a"].getValueOrUndefined(this._entity.rectangle.coordinates,t,T);if(Object(h["a"])(i)){var a=v["a"].center(i,F);return s["a"].toCartesian(a,d["a"].WGS84,e)}},V.prototype._isHidden=function(t,e){return!Object(h["a"])(e.coordinates)||C["a"].prototype._isHidden.call(this,t,e)},V.prototype._isDynamic=function(t,e){return!e.coordinates.isConstant||!P["a"].isConstant(e.height)||!P["a"].isConstant(e.extrudedHeight)||!P["a"].isConstant(e.granularity)||!P["a"].isConstant(e.stRotation)||!P["a"].isConstant(e.rotation)||!P["a"].isConstant(e.outlineWidth)||!P["a"].isConstant(e.zIndex)||this._onTerrain&&!P["a"].isConstant(this._materialProperty)},V.prototype._setStaticOptions=function(t,e){var i=this._materialProperty instanceof O["a"],r=P["a"].getValueOrUndefined(e.height,c["a"].MINIMUM_VALUE),s=P["a"].getValueOrDefault(e.heightReference,c["a"].MINIMUM_VALUE,y["a"].NONE),o=P["a"].getValueOrUndefined(e.extrudedHeight,c["a"].MINIMUM_VALUE),n=P["a"].getValueOrDefault(e.extrudedHeightReference,c["a"].MINIMUM_VALUE,y["a"].NONE);Object(h["a"])(o)&&!Object(h["a"])(r)&&(r=0);var l=this._options;l.vertexFormat=i?b["a"].VERTEX_FORMAT:_["a"].MaterialSupport.TEXTURED.vertexFormat,l.rectangle=e.coordinates.getValue(c["a"].MINIMUM_VALUE,l.rectangle),l.granularity=P["a"].getValueOrUndefined(e.granularity,c["a"].MINIMUM_VALUE),l.stRotation=P["a"].getValueOrUndefined(e.stRotation,c["a"].MINIMUM_VALUE),l.rotation=P["a"].getValueOrUndefined(e.rotation,c["a"].MINIMUM_VALUE),l.offsetAttribute=j["a"].computeGeometryOffsetAttribute(r,s,o,n),l.height=j["a"].getGeometryHeight(r,s),o=j["a"].getGeometryExtrudedHeight(o,n),o===j["a"].CLAMP_TO_GROUND&&(o=a["a"].getMinimumMaximumHeights(f["a"].computeRectangle(l,A)).minimumTerrainHeight),l.extrudedHeight=o},V.DynamicGeometryUpdater=M,Object(h["a"])(Object.create)&&(M.prototype=Object.create(w["a"].prototype),M.prototype.constructor=M),M.prototype._isHidden=function(t,e,i){return!Object(h["a"])(this._options.rectangle)||w["a"].prototype._isHidden.call(this,t,e,i)},M.prototype._setOptions=function(t,e,i){var r=this._options,s=P["a"].getValueOrUndefined(e.height,i),o=P["a"].getValueOrDefault(e.heightReference,i,y["a"].NONE),n=P["a"].getValueOrUndefined(e.extrudedHeight,i),l=P["a"].getValueOrDefault(e.extrudedHeightReference,i,y["a"].NONE);Object(h["a"])(n)&&!Object(h["a"])(s)&&(s=0),r.rectangle=P["a"].getValueOrUndefined(e.coordinates,i,r.rectangle),r.granularity=P["a"].getValueOrUndefined(e.granularity,i),r.stRotation=P["a"].getValueOrUndefined(e.stRotation,i),r.rotation=P["a"].getValueOrUndefined(e.rotation,i),r.offsetAttribute=j["a"].computeGeometryOffsetAttribute(s,o,n,l),r.height=j["a"].getGeometryHeight(s,o),n=j["a"].getGeometryExtrudedHeight(n,l),n===j["a"].CLAMP_TO_GROUND&&(n=a["a"].getMinimumMaximumHeights(f["a"].computeRectangle(r,A)).minimumTerrainHeight),r.extrudedHeight=n},e["a"]=V},a435:function(t,e,i){"use strict";var a=i("535a"),r=i("2f63"),s=i("9f1d"),o=i("21d7"),n=i("7749"),h=i("026b"),l=i("c21f"),d=i("ea07");function p(t){this._definitionChanged=new o["a"],this._intervals=new h["a"],this._intervals.changedEvent.addEventListener(p.prototype._intervalsChanged,this),this._referenceFrame=Object(a["a"])(t,n["a"].FIXED)}Object(s["a"])(p.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}},referenceFrame:{get:function(){return this._referenceFrame}}}),p.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,n["a"].FIXED,e)},p.prototype.getValueInReferenceFrame=function(t,e,i){var a=this._intervals.findDataForIntervalContainingDate(t);if(Object(r["a"])(a))return l["a"].convertToReferenceFrame(t,a,this._referenceFrame,e,i)},p.prototype.equals=function(t){return this===t||t instanceof p&&this._intervals.equals(t._intervals,d["a"].equals)&&this._referenceFrame===t._referenceFrame},p.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)},e["a"]=p},c4da:function(t,e,i){"use strict";var a=i("bd8d"),r=i("9541"),s=i("2f63"),o=i("77bc"),n=i("d940"),h=i("452d"),l=i("ac9c"),d=i("fc71"),p=i("94f1"),c=i("d6db"),u=i("3a8e"),v=i("b83c"),f=i("9171"),m=i("3ba2"),g=i("ea07"),y=new a["a"];function _(t){this.id=t,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0}function b(t,e){m["a"].call(this,{entity:t,scene:e,geometryOptions:new _(t),geometryPropertyName:"wall",observedPropertyNames:["availability","wall"]}),this._onEntityPropertyChanged(t,"wall",t.wall,void 0)}function O(t,e,i){f["a"].call(this,t,e,i)}Object(s["a"])(Object.create)&&(b.prototype=Object.create(m["a"].prototype),b.prototype.constructor=b),b.prototype.createFillGeometryInstance=function(t){var e,i,h,p=this._entity,c=p.isAvailable(t),u=new l["a"](c&&p.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),f=this._distanceDisplayConditionProperty.getValue(t),m=o["a"].fromDistanceDisplayCondition(f);this._materialProperty instanceof v["a"]?(Object(s["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||c)&&(h=this._materialProperty.color.getValue(t,y)),Object(s["a"])(h)||(h=a["a"].WHITE),i=r["a"].fromColor(h),e={show:u,distanceDisplayCondition:m,color:i}):e={show:u,distanceDisplayCondition:m};return new n["a"]({id:p,geometry:new d["a"](this._options),attributes:e})},b.prototype.createOutlineGeometryInstance=function(t){var e=this._entity,i=e.isAvailable(t),s=g["a"].getValueOrDefault(this._outlineColorProperty,t,a["a"].BLACK,y),h=this._distanceDisplayConditionProperty.getValue(t);return new n["a"]({id:e,geometry:new p["a"](this._options),attributes:{show:new l["a"](i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:r["a"].fromColor(s),distanceDisplayCondition:o["a"].fromDistanceDisplayCondition(h)}})},b.prototype._isHidden=function(t,e){return!Object(s["a"])(e.positions)||m["a"].prototype._isHidden.call(this,t,e)},b.prototype._getIsClosed=function(t){return!1},b.prototype._isDynamic=function(t,e){return!e.positions.isConstant||!g["a"].isConstant(e.minimumHeights)||!g["a"].isConstant(e.maximumHeights)||!g["a"].isConstant(e.outlineWidth)||!g["a"].isConstant(e.granularity)},b.prototype._setStaticOptions=function(t,e){var i=e.minimumHeights,a=e.maximumHeights,r=e.granularity,o=this._materialProperty instanceof v["a"],n=this._options;n.vertexFormat=o?u["a"].VERTEX_FORMAT:c["a"].MaterialSupport.TEXTURED.vertexFormat,n.positions=e.positions.getValue(h["a"].MINIMUM_VALUE,n.positions),n.minimumHeights=Object(s["a"])(i)?i.getValue(h["a"].MINIMUM_VALUE,n.minimumHeights):void 0,n.maximumHeights=Object(s["a"])(a)?a.getValue(h["a"].MINIMUM_VALUE,n.maximumHeights):void 0,n.granularity=Object(s["a"])(r)?r.getValue(h["a"].MINIMUM_VALUE):void 0},b.DynamicGeometryUpdater=O,Object(s["a"])(Object.create)&&(O.prototype=Object.create(f["a"].prototype),O.prototype.constructor=O),O.prototype._isHidden=function(t,e,i){return!Object(s["a"])(this._options.positions)||f["a"].prototype._isHidden.call(this,t,e,i)},O.prototype._setOptions=function(t,e,i){var a=this._options;a.positions=g["a"].getValueOrUndefined(e.positions,i,a.positions),a.minimumHeights=g["a"].getValueOrUndefined(e.minimumHeights,i,a.minimumHeights),a.maximumHeights=g["a"].getValueOrUndefined(e.maximumHeights,i,a.maximumHeights),a.granularity=g["a"].getValueOrUndefined(e.granularity,i)},e["a"]=b},d5c7:function(t,e,i){"use strict";var a=i("933b"),r=i("be18"),s=i("bd8d"),o=i("9541"),n=i("2f63"),h=i("aee6"),l=i("77bc"),d=i("c2eb"),p=i("ac9c"),c=i("894b"),u=i("2d19"),v=i("b83c"),f=i("40b2"),m=i("ea07"),g=new h["a"],y=new h["a"],_=r["a"].ZERO,b=new r["a"];function O(t,e,i,r,s,o,n){this.primitives=t,this.appearanceType=e,this.materialProperty=i,this.depthFailAppearanceType=r,this.depthFailMaterialProperty=s,this.closed=o,this.shadows=n,this.updaters=new a["a"],this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new a["a"],this.material=void 0,this.depthFailMaterial=void 0,this.updatersWithAttributes=new a["a"],this.attributes=new a["a"],this.invalidated=!1,this.removeMaterialSubscription=i.definitionChanged.addEventListener(O.prototype.onMaterialChanged,this),this.subscriptions=new a["a"],this.showsUpdated=new a["a"]}O.prototype.onMaterialChanged=function(){this.invalidated=!0},O.prototype.isMaterial=function(t){var e=this.materialProperty,i=t.fillMaterialProperty,a=this.depthFailMaterialProperty,r=t.depthFailMaterialProperty;if(i===e&&r===a)return!0;var s=Object(n["a"])(e)&&e.equals(i);return s=(!Object(n["a"])(a)&&!Object(n["a"])(r)||Object(n["a"])(a)&&a.equals(r))&&s,s},O.prototype.add=function(t,e){var i=e.id;if(this.updaters.set(i,e),this.geometry.set(i,e.createFillGeometryInstance(t)),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&m["a"].isConstant(e.distanceDisplayConditionProperty)&&m["a"].isConstant(e.terrainOffsetProperty)){var a=this;this.subscriptions.set(i,e.entity.definitionChanged.addEventListener((function(t,i,r,s){"isShowing"===i&&a.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(i,e);this.createPrimitive=!0},O.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return Object(n["a"])(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1};var w=new s["a"];function C(t,e,i,a,r){this._items=[],this._primitives=t,this._appearanceType=e,this._depthFailAppearanceType=i,this._closed=a,this._shadows=r}O.prototype.update=function(t){var e,i=!0,a=this.primitive,u=this.primitives,O=this.geometry.values;if(this.createPrimitive){var C=O.length;if(C>0){var j;Object(n["a"])(a)&&(Object(n["a"])(this.oldPrimitive)?u.remove(a):this.oldPrimitive=a),this.material=f["a"].getValue(t,this.materialProperty,this.material),Object(n["a"])(this.depthFailMaterialProperty)&&(this.depthFailMaterial=f["a"].getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),j=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.depthFailMaterial.isTranslucent(),closed:this.closed})),a=new c["a"]({show:!1,asynchronous:!0,geometryInstances:O,appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed}),depthFailAppearance:j,shadows:this.shadows}),u.add(a),i=!1}else{Object(n["a"])(a)&&(u.remove(a),a=void 0);var P=this.oldPrimitive;Object(n["a"])(P)&&(u.remove(P),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=a,this.createPrimitive=!1}else if(Object(n["a"])(a)&&a.ready){a.show=!0,Object(n["a"])(this.oldPrimitive)&&(u.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=f["a"].getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material,!Object(n["a"])(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof v["a"]||(this.depthFailMaterial=f["a"].getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);var D=this.updatersWithAttributes.values,E=D.length;for(e=0;e<E;e++){var I=D[e],A=I.entity,T=this.geometry.get(I.id),F=this.attributes.get(T.id.id);if(Object(n["a"])(F)||(F=a.getGeometryInstanceAttributes(T.id),this.attributes.set(T.id.id,F)),Object(n["a"])(this.depthFailAppearanceType)&&this.depthFailMaterialProperty instanceof v["a"]&&!I.depthFailMaterialProperty.isConstant){var S=I.depthFailMaterialProperty.color,V=m["a"].getValueOrDefault(S,t,s["a"].WHITE,w);s["a"].equals(F._lastDepthFailColor,V)||(F._lastDepthFailColor=s["a"].clone(V,F._lastDepthFailColor),F.depthFailColor=o["a"].toValue(V,F.depthFailColor))}var M=A.isShowing&&(I.hasConstantFill||I.isFilled(t)),x=1===F.show[0];M!==x&&(F.show=p["a"].toValue(M,F.show));var H=I.distanceDisplayConditionProperty;if(!m["a"].isConstant(H)){var R=m["a"].getValueOrDefault(H,t,y,g);h["a"].equals(R,F._lastDistanceDisplayCondition)||(F._lastDistanceDisplayCondition=h["a"].clone(R,F._lastDistanceDisplayCondition),F.distanceDisplayCondition=l["a"].toValue(R,F.distanceDisplayCondition))}var N=I.terrainOffsetProperty;if(!m["a"].isConstant(N)){var L=m["a"].getValueOrDefault(N,t,_,b);r["a"].equals(L,F._lastOffset)||(F._lastOffset=r["a"].clone(L,F._lastOffset),F.offset=d["a"].toValue(L,F.offset))}}this.updateShows(a)}else Object(n["a"])(a)&&!a.ready&&(i=!1);return i},O.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,a=0;a<i;a++){var r=e[a],s=r.entity,o=this.geometry.get(r.id),h=this.attributes.get(o.id.id);Object(n["a"])(h)||(h=t.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,h));var l=s.isShowing,d=1===h.show[0];l!==d&&(h.show=p["a"].toValue(l,h.show),o.attributes.show.value[0]=h.show[0])}this.showsUpdated.removeAll()},O.prototype.contains=function(t){return this.updaters.contains(t.id)},O.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return u["a"].PENDING;var a=i.getGeometryInstanceAttributes(t.entity);return!Object(n["a"])(a)||!Object(n["a"])(a.boundingSphere)||Object(n["a"])(a.show)&&0===a.show[0]?u["a"].FAILED:(a.boundingSphere.clone(e),u["a"].DONE)},O.prototype.destroy=function(){var t=this.primitive,e=this.primitives;Object(n["a"])(t)&&e.remove(t);var i=this.oldPrimitive;Object(n["a"])(i)&&e.remove(i),this.removeMaterialSubscription()},C.prototype.add=function(t,e){for(var i=this._items,a=i.length,r=0;r<a;r++){var s=i[r];if(s.isMaterial(e))return void s.add(t,e)}var o=new O(this._primitives,this._appearanceType,e.fillMaterialProperty,this._depthFailAppearanceType,e.depthFailMaterialProperty,this._closed,this._shadows);o.add(t,e),i.push(o)},C.prototype.remove=function(t){for(var e=this._items,i=e.length,a=i-1;a>=0;a--){var r=e[a];if(r.remove(t)){0===r.updaters.length&&(e.splice(a,1),r.destroy());break}}},C.prototype.update=function(t){var e,i=this._items,a=i.length;for(e=a-1;e>=0;e--){var r=i[e];if(r.invalidated){i.splice(e,1);for(var s=r.updaters.values,o=s.length,n=0;n<o;n++)this.add(t,s[n]);r.destroy()}}var h=!0;for(e=0;e<i.length;e++)h=i[e].update(t)&&h;return h},C.prototype.getBoundingSphere=function(t,e){for(var i=this._items,a=i.length,r=0;r<a;r++){var s=i[r];if(s.contains(t))return s.getBoundingSphere(t,e)}return u["a"].FAILED},C.prototype.removeAllPrimitives=function(){for(var t=this._items,e=t.length,i=0;i<e;i++)t[i].destroy();this._items.length=0},e["a"]=C},d607:function(t,e,i){"use strict";var a=i("2f63"),r=i("9f1d"),s=i("c52f"),o=i("21d7"),n=i("7749"),h=i("ea07");function l(t){this._definitionChanged=new o["a"],this._value=void 0,this._removeSubscription=void 0,this.setValue(t)}Object(r["a"])(l.prototype,{isConstant:{get:function(){return h["a"].isConstant(this._value)}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return Object(a["a"])(this._value)?this._value.referenceFrame:n["a"].FIXED}}}),l.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,n["a"].FIXED,e)},l.prototype.setValue=function(t){this._value!==t&&(this._value=t,Object(a["a"])(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0),Object(a["a"])(t)&&(this._removeSubscription=t.definitionChanged.addEventListener(this._raiseDefinitionChanged,this)),this._definitionChanged.raiseEvent(this))},l.prototype.getValueInReferenceFrame=function(t,e,i){if(Object(a["a"])(this._value))return i=this._value.getValueInReferenceFrame(t,e,i),Object(a["a"])(i)?s["a"].WGS84.scaleToGeodeticSurface(i,i):void 0},l.prototype.equals=function(t){return this===t||t instanceof l&&this._value===t._value},l.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},e["a"]=l},e74f:function(t,e,i){"use strict";var a=i("933b"),r=i("2f63"),s=i("aee6"),o=i("77bc"),n=i("9fb4"),h=i("ac9c"),l=i("acad"),d=i("2a1b"),p=i("2d19"),c=i("b83c"),u=i("40b2"),v=i("ea07"),f=new s["a"],m=new s["a"];function g(t,e,i,r,s,o){this.primitives=t,this.classificationType=e,this.appearanceType=i,this.materialProperty=r,this.updaters=new a["a"],this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new a["a"],this.material=void 0,this.updatersWithAttributes=new a["a"],this.attributes=new a["a"],this.invalidated=!1,this.removeMaterialSubscription=r.definitionChanged.addEventListener(g.prototype.onMaterialChanged,this),this.subscriptions=new a["a"],this.showsUpdated=new a["a"],this.usingSphericalTextureCoordinates=s,this.zIndex=o,this.rectangleCollisionCheck=new n["a"]}function y(t,e,i){this._items=[],this._primitives=t,this._classificationType=e,this._appearanceType=i}g.prototype.onMaterialChanged=function(){this.invalidated=!0},g.prototype.overlapping=function(t){return this.rectangleCollisionCheck.collides(t)},g.prototype.isMaterial=function(t){var e=this.materialProperty,i=t.fillMaterialProperty;return i===e||i instanceof c["a"]&&e instanceof c["a"]||Object(r["a"])(e)&&e.equals(i)},g.prototype.add=function(t,e,i){var a=e.id;if(this.updaters.set(a,e),this.geometry.set(a,i),this.rectangleCollisionCheck.insert(a,i.geometry.rectangle),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&v["a"].isConstant(e.distanceDisplayConditionProperty)){var r=this;this.subscriptions.set(a,e.entity.definitionChanged.addEventListener((function(t,i,a,s){"isShowing"===i&&r.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(a,e);this.createPrimitive=!0},g.prototype.remove=function(t){var e=t.id,i=this.geometry.get(e);if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.rectangleCollisionCheck.remove(e,i.geometry.rectangle),this.updatersWithAttributes.remove(e);var a=this.subscriptions.get(e);return Object(r["a"])(a)&&(a(),this.subscriptions.remove(e)),!0}return!1},g.prototype.update=function(t){var e,i=!0,a=this.primitive,n=this.primitives,d=this.geometry.values;if(this.createPrimitive){var p=d.length;if(p>0)Object(r["a"])(a)&&(Object(r["a"])(this.oldPrimitive)?n.remove(a):this.oldPrimitive=a),this.material=u["a"].getValue(t,this.materialProperty,this.material),a=new l["a"]({show:!1,asynchronous:!0,geometryInstances:d,appearance:new this.appearanceType({material:this.material}),classificationType:this.classificationType}),n.add(a,this.zIndex),i=!1;else{Object(r["a"])(a)&&(n.remove(a),a=void 0);var c=this.oldPrimitive;Object(r["a"])(c)&&(n.remove(c),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=a,this.createPrimitive=!1}else if(Object(r["a"])(a)&&a.ready){a.show=!0,Object(r["a"])(this.oldPrimitive)&&(n.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=u["a"].getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material;var g=this.updatersWithAttributes.values,y=g.length;for(e=0;e<y;e++){var _=g[e],b=_.entity,O=this.geometry.get(_.id),w=this.attributes.get(O.id.id);Object(r["a"])(w)||(w=a.getGeometryInstanceAttributes(O.id),this.attributes.set(O.id.id,w));var C=b.isShowing&&(_.hasConstantFill||_.isFilled(t)),j=1===w.show[0];C!==j&&(w.show=h["a"].toValue(C,w.show));var P=_.distanceDisplayConditionProperty;if(!v["a"].isConstant(P)){var D=v["a"].getValueOrDefault(P,t,m,f);s["a"].equals(D,w._lastDistanceDisplayCondition)||(w._lastDistanceDisplayCondition=s["a"].clone(D,w._lastDistanceDisplayCondition),w.distanceDisplayCondition=o["a"].toValue(D,w.distanceDisplayCondition))}}this.updateShows(a)}else Object(r["a"])(a)&&!a.ready&&(i=!1);return i},g.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,a=0;a<i;a++){var s=e[a],o=s.entity,n=this.geometry.get(s.id),l=this.attributes.get(n.id.id);Object(r["a"])(l)||(l=t.getGeometryInstanceAttributes(n.id),this.attributes.set(n.id.id,l));var d=o.isShowing,p=1===l.show[0];d!==p&&(l.show=h["a"].toValue(d,l.show),n.attributes.show.value[0]=l.show[0])}this.showsUpdated.removeAll()},g.prototype.contains=function(t){return this.updaters.contains(t.id)},g.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return p["a"].PENDING;var a=i.getGeometryInstanceAttributes(t.entity);return!Object(r["a"])(a)||!Object(r["a"])(a.boundingSphere)||Object(r["a"])(a.show)&&0===a.show[0]?p["a"].FAILED:(a.boundingSphere.clone(e),p["a"].DONE)},g.prototype.destroy=function(){var t=this.primitive,e=this.primitives;Object(r["a"])(t)&&e.remove(t);var i=this.oldPrimitive;Object(r["a"])(i)&&e.remove(i),this.removeMaterialSubscription()},y.prototype.add=function(t,e){for(var i=this._items,a=i.length,r=e.createFillGeometryInstance(t),s=d["a"].shouldUseSphericalCoordinates(r.geometry.rectangle),o=v["a"].getValueOrDefault(e.zIndex,0),n=0;n<a;++n){var h=i[n];if(h.isMaterial(e)&&h.usingSphericalTextureCoordinates===s&&h.zIndex===o&&!h.overlapping(r.geometry.rectangle))return void h.add(t,e,r)}var l=new g(this._primitives,this._classificationType,this._appearanceType,e.fillMaterialProperty,s,o);l.add(t,e,r),i.push(l)},y.prototype.remove=function(t){for(var e=this._items,i=e.length,a=i-1;a>=0;a--){var r=e[a];if(r.remove(t)){0===r.updaters.length&&(e.splice(a,1),r.destroy());break}}},y.prototype.update=function(t){var e,i=this._items,a=i.length;for(e=a-1;e>=0;e--){var r=i[e];if(r.invalidated){i.splice(e,1);for(var s=r.updaters.values,o=s.length,n=0;n<o;n++)this.add(t,s[n]);r.destroy()}}var h=!0;for(e=0;e<i.length;e++)h=i[e].update(t)&&h;return h},y.prototype.getBoundingSphere=function(t,e){for(var i=this._items,a=i.length,r=0;r<a;r++){var s=i[r];if(s.contains(t))return s.getBoundingSphere(t,e)}return p["a"].FAILED},y.prototype.removeAllPrimitives=function(){for(var t=this._items,e=t.length,i=0;i<e;i++)t[i].destroy();this._items.length=0},e["a"]=y},ea07:function(t,e,i){"use strict";var a=i("535a"),r=i("2f63"),s=i("9f1d"),o=i("4f04");function n(){o["a"].throwInstantiationError()}Object(s["a"])(n.prototype,{isConstant:{get:o["a"].throwInstantiationError},definitionChanged:{get:o["a"].throwInstantiationError}}),n.prototype.getValue=o["a"].throwInstantiationError,n.prototype.equals=o["a"].throwInstantiationError,n.equals=function(t,e){return t===e||Object(r["a"])(t)&&t.equals(e)},n.arrayEquals=function(t,e){if(t===e)return!0;if(!Object(r["a"])(t)||!Object(r["a"])(e)||t.length!==e.length)return!1;for(var i=t.length,a=0;a<i;a++)if(!n.equals(t[a],e[a]))return!1;return!0},n.isConstant=function(t){return!Object(r["a"])(t)||t.isConstant},n.getValueOrUndefined=function(t,e,i){return Object(r["a"])(t)?t.getValue(e,i):void 0},n.getValueOrDefault=function(t,e,i,s){return Object(r["a"])(t)?Object(a["a"])(t.getValue(e,s),i):i},n.getValueOrClonedDefault=function(t,e,i,a){var s;return Object(r["a"])(t)&&(s=t.getValue(e,a)),Object(r["a"])(s)||(s=i.clone(s)),s},e["a"]=n},f0a0:function(t,e,i){"use strict";var a=i("535a"),r=i("2f63"),s=i("9f1d"),o=i("21d7"),n=i("984f"),h=i("0a43"),l=i("ea07"),d=function(t,e){this._propertyNames=[],this._definitionChanged=new o["a"],Object(r["a"])(t)&&this.merge(t,e)};function p(t){return new n["a"](t)}function c(t,e){var i=t._propertyNames,a=e._propertyNames,r=i.length;if(r!==a.length)return!1;for(var s=0;s<r;++s){var o=i[s],n=a.indexOf(o);if(-1===n)return!1;if(!l["a"].equals(t[o],e[o]))return!1}return!0}Object(s["a"])(d.prototype,{propertyNames:{get:function(){return this._propertyNames}},isConstant:{get:function(){for(var t=this._propertyNames,e=0,i=t.length;e<i;e++)if(!l["a"].isConstant(this[t[e]]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),d.prototype.hasProperty=function(t){return-1!==this._propertyNames.indexOf(t)},d.prototype.addProperty=function(t,e,i){var s=this._propertyNames;s.push(t),Object.defineProperty(this,t,Object(h["a"])(t,!0,Object(a["a"])(i,p))),Object(r["a"])(e)&&(this[t]=e),this._definitionChanged.raiseEvent(this)},d.prototype.removeProperty=function(t){var e=this._propertyNames,i=e.indexOf(t);this._propertyNames.splice(i,1),delete this[t],this._definitionChanged.raiseEvent(this)},d.prototype.getValue=function(t,e){Object(r["a"])(e)||(e={});for(var i=this._propertyNames,a=0,s=i.length;a<s;a++){var o=i[a];e[o]=l["a"].getValueOrUndefined(this[o],t,e[o])}return e},d.prototype.merge=function(t,e){for(var i=this._propertyNames,a=Object(r["a"])(t._propertyNames)?t._propertyNames:Object.keys(t),s=0,o=a.length;s<o;s++){var n=a[s],h=this[n],l=t[n];void 0===h&&-1===i.indexOf(n)&&this.addProperty(n,void 0,e),void 0!==l&&(void 0!==h?Object(r["a"])(h)&&Object(r["a"])(h.merge)&&h.merge(l):Object(r["a"])(l)&&Object(r["a"])(l.merge)&&Object(r["a"])(l.clone)?this[n]=l.clone():this[n]=l)}},d.prototype.equals=function(t){return this===t||t instanceof d&&c(this,t)},e["a"]=d},f293:function(t,e,i){"use strict";var a=i("933b"),r=i("bd8d"),s=i("9541"),o=i("535a"),n=i("2f63"),h=i("aee6"),l=i("77bc"),d=i("ac9c"),p=i("a0f5"),c=i("63ae"),u=i("2e78"),v=i("2d19"),f=i("b83c"),m=i("40b2"),g=i("ea07"),y=new r["a"],_=new h["a"],b=new h["a"];function O(t,e,i,r,s){var o;o=i instanceof f["a"]?c["a"]:u["a"],this.orderedGroundPrimitives=t,this.classificationType=e,this.appearanceType=o,this.materialProperty=i,this.updaters=new a["a"],this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new a["a"],this.material=void 0,this.updatersWithAttributes=new a["a"],this.attributes=new a["a"],this.invalidated=!1,this.removeMaterialSubscription=i.definitionChanged.addEventListener(O.prototype.onMaterialChanged,this),this.subscriptions=new a["a"],this.showsUpdated=new a["a"],this.zIndex=r,this._asynchronous=s}function w(t,e,i){this._items=[],this._orderedGroundPrimitives=t,this._classificationType=e,this._asynchronous=Object(o["a"])(i,!0)}O.prototype.onMaterialChanged=function(){this.invalidated=!0},O.prototype.isMaterial=function(t){var e=this.materialProperty,i=t.fillMaterialProperty;return i===e||i instanceof f["a"]&&e instanceof f["a"]||Object(n["a"])(e)&&e.equals(i)},O.prototype.add=function(t,e,i){var a=e.id;if(this.updaters.set(a,e),this.geometry.set(a,i),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&g["a"].isConstant(e.distanceDisplayConditionProperty)){var r=this;this.subscriptions.set(a,e.entity.definitionChanged.addEventListener((function(t,i,a,s){"isShowing"===i&&r.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(a,e);this.createPrimitive=!0},O.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return Object(n["a"])(i)&&(i(),this.subscriptions.remove(e)),!0}return!1},O.prototype.update=function(t){var e,i=!0,a=this.primitive,o=this.orderedGroundPrimitives,c=this.geometry.values;if(this.createPrimitive){var v=c.length;if(v>0)Object(n["a"])(a)&&(Object(n["a"])(this.oldPrimitive)?o.remove(a):this.oldPrimitive=a),a=new p["a"]({show:!1,asynchronous:this._asynchronous,geometryInstances:c,appearance:new this.appearanceType,classificationType:this.classificationType}),this.appearanceType===u["a"]&&(this.material=m["a"].getValue(t,this.materialProperty,this.material),a.appearance.material=this.material),o.add(a,this.zIndex),i=!1;else{Object(n["a"])(a)&&(o.remove(a),a=void 0);var f=this.oldPrimitive;Object(n["a"])(f)&&(o.remove(f),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=a,this.createPrimitive=!1}else if(Object(n["a"])(a)&&a.ready){a.show=!0,Object(n["a"])(this.oldPrimitive)&&(o.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.appearanceType===u["a"]&&(this.material=m["a"].getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material);var O=this.updatersWithAttributes.values,w=O.length;for(e=0;e<w;e++){var C=O[e],j=C.entity,P=this.geometry.get(C.id),D=this.attributes.get(P.id.id);if(Object(n["a"])(D)||(D=a.getGeometryInstanceAttributes(P.id),this.attributes.set(P.id.id,D)),!C.fillMaterialProperty.isConstant){var E=C.fillMaterialProperty.color,I=g["a"].getValueOrDefault(E,t,r["a"].WHITE,y);r["a"].equals(D._lastColor,I)||(D._lastColor=r["a"].clone(I,D._lastColor),D.color=s["a"].toValue(I,D.color))}var A=j.isShowing&&(C.hasConstantFill||C.isFilled(t)),T=1===D.show[0];A!==T&&(D.show=d["a"].toValue(A,D.show));var F=C.distanceDisplayConditionProperty;if(!g["a"].isConstant(F)){var S=g["a"].getValueOrDefault(F,t,b,_);h["a"].equals(S,D._lastDistanceDisplayCondition)||(D._lastDistanceDisplayCondition=h["a"].clone(S,D._lastDistanceDisplayCondition),D.distanceDisplayCondition=l["a"].toValue(S,D.distanceDisplayCondition))}}this.updateShows(a)}else Object(n["a"])(a)&&!a.ready&&(i=!1);return i},O.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,a=0;a<i;a++){var r=e[a],s=r.entity,o=this.geometry.get(r.id),h=this.attributes.get(o.id.id);Object(n["a"])(h)||(h=t.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,h));var l=s.isShowing,p=1===h.show[0];l!==p&&(h.show=d["a"].toValue(l,h.show),o.attributes.show.value[0]=h.show[0])}this.showsUpdated.removeAll()},O.prototype.contains=function(t){return this.updaters.contains(t.id)},O.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return v["a"].PENDING;var a=i.getGeometryInstanceAttributes(t.entity);return!Object(n["a"])(a)||!Object(n["a"])(a.boundingSphere)||Object(n["a"])(a.show)&&0===a.show[0]?v["a"].FAILED:(a.boundingSphere.clone(e),v["a"].DONE)},O.prototype.destroy=function(){var t=this.primitive,e=this.orderedGroundPrimitives;Object(n["a"])(t)&&e.remove(t);var i=this.oldPrimitive;Object(n["a"])(i)&&e.remove(i),this.removeMaterialSubscription()},w.prototype.add=function(t,e){for(var i=this._items,a=i.length,r=e.createFillGeometryInstance(t),s=g["a"].getValueOrDefault(e.zIndex,0),o=0;o<a;++o){var n=i[o];if(n.isMaterial(e)&&n.zIndex===s)return void n.add(t,e,r)}var h=new O(this._orderedGroundPrimitives,this._classificationType,e.fillMaterialProperty,s,this._asynchronous);h.add(t,e,r),i.push(h)},w.prototype.remove=function(t){for(var e=this._items,i=e.length,a=i-1;a>=0;a--){var r=e[a];if(r.remove(t)){0===r.updaters.length&&(e.splice(a,1),r.destroy());break}}},w.prototype.update=function(t){var e,i=this._items,a=i.length;for(e=a-1;e>=0;e--){var r=i[e];if(r.invalidated){i.splice(e,1);for(var s=r.updaters.values,o=s.length,n=0;n<o;n++)this.add(t,s[n]);r.destroy()}}var h=!0;for(e=0;e<i.length;e++)h=i[e].update(t)&&h;return h},w.prototype.getBoundingSphere=function(t,e){for(var i=this._items,a=i.length,r=0;r<a;r++){var s=i[r];if(s.contains(t))return s.getBoundingSphere(t,e)}return v["a"].FAILED},w.prototype.removeAllPrimitives=function(){for(var t=this._items,e=t.length,i=0;i<e;i++)t[i].destroy();this._items.length=0},e["a"]=w},fd5d:function(t,e,i){"use strict";var a=i("be18"),r=i("bef8"),s=i("2f63"),o=i("9f1d"),n=i("7d62"),h=i("21d7"),l=i("452d"),d=i("93da"),p=i("2d75"),c=i("a307"),u=i("ea07"),v=new a["a"],f=new r["a"];function m(t,e,i,o){this._scene=t,this._heightReference=i,this._extrudedHeightReference=o,this._positionProperty=e,this._position=new a["a"],this._cartographicPosition=new r["a"],this._normal=new a["a"],this._definitionChanged=new h["a"],this._terrainHeight=0,this._removeCallbackFunc=void 0,this._removeEventListener=void 0,this._removeModeListener=void 0;var n=this;if(Object(s["a"])(t.globe)&&(this._removeEventListener=t.terrainProviderChanged.addEventListener((function(){n._updateClamping()})),this._removeModeListener=t.morphComplete.addEventListener((function(){n._updateClamping()}))),e.isConstant){var d=e.getValue(l["a"].MINIMUM_VALUE,v);if(!Object(s["a"])(d)||a["a"].equals(d,a["a"].ZERO)||!Object(s["a"])(t.globe))return;this._position=a["a"].clone(d,this._position),this._updateClamping(),this._normal=t.globe.ellipsoid.geodeticSurfaceNormal(d,this._normal)}}Object(o["a"])(m.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}}),m.prototype._updateClamping=function(){Object(s["a"])(this._removeCallbackFunc)&&this._removeCallbackFunc();var t=this._scene,e=t.globe,i=this._position;if(Object(s["a"])(e)&&!a["a"].equals(i,a["a"].ZERO)){var r=e.ellipsoid,o=e._surface,n=this,h=r.cartesianToCartographic(i,this._cartographicPosition),l=e.getHeight(h);Object(s["a"])(l)?this._terrainHeight=l:this._terrainHeight=0,this._removeCallbackFunc=o.updateHeight(h,d)}else this._terrainHeight=0;function d(e){if(t.mode===c["a"].SCENE3D){var i=r.cartesianToCartographic(e,f);n._terrainHeight=i.height}else n._terrainHeight=e.x;n.definitionChanged.raiseEvent()}},m.prototype.getValue=function(t,e){var i=u["a"].getValueOrDefault(this._heightReference,t,p["a"].NONE),r=u["a"].getValueOrDefault(this._extrudedHeightReference,t,p["a"].NONE);if(i===p["a"].NONE&&r!==p["a"].RELATIVE_TO_GROUND)return this._position=a["a"].clone(a["a"].ZERO,this._position),a["a"].clone(a["a"].ZERO,e);if(this._positionProperty.isConstant)return a["a"].multiplyByScalar(this._normal,this._terrainHeight,e);var o=this._scene,n=this._positionProperty.getValue(t,v);if(!Object(s["a"])(n)||a["a"].equals(n,a["a"].ZERO)||!Object(s["a"])(o.globe))return a["a"].clone(a["a"].ZERO,e);if(a["a"].equalsEpsilon(this._position,n,d["a"].EPSILON10))return a["a"].multiplyByScalar(this._normal,this._terrainHeight,e);this._position=a["a"].clone(n,this._position),this._updateClamping();var h=o.globe.ellipsoid.geodeticSurfaceNormal(n,this._normal);return a["a"].multiplyByScalar(h,this._terrainHeight,e)},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return Object(s["a"])(this._removeEventListener)&&this._removeEventListener(),Object(s["a"])(this._removeModeListener)&&this._removeModeListener(),Object(s["a"])(this._removeCallbackFunc)&&this._removeCallbackFunc(),Object(n["a"])(this)},e["a"]=m}}]);