(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~0f3ba690"],{"05e5":function(e,t,i){"use strict";var a=i("0e25"),n={CENTER:0,BOTTOM:1,BASELINE:2,TOP:-1};t["a"]=Object(a["a"])(n)},"27aa":function(e,t,i){"use strict";var a=i("be18"),n=i("bd8d"),r=i("abab"),o=i("535a"),s=i("2f63"),c=i("9f1d"),l=i("7d62"),h=i("0123"),d=i("52f0"),u=i("1b8d"),_=i("f20a"),f=i("8b68"),b=i("a894"),p=i("d289"),g=i("6dc0"),m=i("e90c"),v=i("5770"),y=i("7c5e"),O=i("ae16"),I=i("8fa0"),C=i("b7c8"),T=i("5af0"),S=i("5a6c"),j=i("06f0"),P=i("6928"),E=i("3626"),x=i("6102"),w=i("25ef"),A=i("d8f6");function L(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=Object(o["a"])(e.center,a["a"].ZERO),this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilPreloadPass=void 0,this._rsStencilPreloadPass3DTiles=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=n["a"].clone(n["a"].WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=Object(o["a"])(e.classificationType,S["a"].BOTH),this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};for(var t=this._batchIds.length,i=0;i<t;++i){var r=this._batchIds[i];this._batchIdLookUp[r]=i}}Object(c["a"])(L.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});var k={position:0,a_batchId:1};function D(e,t){if(!Object(s["a"])(e._va)){var i=_["a"].createVertexBuffer({context:t,typedArray:e._positions,usage:f["a"].STATIC_DRAW}),a=_["a"].createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:f["a"].STATIC_DRAW}),n=_["a"].createIndexBuffer({context:t,typedArray:e._indices,usage:f["a"].DYNAMIC_DRAW,indexDatatype:2===e._indices.BYTES_PER_ELEMENT?h["a"].UNSIGNED_SHORT:h["a"].UNSIGNED_INT}),o=[{index:0,vertexBuffer:i,componentDatatype:r["a"].fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:a,componentDatatype:r["a"].fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new y["a"]({context:t,attributes:o,indexBuffer:n}),t.webgl2&&(e._vaSwap=new y["a"]({context:t,attributes:o,indexBuffer:_["a"].createIndexBuffer({context:t,sizeInBytes:n.sizeInBytes,usage:f["a"].DYNAMIC_DRAW,indexDatatype:n.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._verticesPromise=void 0}}function B(e,t){if(!Object(s["a"])(e._sp)){var i=e._batchTable,a=Object(o["a"])(e._attributeLocations,k),n=e._pickId,r=e._vertexShaderSource,c=e._fragmentShaderSource;if(Object(s["a"])(r))return e._sp=m["a"].fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:a}),e._spStencil=e._sp,c=v["a"].replaceMain(c,"czm_non_pick_main"),c=c+"void main() \n{ \n    czm_non_pick_main(); \n    gl_FragColor = "+n+"; \n} \n",void(e._spPick=m["a"].fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:a}));var l=i.getVertexShaderCallback(!1,"a_batchId",void 0)(I["a"]),h=i.getFragmentShaderCallback()(O["a"],!1,void 0);n=i.getPickId();var d=new v["a"]({sources:[l]}),u=new v["a"]({defines:["VECTOR_TILE"],sources:[h]});e._sp=m["a"].fromCache({context:t,vertexShaderSource:d,fragmentShaderSource:u,attributeLocations:a}),d=new v["a"]({sources:[I["a"]]}),u=new v["a"]({defines:["VECTOR_TILE"],sources:[O["a"]]}),e._spStencil=m["a"].fromCache({context:t,vertexShaderSource:d,fragmentShaderSource:u,attributeLocations:a}),h=v["a"].replaceMain(h,"czm_non_pick_main"),h=h+"\nvoid main() \n{ \n    czm_non_pick_main(); \n    gl_FragColor = "+n+"; \n} \n";var _=new v["a"]({sources:[l]}),f=new v["a"]({defines:["VECTOR_TILE"],sources:[h]});e._spPick=m["a"].fromCache({context:t,vertexShaderSource:_,fragmentShaderSource:f,attributeLocations:a})}}function N(e){var t=e?x["a"].EQUAL:x["a"].ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:w["a"].KEEP,zFail:w["a"].DECREMENT_WRAP,zPass:w["a"].DECREMENT_WRAP},backFunction:t,backOperation:{fail:w["a"].KEEP,zFail:w["a"].INCREMENT_WRAP,zPass:w["a"].INCREMENT_WRAP},reference:E["a"].CESIUM_3D_TILE_MASK,mask:E["a"].CESIUM_3D_TILE_MASK},stencilMask:E["a"].CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1}}function M(e){var t=e?x["a"].EQUAL:x["a"].ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:w["a"].KEEP,zFail:w["a"].KEEP,zPass:w["a"].INCREMENT_WRAP},backFunction:t,backOperation:{fail:w["a"].KEEP,zFail:w["a"].KEEP,zPass:w["a"].DECREMENT_WRAP},reference:E["a"].CESIUM_3D_TILE_MASK,mask:E["a"].CESIUM_3D_TILE_MASK},stencilMask:E["a"].CLASSIFICATION_MASK,depthTest:{enabled:!0,func:j["a"].LESS_OR_EQUAL},depthMask:!1}}var R={stencilTest:{enabled:!0,frontFunction:x["a"].NOT_EQUAL,frontOperation:{fail:w["a"].KEEP,zFail:w["a"].KEEP,zPass:w["a"].DECREMENT_WRAP},backFunction:x["a"].NOT_EQUAL,backOperation:{fail:w["a"].KEEP,zFail:w["a"].KEEP,zPass:w["a"].DECREMENT_WRAP},reference:0,mask:E["a"].CLASSIFICATION_MASK},stencilMask:E["a"].CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:C["a"].ALPHA_BLEND},F={stencilTest:{enabled:!0,frontFunction:x["a"].NOT_EQUAL,frontOperation:{fail:w["a"].KEEP,zFail:w["a"].KEEP,zPass:w["a"].DECREMENT_WRAP},backFunction:x["a"].NOT_EQUAL,backOperation:{fail:w["a"].KEEP,zFail:w["a"].KEEP,zPass:w["a"].DECREMENT_WRAP},reference:0,mask:E["a"].CLASSIFICATION_MASK},stencilMask:E["a"].CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function H(e){Object(s["a"])(e._rsStencilPreloadPass)||(e._rsStencilPreloadPass=g["a"].fromCache(N(!1)),e._rsStencilPreloadPass3DTiles=g["a"].fromCache(N(!0)),e._rsStencilDepthPass=g["a"].fromCache(M(!1)),e._rsStencilDepthPass3DTiles=g["a"].fromCache(M(!0)),e._rsColorPass=g["a"].fromCache(R),e._rsPickPass=g["a"].fromCache(F))}var U=new d["a"],W=new a["a"];function V(e,t){if(!Object(s["a"])(e._uniformMap)){var i={u_modifiedModelViewProjection:function(){var i=t.uniformState.view,a=t.uniformState.projection;return d["a"].clone(i,U),d["a"].multiplyByPoint(U,e._center,W),d["a"].setTranslation(U,W,U),d["a"].multiply(a,U,U),U},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(i)}}function z(e,t,i,a,n,r,o){for(var s=e.constructor.BYTES_PER_ELEMENT,c=r.length,l=0;l<c;++l){var h=r[l],d=o[h],u=a[d],_=n[d],f=new e.constructor(e.buffer,s*u,_);t.set(f,i),a[d]=i,i+=_}return i}function Y(e,t){var i=e._indices,a=e._indexOffsets,r=e._indexCounts,o=e._batchIdLookUp,s=new i.constructor(i.length),c=t.pop(),l=[c],h=z(i,s,0,a,r,c.batchIds,o);c.offset=0,c.count=h;while(t.length>0){var d=t.pop();if(n["a"].equals(d.color,c.color))h=z(i,s,h,a,r,d.batchIds,o),c.batchIds=c.batchIds.concat(d.batchIds),c.count=h-c.offset;else{var u=h;h=z(i,s,h,a,r,d.batchIds,o),d.offset=u,d.count=h-u,l.push(d),c=d}}e._va.indexBuffer.copyFromArrayView(s),e._indices=s,e._batchedIndices=l}function G(e,t,i,a,n,r,o){for(var s=e.bytesPerIndex,c=r.length,l=0;l<c;++l){var h=r[l],d=o[h],u=a[d],_=n[d];t.copyFromBuffer(e,u*s,i*s,_*s),a[d]=i,i+=_}return i}function K(e,t){var i=e._indexOffsets,a=e._indexCounts,r=e._batchIdLookUp,o=t.pop(),s=[o],c=e._va.indexBuffer,l=e._vaSwap.indexBuffer,h=G(c,l,0,i,a,o.batchIds,r);o.offset=0,o.count=h;while(t.length>0){var d=t.pop();if(n["a"].equals(d.color,o.color))h=G(c,l,h,i,a,d.batchIds,r),o.batchIds=o.batchIds.concat(d.batchIds),o.count=h-o.offset;else{var u=h;h=G(c,l,h,i,a,d.batchIds,r),d.offset=u,d.count=h-u,s.push(d),o=d}}var _=e._va;e._va=e._vaSwap,e._vaSwap=_,e._batchedIndices=s}function Z(e,t){return t.color.toRgba()-e.color.toRgba()}function J(e,t){if(!e._batchDirty)return!1;for(var i=e._batchedIndices,a=i.length,n=!1,r={},o=0;o<a;++o){var c=i[o].color,l=c.toRgba();if(Object(s["a"])(r[l])){n=!0;break}r[l]=!0}return n?n&&!e.forceRebatch&&e._framesSinceLastRebatch<120?void++e._framesSinceLastRebatch:(i.sort(Z),t.webgl2?K(e,i):Y(e,i),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0):(e._batchDirty=!1,!1)}function X(e,t){var i=J(e,t),a=e._commands,n=e._batchedIndices,r=n.length,c=3*r;if(!Object(s["a"])(a)||i||a.length!==c){a.length=c;for(var l=e._va,h=e._sp,u=Object(o["a"])(e._modelMatrix,d["a"].IDENTITY),_=e._uniformMap,f=e._boundingVolume,g=0;g<r;++g){var m=n[g].offset,v=n[g].count,y=a[3*g];Object(s["a"])(y)||(y=a[3*g]=new b["a"]({owner:e})),y.vertexArray=l,y.modelMatrix=u,y.offset=m,y.count=v,y.renderState=e._rsStencilPreloadPass,y.shaderProgram=h,y.uniformMap=_,y.boundingVolume=f,y.cull=!1,y.pass=p["a"].TERRAIN_CLASSIFICATION;var O=b["a"].shallowClone(y,y.derivedCommands.tileset);O.renderState=e._rsStencilPreloadPass3DTiles,O.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,y.derivedCommands.tileset=O;var I=a[3*g+1];Object(s["a"])(I)||(I=a[3*g+1]=new b["a"]({owner:e})),I.vertexArray=l,I.modelMatrix=u,I.offset=m,I.count=v,I.renderState=e._rsStencilDepthPass,I.shaderProgram=h,I.uniformMap=_,I.boundingVolume=f,I.cull=!1,I.pass=p["a"].TERRAIN_CLASSIFICATION;var C=b["a"].shallowClone(I,I.derivedCommands.tileset);C.renderState=e._rsStencilDepthPass3DTiles,C.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,I.derivedCommands.tileset=C;var T=a[3*g+2];Object(s["a"])(T)||(T=a[3*g+2]=new b["a"]({owner:e})),T.vertexArray=l,T.modelMatrix=u,T.offset=m,T.count=v,T.renderState=e._rsColorPass,T.shaderProgram=h,T.uniformMap=_,T.boundingVolume=f,T.cull=!1,T.pass=p["a"].TERRAIN_CLASSIFICATION;var S=b["a"].shallowClone(T,T.derivedCommands.tileset);S.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,T.derivedCommands.tileset=S}e._commandsDirty=!0}}function Q(e,t){if(e.classificationType!==S["a"].TERRAIN&&t.invertClassification&&(!Object(s["a"])(e._commandsIgnoreShow)||e._commandsDirty)){for(var i=e._commands,a=e._commandsIgnoreShow,n=e._spStencil,r=i.length,o=a.length=r/3*2,c=0,l=0;l<o;l+=2){var h=a[l]=b["a"].shallowClone(i[c],a[l]);h.shaderProgram=n,h.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,h=a[l+1]=b["a"].shallowClone(i[c+1],a[l+1]),h.shaderProgram=n,h.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,c+=3}e._commandsDirty=!1}}function q(e){if(e._pickCommandsDirty){var t=e._indexOffsets.length,i=e._pickCommands;i.length=3*t;for(var a=e._va,n=e._spStencil,r=e._spPick,c=Object(o["a"])(e._modelMatrix,d["a"].IDENTITY),l=e._uniformMap,h=0;h<t;++h){var u=e._indexOffsets[h],_=e._indexCounts[h],f=Object(s["a"])(e._boundingVolumes)?e._boundingVolumes[h]:e.boundingVolume,g=i[3*h];Object(s["a"])(g)||(g=i[3*h]=new b["a"]({owner:e,pickOnly:!0})),g.vertexArray=a,g.modelMatrix=c,g.offset=u,g.count=_,g.renderState=e._rsStencilPreloadPass,g.shaderProgram=n,g.uniformMap=l,g.boundingVolume=f,g.pass=p["a"].TERRAIN_CLASSIFICATION;var m=b["a"].shallowClone(g,g.derivedCommands.tileset);m.renderState=e._rsStencilPreloadPass3DTiles,m.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,g.derivedCommands.tileset=m;var v=i[3*h+1];Object(s["a"])(v)||(v=i[3*h+1]=new b["a"]({owner:e,pickOnly:!0})),v.vertexArray=a,v.modelMatrix=c,v.offset=u,v.count=_,v.renderState=e._rsStencilDepthPass,v.shaderProgram=n,v.uniformMap=l,v.boundingVolume=f,v.pass=p["a"].TERRAIN_CLASSIFICATION;var y=b["a"].shallowClone(v,v.derivedCommands.tileset);y.renderState=e._rsStencilDepthPass3DTiles,y.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,v.derivedCommands.tileset=y;var O=i[3*h+2];Object(s["a"])(O)||(O=i[3*h+2]=new b["a"]({owner:e,pickOnly:!0})),O.vertexArray=a,O.modelMatrix=c,O.offset=u,O.count=_,O.renderState=e._rsPickPass,O.shaderProgram=r,O.uniformMap=l,O.boundingVolume=f,O.pass=p["a"].TERRAIN_CLASSIFICATION;var I=b["a"].shallowClone(O,O.derivedCommands.tileset);I.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,O.derivedCommands.tileset=I}e._pickCommandsDirty=!1}}function $(e,t){e._updatingAllCommands=!0;var i,a=e._batchIds,r=a.length;for(i=0;i<r;++i){var o=a[i],s=t[o];s.show=!0,s.color=n["a"].WHITE}var c=e._batchedIndices;for(r=c.length,i=0;i<r;++i)c[i].color=n["a"].clone(n["a"].WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}L.prototype.createFeatures=function(e,t){for(var i=this._batchIds,a=i.length,n=0;n<a;++n){var r=i[n];t[r]=new T["a"](e,r)}},L.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};var ee=new n["a"],te=n["a"].WHITE,ie=!0,ae=/\$/;function ne(e,t,i,a){var n,r,o=e.classificationType,c=o!==S["a"].CESIUM_3D_TILE,l=o!==S["a"].TERRAIN,h=t.commandList,d=i.length;for(r=0;r<d;++r)c&&(n=i[r],n.pass=p["a"].TERRAIN_CLASSIFICATION,h.push(n)),l&&(n=i[r].derivedCommands.tileset,n.pass=p["a"].CESIUM_3D_TILE_CLASSIFICATION,h.push(n));if(t.invertClassification&&Object(s["a"])(a))for(d=a.length,r=0;r<d;++r)h.push(a[r])}function re(e,t){for(var i=e.commandList,a=t.length,n=0;n<a;n+=3){var r=t[n+2];r.pass=p["a"].OPAQUE,i.push(r)}}function oe(e){var t=e.debugWireframe===e._debugWireframe;if(t=t&&!(e.debugWireframe&&e._wireframeDirty),!t){var i,a;Object(s["a"])(e._rsWireframe)||(e._rsWireframe=g["a"].fromCache({})),e.debugWireframe?(i=e._rsWireframe,a=u["a"].LINES):(i=e._rsColorPass,a=u["a"].TRIANGLES);for(var n=e._commands,r=n.length,o=0;o<r;o+=3){var c=n[o+2];c.renderState=i,c.primitiveType=a}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}}L.prototype.applyStyle=function(e,t){if(Object(s["a"])(e)){var i=e.color,a=i instanceof P["a"]&&!ae.test(i.expression);this._updatingAllCommands=a;var r,o=this._batchIds,c=o.length;for(r=0;r<c;++r){var l=o[r],h=t[l];h.color=Object(s["a"])(e.color)?e.color.evaluateColor(h,ee):te,h.show=Object(s["a"])(e.show)?e.show.evaluate(h):ie}if(a){var d=this._batchedIndices;for(c=d.length,r=0;r<c;++r)d[r].color=n["a"].clone(n["a"].WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}}else $(this,t)},L.prototype.updateCommands=function(e,t){if(!this._updatingAllCommands){var i=this._batchIdLookUp,a=i[e];if(Object(s["a"])(a)){var r,o=this._indexOffsets,c=this._indexCounts,l=o[a],h=c[a],d=this._batchedIndices,u=d.length;for(r=0;r<u;++r){var _=d[r].offset,f=d[r].count;if(l>=_&&l<_+f)break}d.push(new A["a"]({color:n["a"].clone(t),offset:l,count:h,batchIds:[e]}));for(var b=[],p=[],g=d[r].batchIds,m=g.length,v=0;v<m;++v){var y=g[v];if(y!==e){var O=i[y];o[O]<l?b.push(y):p.push(y)}}0!==p.length&&d.push(new A["a"]({color:n["a"].clone(d[r].color),offset:l+h,count:d[r].offset+d[r].count-(l+h),batchIds:p})),0!==b.length?(d[r].count=l-d[r].offset,d[r].batchIds=b):d.splice(r,1),this._batchDirty=!0}}},L.prototype.update=function(e){var t=e.context;D(this,t),B(this,t),H(this),V(this,t);var i=e.passes;i.render&&(X(this,t),Q(this,e),oe(this),this._debugWireframe?re(e,this._commands):ne(this,e,this._commands,this._commandsIgnoreShow)),i.pick&&(q(this),ne(this,e,this._pickCommands))},L.prototype.isDestroyed=function(){return!1},L.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),Object(l["a"])(this)},t["a"]=L},"364c":function(e,t,i){"use strict";var a=i("be18"),n=i("535a"),r=i("2f63"),o=i("9f1d"),s=i("7d62"),c=i("c52f"),l=i("129b"),h=i("93da"),d=i("52f0"),u=i("eace"),_=i("283e"),f=i("a58e"),b=i("6596"),p=i("1d87"),g=i("670c"),m=i("bd8d"),v=i("aee6"),y=i("6dfc"),O=i("6a29"),I=i("8f7c"),C=i("7950"),T=i("f61d"),S=i("04e1"),j=i("4626"),P=i("4082"),E=i("05e5");function x(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._billboardCollection=void 0,this._labelCollection=void 0,this._polylineCollection=void 0,this._verticesPromise=void 0,this._packedBuffer=void 0,this._ready=!1,this._readyPromise=f["a"].defer(),this._resolvedPromise=!1}function w(e,t){var i=e._rectangle,a=e._minHeight,n=e._maxHeight,r=2+u["a"].packedLength+c["a"].packedLength,o=new Float64Array(r),s=0;return o[s++]=a,o[s++]=n,u["a"].pack(i,o,s),s+=u["a"].packedLength,c["a"].pack(t,o,s),o}Object(o["a"])(x.prototype,{pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){var e=this._billboardCollection.textureAtlas.texture.sizeInBytes,t=this._labelCollection._textureAtlas.texture.sizeInBytes;return e+t}},readyPromise:{get:function(){return this._readyPromise.promise}}});var A=new O["a"]("createVectorTilePoints"),L=new a["a"];function k(e,t){if(!Object(r["a"])(e._billboardCollection)){var i;if(!Object(r["a"])(e._verticesPromise)){i=e._positions;var n=e._packedBuffer;Object(r["a"])(n)||(i=e._positions=Object(p["a"])(i),e._batchIds=Object(p["a"])(e._batchIds),n=e._packedBuffer=w(e,t));var o=[i.buffer,n.buffer],s={positions:i.buffer,packedBuffer:n.buffer},c=e._verticesPromise=A.scheduleTask(s,o);if(!Object(r["a"])(c))return;c.then((function(t){e._positions=new Float64Array(t.positions),e._ready=!0}))}if(e._ready&&!Object(r["a"])(e._billboardCollection)){i=e._positions;var l=e._batchTable,h=e._batchIds,d=e._billboardCollection=new I["a"]({batchTable:l}),u=e._labelCollection=new S["a"]({batchTable:l}),_=e._polylineCollection=new P["a"];_._useHighlightColor=!0;for(var f=i.length/3,b=0;b<f;++b){var g=h[b],m=a["a"].unpack(i,3*b,L),v=d.add();v.position=m,v._batchIndex=g;var y=u.add();y.text=" ",y.position=m,y._batchIndex=g;var O=_.add();O.positions=[a["a"].clone(m),a["a"].clone(m)]}e._positions=void 0,e._packedBuffer=void 0}}}function D(e,t){for(var i=e._batchIds,a=i.length,n=0;n<a;++n){var r=i[n],o=t[r];o.show=!0,o.pointSize=C["a"].defaultPointSize,o.color=C["a"].defaultColor,o.pointOutlineColor=C["a"].defaultPointOutlineColor,o.pointOutlineWidth=C["a"].defaultPointOutlineWidth,o.labelColor=m["a"].WHITE,o.labelOutlineColor=m["a"].WHITE,o.labelOutlineWidth=1,o.font="30px sans-serif",o.labelStyle=j["a"].FILL,o.labelText=void 0,o.backgroundColor=new m["a"](.165,.165,.165,.8),o.backgroundPadding=new g["a"](7,5),o.backgroundEnabled=!1,o.scaleByDistance=void 0,o.translucencyByDistance=void 0,o.distanceDisplayCondition=void 0,o.heightOffset=0,o.anchorLineEnabled=!1,o.anchorLineColor=m["a"].WHITE,o.image=void 0,o.disableDepthTestDistance=0,o.horizontalOrigin=T["a"].CENTER,o.verticalOrigin=E["a"].CENTER,o.labelHorizontalOrigin=T["a"].RIGHT,o.labelVerticalOrigin=E["a"].BASELINE}}x.prototype.createFeatures=function(e,t){for(var i=this._billboardCollection,a=this._labelCollection,n=this._polylineCollection,r=this._batchIds,o=r.length,s=0;s<o;++s){var c=r[s],l=i.get(s),h=a.get(s),d=n.get(s);t[c]=new C["a"](e,c,l,h,d)}},x.prototype.applyDebugSettings=function(e,t){e?(m["a"].clone(t,this._billboardCollection._highlightColor),m["a"].clone(t,this._labelCollection._highlightColor),m["a"].clone(t,this._polylineCollection._highlightColor)):(m["a"].clone(m["a"].WHITE,this._billboardCollection._highlightColor),m["a"].clone(m["a"].WHITE,this._labelCollection._highlightColor),m["a"].clone(m["a"].WHITE,this._polylineCollection._highlightColor))};var B=new m["a"],N=new m["a"],M=new m["a"],R=new m["a"],F=new m["a"],H=new m["a"],U=new y["a"],W=new y["a"],V=new v["a"];x.prototype.applyStyle=function(e,t){if(Object(r["a"])(e))for(var i=this._batchIds,a=i.length,n=0;n<a;++n){var o=i[n],s=t[o];if(Object(r["a"])(e.show)&&(s.show=e.show.evaluate(s)),Object(r["a"])(e.pointSize)&&(s.pointSize=e.pointSize.evaluate(s)),Object(r["a"])(e.color)&&(s.color=e.color.evaluateColor(s,B)),Object(r["a"])(e.pointOutlineColor)&&(s.pointOutlineColor=e.pointOutlineColor.evaluateColor(s,N)),Object(r["a"])(e.pointOutlineWidth)&&(s.pointOutlineWidth=e.pointOutlineWidth.evaluate(s)),Object(r["a"])(e.labelColor)&&(s.labelColor=e.labelColor.evaluateColor(s,M)),Object(r["a"])(e.labelOutlineColor)&&(s.labelOutlineColor=e.labelOutlineColor.evaluateColor(s,R)),Object(r["a"])(e.labelOutlineWidth)&&(s.labelOutlineWidth=e.labelOutlineWidth.evaluate(s)),Object(r["a"])(e.font)&&(s.font=e.font.evaluate(s)),Object(r["a"])(e.labelStyle)&&(s.labelStyle=e.labelStyle.evaluate(s)),Object(r["a"])(e.labelText)?s.labelText=e.labelText.evaluate(s):s.labelText=void 0,Object(r["a"])(e.backgroundColor)&&(s.backgroundColor=e.backgroundColor.evaluateColor(s,F)),Object(r["a"])(e.backgroundPadding)&&(s.backgroundPadding=e.backgroundPadding.evaluate(s)),Object(r["a"])(e.backgroundEnabled)&&(s.backgroundEnabled=e.backgroundEnabled.evaluate(s)),Object(r["a"])(e.scaleByDistance)){var c=e.scaleByDistance.evaluate(s);U.near=c.x,U.nearValue=c.y,U.far=c.z,U.farValue=c.w,s.scaleByDistance=U}else s.scaleByDistance=void 0;if(Object(r["a"])(e.translucencyByDistance)){var l=e.translucencyByDistance.evaluate(s);W.near=l.x,W.nearValue=l.y,W.far=l.z,W.farValue=l.w,s.translucencyByDistance=W}else s.translucencyByDistance=void 0;if(Object(r["a"])(e.distanceDisplayCondition)){var h=e.distanceDisplayCondition.evaluate(s);V.near=h.x,V.far=h.y,s.distanceDisplayCondition=V}else s.distanceDisplayCondition=void 0;Object(r["a"])(e.heightOffset)&&(s.heightOffset=e.heightOffset.evaluate(s)),Object(r["a"])(e.anchorLineEnabled)&&(s.anchorLineEnabled=e.anchorLineEnabled.evaluate(s)),Object(r["a"])(e.anchorLineColor)&&(s.anchorLineColor=e.anchorLineColor.evaluateColor(s,H)),Object(r["a"])(e.image)?s.image=e.image.evaluate(s):s.image=void 0,Object(r["a"])(e.disableDepthTestDistance)&&(s.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(s)),Object(r["a"])(e.horizontalOrigin)&&(s.horizontalOrigin=e.horizontalOrigin.evaluate(s)),Object(r["a"])(e.verticalOrigin)&&(s.verticalOrigin=e.verticalOrigin.evaluate(s)),Object(r["a"])(e.labelHorizontalOrigin)&&(s.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(s)),Object(r["a"])(e.labelVerticalOrigin)&&(s.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(s))}else D(this,t)},x.prototype.update=function(e){k(this,e.mapProjection.ellipsoid),this._ready&&(this._polylineCollection.update(e),this._billboardCollection.update(e),this._labelCollection.update(e),this._resolvedPromise||(this._readyPromise.resolve(),this._resolvedPromise=!0))},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),Object(s["a"])(this)};var z=x,Y=i("0123"),G=i("78e5"),K=i("5a6c"),Z=i("d8f6"),J=i("27aa");function X(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=Object(n["a"])(e.ellipsoid,c["a"].WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=Object(n["a"])(e.center,a["a"].ZERO),this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._readyPromise=f["a"].defer(),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=K["a"].BOTH}function Q(e){var t=new Float64Array(3+a["a"].packedLength+c["a"].packedLength+u["a"].packedLength),i=0;return t[i++]=e._indices.BYTES_PER_ELEMENT,t[i++]=e._minimumHeight,t[i++]=e._maximumHeight,a["a"].pack(e._center,t,i),i+=a["a"].packedLength,c["a"].pack(e._ellipsoid,t,i),i+=c["a"].packedLength,u["a"].pack(e._rectangle,t,i),t}function q(e,t){for(var i=1,a=t[i++],n=e._boundingVolumes=new Array(a),r=0;r<a;++r)n[r]=G["a"].unpack(t,i),i+=G["a"].packedLength;for(var o=t[i++],s=e._batchedIndices=new Array(o),c=0;c<o;++c){var l=m["a"].unpack(t,i);i+=m["a"].packedLength;for(var h=t[i++],d=t[i++],u=t[i++],_=new Array(u),f=0;f<u;++f)_[f]=t[i++];s[c]=new Z["a"]({color:l,offset:h,count:d,batchIds:_})}}Object(o["a"])(X.prototype,{trianglesLength:{get:function(){return Object(r["a"])(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return Object(r["a"])(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise.promise}}});var $=new O["a"]("createVectorTilePolygons"),ee=new m["a"];function te(e){if(!Object(r["a"])(e._primitive)){if(!Object(r["a"])(e._verticesPromise)){var t=e._positions,i=e._counts,a=e._indexCounts,n=e._indices,o=e._transferrableBatchIds,s=e._batchTableColors,c=e._packedBuffer;if(!Object(r["a"])(s)){t=e._positions=Object(p["a"])(e._positions),i=e._counts=Object(p["a"])(e._counts),a=e._indexCounts=Object(p["a"])(e._indexCounts),n=e._indices=Object(p["a"])(e._indices),e._center=e._ellipsoid.cartographicToCartesian(u["a"].center(e._rectangle)),o=e._transferrableBatchIds=new Uint32Array(e._batchIds),s=e._batchTableColors=new Uint32Array(o.length);for(var l=e._batchTable,h=s.length,d=0;d<h;++d){var _=l.getColor(d,ee);s[d]=_.toRgba()}c=e._packedBuffer=Q(e)}var b=[t.buffer,i.buffer,a.buffer,n.buffer,o.buffer,s.buffer,c.buffer],g={packedBuffer:c.buffer,positions:t.buffer,counts:i.buffer,indexCounts:a.buffer,indices:n.buffer,batchIds:o.buffer,batchTableColors:s.buffer},m=e._polygonMinimumHeights,v=e._polygonMaximumHeights;Object(r["a"])(m)&&Object(r["a"])(v)&&(m=Object(p["a"])(m),v=Object(p["a"])(v),b.push(m.buffer,v.buffer),g.minimumHeights=m,g.maximumHeights=v);var y=e._verticesPromise=$.scheduleTask(g,b);if(!Object(r["a"])(y))return;Object(f["a"])(y,(function(t){e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;var i=new Float64Array(t.packedBuffer),a=i[0];q(e,i),e._indices=2===Y["a"].getSizeInBytes(a)?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._batchedPositions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.batchIds),e._ready=!0}))}e._ready&&!Object(r["a"])(e._primitive)&&(e._primitive=new J["a"]({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._verticesPromise=void 0,e._readyPromise.resolve())}}X.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},X.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},X.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},X.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},X.prototype.update=function(e){te(this),this._ready&&(this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e))},X.prototype.isDestroyed=function(){return!1},X.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(s["a"])(this)};var ie=X,ae=i("abab"),ne=i("5e57"),re=i("f20a"),oe=i("8b68"),se=i("a894"),ce=i("d289"),le=i("6dc0"),he=i("e90c"),de=i("5770"),ue=i("7c5e"),_e=i("b71e"),fe=i("95fe"),be=i("b7c8"),pe=i("5af0");function ge(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=Object(n["a"])(e.ellipsoid,c["a"].WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=m["a"].clone(m["a"].WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._readyPromise=f["a"].defer(),this._verticesPromise=void 0}function me(e){var t=e._rectangle,i=e._minimumHeight,n=e._maximumHeight,r=e._ellipsoid,o=e._center,s=2+u["a"].packedLength+c["a"].packedLength+a["a"].packedLength,l=new Float64Array(s),h=0;return l[h++]=i,l[h++]=n,u["a"].pack(t,l,h),h+=u["a"].packedLength,c["a"].pack(r,l,h),h+=c["a"].packedLength,a["a"].pack(o,l,h),l}Object(o["a"])(ge.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},readyPromise:{get:function(){return this._readyPromise.promise}}});var ve=new O["a"]("createVectorTilePolylines"),ye={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};function Oe(e,t){if(!Object(r["a"])(e._va)){if(!Object(r["a"])(e._verticesPromise)){var i=e._positions,a=e._widths,n=e._counts,o=e._transferrableBatchIds,s=e._packedBuffer;Object(r["a"])(s)||(i=e._positions=Object(p["a"])(i),a=e._widths=Object(p["a"])(a),n=e._counts=Object(p["a"])(n),o=e._transferrableBatchIds=Object(p["a"])(e._batchIds),s=e._packedBuffer=me(e));var c=[i.buffer,a.buffer,n.buffer,o.buffer,s.buffer],l={positions:i.buffer,widths:a.buffer,counts:n.buffer,batchIds:o.buffer,packedBuffer:s.buffer},h=e._verticesPromise=ve.scheduleTask(l,c);if(!Object(r["a"])(h))return;Object(f["a"])(h,(function(t){e._currentPositions=new Float32Array(t.currentPositions),e._previousPositions=new Float32Array(t.previousPositions),e._nextPositions=new Float32Array(t.nextPositions),e._expandAndWidth=new Float32Array(t.expandAndWidth),e._vertexBatchIds=new Uint16Array(t.batchIds);var i=t.indexDatatype;e._indices=i===Y["a"].UNSIGNED_SHORT?new Uint16Array(t.indices):new Uint32Array(t.indices),e._ready=!0}))}if(e._ready&&!Object(r["a"])(e._va)){var d=e._currentPositions,u=e._previousPositions,_=e._nextPositions,b=e._expandAndWidth,g=e._vertexBatchIds,m=e._indices,v=u.byteLength+d.byteLength+_.byteLength;v+=b.byteLength+g.byteLength+m.byteLength,e._trianglesLength=m.length/3,e._geometryByteLength=v;var y=re["a"].createVertexBuffer({context:t,typedArray:u,usage:oe["a"].STATIC_DRAW}),O=re["a"].createVertexBuffer({context:t,typedArray:d,usage:oe["a"].STATIC_DRAW}),I=re["a"].createVertexBuffer({context:t,typedArray:_,usage:oe["a"].STATIC_DRAW}),C=re["a"].createVertexBuffer({context:t,typedArray:b,usage:oe["a"].STATIC_DRAW}),T=re["a"].createVertexBuffer({context:t,typedArray:g,usage:oe["a"].STATIC_DRAW}),S=re["a"].createIndexBuffer({context:t,typedArray:m,usage:oe["a"].STATIC_DRAW,indexDatatype:2===m.BYTES_PER_ELEMENT?Y["a"].UNSIGNED_SHORT:Y["a"].UNSIGNED_INT}),j=[{index:ye.previousPosition,vertexBuffer:y,componentDatatype:ae["a"].FLOAT,componentsPerAttribute:3},{index:ye.currentPosition,vertexBuffer:O,componentDatatype:ae["a"].FLOAT,componentsPerAttribute:3},{index:ye.nextPosition,vertexBuffer:I,componentDatatype:ae["a"].FLOAT,componentsPerAttribute:3},{index:ye.expandAndWidth,vertexBuffer:C,componentDatatype:ae["a"].FLOAT,componentsPerAttribute:2},{index:ye.a_batchId,vertexBuffer:T,componentDatatype:ae["a"].UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new ue["a"]({context:t,attributes:j,indexBuffer:S}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0,e._readyPromise.resolve()}}}var Ie=new d["a"],Ce=new a["a"];function Te(e,t){Object(r["a"])(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){var i=t.uniformState.view;return d["a"].clone(i,Ie),d["a"].multiplyByPoint(Ie,e._center,Ce),d["a"].setTranslation(Ie,Ce,Ie),Ie},u_highlightColor:function(){return e._highlightColor}})}function Se(e){if(!Object(r["a"])(e._rs)){var t={enabled:!0,factor:-5,units:-5};e._rs=le["a"].fromCache({blending:be["a"].ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:t})}}var je="uniform vec4 u_highlightColor; \nvoid main()\n{\n    gl_FragColor = u_highlightColor;\n}\n";function Pe(e,t){if(!Object(r["a"])(e._sp)){var i=e._batchTable,a=i.getVertexShaderCallback(!1,"a_batchId",void 0)(fe["a"]),n=i.getFragmentShaderCallback()(je,!1,void 0),o=new de["a"]({defines:["VECTOR_TILE",ne["a"].isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[_e["a"],a]}),s=new de["a"]({defines:["VECTOR_TILE"],sources:[n]});e._sp=he["a"].fromCache({context:t,vertexShaderSource:o,fragmentShaderSource:s,attributeLocations:ye})}}function Ee(e,t){if(!Object(r["a"])(e._command)){var i=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new se["a"]({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:i,boundingVolume:e._boundingVolume,pass:ce["a"].TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}function xe(e,t){for(var i=e._batchIds,a=i.length,n=0;n<a;++n){var r=i[n],o=t[r];o.show=!0,o.color=m["a"].WHITE}}ge.prototype.createFeatures=function(e,t){for(var i=this._batchIds,a=i.length,n=0;n<a;++n){var r=i[n];t[r]=new pe["a"](e,r)}},ge.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};var we=new m["a"],Ae=m["a"].WHITE,Le=!0;ge.prototype.applyStyle=function(e,t){if(Object(r["a"])(e))for(var i=this._batchIds,a=i.length,n=0;n<a;++n){var o=i[n],s=t[o];s.color=Object(r["a"])(e.color)?e.color.evaluateColor(s,we):Ae,s.show=Object(r["a"])(e.show)?e.show.evaluate(s):Le}else xe(this,t)},ge.prototype.update=function(e){var t=e.context;if(Oe(this,t),Te(this,t),Pe(this,t),Se(this),this._ready){var i=e.passes;(i.render||i.pick)&&Ee(this,e)}},ge.prototype.isDestroyed=function(){return!1},ge.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),Object(s["a"])(this)};var ke=ge;function De(e,t,i,a,n){this._tileset=e,this._tile=t,this._resource=i,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._contentReadyPromise=void 0,this._readyPromise=f["a"].defer(),this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,Fe(this,a,n)}function Be(e){return function(t,i){Object(r["a"])(e._polygons)&&e._polygons.updateCommands(t,i)}}function Ne(e,t){var i,a,o,s,c=Object(n["a"])(e.POLYGONS_LENGTH,0),l=Object(n["a"])(e.POLYLINES_LENGTH,0),h=Object(n["a"])(e.POINTS_LENGTH,0);if(c>0&&Object(r["a"])(e.POLYGON_BATCH_IDS)){var d=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,d,c)}if(l>0&&Object(r["a"])(e.POLYLINE_BATCH_IDS)){var u=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;a=new Uint16Array(t.buffer,u,l)}if(h>0&&Object(r["a"])(e.POINT_BATCH_IDS)){var f=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;o=new Uint16Array(t.buffer,f,h)}var b=Object(r["a"])(i)||Object(r["a"])(a)||Object(r["a"])(o),p=c>0&&!Object(r["a"])(i)||l>0&&!Object(r["a"])(a)||h>0&&!Object(r["a"])(o);if(b&&p)throw new _["a"]("If one group of batch ids is defined, then all batch ids must be defined.");var g=!Object(r["a"])(i)&&!Object(r["a"])(a)&&!Object(r["a"])(o);if(g){var m=0;if(!Object(r["a"])(i)&&c>0)for(i=new Uint16Array(c),s=0;s<c;++s)i[s]=m++;if(!Object(r["a"])(a)&&l>0)for(a=new Uint16Array(l),s=0;s<l;++s)a[s]=m++;if(!Object(r["a"])(o)&&h>0)for(o=new Uint16Array(h),s=0;s<h;++s)o[s]=m++}return{polygons:i,polylines:a,points:o}}Object(o["a"])(De.prototype,{featuresLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return Object(r["a"])(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){var e=0;return Object(r["a"])(this._polygons)&&(e+=this._polygons.trianglesLength),Object(r["a"])(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){var e=0;return Object(r["a"])(this._polygons)&&(e+=this._polygons.geometryByteLength),Object(r["a"])(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return Object(r["a"])(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.memorySizeInBytes:0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise.promise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){return this._batchTable}}});var Me=Uint16Array.BYTES_PER_ELEMENT,Re=Uint32Array.BYTES_PER_ELEMENT;function Fe(e,t,i){i=Object(n["a"])(i,0);var o=new Uint8Array(t),s=new DataView(t);i+=Re;var f=s.getUint32(i,!0);if(1!==f)throw new _["a"]("Only Vector tile version 1 is supported.  Version "+f+" is not.");i+=Re;var p=s.getUint32(i,!0);if(i+=Re,0!==p){var g=s.getUint32(i,!0);if(i+=Re,0===g)throw new _["a"]("Feature table must have a byte length greater than zero");var m=s.getUint32(i,!0);i+=Re;var v=s.getUint32(i,!0);i+=Re;var y=s.getUint32(i,!0);i+=Re;var O=s.getUint32(i,!0);i+=Re;var I=s.getUint32(i,!0);i+=Re;var C=s.getUint32(i,!0);i+=Re;var T=s.getUint32(i,!0);i+=Re;var S=Object(l["a"])(o,i,g),j=JSON.parse(S);i+=g;var P,E,x=new Uint8Array(t,i,m);if(i+=m,v>0){var w=Object(l["a"])(o,i,v);P=JSON.parse(w),i+=v,y>0&&(E=new Uint8Array(t,i,y),E=new Uint8Array(E),i+=y)}var A=Object(n["a"])(j.POLYGONS_LENGTH,0),L=Object(n["a"])(j.POLYLINES_LENGTH,0),k=Object(n["a"])(j.POINTS_LENGTH,0),D=A+L+k,B=new b["a"](e,D,P,E,Be(e));if(e._batchTable=B,0!==D){var N,M,R;if(!Object(r["a"])(j.REGION))throw new _["a"]("REGION is required in the feature table.");var F=j.REGION;N=u["a"].unpack(F),M=F[4],R=F[5];var H,U=e._tile.computedTransform;Object(r["a"])(j.RTC_CENTER)?(H=a["a"].unpack(j.RTC_CENTER),d["a"].multiplyByPoint(U,H,H)):(H=u["a"].center(N),H.height=h["a"].lerp(M,R,.5),H=c["a"].WGS84.cartographicToCartesian(H));var W=Ne(j,x);if(i+=i%4,A>0){var V=new Uint32Array(t,i,O/Re);i+=O;var Y=new Uint16Array(t,i,I/Me);i+=I;var G,K,Z=x.byteOffset+j.POLYGON_COUNT.byteOffset,J=new Uint32Array(x.buffer,Z,A),X=x.byteOffset+j.POLYGON_INDEX_COUNT.byteOffset,Q=new Uint32Array(x.buffer,X,A);if(Object(r["a"])(j.POLYGON_MINIMUM_HEIGHTS)&&Object(r["a"])(j.POLYGON_MAXIMUM_HEIGHTS)){var q=x.byteOffset+j.POLYGON_MINIMUM_HEIGHTS.byteOffset;G=new Float32Array(x.buffer,q,A);var $=x.byteOffset+j.POLYGON_MAXIMUM_HEIGHTS.byteOffset;K=new Float32Array(x.buffer,$,A)}e._polygons=new ie({positions:Y,counts:J,indexCounts:Q,indices:V,minimumHeight:M,maximumHeight:R,polygonMinimumHeights:G,polygonMaximumHeights:K,center:H,rectangle:N,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:B,batchIds:W.polygons,modelMatrix:U})}if(L>0){var ee=new Uint16Array(t,i,C/Me);i+=C;var te,ae=x.byteOffset+j.POLYLINE_COUNT.byteOffset,ne=new Uint32Array(x.buffer,ae,L);if(Object(r["a"])(j.POLYLINE_WIDTHS)){var re=x.byteOffset+j.POLYLINE_WIDTHS.byteOffset;te=new Uint16Array(x.buffer,re,L)}else{te=new Uint16Array(L);for(var oe=0;oe<L;++oe)te[oe]=2}e._polylines=new ke({positions:ee,widths:te,counts:ne,batchIds:W.polylines,minimumHeight:M,maximumHeight:R,center:H,rectangle:N,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:B})}if(k>0){var se=new Uint16Array(t,i,T/Me);e._points=new z({positions:se,batchIds:W.points,minimumHeight:M,maximumHeight:R,rectangle:N,batchTable:B})}}}else e._readyPromise.resolve(e)}function He(e){var t=e.featuresLength;if(!Object(r["a"])(e._features)&&t>0){var i=new Array(t);Object(r["a"])(e._polygons)&&e._polygons.createFeatures(e,i),Object(r["a"])(e._polylines)&&e._polylines.createFeatures(e,i),Object(r["a"])(e._points)&&e._points.createFeatures(e,i),e._features=i}}De.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},De.prototype.getFeature=function(e){return He(this),this._features[e]},De.prototype.applyDebugSettings=function(e,t){Object(r["a"])(this._polygons)&&this._polygons.applyDebugSettings(e,t),Object(r["a"])(this._polylines)&&this._polylines.applyDebugSettings(e,t),Object(r["a"])(this._points)&&this._points.applyDebugSettings(e,t)},De.prototype.applyStyle=function(e){He(this),Object(r["a"])(this._polygons)&&this._polygons.applyStyle(e,this._features),Object(r["a"])(this._polylines)&&this._polylines.applyStyle(e,this._features),Object(r["a"])(this._points)&&this._points.applyStyle(e,this._features)},De.prototype.update=function(e,t){var i=!0;if(Object(r["a"])(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),i=i&&this._polygons._ready),Object(r["a"])(this._polylines)&&(this._polylines.update(t),i=i&&this._polylines._ready),Object(r["a"])(this._points)&&(this._points.update(t),i=i&&this._points._ready),Object(r["a"])(this._batchTable)&&i&&this._batchTable.update(e,t),!Object(r["a"])(this._contentReadyPromise)){var a=Object(r["a"])(this._points)?this._points.readyPromise:void 0,n=Object(r["a"])(this._polygons)?this._polygons.readyPromise:void 0,o=Object(r["a"])(this._polylines)?this._polylines.readyPromise:void 0,s=this;this._contentReadyPromise=f["a"].all([a,n,o]).then((function(){s._readyPromise.resolve(s)}))}},De.prototype.isDestroyed=function(){return!1},De.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Object(s["a"])(this)};t["a"]=De},"51a0":function(e,t,i){"use strict";var a=i("1d87"),n=i("cef5"),r=i("be18"),o=i("bd8d"),s=i("535a"),c=i("2f63"),l=i("9f1d"),h=i("7d62"),d=i("52f0"),u=i("6a29"),_=i("a58e"),f=i("5a6c"),b=i("d8f6"),p=i("27aa");function g(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,Object(c["a"])(this._center)||(Object(c["a"])(this._boundingVolume)?this._center=r["a"].clone(this._boundingVolume.center):this._center=r["a"].clone(r["a"].ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._readyPromise=_["a"].defer(),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=f["a"].BOTH}function m(e){var t=new Float64Array(d["a"].packedLength+r["a"].packedLength),i=0;return r["a"].pack(e._center,t,i),i+=r["a"].packedLength,d["a"].pack(e._modelMatrix,t,i),t}function v(e,t){for(var i=0,a=t[i++],r=t[i++],s=e._boundingVolumes=new Array(r),c=0;c<r;++c)s[c]=n["a"].unpack(t,i),i+=n["a"].packedLength;for(var l=t[i++],h=e._batchedIndices=new Array(l),d=0;d<l;++d){var u=o["a"].unpack(t,i);i+=o["a"].packedLength;for(var _=t[i++],f=t[i++],p=t[i++],g=new Array(p),m=0;m<p;++m)g[m]=t[i++];h[d]=new b["a"]({color:u,offset:_,count:f,batchIds:g})}return a}Object(l["a"])(g.prototype,{trianglesLength:{get:function(){return Object(c["a"])(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return Object(c["a"])(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise.promise}}}),g.packedBoxLength=d["a"].packedLength+r["a"].packedLength,g.packedCylinderLength=d["a"].packedLength+2,g.packedEllipsoidLength=d["a"].packedLength+r["a"].packedLength,g.packedSphereLength=r["a"].packedLength+1;var y=new u["a"]("createVectorTileGeometries"),O=new o["a"];function I(e){if(!Object(c["a"])(e._primitive)){if(!Object(c["a"])(e._verticesPromise)){var t=e._boxes,i=e._boxBatchIds,n=e._cylinders,r=e._cylinderBatchIds,o=e._ellipsoids,l=e._ellipsoidBatchIds,h=e._spheres,d=e._sphereBatchIds,u=e._batchTableColors,_=e._packedBuffer;if(!Object(c["a"])(u)){var f=0;Object(c["a"])(e._boxes)&&(t=e._boxes=Object(a["a"])(t),i=e._boxBatchIds=Object(a["a"])(i),f+=i.length),Object(c["a"])(e._cylinders)&&(n=e._cylinders=Object(a["a"])(n),r=e._cylinderBatchIds=Object(a["a"])(r),f+=r.length),Object(c["a"])(e._ellipsoids)&&(o=e._ellipsoids=Object(a["a"])(o),l=e._ellipsoidBatchIds=Object(a["a"])(l),f+=l.length),Object(c["a"])(e._spheres)&&(h=e._sphere=Object(a["a"])(h),d=e._sphereBatchIds=Object(a["a"])(d),f+=d.length),u=e._batchTableColors=new Uint32Array(f);for(var b=e._batchTable,g=0;g<f;++g){var I=b.getColor(g,O);u[g]=I.toRgba()}_=e._packedBuffer=m(e)}var C=[];Object(c["a"])(t)&&C.push(t.buffer,i.buffer),Object(c["a"])(n)&&C.push(n.buffer,r.buffer),Object(c["a"])(o)&&C.push(o.buffer,l.buffer),Object(c["a"])(h)&&C.push(h.buffer,d.buffer),C.push(u.buffer,_.buffer);var T={boxes:Object(c["a"])(t)?t.buffer:void 0,boxBatchIds:Object(c["a"])(t)?i.buffer:void 0,cylinders:Object(c["a"])(n)?n.buffer:void 0,cylinderBatchIds:Object(c["a"])(n)?r.buffer:void 0,ellipsoids:Object(c["a"])(o)?o.buffer:void 0,ellipsoidBatchIds:Object(c["a"])(o)?l.buffer:void 0,spheres:Object(c["a"])(h)?h.buffer:void 0,sphereBatchIds:Object(c["a"])(h)?d.buffer:void 0,batchTableColors:u.buffer,packedBuffer:_.buffer},S=e._verticesPromise=y.scheduleTask(T,C);if(!Object(c["a"])(S))return;S.then((function(t){var i=new Float64Array(t.packedBuffer),a=v(e,i);e._indices=2===a?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._positions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds),e._batchIds=new Uint16Array(t.batchIds),e._ready=!0}))}e._ready&&!Object(c["a"])(e._primitive)&&(e._primitive=new p["a"]({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:Object(s["a"])(e._pickObject,e)}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0,e._readyPromise.resolve())}}g.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},g.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},g.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},g.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},g.prototype.update=function(e){I(this),this._ready&&(this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e))},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(h["a"])(this)},t["a"]=g},"619f":function(e,t,i){"use strict";var a=i("dc1c"),n=i("535a"),r=i("2f63"),o=i("9f1d"),s=i("55f9"),c=i("ddf7"),l=i("dd17"),h=i("fa1c");function d(e,t,i,n,r,o,s,c,l,h){this._tweens=e,this._tweenjs=t,this._startObject=Object(a["a"])(i),this._stopObject=Object(a["a"])(n),this._duration=r,this._delay=o,this._easingFunction=s,this._update=c,this._complete=l,this.cancel=h,this.needsStart=!0}function u(){this._tweens=[]}Object(o["a"])(d.prototype,{startObject:{get:function(){return this._startObject}},stopObject:{get:function(){return this._stopObject}},duration:{get:function(){return this._duration}},delay:{get:function(){return this._delay}},easingFunction:{get:function(){return this._easingFunction}},update:{get:function(){return this._update}},complete:{get:function(){return this._complete}},tweenjs:{get:function(){return this._tweenjs}}}),d.prototype.cancelTween=function(){this._tweens.remove(this)},Object(o["a"])(u.prototype,{length:{get:function(){return this._tweens.length}}}),u.prototype.add=function(e){if(e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),0===e.duration)return Object(r["a"])(e.complete)&&e.complete(),new d(this);var t=e.duration/l["a"].SECONDS_PER_MILLISECOND,i=Object(n["a"])(e.delay,0),o=i/l["a"].SECONDS_PER_MILLISECOND,c=Object(n["a"])(e.easingFunction,s["a"].LINEAR_NONE),u=e.startObject,_=new h["a"].Tween(u);_.to(Object(a["a"])(e.stopObject),t),_.delay(o),_.easing(c),Object(r["a"])(e.update)&&_.onUpdate((function(){e.update(u)})),_.onComplete(Object(n["a"])(e.complete,null)),_.repeat(Object(n["a"])(e._repeat,0));var f=new d(this,_,e.startObject,e.stopObject,e.duration,i,c,e.update,e.complete,e.cancel);return this._tweens.push(f),f},u.prototype.addProperty=function(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);var t=e.object,i=e.property,a=e.startValue,r=e.stopValue;function o(e){t[i]=e.value}return this.add({startObject:{value:a},stopObject:{value:r},duration:Object(n["a"])(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:o,complete:e.complete,cancel:e.cancel,_repeat:e._repeat})},u.prototype.addAlpha=function(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);var t=e.material,i=[];for(var a in t.uniforms)t.uniforms.hasOwnProperty(a)&&Object(r["a"])(t.uniforms[a])&&Object(r["a"])(t.uniforms[a].alpha)&&i.push(a);function o(e){for(var a=i.length,n=0;n<a;++n)t.uniforms[i[n]].alpha=e.alpha}return this.add({startObject:{alpha:Object(n["a"])(e.startValue,0)},stopObject:{alpha:Object(n["a"])(e.stopValue,1)},duration:Object(n["a"])(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:o,complete:e.complete,cancel:e.cancel})},u.prototype.addOffsetIncrement=function(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);var t=e.material,i=t.uniforms;return this.addProperty({object:i,property:"offset",startValue:i.offset,stopValue:i.offset+1,duration:e.duration,delay:e.delay,easingFunction:e.easingFunction,update:e.update,cancel:e.cancel,_repeat:1/0})},u.prototype.remove=function(e){if(!Object(r["a"])(e))return!1;var t=this._tweens.indexOf(e);return-1!==t&&(e.tweenjs.stop(),Object(r["a"])(e.cancel)&&e.cancel(),this._tweens.splice(t,1),!0)},u.prototype.removeAll=function(){for(var e=this._tweens,t=0;t<e.length;++t){var i=e[t];i.tweenjs.stop(),Object(r["a"])(i.cancel)&&i.cancel()}e.length=0},u.prototype.contains=function(e){return Object(r["a"])(e)&&-1!==this._tweens.indexOf(e)},u.prototype.get=function(e){return this._tweens[e]},u.prototype.update=function(e){var t=this._tweens,i=0;e=Object(r["a"])(e)?e/l["a"].SECONDS_PER_MILLISECOND:Object(c["a"])();while(i<t.length){var a=t[i],n=a.tweenjs;a.needsStart?(a.needsStart=!1,n.start(e)):n.update(e)?i++:(n.stop(),t.splice(i,1))}},t["a"]=u},c3f4:function(e,t,i){"use strict";var a=i("0e25"),n={REINHARD:0,MODIFIED_REINHARD:1,FILMIC:2,ACES:3,validate:function(e){return e===n.REINHARD||e===n.MODIFIED_REINHARD||e===n.FILMIC||e===n.ACES}};t["a"]=Object(a["a"])(n)},d8f6:function(e,t,i){"use strict";function a(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}t["a"]=a},e288:function(e,t,i){"use strict";var a=i("670c"),n=i("be18"),r=i("bef8"),o=i("2bb9"),s=i("8dfe"),c=i("535a"),l=i("2f63"),h=i("9f1d"),d=i("21d7"),u=i("3d7f"),_=i("c2aa"),f=i("93da"),b=i("eace"),p=i("d4ed"),g=i("d3a0"),m=i("a58e"),v=i("64ac"),y=/{[^}]+}/g,O={x:D,y:N,z:F,s:H,reverseX:B,reverseY:M,reverseZ:R,westDegrees:W,southDegrees:V,eastDegrees:z,northDegrees:Y,westProjected:K,southProjected:Z,eastProjected:J,northProjected:X,width:Q,height:q},I=Object(o["a"])(O,{i:$,j:ee,reverseI:te,reverseJ:ie,longitudeDegrees:oe,latitudeDegrees:se,longitudeProjected:ce,latitudeProjected:le,format:ue});function C(e){this._errorEvent=new d["a"],this._resource=void 0,this._urlSchemeZeroPadding=void 0,this._pickFeaturesResource=void 0,this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._minimumLevel=void 0,this._tilingScheme=void 0,this._rectangle=void 0,this._tileDiscardPolicy=void 0,this._credit=void 0,this._hasAlphaChannel=void 0,this._readyPromise=void 0,this._tags=void 0,this._pickFeaturesTags=void 0,this.enablePickFeatures=!0,this.reinitialize(e)}Object(h["a"])(C.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return Object(l["a"])(this._resource)}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return this._hasAlphaChannel}}}),C.prototype.reinitialize=function(e){var t=this;t._readyPromise=Object(m["a"])(e).then((function(e){var i=e.customTags,a=Object(o["a"])(O,i),n=Object(o["a"])(I,i),r=p["a"].createIfNeeded(e.url),h=p["a"].createIfNeeded(e.pickFeaturesUrl);t.enablePickFeatures=Object(c["a"])(e.enablePickFeatures,t.enablePickFeatures),t._urlSchemeZeroPadding=Object(c["a"])(e.urlSchemeZeroPadding,t.urlSchemeZeroPadding),t._tileDiscardPolicy=e.tileDiscardPolicy,t._getFeatureInfoFormats=e.getFeatureInfoFormats,t._subdomains=e.subdomains,Object(_["a"])(t._subdomains)?t._subdomains=t._subdomains.slice():Object(l["a"])(t._subdomains)&&t._subdomains.length>0?t._subdomains=t._subdomains.split(""):t._subdomains=["a","b","c"],t._tileWidth=Object(c["a"])(e.tileWidth,256),t._tileHeight=Object(c["a"])(e.tileHeight,256),t._minimumLevel=Object(c["a"])(e.minimumLevel,0),t._maximumLevel=e.maximumLevel,t._tilingScheme=Object(c["a"])(e.tilingScheme,new g["a"]({ellipsoid:e.ellipsoid})),t._rectangle=Object(c["a"])(e.rectangle,t._tilingScheme.rectangle),t._rectangle=b["a"].intersection(t._rectangle,t._tilingScheme.rectangle),t._hasAlphaChannel=Object(c["a"])(e.hasAlphaChannel,!0);var d=e.credit;return"string"===typeof d&&(d=new s["a"](d)),t._credit=d,t._resource=r,t._tags=a,t._pickFeaturesResource=h,t._pickFeaturesTags=n,!0}))},C.prototype.getTileCredits=function(e,t,i){},C.prototype.requestImage=function(e,t,i,a){return v["a"].loadImage(this,E(this,e,t,i,a))},C.prototype.pickFeatures=function(e,t,i,a,n){if(this.enablePickFeatures&&Object(l["a"])(this._pickFeaturesResource)&&0!==this._getFeatureInfoFormats.length){var r=0,o=this;return c()}function s(e,t){return e.callback(t)}function c(){if(r>=o._getFeatureInfoFormats.length)return Object(m["a"])([]);var l=o._getFeatureInfoFormats[r],h=L(o,e,t,i,a,n,l.format);return++r,"json"===l.type?h.fetchJson().then(l.callback).otherwise(c):"xml"===l.type?h.fetchXML().then(l.callback).otherwise(c):"text"===l.type||"html"===l.type?h.fetchText().then(l.callback).otherwise(c):h.fetch({responseType:l.format}).then(s.bind(void 0,l)).otherwise(c)}};var T=!1,S=new b["a"],j=!1,P=new b["a"];function E(e,t,i,a,n){T=!1,j=!1;var r=e._resource,o=r.getUrlComponent(!0),s=e._tags,c={},h=o.match(y);return Object(l["a"])(h)&&h.forEach((function(n){var r=n.substring(1,n.length-1);Object(l["a"])(s[r])&&(c[r]=s[r](e,t,i,a))})),r.getDerivedResource({request:n,templateValues:c})}var x=!1,w=new a["a"],A=!1;function L(e,t,i,a,n,r,o){T=!1,j=!1,x=!1,A=!1;var s=e._pickFeaturesResource,c=s.getUrlComponent(!0),h=e._pickFeaturesTags,d={},u=c.match(y);return Object(l["a"])(u)&&u.forEach((function(s){var c=s.substring(1,s.length-1);Object(l["a"])(h[c])&&(d[c]=h[c](e,t,i,a,n,r,o))})),s.getDerivedResource({templateValues:d})}function k(e,t,i){if(e&&e.urlSchemeZeroPadding&&e.urlSchemeZeroPadding.hasOwnProperty(t)){var a=e.urlSchemeZeroPadding[t];if("string"===typeof a){var n=a.length;n>1&&(i=i.length>=n?i:new Array(n-i.toString().length+1).join("0")+i)}}return i}function D(e,t,i,a){return k(e,"{x}",t)}function B(e,t,i,a){var n=e.tilingScheme.getNumberOfXTilesAtLevel(a)-t-1;return k(e,"{reverseX}",n)}function N(e,t,i,a){return k(e,"{y}",i)}function M(e,t,i,a){var n=e.tilingScheme.getNumberOfYTilesAtLevel(a)-i-1;return k(e,"{reverseY}",n)}function R(e,t,i,a){var n=e.maximumLevel,r=Object(l["a"])(n)&&a<n?n-a-1:a;return k(e,"{reverseZ}",r)}function F(e,t,i,a){return k(e,"{z}",a)}function H(e,t,i,a){var n=(t+i+a)%e._subdomains.length;return e._subdomains[n]}function U(e,t,i,a){T||(e.tilingScheme.tileXYToRectangle(t,i,a,S),S.west=f["a"].toDegrees(S.west),S.south=f["a"].toDegrees(S.south),S.east=f["a"].toDegrees(S.east),S.north=f["a"].toDegrees(S.north),T=!0)}function W(e,t,i,a){return U(e,t,i,a),S.west}function V(e,t,i,a){return U(e,t,i,a),S.south}function z(e,t,i,a){return U(e,t,i,a),S.east}function Y(e,t,i,a){return U(e,t,i,a),S.north}function G(e,t,i,a){j||(e.tilingScheme.tileXYToNativeRectangle(t,i,a,P),j=!0)}function K(e,t,i,a){return G(e,t,i,a),P.west}function Z(e,t,i,a){return G(e,t,i,a),P.south}function J(e,t,i,a){return G(e,t,i,a),P.east}function X(e,t,i,a){return G(e,t,i,a),P.north}function Q(e,t,i,a){return e.tileWidth}function q(e,t,i,a){return e.tileHeight}function $(e,t,i,a,n,r,o){return re(e,t,i,a,n,r),w.x}function ee(e,t,i,a,n,r,o){return re(e,t,i,a,n,r),w.y}function te(e,t,i,a,n,r,o){return re(e,t,i,a,n,r),e.tileWidth-w.x-1}function ie(e,t,i,a,n,r,o){return re(e,t,i,a,n,r),e.tileHeight-w.y-1}var ae=new b["a"],ne=new n["a"];function re(e,t,i,a,n,r,o){if(!x){de(e,t,i,a,n,r);var s=ne,c=e.tilingScheme.tileXYToNativeRectangle(t,i,a,ae);w.x=e.tileWidth*(s.x-c.west)/c.width|0,w.y=e.tileHeight*(c.north-s.y)/c.height|0,x=!0}}function oe(e,t,i,a,n,r,o){return f["a"].toDegrees(n)}function se(e,t,i,a,n,r,o){return f["a"].toDegrees(r)}function ce(e,t,i,a,n,r,o){return de(e,t,i,a,n,r),ne.x}function le(e,t,i,a,n,r,o){return de(e,t,i,a,n,r),ne.y}var he=new r["a"];function de(e,t,i,a,n,r,o){if(!A){if(e.tilingScheme.projection instanceof u["a"])ne.x=f["a"].toDegrees(n),ne.y=f["a"].toDegrees(r);else{var s=he;s.longitude=n,s.latitude=r,e.tilingScheme.projection.project(s,ne)}A=!0}}function ue(e,t,i,a,n,r,o){return o}t["a"]=C}}]);