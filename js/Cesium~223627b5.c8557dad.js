(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~223627b5"],{"1ec0":function(e,t,a){"use strict";var r=a("cef5"),i=a("be18"),n=a("bef8"),o=a("9541"),s=a("535a"),c=a("9f1d"),u=a("c52f"),l=a("d940"),h=a("5410"),d=a("52f0"),m=a("78e5"),g=a("188e"),p=a("2ac3"),f=a("eace"),_=a("24a2"),b=a("3a8e"),v=a("894b"),y=a("a307");function O(e){this.rectangle=f["a"].clone(e.rectangle),this.minimumHeight=Object(s["a"])(e.minimumHeight,0),this.maximumHeight=Object(s["a"])(e.maximumHeight,0),this.southwestCornerCartesian=new i["a"],this.northeastCornerCartesian=new i["a"],this.westNormal=new i["a"],this.southNormal=new i["a"],this.eastNormal=new i["a"],this.northNormal=new i["a"];var t=Object(s["a"])(e.ellipsoid,u["a"].WGS84);P(this,e.rectangle,t),Object(s["a"])(e.computeBoundingVolumes,!0)&&(this._orientedBoundingBox=m["a"].fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,t),this._boundingSphere=r["a"].fromOrientedBoundingBox(this._orientedBoundingBox))}Object(c["a"])(O.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}});var j=new i["a"],w=new i["a"],x=new i["a"],I=new i["a"],S=new i["a"],C=new i["a"],N=new n["a"],E=new g["a"](i["a"].UNIT_X,0),T=new p["a"];function P(e,t,a){a.cartographicToCartesian(f["a"].southwest(t),e.southwestCornerCartesian),a.cartographicToCartesian(f["a"].northeast(t),e.northeastCornerCartesian),N.longitude=t.west,N.latitude=.5*(t.south+t.north),N.height=0;var r=a.cartographicToCartesian(N,S),n=i["a"].cross(r,i["a"].UNIT_Z,j);i["a"].normalize(n,e.westNormal),N.longitude=t.east;var o=a.cartographicToCartesian(N,C),s=i["a"].cross(i["a"].UNIT_Z,o,j);i["a"].normalize(s,e.eastNormal);var c,u=i["a"].subtract(r,o,j),l=i["a"].normalize(u,I),d=t.south;if(d>0){N.longitude=.5*(t.west+t.east),N.latitude=d;var m=a.cartographicToCartesian(N,T.origin);i["a"].clone(l,T.direction);var p=g["a"].fromPointNormal(e.southwestCornerCartesian,e.westNormal,E);h["a"].rayPlane(T,p,e.southwestCornerCartesian),c=a.geodeticSurfaceNormal(m,w)}else c=a.geodeticSurfaceNormalCartographic(f["a"].southeast(t),w);var _=i["a"].cross(c,u,x);i["a"].normalize(_,e.southNormal);var b,v=t.north;if(v<0){N.longitude=.5*(t.west+t.east),N.latitude=v;var y=a.cartographicToCartesian(N,T.origin);i["a"].negate(l,T.direction);var O=g["a"].fromPointNormal(e.northeastCornerCartesian,e.eastNormal,E);h["a"].rayPlane(T,O,e.northeastCornerCartesian),b=a.geodeticSurfaceNormal(y,w)}else b=a.geodeticSurfaceNormalCartographic(f["a"].northwest(t),w);var P=i["a"].cross(u,b,x);i["a"].normalize(P,e.northNormal)}var F=new i["a"],D=new i["a"],B=new i["a"](0,-1,0),R=new i["a"](0,0,-1),L=new i["a"];O.prototype.distanceToCamera=function(e){var t,a,r,n=e.camera,o=n.positionWC,s=n.positionCartographic,c=0;if(!f["a"].contains(this.rectangle,s)){var u=this.southwestCornerCartesian,l=this.northeastCornerCartesian,h=this.westNormal,d=this.southNormal,m=this.eastNormal,g=this.northNormal;e.mode!==y["a"].SCENE3D&&(u=e.mapProjection.project(f["a"].southwest(this.rectangle),F),u.z=u.y,u.y=u.x,u.x=0,l=e.mapProjection.project(f["a"].northeast(this.rectangle),D),l.z=l.y,l.y=l.x,l.x=0,h=B,m=i["a"].UNIT_Y,d=R,g=i["a"].UNIT_Z);var p=i["a"].subtract(o,u,L),_=i["a"].dot(p,h),b=i["a"].dot(p,d),v=i["a"].subtract(o,l,L),O=i["a"].dot(v,m),j=i["a"].dot(v,g);_>0?c+=_*_:O>0&&(c+=O*O),b>0?c+=b*b:j>0&&(c+=j*j)}if(e.mode===y["a"].SCENE3D?(t=s.height,a=this.minimumHeight,r=this.maximumHeight):(t=o.x,a=0,r=0),t>r){var w=t-r;c+=w*w}else if(t<a){var x=a-t;c+=x*x}return Math.sqrt(c)},O.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)},O.prototype.createDebugVolume=function(e){var t=new d["a"].clone(d["a"].IDENTITY),a=new _["a"]({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),r=new l["a"]({geometry:a,id:"outline",modelMatrix:t,attributes:{color:o["a"].fromColor(e)}});return new v["a"]({geometryInstances:r,appearance:new b["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=O},3995:function(e,t,a){"use strict";var r=a("535a"),i=a("9f1d"),n=a("7d62"),o=a("129b"),s=a("283e"),c=a("a58e");function u(e,t,a,r,i){this._tileset=e,this._tile=t,this._resource=a,this._readyPromise=c["a"].defer(),this.featurePropertiesDirty=!1,l(this,r,i)}function l(e,t,a){a=Object(r["a"])(a,0);var i,n=new Uint8Array(t),c=Object(o["a"])(n,a);try{i=JSON.parse(c)}catch(u){return void e._readyPromise.reject(new s["a"]("Invalid tile content."))}e._tileset.loadTileset(e._resource,i,e._tile),e._readyPromise.resolve(e)}Object(i["a"])(u.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise.promise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}}}),u.prototype.hasProperty=function(e,t){return!1},u.prototype.getFeature=function(e){},u.prototype.applyDebugSettings=function(e,t){},u.prototype.applyStyle=function(e){},u.prototype.update=function(e,t){},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return Object(n["a"])(this)},t["a"]=u},"3a92":function(e,t,a){"use strict";var r=a("2f63");function i(){this.head=void 0,this.tail=void 0,this.count=0,this._lastBeforeStartOfFrame=void 0}function n(e,t){var a=t.replacementPrevious,r=t.replacementNext;t===e._lastBeforeStartOfFrame&&(e._lastBeforeStartOfFrame=r),t===e.head?e.head=r:a.replacementNext=r,t===e.tail?e.tail=a:r.replacementPrevious=a,t.replacementPrevious=void 0,t.replacementNext=void 0,--e.count}i.prototype.markStartOfRenderFrame=function(){this._lastBeforeStartOfFrame=this.head},i.prototype.trimTiles=function(e){var t=this.tail,a=!0;while(a&&Object(r["a"])(this._lastBeforeStartOfFrame)&&this.count>e&&Object(r["a"])(t)){a=t!==this._lastBeforeStartOfFrame;var i=t.replacementPrevious;t.eligibleForUnloading&&(t.freeResources(),n(this,t)),t=i}},i.prototype.markTileRendered=function(e){var t=this.head;if(t!==e){if(++this.count,!Object(r["a"])(t))return e.replacementPrevious=void 0,e.replacementNext=void 0,this.head=e,void(this.tail=e);(Object(r["a"])(e.replacementPrevious)||Object(r["a"])(e.replacementNext))&&n(this,e),e.replacementPrevious=void 0,e.replacementNext=t,t.replacementPrevious=e,this.head=e}else e===this._lastBeforeStartOfFrame&&(this._lastBeforeStartOfFrame=e.replacementNext)},t["a"]=i},"663d":function(e,t,a){"use strict";var r=a("2f63"),i=a("dddf");function n(e,t,a){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=a}n.prototype.freeResources=function(){Object(r["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),Object(r["a"])(this.loadingImagery)&&this.loadingImagery.releaseReference()},n.prototype.processStateMachine=function(e,t,a){var n=this.loadingImagery,o=n.imageryLayer;if(n.processStateMachine(t,!this.useWebMercatorT,a),n.state===i["a"].READY)return Object(r["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this),!0;var s,c=n.parent;while(Object(r["a"])(c)&&(c.state!==i["a"].READY||!this.useWebMercatorT&&!Object(r["a"])(c.texture)))c.state!==i["a"].FAILED&&c.state!==i["a"].INVALID&&(s=s||c),c=c.parent;return this.readyImagery!==c&&(Object(r["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=c,Object(r["a"])(c)&&(c.addReference(),this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this))),(n.state===i["a"].FAILED||n.state===i["a"].INVALID)&&(!Object(r["a"])(s)||(s.processStateMachine(t,!this.useWebMercatorT,a),!1))},t["a"]=n},"72c2":function(e,t,a){"use strict";var r=a("2c34"),i=a("2bb9"),n=a("535a"),o=a("2f63"),s=a("9f1d"),c=a("7d62"),u=a("21d7"),l=a("ddf7"),h=a("5ed2"),d=a("93da"),m=a("52f0"),g=a("d4ed"),p=a("a58e"),f=a("43ee"),_=a("3443"),b=a("2ab8"),v=a("7b4a"),y=a("a307"),O=a("c86b");function j(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),this.show=Object(n["a"])(e.show,!0),this.modelMatrix=m["a"].clone(Object(n["a"])(e.modelMatrix,m["a"].IDENTITY)),this.shadows=Object(n["a"])(e.shadows,O["a"].ENABLED),this.maximumMemoryUsage=Object(n["a"])(e.maximumMemoryUsage,256),this.shading=new v["a"](e.shading),this.style=e.style,this.frameFailed=new u["a"],this.frameChanged=new u["a"],this._clock=e.clock,this._intervals=e.intervals,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._pointCloudEyeDomeLighting=new b["a"],this._loadTimestamp=void 0,this._clippingPlanesState=0,this._styleDirty=!1,this._pickId=void 0,this._totalMemoryUsageInBytes=0,this._frames=[],this._previousInterval=void 0,this._nextInterval=void 0,this._lastRenderedFrame=void 0,this._clockMultiplier=0,this._readyPromise=p["a"].defer(),this._runningSum=0,this._runningLength=0,this._runningIndex=0,this._runningSamples=Object(r["a"])(new Array(5),0),this._runningAverage=0}function w(e){return"uniform vec4 czm_pickColor;\n"+e}function x(e){return function(t){return Object(i["a"])(t,{czm_pickColor:function(){return e._pickId.color}})}}function I(){return"czm_pickColor"}Object(s["a"])(j.prototype,{clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){f["a"].setOwner(e,this,"_clippingPlanes")}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes}},boundingSphere:{get:function(){if(Object(o["a"])(this._lastRenderedFrame))return this._lastRenderedFrame.pointCloud.boundingSphere}},readyPromise:{get:function(){return this._readyPromise.promise}}}),j.prototype.makeStyleDirty=function(){this._styleDirty=!0},j.prototype._getAverageLoadTime=function(){return 0===this._runningLength?.05:this._runningAverage};var S=new h["a"];function C(e){var t=e._clock,a=t.canAnimate&&t.shouldAnimate,r=t.multiplier;return a?r:0}function N(e,t){return e._intervals.indexOf(t.start)}function E(e,t){var a=e._intervals,r=e._clock,i=C(e);if(0!==i){var n=e._getAverageLoadTime(),o=h["a"].addSeconds(r.currentTime,n*i,S),s=a.indexOf(o),c=N(e,t);return s===c&&(i>=0?++s:--s),a.get(s)}}function T(e){var t=e._intervals,a=e._clock,r=a.currentTime,i=t.indexOf(r);return t.get(i)}function P(e,t,a){var r=C(e),i=N(e,t),n=N(e,a);return r>=0?i>=n:i<=n}function F(e,t){return function(a){var r=Object(o["a"])(a.message)?a.message:a.toString();e.frameFailed.numberOfListeners>0?e.frameFailed.raiseEvent({uri:t,message:r}):(console.log("A frame failed to load: "+t),console.log("Error: "+r))}}function D(e,t,a){var r=N(e,t),i=e._frames,n=i[r];if(!Object(o["a"])(n)){var s=t.data.transform,c=Object(o["a"])(s)?m["a"].fromArray(s):void 0,u=t.data.uri;n={pointCloud:void 0,transform:c,timestamp:Object(l["a"])(),sequential:!0,ready:!1,touchedFrameNumber:a.frameNumber},i[r]=n,g["a"].fetchArrayBuffer({url:u}).then((function(t){return n.pointCloud=new _["a"]({arrayBuffer:t,cull:!0,fragmentShaderLoaded:w,uniformMapLoaded:x(e),pickIdLoaded:I}),n.pointCloud.readyPromise})).otherwise(F(e,u))}return n}function B(e,t){e._runningSum+=t,e._runningSum-=e._runningSamples[e._runningIndex],e._runningSamples[e._runningIndex]=t,e._runningLength=Math.min(e._runningLength+1,e._runningSamples.length),e._runningIndex=(e._runningIndex+1)%e._runningSamples.length,e._runningAverage=e._runningSum/e._runningLength}function R(e,t,a,r){t.touchedFrameNumber<r.frameNumber-1&&(t.sequential=!1);var i=t.pointCloud;if(Object(o["a"])(i)&&!t.ready){var n=r.commandList,s=n.length;if(q(e,t,a,r),i.ready&&(t.ready=!0,e._totalMemoryUsageInBytes+=i.geometryByteLength,n.length=s,t.sequential)){var c=(Object(l["a"])()-t.timestamp)/1e3;B(e,c)}}t.touchedFrameNumber=r.frameNumber}var L=new m["a"];function k(e,t){var a=e.shading;return Object(o["a"])(a)&&Object(o["a"])(a.baseResolution)?a.baseResolution:Object(o["a"])(t.boundingSphere)?d["a"].cbrt(t.boundingSphere.volume()/t.pointsLength):0}function A(e){var t=e.shading;return Object(o["a"])(t)&&Object(o["a"])(t.maximumAttenuation)?t.maximumAttenuation:10}var M=new v["a"];function q(e,t,a,r){var i=Object(n["a"])(e.shading,M),o=t.pointCloud,s=Object(n["a"])(t.transform,m["a"].IDENTITY);o.modelMatrix=m["a"].multiplyTransformation(e.modelMatrix,s,L),o.style=e.style,o.time=a.timeSinceLoad,o.shadows=e.shadows,o.clippingPlanes=e._clippingPlanes,o.isClipped=a.isClipped,o.attenuation=i.attenuation,o.backFaceCulling=i.backFaceCulling,o.normalShading=i.normalShading,o.geometricError=k(e,o),o.geometricErrorScale=i.geometricErrorScale,o.maximumAttenuation=A(e),o.update(r),t.touchedFrameNumber=r.frameNumber}function U(e,t,a,r){var i=D(e,t,r);R(e,i,a,r)}function Y(e){return function(t){return t.touchedFrameNumber<e.frameNumber}}function H(e,t){for(var a=e._frames,r=a.length,i=0;i<r;++i){var n=a[i];if(Object(o["a"])(n)&&(!Object(o["a"])(t)||t(n))){var s=n.pointCloud;n.ready&&(e._totalMemoryUsageInBytes-=s.geometryByteLength),Object(o["a"])(s)&&s.destroy(),n===e._lastRenderedFrame&&(e._lastRenderedFrame=void 0),a[i]=void 0}}}function z(e,t){var a=N(e,t),r=e._frames[a];if(Object(o["a"])(r)&&r.ready)return r}function W(e,t,a,r,i){return!!Object(o["a"])(a)&&(!!a.ready||(U(e,t,r,i),a.ready))}function V(e,t,a,r,i){var n,o,s,c=e._intervals,u=e._frames,l=N(e,a),h=N(e,t);if(l>=h){for(n=l;n>=h;--n)if(o=c.get(n),s=u[n],W(e,o,s,r,i))return o}else for(n=l;n<=h;++n)if(o=c.get(n),s=u[n],W(e,o,s,r,i))return o;return t}function K(e,t,a){for(var r=e._frames,i=r.length,n=0;n<i;++n){var s=r[n];Object(o["a"])(s)&&Object(o["a"])(s.pointCloud)&&(s.pointCloud.clippingPlanesDirty=t,s.pointCloud.styleDirty=a)}}var X={timeSinceLoad:0,isClipped:!1,clippingPlanesDirty:!1};j.prototype.update=function(e){if(e.mode!==y["a"].MORPHING&&this.show){Object(o["a"])(this._pickId)||(this._pickId=e.context.createPickId({primitive:this})),Object(o["a"])(this._loadTimestamp)||(this._loadTimestamp=h["a"].clone(e.time));var t=Math.max(1e3*h["a"].secondsDifference(e.time,this._loadTimestamp),0),a=this._clippingPlanes,r=0,i=!1,n=Object(o["a"])(a)&&a.enabled;n&&(a.update(e),r=a.clippingPlanesState),this._clippingPlanesState!==r&&(this._clippingPlanesState=r,i=!0);var s=this._styleDirty;this._styleDirty=!1,(i||s)&&K(this,i,s),X.timeSinceLoad=t,X.isClipped=n;var c=this.shading,u=this._pointCloudEyeDomeLighting,l=e.commandList,d=l.length,m=this._previousInterval,g=this._nextInterval,p=T(this);if(Object(o["a"])(p)){var f=!1,_=C(this),b=0===_;_!==this._clockMultiplier&&(f=!0,this._clockMultiplier=_),Object(o["a"])(m)&&!b||(m=p),(!Object(o["a"])(g)||f||P(this,p,g))&&(g=E(this,p)),m=V(this,m,p,X,e);var v=z(this,m);Object(o["a"])(v)||(U(this,m,X,e),v=this._lastRenderedFrame),Object(o["a"])(v)&&q(this,v,X,e),Object(o["a"])(g)&&U(this,g,X,e);var O=this;Object(o["a"])(v)&&!Object(o["a"])(this._lastRenderedFrame)&&e.afterRender.push((function(){O._readyPromise.resolve(O)})),Object(o["a"])(v)&&v!==this._lastRenderedFrame&&O.frameChanged.numberOfListeners>0&&e.afterRender.push((function(){O.frameChanged.raiseEvent(O)})),this._previousInterval=m,this._nextInterval=g,this._lastRenderedFrame=v;var j=this._totalMemoryUsageInBytes,w=1024*this.maximumMemoryUsage*1024;j>w&&H(this,Y(e));var x=l.length,I=x-d;Object(o["a"])(c)&&c.attenuation&&c.eyeDomeLighting&&I>0&&u.update(e,d,c)}}},j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){return H(this),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),Object(c["a"])(this)},t["a"]=j},7596:function(e,t,a){"use strict";var r=a("535a"),i=a("2f63"),n=a("9f1d"),o=a("5ed2"),s=a("de66"),c=a("b82e");function u(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),this._tileCache={},this._tilesRequestedForInterval=[];var t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}function l(e,t,a){return e+"-"+t+"-"+a}function h(e){var t=e.split("-");if(3===t.length)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}function d(e){var t=e._times;if(Object(i["a"])(t)){var a=e._clock,r=a.currentTime,n=a.canAnimate&&a.shouldAnimate,s=a.multiplier;if(n||0===s){var c,u=t.indexOf(r);if(!(u<0)){var l=t.get(u);return s>0?(c=o["a"].secondsDifference(l.stop,r),++u):(c=o["a"].secondsDifference(l.start,r),--u),c/=s,u>=0&&c<=5?t.get(u):void 0}}}}function m(e,t,a){var r=e._times.indexOf(a.start),n=e._tileCache,o=n[r];Object(i["a"])(o)||(o=n[r]={});var u=t.key;if(Object(i["a"])(o[u]))return!0;var l=h(u),d=new s["a"]({throttle:!0,throttleByServer:!0,type:c["a"].IMAGERY,priorityFunction:t.priorityFunction}),m=e._requestImageFunction(l.x,l.y,l.level,d,a);return!!Object(i["a"])(m)&&(o[u]={promise:m,request:d},!0)}Object(n["a"])(u.prototype,{clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}}),u.prototype.getFromCache=function(e,t,a,r){var n,o=l(e,t,a),s=this._tileCache[this._currentIntervalIndex];if(Object(i["a"])(s)&&Object(i["a"])(s[o])){var c=s[o];n=c.promise.otherwise((function(e){throw r.state=c.request.state,e})),delete s[o]}return n},u.prototype.checkApproachingInterval=function(e,t,a,r){var n=l(e,t,a),o=this._tilesRequestedForInterval,s=d(this),c={key:n,priorityFunction:r.priorityFunction};Object(i["a"])(s)&&m(this,c,s)||o.push(c),o.length>=512&&o.splice(0,256)},u.prototype._clockOnTick=function(e){var t=e.currentTime,a=this._times,r=a.indexOf(t),n=this._currentIntervalIndex;if(r!==n){var o=this._tileCache[n];for(var s in o)o.hasOwnProperty(s)&&o[s].request.cancel();return delete this._tileCache[n],this._tilesRequestedForInterval=[],this._currentIntervalIndex=r,void this._reloadFunction()}var c=d(this);if(Object(i["a"])(c)){var u=this._tilesRequestedForInterval,l=!0;while(l){if(0===u.length)break;var h=u.pop();l=m(this,h,c),l||u.push(h)}}},t["a"]=u},"8cfb":function(e,t,a){"use strict";var r=a("cef5"),i=a("b081"),n=a("be18"),o=a("9541"),s=a("9f1d"),c=a("d940"),u=a("df07"),l=a("52f0"),h=a("93da"),d=a("78e5"),m=a("3a8e"),g=a("894b"),p=new n["a"],f=new n["a"],_=new n["a"],b=new n["a"];function v(e,t,a){a=n["a"].cross(e,t,a);var r=n["a"].magnitude(a);return n["a"].multiplyByScalar(a,h["a"].EPSILON7/r,a)}function y(e,t){var a=n["a"].normalize(e,b),r=n["a"].equalsEpsilon(a,n["a"].UNIT_X,h["a"].EPSILON6)?n["a"].UNIT_Y:n["a"].UNIT_X;return v(e,r,t)}function O(e){var t=u["a"].getColumn(e,0,p),a=u["a"].getColumn(e,1,f),r=u["a"].getColumn(e,2,_),i=n["a"].equals(t,n["a"].ZERO),o=n["a"].equals(a,n["a"].ZERO),s=n["a"].equals(r,n["a"].ZERO);return i||o||s?i&&o&&s?(e[0]=h["a"].EPSILON7,e[4]=h["a"].EPSILON7,e[8]=h["a"].EPSILON7,e):(!i||o||s?i||!o||s?i||o||!s?i?o?s||(t=y(r,t),a=v(r,t,a)):(t=y(a,t),r=v(a,t,r)):(a=y(t,a),r=v(a,t,r)):r=v(a,t,r):a=v(t,r,a):t=v(a,r,t),u["a"].setColumn(e,0,t,e),u["a"].setColumn(e,1,a,e),u["a"].setColumn(e,2,r,e),e):e}function j(e,t){t=O(t),this._orientedBoundingBox=new d["a"](e,t),this._boundingSphere=r["a"].fromOrientedBoundingBox(this._orientedBoundingBox)}Object(s["a"])(j.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),j.prototype.distanceToCamera=function(e){return Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC))},j.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)},j.prototype.update=function(e,t){n["a"].clone(e,this._orientedBoundingBox.center),t=O(t),u["a"].clone(t,this._orientedBoundingBox.halfAxes),r["a"].fromOrientedBoundingBox(this._orientedBoundingBox,this._boundingSphere)},j.prototype.createDebugVolume=function(e){var t=new i["a"]({minimum:new n["a"](-1,-1,-1),maximum:new n["a"](1,1,1)}),a=l["a"].fromRotationTranslation(this.boundingVolume.halfAxes,this.boundingVolume.center),r=new c["a"]({geometry:t,id:"outline",modelMatrix:a,attributes:{color:o["a"].fromColor(e)}});return new g["a"]({geometryInstances:r,appearance:new m["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=j},eb1f:function(e,t,a){"use strict";var r=a("cef5"),i=a("be18"),n=a("9541"),o=a("9f1d"),s=a("d940"),c=a("93da"),u=a("52f0"),l=a("98f6"),h=a("3a8e"),d=a("894b");function m(e,t){0===t&&(t=c["a"].EPSILON7),this._boundingSphere=new r["a"](e,t)}Object(o["a"])(m.prototype,{center:{get:function(){return this._boundingSphere.center}},radius:{get:function(){return this._boundingSphere.radius}},boundingVolume:{get:function(){return this._boundingSphere}},boundingSphere:{get:function(){return this._boundingSphere}}}),m.prototype.distanceToCamera=function(e){var t=this._boundingSphere;return Math.max(0,i["a"].distance(t.center,e.camera.positionWC)-t.radius)},m.prototype.intersectPlane=function(e){return r["a"].intersectPlane(this._boundingSphere,e)},m.prototype.update=function(e,t){i["a"].clone(e,this._boundingSphere.center),this._boundingSphere.radius=t},m.prototype.createDebugVolume=function(e){var t=new l["a"]({radius:this.radius}),a=u["a"].fromTranslation(this.center,new u["a"].clone(u["a"].IDENTITY)),r=new s["a"]({geometry:t,id:"outline",modelMatrix:a,attributes:{color:n["a"].fromColor(e)}});return new d["a"]({geometryInstances:r,appearance:new h["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=m},ed98:function(e,t,a){"use strict";var r=a("670c"),i=a("bef8"),n=a("535a"),o=a("2f63"),s=a("3d7f"),c=a("5d5c"),u=a("eace"),l=a("d4ed"),h=a("283e"),d=a("a89b"),m=a("d3a0"),g=a("a58e"),p=a("e288");function f(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);var t,a=g["a"].defer();p["a"].call(this,a.promise),this._tmsResource=void 0,this._xmlResource=void 0,this._options=e,this._deferred=a,this._metadataError=void 0,this._metadataSuccess=this._metadataSuccess.bind(this),this._metadataFailure=this._metadataFailure.bind(this),this._requestMetadata=this._requestMetadata.bind(this);var r=this;Object(g["a"])(e.url).then((function(e){t=l["a"].createIfNeeded(e),t.appendForwardSlash(),r._tmsResource=t,r._xmlResource=t.getDerivedResource({url:"tilemapresource.xml"}),r._requestMetadata()})).otherwise((function(e){a.reject(e)}))}Object(o["a"])(Object.create)&&(f.prototype=Object.create(p["a"].prototype),f.prototype.constructor=f),f.prototype._requestMetadata=function(){this._xmlResource.fetchXML().then(this._metadataSuccess).otherwise(this._metadataFailure)},f.prototype._metadataSuccess=function(e){for(var t,a,l,g,p=/tileformat/i,f=/tileset/i,_=/tilesets/i,b=/boundingbox/i,v=[],y=this._xmlResource,O=this._metadataError,j=this._deferred,w=this._requestMetadata,x=e.childNodes[0].childNodes,I=0;I<x.length;I++)if(p.test(x.item(I).nodeName))t=x.item(I);else if(_.test(x.item(I).nodeName)){l=x.item(I);for(var S=x.item(I).childNodes,C=0;C<S.length;C++)f.test(S.item(C).nodeName)&&v.push(S.item(C))}else b.test(x.item(I).nodeName)&&(a=x.item(I));if(!Object(o["a"])(l)||!Object(o["a"])(a))return g="Unable to find expected tilesets or bbox attributes in "+y.url+".",O=d["a"].handleError(O,this,this.errorEvent,g,void 0,void 0,void 0,w),O.retry||j.reject(new h["a"](g)),void(this._metadataError=O);var N=this._options,E=Object(n["a"])(N.fileExtension,t.getAttribute("extension")),T=Object(n["a"])(N.tileWidth,parseInt(t.getAttribute("width"),10)),P=Object(n["a"])(N.tileHeight,parseInt(t.getAttribute("height"),10)),F=Object(n["a"])(N.minimumLevel,parseInt(v[0].getAttribute("order"),10)),D=Object(n["a"])(N.maximumLevel,parseInt(v[v.length-1].getAttribute("order"),10)),B=l.getAttribute("profile"),R=N.tilingScheme;if(!Object(o["a"])(R))if("geodetic"===B||"global-geodetic"===B)R=new c["a"]({ellipsoid:N.ellipsoid});else{if("mercator"!==B&&"global-mercator"!==B)return g=y.url+"specifies an unsupported profile attribute, "+B+".",O=d["a"].handleError(O,this,this.errorEvent,g,void 0,void 0,void 0,w),O.retry||j.reject(new h["a"](g)),void(this._metadataError=O);R=new m["a"]({ellipsoid:N.ellipsoid})}var L=u["a"].clone(N.rectangle);if(!Object(o["a"])(L)){var k,A,M,q,U=Object(n["a"])(N.flipXY,!1);U?(M=new r["a"](parseFloat(a.getAttribute("miny")),parseFloat(a.getAttribute("minx"))),q=new r["a"](parseFloat(a.getAttribute("maxy")),parseFloat(a.getAttribute("maxx")))):(M=new r["a"](parseFloat(a.getAttribute("minx")),parseFloat(a.getAttribute("miny"))),q=new r["a"](parseFloat(a.getAttribute("maxx")),parseFloat(a.getAttribute("maxy"))));var Y="geodetic"===B||"mercator"===B;if(R.projection instanceof s["a"]||Y)k=i["a"].fromDegrees(M.x,M.y),A=i["a"].fromDegrees(q.x,q.y);else{var H=R.projection;k=H.unproject(M),A=H.unproject(q)}L=new u["a"](k.longitude,k.latitude,A.longitude,A.latitude)}L.west<R.rectangle.west&&(L.west=R.rectangle.west),L.east>R.rectangle.east&&(L.east=R.rectangle.east),L.south<R.rectangle.south&&(L.south=R.rectangle.south),L.north>R.rectangle.north&&(L.north=R.rectangle.north);var z=R.positionToTileXY(u["a"].southwest(L),F),W=R.positionToTileXY(u["a"].northeast(L),F),V=(Math.abs(W.x-z.x)+1)*(Math.abs(W.y-z.y)+1);V>4&&(F=0);var K=this._tmsResource.getDerivedResource({url:"{z}/{x}/{reverseY}."+E});j.resolve({url:K,tilingScheme:R,rectangle:L,tileWidth:T,tileHeight:P,minimumLevel:F,maximumLevel:D,tileDiscardPolicy:N.tileDiscardPolicy,credit:N.credit})},f.prototype._metadataFailure=function(e){var t=this._options,a=Object(n["a"])(t.fileExtension,"png"),r=Object(n["a"])(t.tileWidth,256),i=Object(n["a"])(t.tileHeight,256),s=Object(n["a"])(t.minimumLevel,0),c=t.maximumLevel,u=Object(o["a"])(t.tilingScheme)?t.tilingScheme:new m["a"]({ellipsoid:t.ellipsoid}),l=Object(n["a"])(t.rectangle,u.rectangle),h=this._tmsResource.getDerivedResource({url:"{z}/{x}/{reverseY}."+a});this._deferred.resolve({url:h,tilingScheme:u,rectangle:l,tileWidth:r,tileHeight:i,minimumLevel:s,maximumLevel:c,tileDiscardPolicy:t.tileDiscardPolicy,credit:t.credit})},t["a"]=f},ee78:function(e,t,a){"use strict";var r={NONE:0,CULLED:1,RENDERED:2,REFINED:3,RENDERED_AND_KICKED:6,REFINED_AND_KICKED:7,CULLED_BUT_NEEDED:9,wasKicked:function(e){return e>=r.RENDERED_AND_KICKED},originalResult:function(e){return 3&e},kick:function(e){return 4|e}};t["a"]=r}}]);