(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~0632e0fe"],{"2ab8":function(t,e,i){"use strict";var a=i("670c"),n=i("bd8d"),o=i("2f63"),r=i("7d62"),s=i("e42d"),c=i("1b8d"),d=i("f845"),l=i("a894"),h=i("ac3b"),u=i("d289"),_=i("6ef5"),p=i("6dc0"),m=i("6c84"),f=i("5770"),b=i("a913"),y=i("3022"),g=i("03f1"),S=i("23b6"),v=i("b7c8"),D=i("3626"),T=i("bfce");function O(){this._framebuffer=void 0,this._colorGBuffer=void 0,this._depthGBuffer=void 0,this._depthTexture=void 0,this._drawCommand=void 0,this._clearCommand=void 0,this._strength=1,this._radius=1}function E(){return new m["a"]({wrapS:S["a"].CLAMP_TO_EDGE,wrapT:S["a"].CLAMP_TO_EDGE,minificationFilter:g["a"].NEAREST,magnificationFilter:y["a"].NEAREST})}function C(t){var e=t._framebuffer;Object(o["a"])(e)&&(t._colorGBuffer.destroy(),t._depthGBuffer.destroy(),t._depthTexture.destroy(),e.destroy(),t._framebuffer=void 0,t._colorGBuffer=void 0,t._depthGBuffer=void 0,t._depthTexture=void 0,t._drawCommand=void 0,t._clearCommand=void 0)}function A(t,e){var i=e.drawingBufferWidth,a=e.drawingBufferHeight,n=new b["a"]({context:e,width:i,height:a,pixelFormat:s["a"].RGBA,pixelDatatype:_["a"].UNSIGNED_BYTE,sampler:E()}),o=new b["a"]({context:e,width:i,height:a,pixelFormat:s["a"].RGBA,pixelDatatype:_["a"].UNSIGNED_BYTE,sampler:E()}),r=new b["a"]({context:e,width:i,height:a,pixelFormat:s["a"].DEPTH_COMPONENT,pixelDatatype:_["a"].UNSIGNED_INT,sampler:E()});t._framebuffer=new h["a"]({context:e,colorTextures:[n,o],depthTexture:r,destroyAttachments:!1}),t._colorGBuffer=n,t._depthGBuffer=o,t._depthTexture=r}var I=new a["a"];function P(t,e){var i=T["a"],a={u_pointCloud_colorGBuffer:function(){return t._colorGBuffer},u_pointCloud_depthGBuffer:function(){return t._depthGBuffer},u_distanceAndEdlStrength:function(){return I.x=t._radius,I.y=t._strength,I}},o=p["a"].fromCache({blending:v["a"].ALPHA_BLEND,depthMask:!0,depthTest:{enabled:!0},stencilTest:D["a"].setCesium3DTileBit(),stencilMask:D["a"].CESIUM_3D_TILE_MASK});t._drawCommand=e.createViewportQuadCommand(i,{uniformMap:a,renderState:o,pass:u["a"].CESIUM_3D_TILE,owner:t}),t._clearCommand=new d["a"]({framebuffer:t._framebuffer,color:new n["a"](0,0,0,0),depth:1,renderState:p["a"].fromCache(),pass:u["a"].CESIUM_3D_TILE,owner:t})}function N(t,e){var i=e.drawingBufferWidth,a=e.drawingBufferHeight,n=t._colorGBuffer,r=!1,s=Object(o["a"])(n)&&(n.width!==i||n.height!==a);return Object(o["a"])(n)&&!s||(C(t),A(t,e),P(t,e),r=!0),r}function x(t){return t.drawBuffers&&t.fragmentDepth}function B(t,e){var i=t.shaderCache.getDerivedShaderProgram(e,"EC");if(!Object(o["a"])(i)){var a=e._attributeLocations,n=e.fragmentShaderSource.clone();n.sources=n.sources.map((function(t){return t=f["a"].replaceMain(t,"czm_point_cloud_post_process_main"),t=t.replace(/gl_FragColor/g,"gl_FragData[0]"),t})),n.sources.unshift("#extension GL_EXT_draw_buffers : enable \n"),n.sources.push("void main() \n{ \n    czm_point_cloud_post_process_main(); \n    gl_FragData[1] = czm_packDepth(gl_FragCoord.z); \n}"),i=t.shaderCache.createDerivedShaderProgram(e,"EC",{vertexShaderSource:e.vertexShaderSource,fragmentShaderSource:n,attributeLocations:a})}return i}O.isSupported=x,O.prototype.update=function(t,e,i){if(x(t.context)){this._strength=i.eyeDomeLightingStrength,this._radius=i.eyeDomeLightingRadius*t.pixelRatio;var a,n=N(this,t.context),r=t.commandList,s=r.length;for(a=e;a<s;++a){var d=r[a];if(d.primitiveType===c["a"].POINTS&&d.pass!==u["a"].TRANSLUCENT){var h=d.derivedCommands.pointCloudProcessor;(!Object(o["a"])(h)||d.dirty||n||h.framebuffer!==this._framebuffer)&&(h=l["a"].shallowClone(d),d.derivedCommands.pointCloudProcessor=h,h.framebuffer=this._framebuffer,h.shaderProgram=B(t.context,d.shaderProgram),h.castShadows=!1,h.receiveShadows=!1),r[a]=h}}var _=this._clearCommand,p=this._drawCommand;r.push(p),r.push(_)}},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){return C(this),Object(r["a"])(this)},e["a"]=O},3443:function(t,e,i){"use strict";var a=i("1d87"),n=i("cef5"),o=i("be18"),r=i("a561"),s=i("bd8d"),c=i("2bb9"),d=i("abab"),l=i("535a"),h=i("2f63"),u=i("9f1d"),_=i("7d62"),p=i("129b"),m=i("93da"),f=i("52f0"),b=i("b639"),y=i("713f"),g=i("1b8d"),S=i("283e"),v=i("f806"),D=i("f20a"),T=i("8b68"),O=i("a894"),E=i("d289"),C=i("6dc0"),A=i("e90c"),I=i("7c5e"),P=i("a58e"),N=i("b7c8"),x=i("6596"),B=i("9889"),L=i("08b8"),w=i("d663"),j=i("0249"),R=i("a307"),z=i("c86b"),U=i("3626"),M={NEEDS_DECODE:0,DECODING:1,READY:2,FAILED:3};function G(t){this._parsedContent=void 0,this._drawCommand=void 0,this._isTranslucent=!1,this._styleTranslucent=!1,this._constantColor=s["a"].clone(s["a"].DARKGRAY),this._highlightColor=s["a"].clone(s["a"].WHITE),this._pointSize=1,this._rtcCenter=void 0,this._quantizedVolumeScale=void 0,this._quantizedVolumeOffset=void 0,this._styleableShaderAttributes=void 0,this._isQuantized=!1,this._isOctEncoded16P=!1,this._isRGB565=!1,this._hasColors=!1,this._hasNormals=!1,this._hasBatchIds=!1,this._decodingState=M.READY,this._dequantizeInShader=!0,this._isQuantizedDraco=!1,this._isOctEncodedDraco=!1,this._quantizedRange=0,this._octEncodedRange=0,this.backFaceCulling=!1,this._backFaceCulling=!1,this.normalShading=!0,this._normalShading=!0,this._opaqueRenderState=void 0,this._translucentRenderState=void 0,this._mode=void 0,this._ready=!1,this._readyPromise=P["a"].defer(),this._pointsLength=0,this._geometryByteLength=0,this._vertexShaderLoaded=t.vertexShaderLoaded,this._fragmentShaderLoaded=t.fragmentShaderLoaded,this._uniformMapLoaded=t.uniformMapLoaded,this._batchTableLoaded=t.batchTableLoaded,this._pickIdLoaded=t.pickIdLoaded,this._opaquePass=Object(l["a"])(t.opaquePass,E["a"].OPAQUE),this._cull=Object(l["a"])(t.cull,!0),this.style=void 0,this._style=void 0,this.styleDirty=!1,this.modelMatrix=f["a"].clone(f["a"].IDENTITY),this._modelMatrix=f["a"].clone(f["a"].IDENTITY),this.time=0,this.shadows=z["a"].ENABLED,this._boundingSphere=void 0,this.clippingPlanes=void 0,this.isClipped=!1,this.clippingPlanesDirty=!1,this.clippingPlanesOriginMatrix=void 0,this.attenuation=!1,this._attenuation=!1,this.geometricError=0,this.geometricErrorScale=1,this.maximumAttenuation=this._pointSize,F(this,t)}Object(u["a"])(G.prototype,{pointsLength:{get:function(){return this._pointsLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},color:{get:function(){return s["a"].clone(this._highlightColor)},set:function(t){this._highlightColor=s["a"].clone(t,this._highlightColor)}},boundingSphere:{get:function(){if(Object(h["a"])(this._drawCommand))return this._drawCommand.boundingVolume},set:function(t){this._boundingSphere=n["a"].clone(t,this._boundingSphere)}}});var V=Uint32Array.BYTES_PER_ELEMENT;function F(t,e){var i=e.arrayBuffer,n=Object(l["a"])(e.byteOffset,0),r=new Uint8Array(i),u=new DataView(i);n+=V;var _=u.getUint32(n,!0);if(1!==_)throw new S["a"]("Only Point Cloud tile version 1 is supported.  Version "+_+" is not.");n+=V,n+=V;var m=u.getUint32(n,!0);if(0===m)throw new S["a"]("Feature table must have a byte length greater than zero");n+=V;var f=u.getUint32(n,!0);n+=V;var b=u.getUint32(n,!0);n+=V;var y=u.getUint32(n,!0);n+=V;var g=Object(p["a"])(r,n,m),v=JSON.parse(g);n+=m;var D,T,O=new Uint8Array(i,n,f);if(n+=f,b>0){var E=Object(p["a"])(r,n,b);D=JSON.parse(E),n+=b,y>0&&(T=new Uint8Array(i,n,y),n+=y)}var C=new B["a"](v,O),A=C.getGlobalProperty("POINTS_LENGTH");if(C.featuresLength=A,!Object(h["a"])(A))throw new S["a"]("Feature table global property: POINTS_LENGTH must be defined");var I,P,N,L,w=C.getGlobalProperty("RTC_CENTER",d["a"].FLOAT,3);Object(h["a"])(w)&&(t._rtcCenter=o["a"].unpack(w));var j,R,z,U,G,F=!1,k=!1,q=!1,H=!1,W=!1,Y=!1,Q=!1,X=!1,Z=Object(h["a"])(v.extensions)?v.extensions["3DTILES_draco_point_compression"]:void 0,J=Object(h["a"])(D)&&Object(h["a"])(D.extensions)?D.extensions["3DTILES_draco_point_compression"]:void 0;if(Object(h["a"])(J)&&(z=J.properties),Object(h["a"])(Z)){R=Z.properties;var K=Z.byteOffset,$=Z.byteLength;if(!Object(h["a"])(R)||!Object(h["a"])(K)||!Object(h["a"])($))throw new S["a"]("Draco properties, byteOffset, and byteLength must be defined");j=Object(a["a"])(O,K,K+$),F=Object(h["a"])(R.POSITION),k=Object(h["a"])(R.RGB)||Object(h["a"])(R.RGBA),q=Object(h["a"])(R.NORMAL),H=Object(h["a"])(R.BATCH_ID),Y=Object(h["a"])(R.RGBA),t._decodingState=M.NEEDS_DECODE}if(Object(h["a"])(j)&&(U={buffer:j,featureTableProperties:R,batchTableProperties:z,properties:Object(c["a"])(R,z),dequantizeInShader:t._dequantizeInShader}),!F)if(Object(h["a"])(v.POSITION))I=C.getPropertyArray("POSITION",d["a"].FLOAT,3),F=!0;else if(Object(h["a"])(v.POSITION_QUANTIZED)){I=C.getPropertyArray("POSITION_QUANTIZED",d["a"].UNSIGNED_SHORT,3),W=!0,F=!0;var tt=C.getGlobalProperty("QUANTIZED_VOLUME_SCALE",d["a"].FLOAT,3);if(!Object(h["a"])(tt))throw new S["a"]("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");t._quantizedVolumeScale=o["a"].unpack(tt),t._quantizedRange=65535;var et=C.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",d["a"].FLOAT,3);if(!Object(h["a"])(et))throw new S["a"]("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t._quantizedVolumeOffset=o["a"].unpack(et)}if(k||(Object(h["a"])(v.RGBA)?(P=C.getPropertyArray("RGBA",d["a"].UNSIGNED_BYTE,4),Y=!0,k=!0):Object(h["a"])(v.RGB)?(P=C.getPropertyArray("RGB",d["a"].UNSIGNED_BYTE,3),k=!0):Object(h["a"])(v.RGB565)&&(P=C.getPropertyArray("RGB565",d["a"].UNSIGNED_SHORT,1),Q=!0,k=!0)),q||(Object(h["a"])(v.NORMAL)?(N=C.getPropertyArray("NORMAL",d["a"].FLOAT,3),q=!0):Object(h["a"])(v.NORMAL_OCT16P)&&(N=C.getPropertyArray("NORMAL_OCT16P",d["a"].UNSIGNED_BYTE,2),X=!0,q=!0)),H||Object(h["a"])(v.BATCH_ID)&&(L=C.getPropertyArray("BATCH_ID",d["a"].UNSIGNED_SHORT,1),H=!0),!F)throw new S["a"]("Either POSITION or POSITION_QUANTIZED must be defined.");if(Object(h["a"])(v.CONSTANT_RGBA)){var it=C.getGlobalProperty("CONSTANT_RGBA",d["a"].UNSIGNED_BYTE,4);t._constantColor=s["a"].fromBytes(it[0],it[1],it[2],it[3],t._constantColor)}if(H){var at=C.getGlobalProperty("BATCH_LENGTH");if(!Object(h["a"])(at))throw new S["a"]("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");Object(h["a"])(T)&&(T=new Uint8Array(T)),Object(h["a"])(t._batchTableLoaded)&&t._batchTableLoaded(at,D,T)}!H&&Object(h["a"])(T)&&(G=x["a"].getBinaryProperties(A,D,T)),t._parsedContent={positions:I,colors:P,normals:N,batchIds:L,styleableProperties:G,draco:U},t._pointsLength=A,t._isQuantized=W,t._isOctEncoded16P=X,t._isRGB565=Q,t._isTranslucent=Y,t._hasColors=k,t._hasNormals=q,t._hasBatchIds=H}var k,q=new o["a"],H=new o["a"],W=new o["a"];function Y(t){if(!Object(h["a"])(k)){m["a"].setRandomNumberSeed(0),k=new Array(t);for(var e=0;e<t;++e)k[e]=m["a"].nextRandomNumber()}return k}function Q(t){for(var e=20,i=t.length/3,a=Math.min(i,e),r=Y(e),s=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=o["a"].fromElements(s,s,s,q),l=o["a"].fromElements(c,c,c,H),h=0;h<a;++h){var u=Math.floor(r[h]*i),_=o["a"].unpack(t,3*u,W);o["a"].minimumByComponent(d,_,d),o["a"].maximumByComponent(l,_,l)}var p=n["a"].fromCornerPoints(d,l);return p.radius+=m["a"].EPSILON2,p}function X(t,e){var i=d["a"].fromTypedArray(t);return i===d["a"].INT||i===d["a"].UNSIGNED_INT||i===d["a"].DOUBLE?(Object(b["a"])("Cast pnts property to floats",'Point cloud property "'+e+'" will be casted to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.'),new Float32Array(t)):t}var Z=new r["a"],J=new r["a"],K=new s["a"],$=0,tt=1,et=2,it=3,at=4,nt=new f["a"];function ot(t,e){var i,a,r=e.context,s=t._parsedContent,c=t._pointsLength,l=s.positions,u=s.colors,_=s.normals,p=s.batchIds,m=s.styleableProperties,b=Object(h["a"])(m),y=t._isQuantized,S=t._isQuantizedDraco,v=t._isOctEncoded16P,A=t._isOctEncodedDraco,P=t._quantizedRange,x=t._octEncodedRange,B=t._isRGB565,L=t._isTranslucent,w=t._hasColors,j=t._hasNormals,R=t._hasBatchIds,z=[],M={};if(t._styleableShaderAttributes=M,b){var G=at;for(var V in m)if(m.hasOwnProperty(V)){var F=m[V],k=X(F.typedArray,V);i=F.componentCount,a=d["a"].fromTypedArray(k);var q=D["a"].createVertexBuffer({context:r,typedArray:k,usage:T["a"].STATIC_DRAW});t._geometryByteLength+=q.sizeInBytes;var H={index:G,vertexBuffer:q,componentsPerAttribute:i,componentDatatype:a,normalize:!1,offsetInBytes:0,strideInBytes:0};z.push(H),M[V]={location:G,componentCount:i},++G}}var W,Y,Z,J=D["a"].createVertexBuffer({context:r,typedArray:l,usage:T["a"].STATIC_DRAW});t._geometryByteLength+=J.sizeInBytes,w&&(W=D["a"].createVertexBuffer({context:r,typedArray:u,usage:T["a"].STATIC_DRAW}),t._geometryByteLength+=W.sizeInBytes),j&&(Y=D["a"].createVertexBuffer({context:r,typedArray:_,usage:T["a"].STATIC_DRAW}),t._geometryByteLength+=Y.sizeInBytes),R&&(p=X(p,"batchIds"),Z=D["a"].createVertexBuffer({context:r,typedArray:p,usage:T["a"].STATIC_DRAW}),t._geometryByteLength+=Z.sizeInBytes);var K=[];if(a=y?d["a"].UNSIGNED_SHORT:S?P<=255?d["a"].UNSIGNED_BYTE:d["a"].UNSIGNED_SHORT:d["a"].FLOAT,K.push({index:$,vertexBuffer:J,componentsPerAttribute:3,componentDatatype:a,normalize:!1,offsetInBytes:0,strideInBytes:0}),t._cull&&(t._boundingSphere=y||S?n["a"].fromCornerPoints(o["a"].ZERO,t._quantizedVolumeScale):Q(l)),w)if(B)K.push({index:tt,vertexBuffer:W,componentsPerAttribute:1,componentDatatype:d["a"].UNSIGNED_SHORT,normalize:!1,offsetInBytes:0,strideInBytes:0});else{var nt=L?4:3;K.push({index:tt,vertexBuffer:W,componentsPerAttribute:nt,componentDatatype:d["a"].UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0})}j&&(v?(i=2,a=d["a"].UNSIGNED_BYTE):A?(i=2,a=x<=255?d["a"].UNSIGNED_BYTE:d["a"].UNSIGNED_SHORT):(i=3,a=d["a"].FLOAT),K.push({index:et,vertexBuffer:Y,componentsPerAttribute:i,componentDatatype:a,normalize:!1,offsetInBytes:0,strideInBytes:0})),R&&K.push({index:it,vertexBuffer:Z,componentsPerAttribute:1,componentDatatype:d["a"].fromTypedArray(p),normalize:!1,offsetInBytes:0,strideInBytes:0}),b&&(K=K.concat(z));var ot=new I["a"]({context:r,attributes:K}),rt={depthTest:{enabled:!0}};t._opaquePass===E["a"].CESIUM_3D_TILE&&(rt.stencilTest=U["a"].setCesium3DTileBit(),rt.stencilMask=U["a"].CESIUM_3D_TILE_MASK),t._opaqueRenderState=C["a"].fromCache(rt),t._translucentRenderState=C["a"].fromCache({depthTest:{enabled:!0},depthMask:!1,blending:N["a"].ALPHA_BLEND}),t._drawCommand=new O["a"]({boundingVolume:new n["a"],cull:t._cull,modelMatrix:new f["a"],primitiveType:g["a"].POINTS,vertexArray:ot,count:c,shaderProgram:void 0,uniformMap:void 0,renderState:L?t._translucentRenderState:t._opaqueRenderState,pass:L?E["a"].TRANSLUCENT:t._opaquePass,owner:t,castShadows:!1,receiveShadows:!1,pickId:t._pickIdLoaded()})}function rt(t,e){var i=e.context,a=t._isQuantized,n=t._isQuantizedDraco,r=t._isOctEncodedDraco,d={u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier:function(){var a=Z;if(a.x=t._attenuation?t.maximumAttenuation:t._pointSize,a.x*=e.pixelRatio,a.y=t.time,t._attenuation){var n,o=e.camera.frustum;n=e.mode===R["a"].SCENE2D||o instanceof y["a"]?Number.POSITIVE_INFINITY:i.drawingBufferHeight/e.camera.frustum.sseDenominator,a.z=t.geometricError*t.geometricErrorScale,a.w=n}return a},u_highlightColor:function(){return t._highlightColor},u_constantColor:function(){return t._constantColor},u_clippingPlanes:function(){var e=t.clippingPlanes,a=t.isClipped;return a?e.texture:i.defaultTexture},u_clippingPlanesEdgeStyle:function(){var e=t.clippingPlanes;if(!Object(h["a"])(e))return s["a"].TRANSPARENT;var i=s["a"].clone(e.edgeColor,K);return i.alpha=e.edgeWidth,i},u_clippingPlanesMatrix:function(){var e=t.clippingPlanes;if(!Object(h["a"])(e))return f["a"].IDENTITY;var a=Object(l["a"])(t.clippingPlanesOriginMatrix,t._modelMatrix);return f["a"].multiply(i.uniformState.view3D,a,nt),f["a"].multiply(nt,e.modelMatrix,nt)}};(a||n||r)&&(d=Object(c["a"])(d,{u_quantizedVolumeScaleAndOctEncodedRange:function(){var e=J;if(Object(h["a"])(t._quantizedVolumeScale)){var i=o["a"].clone(t._quantizedVolumeScale,e);o["a"].divideByScalar(i,t._quantizedRange,e)}return e.w=t._octEncodedRange,e}})),Object(h["a"])(t._uniformMapLoaded)&&(d=t._uniformMapLoaded(d)),t._drawCommand.uniformMap=d}var st=["POSITION","COLOR","NORMAL","POSITION_ABSOLUTE"];function ct(t,e){var i=/czm_tiles3d_style_(\w+)/g,a=i.exec(t);while(null!==a){var n=a[1];-1===e.indexOf(n)&&e.push(n),a=i.exec(t)}}function dt(t,e){for(var i=t.numberOfAttributes,a=0;a<i;++a){var n=t.getAttribute(a);if(n.index===e)return n}}function lt(t){for(var e=st.length,i=0;i<e;++i){var a=st[i],n="czm_tiles3d_style_"+a,o=a.toLowerCase();t=t.replace(new RegExp(n+"(\\W)","g"),o+"$1")}return t.replace("()","(vec3 position, vec3 position_absolute, vec4 color, vec3 normal)")}function ht(t,e,i){var a,n,o,r,s,c,d=e.context,l=Object(h["a"])(i),u=t._isQuantized,_=t._isQuantizedDraco,p=t._isOctEncoded16P,m=t._isOctEncodedDraco,f=t._isRGB565,b=t._isTranslucent,y=t._hasColors,g=t._hasNormals,v=t._hasBatchIds,D=t._backFaceCulling,T=t._normalShading,O=t._drawCommand.vertexArray,E=t.clippingPlanes,C=t._attenuation,I=b;if(l){var P={translucent:!1};r=i.getColorShaderFunction("getColorFromStyle","czm_tiles3d_style_",P),s=i.getShowShaderFunction("getShowFromStyle","czm_tiles3d_style_",P),c=i.getPointSizeShaderFunction("getPointSizeFromStyle","czm_tiles3d_style_",P),Object(h["a"])(r)&&P.translucent&&(I=!0)}t._styleTranslucent=I;var N=Object(h["a"])(r),x=Object(h["a"])(s),B=Object(h["a"])(c),L=t.isClipped,R=[];N&&(ct(r,R),r=lt(r)),x&&(ct(s,R),s=lt(s)),B&&(ct(c,R),c=lt(c));var z=R.indexOf("COLOR")>=0,U=R.indexOf("NORMAL")>=0,M=R.filter((function(t){return-1===st.indexOf(t)}));if(U&&!g)throw new S["a"]("Style references the NORMAL semantic but the point cloud does not have normals");var G=t._styleableShaderAttributes;for(n in G)if(G.hasOwnProperty(n)){o=G[n];var V=M.indexOf(n)>=0,F=dt(O,o.location);F.enabled=V}var k=y&&(!N||z);if(y){var q=dt(O,tt);q.enabled=k}var H=g&&(T||D||U);if(g){var W=dt(O,et);W.enabled=H}var Y={a_position:$};k&&(Y.a_color=tt),H&&(Y.a_normal=et),v&&(Y.a_batchId=it);var Q="",X=M.length;for(a=0;a<X;++a){if(n=M[a],o=G[n],!Object(h["a"])(o))throw new S["a"]('Style references a property "'+n+'" that does not exist or is not styleable.');var Z,J=o.componentCount,K="czm_tiles3d_style_"+n;Z=1===J?"float":"vec"+J,Q+="attribute "+Z+" "+K+"; \n",Y[K]=o.location}rt(t,e);var at="attribute vec3 a_position; \nvarying vec4 v_color; \nuniform vec4 u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier; \nuniform vec4 u_constantColor; \nuniform vec4 u_highlightColor; \n";at+="float u_pointSize; \nfloat u_time; \n",C&&(at+="float u_geometricError; \nfloat u_depthMultiplier; \n"),at+=Q,k&&(at+=b?"attribute vec4 a_color; \n":f?"attribute float a_color; \nconst float SHIFT_RIGHT_11 = 1.0 / 2048.0; \nconst float SHIFT_RIGHT_5 = 1.0 / 32.0; \nconst float SHIFT_LEFT_11 = 2048.0; \nconst float SHIFT_LEFT_5 = 32.0; \nconst float NORMALIZE_6 = 1.0 / 64.0; \nconst float NORMALIZE_5 = 1.0 / 32.0; \n":"attribute vec3 a_color; \n"),H&&(at+=p||m?"attribute vec2 a_normal; \n":"attribute vec3 a_normal; \n"),v&&(at+="attribute float a_batchId; \n"),(u||_||m)&&(at+="uniform vec4 u_quantizedVolumeScaleAndOctEncodedRange; \n"),N&&(at+=r),x&&(at+=s),B&&(at+=c),at+="void main() \n{ \n    u_pointSize = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.x; \n    u_time = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.y; \n",C&&(at+="    u_geometricError = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.z; \n    u_depthMultiplier = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.w; \n"),at+=k?b?"    vec4 color = a_color; \n":f?"    float compressed = a_color; \n    float r = floor(compressed * SHIFT_RIGHT_11); \n    compressed -= r * SHIFT_LEFT_11; \n    float g = floor(compressed * SHIFT_RIGHT_5); \n    compressed -= g * SHIFT_LEFT_5; \n    float b = compressed; \n    vec3 rgb = vec3(r * NORMALIZE_5, g * NORMALIZE_6, b * NORMALIZE_5); \n    vec4 color = vec4(rgb, 1.0); \n":"    vec4 color = vec4(a_color, 1.0); \n":"    vec4 color = u_constantColor; \n",at+=u||_?"    vec3 position = a_position * u_quantizedVolumeScaleAndOctEncodedRange.xyz; \n":"    vec3 position = a_position; \n",at+="    vec3 position_absolute = vec3(czm_model * vec4(position, 1.0)); \n",H?(at+=p?"    vec3 normal = czm_octDecode(a_normal); \n":m?"    vec3 normal = czm_octDecode(a_normal, u_quantizedVolumeScaleAndOctEncodedRange.w).zxy; \n":"    vec3 normal = a_normal; \n",at+="    vec3 normalEC = czm_normal * normal; \n"):at+="    vec3 normal = vec3(1.0); \n",N&&(at+="    color = getColorFromStyle(position, position_absolute, color, normal); \n"),x&&(at+="    float show = float(getShowFromStyle(position, position_absolute, color, normal)); \n"),at+=B?"    gl_PointSize = getPointSizeFromStyle(position, position_absolute, color, normal) * czm_pixelRatio; \n":C?"    vec4 positionEC = czm_modelView * vec4(position, 1.0); \n    float depth = -positionEC.z; \n    gl_PointSize = min((u_geometricError / depth) * u_depthMultiplier, u_pointSize); \n":"    gl_PointSize = u_pointSize; \n",at+="    color = color * u_highlightColor; \n",H&&T&&(at+="    float diffuseStrength = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC); \n    diffuseStrength = max(diffuseStrength, 0.4); \n    color.xyz *= diffuseStrength * czm_lightColor; \n"),at+="    v_color = color; \n    gl_Position = czm_modelViewProjection * vec4(position, 1.0); \n",H&&D&&(at+="    float visible = step(-normalEC.z, 0.0); \n    gl_Position *= visible; \n    gl_PointSize *= visible; \n"),x&&(at+="    gl_Position.w *= float(show); \n    gl_PointSize *= float(show); \n"),at+="} \n";var nt="varying vec4 v_color; \n";L&&(nt+="uniform sampler2D u_clippingPlanes; \nuniform mat4 u_clippingPlanesMatrix; \nuniform vec4 u_clippingPlanesEdgeStyle; \n",nt+="\n",nt+=Object(j["a"])(E,d),nt+="\n"),nt+="void main() \n{ \n    gl_FragColor = czm_gammaCorrect(v_color); \n",L&&(nt+=Object(w["a"])("u_clippingPlanes","u_clippingPlanesMatrix","u_clippingPlanesEdgeStyle")),nt+="} \n",Object(h["a"])(t._vertexShaderLoaded)&&(at=t._vertexShaderLoaded(at)),Object(h["a"])(t._fragmentShaderLoaded)&&(nt=t._fragmentShaderLoaded(nt));var ot=t._drawCommand;Object(h["a"])(ot.shaderProgram)&&ot.shaderProgram.destroy(),ot.shaderProgram=A["a"].fromCache({context:d,vertexShaderSource:at,fragmentShaderSource:nt,attributeLocations:Y});try{ot.shaderProgram._bind()}catch(ht){throw new S["a"]("Error generating style shader: this may be caused by a type mismatch, index out-of-bounds, or other syntax error.")}}function ut(t,e){if(t._decodingState===M.READY)return!1;if(t._decodingState===M.NEEDS_DECODE){var i=t._parsedContent,a=i.draco,n=L["a"].decodePointCloud(a,e);Object(h["a"])(n)&&(t._decodingState=M.DECODING,n.then((function(e){t._decodingState=M.READY;var n=Object(h["a"])(e.POSITION)?e.POSITION.array:void 0,r=Object(h["a"])(e.RGB)?e.RGB.array:void 0,s=Object(h["a"])(e.RGBA)?e.RGBA.array:void 0,c=Object(h["a"])(e.NORMAL)?e.NORMAL.array:void 0,d=Object(h["a"])(e.BATCH_ID)?e.BATCH_ID.array:void 0,u=Object(h["a"])(n)&&Object(h["a"])(e.POSITION.data.quantization),_=Object(h["a"])(c)&&Object(h["a"])(e.NORMAL.data.quantization);if(u){var p=e.POSITION.data.quantization,m=p.range;t._quantizedVolumeScale=o["a"].fromElements(m,m,m),t._quantizedVolumeOffset=o["a"].unpack(p.minValues),t._quantizedRange=(1<<p.quantizationBits)-1,t._isQuantizedDraco=!0}_&&(t._octEncodedRange=(1<<e.NORMAL.data.quantization.quantizationBits)-1,t._isOctEncodedDraco=!0);var f=i.styleableProperties,b=a.batchTableProperties;for(var y in b)if(b.hasOwnProperty(y)){var g=e[y];Object(h["a"])(f)||(f={}),f[y]={typedArray:g.array,componentCount:g.data.componentsPerAttribute}}i.positions=Object(l["a"])(n,i.positions),i.colors=Object(l["a"])(Object(l["a"])(s,r),i.colors),i.normals=Object(l["a"])(c,i.normals),i.batchIds=Object(l["a"])(d,i.batchIds),i.styleableProperties=f})).otherwise((function(e){t._decodingState=M.FAILED,t._readyPromise.reject(e)})))}return!0}var _t=new r["a"],pt=new o["a"];G.prototype.update=function(t){var e=t.context,i=ut(this,e);if(!i){var a=!1,s=!f["a"].equals(this._modelMatrix,this.modelMatrix);if(this._mode!==t.mode&&(this._mode=t.mode,s=!0),Object(h["a"])(this._drawCommand)||(ot(this,t),s=!0,a=!0,this._ready=!0,this._readyPromise.resolve(this),this._parsedContent=void 0),s){f["a"].clone(this.modelMatrix,this._modelMatrix);var c=this._drawCommand.modelMatrix;if(f["a"].clone(this._modelMatrix,c),Object(h["a"])(this._rtcCenter)&&f["a"].multiplyByTranslation(c,this._rtcCenter,c),Object(h["a"])(this._quantizedVolumeOffset)&&f["a"].multiplyByTranslation(c,this._quantizedVolumeOffset,c),t.mode!==R["a"].SCENE3D){var d=t.mapProjection,l=f["a"].getColumn(c,3,_t);r["a"].equals(l,r["a"].UNIT_W)||v["a"].basisTo2D(d,c,c)}var u=this._drawCommand.boundingVolume;if(n["a"].clone(this._boundingSphere,u),this._cull){var _=u.center;f["a"].multiplyByPoint(c,_,_);var p=f["a"].getScale(c,pt);u.radius*=o["a"].maximumComponent(p)}}this.clippingPlanesDirty&&(this.clippingPlanesDirty=!1,a=!0),this._attenuation!==this.attenuation&&(this._attenuation=this.attenuation,a=!0),this.backFaceCulling!==this._backFaceCulling&&(this._backFaceCulling=this.backFaceCulling,a=!0),this.normalShading!==this._normalShading&&(this._normalShading=this.normalShading,a=!0),(this._style!==this.style||this.styleDirty)&&(this._style=this.style,this.styleDirty=!1,a=!0),a&&ht(this,t,this._style),this._drawCommand.castShadows=z["a"].castShadows(this.shadows),this._drawCommand.receiveShadows=z["a"].receiveShadows(this.shadows);var m=this._highlightColor.alpha<1||this._constantColor.alpha<1||this._styleTranslucent;this._drawCommand.renderState=m?this._translucentRenderState:this._opaqueRenderState,this._drawCommand.pass=m?E["a"].TRANSLUCENT:this._opaquePass;var b=t.commandList,y=t.passes;(y.render||y.pick)&&b.push(this._drawCommand)}},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){var t=this._drawCommand;return Object(h["a"])(t)&&(t.vertexArray=t.vertexArray&&t.vertexArray.destroy(),t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()),Object(_["a"])(this)},e["a"]=G},"44bf":function(t,e,i){"use strict";var a=i("cef5"),n=i("bd8d"),o=i("abab"),r=i("535a"),s=i("2f63"),c=i("9f1d"),d=i("7d62"),l=i("6cbd"),h=i("93da"),u=i("52f0"),_=i("1b8d"),p=i("daa2"),m=i("8b68"),f=i("b997"),b=i("a894"),y=i("d289"),g=i("6dc0"),S=i("e90c"),v=i("5770"),D=i("9d80"),T=i("609e"),O=i("a48a"),E=i("b7c8"),C=i("141c"),A=i("bdd0"),I=i("a307"),P=A["a"].SHOW_INDEX,N=A["a"].POSITION_INDEX,x=A["a"].COLOR_INDEX,B=A["a"].OUTLINE_COLOR_INDEX,L=A["a"].OUTLINE_WIDTH_INDEX,w=A["a"].PIXEL_SIZE_INDEX,j=A["a"].SCALE_BY_DISTANCE_INDEX,R=A["a"].TRANSLUCENCY_BY_DISTANCE_INDEX,z=A["a"].DISTANCE_DISPLAY_CONDITION_INDEX,U=A["a"].DISABLE_DEPTH_DISTANCE_INDEX,M=A["a"].NUMBER_OF_PROPERTIES,G={positionHighAndSize:0,positionLowAndOutline:1,compressedAttribute0:2,compressedAttribute1:3,scaleByDistance:4,distanceDisplayConditionAndDisableDepth:5};function V(t){t=Object(r["a"])(t,r["a"].EMPTY_OBJECT),this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._propertiesChanged=new Uint32Array(M),this._maxPixelSize=1,this._baseVolume=new a["a"],this._baseVolumeWC=new a["a"],this._baseVolume2D=new a["a"],this._boundingVolume=new a["a"],this._boundingVolumeDirty=!1,this._colorCommands=[],this.modelMatrix=u["a"].clone(Object(r["a"])(t.modelMatrix,u["a"].IDENTITY)),this._modelMatrix=u["a"].clone(u["a"].IDENTITY),this.debugShowBoundingVolume=Object(r["a"])(t.debugShowBoundingVolume,!1),this.blendOption=Object(r["a"])(t.blendOption,C["a"].OPAQUE_AND_TRANSLUCENT),this._blendOption=void 0,this._mode=I["a"].SCENE3D,this._maxTotalPointSize=1,this._buffersUsage=[m["a"].STATIC_DRAW,m["a"].STATIC_DRAW,m["a"].STATIC_DRAW,m["a"].STATIC_DRAW,m["a"].STATIC_DRAW,m["a"].STATIC_DRAW,m["a"].STATIC_DRAW,m["a"].STATIC_DRAW,m["a"].STATIC_DRAW];var e=this;this._uniforms={u_maxTotalPointSize:function(){return e._maxTotalPointSize}}}function F(t){for(var e=t.length,i=0;i<e;++i)t[i]&&t[i]._destroy()}function k(t){if(t._pointPrimitivesRemoved){t._pointPrimitivesRemoved=!1;for(var e=[],i=t._pointPrimitives,a=i.length,n=0,o=0;n<a;++n){var r=i[n];r&&(r._index=o++,e.push(r))}t._pointPrimitives=e}}function q(t,e,i){return new D["a"](t,[{index:G.positionHighAndSize,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[N]},{index:G.positionLowAndShow,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[N]},{index:G.compressedAttribute0,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[x]},{index:G.compressedAttribute1,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[R]},{index:G.scaleByDistance,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[j]},{index:G.distanceDisplayConditionAndDisableDepth,componentsPerAttribute:3,componentDatatype:o["a"].FLOAT,usage:i[z]}],e)}Object(c["a"])(V.prototype,{length:{get:function(){return k(this),this._pointPrimitives.length}}}),V.prototype.add=function(t){var e=new A["a"](t,this);return e._index=this._pointPrimitives.length,this._pointPrimitives.push(e),this._createVertexArray=!0,e},V.prototype.remove=function(t){return!!this.contains(t)&&(this._pointPrimitives[t._index]=null,this._pointPrimitivesRemoved=!0,this._createVertexArray=!0,t._destroy(),!0)},V.prototype.removeAll=function(){F(this._pointPrimitives),this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!0},V.prototype._updatePointPrimitive=function(t,e){t._dirty||(this._pointPrimitivesToUpdate[this._pointPrimitivesToUpdateIndex++]=t),++this._propertiesChanged[e]},V.prototype.contains=function(t){return Object(s["a"])(t)&&t._pointPrimitiveCollection===this},V.prototype.get=function(t){return k(this),this._pointPrimitives[t]},V.prototype.computeNewBuffersUsage=function(){for(var t=this._buffersUsage,e=!1,i=this._propertiesChanged,a=0;a<M;++a){var n=0===i[a]?m["a"].STATIC_DRAW:m["a"].STREAM_DRAW;e=e||t[a]!==n,t[a]=n}return e};var H=new l["a"];function W(t,e,i,n){var o=n._index,r=n._getActualPosition();t._mode===I["a"].SCENE3D&&(a["a"].expand(t._baseVolume,r,t._baseVolume),t._boundingVolumeDirty=!0),l["a"].fromCartesian(r,H);var s=n.pixelSize,c=n.outlineWidth;t._maxPixelSize=Math.max(t._maxPixelSize,s+c);var d=i[G.positionHighAndSize],h=H.high;d(o,h.x,h.y,h.z,s);var u=i[G.positionLowAndOutline],_=H.low;u(o,_.x,_.y,_.z,c)}var Y=65536,Q=256;function X(t,e,i,a){var o=a._index,r=a.color,s=a.getPickId(e).color,c=a.outlineColor,d=n["a"].floatToByte(r.red),l=n["a"].floatToByte(r.green),h=n["a"].floatToByte(r.blue),u=d*Y+l*Q+h;d=n["a"].floatToByte(c.red),l=n["a"].floatToByte(c.green),h=n["a"].floatToByte(c.blue);var _=d*Y+l*Q+h;d=n["a"].floatToByte(s.red),l=n["a"].floatToByte(s.green),h=n["a"].floatToByte(s.blue);var p=d*Y+l*Q+h,m=n["a"].floatToByte(r.alpha)*Y+n["a"].floatToByte(c.alpha)*Q+n["a"].floatToByte(s.alpha),f=i[G.compressedAttribute0];f(o,u,_,p,m)}function Z(t,e,i,a){var n=a._index,o=0,r=1,c=1,d=1,l=a.translucencyByDistance;Object(s["a"])(l)&&(o=l.near,r=l.nearValue,c=l.far,d=l.farValue,1===r&&1===d||(t._shaderTranslucencyByDistance=!0));var u=a.show&&a.clusterShow;0===a.color.alpha&&0===a.outlineColor.alpha&&(u=!1),r=h["a"].clamp(r,0,1),r=1===r?255:255*r|0;var _=(u?1:0)*Q+r;d=h["a"].clamp(d,0,1),d=1===d?255:255*d|0;var p=d,m=i[G.compressedAttribute1];m(n,_,p,o,c)}function J(t,e,i,a){var n=a._index,o=i[G.scaleByDistance],r=0,c=1,d=1,l=1,h=a.scaleByDistance;Object(s["a"])(h)&&(r=h.near,c=h.nearValue,d=h.far,l=h.farValue,1===c&&1===l||(t._shaderScaleByDistance=!0)),o(n,r,c,d,l)}function K(t,e,i,a){var n=a._index,o=i[G.distanceDisplayConditionAndDisableDepth],r=0,c=Number.MAX_VALUE,d=a.distanceDisplayCondition;Object(s["a"])(d)&&(r=d.near,c=d.far,r*=r,c*=c,t._shaderDistanceDisplayCondition=!0);var l=a.disableDepthTestDistance;l*=l,l>0&&(t._shaderDisableDepthDistance=!0,l===Number.POSITIVE_INFINITY&&(l=-1)),o(n,r,c,l)}function $(t,e,i,a){W(t,e,i,a),X(t,e,i,a),Z(t,e,i,a),J(t,e,i,a),K(t,e,i,a)}function tt(t,e,i,n,o,r){var c;n.mode===I["a"].SCENE3D?(c=t._baseVolume,t._boundingVolumeDirty=!0):c=t._baseVolume2D;for(var d=[],l=0;l<i;++l){var h=e[l],u=h.position,_=A["a"]._computeActualPosition(u,n,o);Object(s["a"])(_)&&(h._setActualPosition(_),r?d.push(_):a["a"].expand(c,_,c))}r&&a["a"].fromPoints(d,c)}function et(t,e){var i=e.mode,a=t._pointPrimitives,n=t._pointPrimitivesToUpdate,o=t._modelMatrix;t._createVertexArray||t._mode!==i||i!==I["a"].SCENE3D&&!u["a"].equals(o,t.modelMatrix)?(t._mode=i,u["a"].clone(t.modelMatrix,o),t._createVertexArray=!0,i!==I["a"].SCENE3D&&i!==I["a"].SCENE2D&&i!==I["a"].COLUMBUS_VIEW||tt(t,a,a.length,e,o,!0)):i===I["a"].MORPHING?tt(t,a,a.length,e,o,!0):i!==I["a"].SCENE2D&&i!==I["a"].COLUMBUS_VIEW||tt(t,n,t._pointPrimitivesToUpdateIndex,e,o,!1)}function it(t,e,i){var a=e.camera.getPixelSize(i,e.context.drawingBufferWidth,e.context.drawingBufferHeight),n=a*t._maxPixelSize;i.radius+=n}var at=[];V.prototype.update=function(t){k(this),this._maxTotalPointSize=f["a"].maximumAliasedPointSize,et(this,t);var e,i=this._pointPrimitives,n=i.length,o=this._pointPrimitivesToUpdate,r=this._pointPrimitivesToUpdateIndex,c=this._propertiesChanged,d=this._createVertexArray,l=t.context,h=t.passes,m=h.pick;if(d||!m&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(var D=0;D<M;++D)c[D]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),n>0){this._vaf=q(l,n,this._buffersUsage),e=this._vaf.writers;for(var A=0;A<n;++A){var V=this._pointPrimitives[A];V._dirty=!1,$(this,l,e,V)}this._vaf.commit()}this._pointPrimitivesToUpdateIndex=0}else if(r>0){var F=at;F.length=0,(c[N]||c[L]||c[w])&&F.push(W),(c[x]||c[B])&&F.push(X),(c[P]||c[R])&&F.push(Z),c[j]&&F.push(J),(c[z]||c[U])&&F.push(K);var H=F.length;if(e=this._vaf.writers,r/n>.1){for(var Y=0;Y<r;++Y){var Q=o[Y];Q._dirty=!1;for(var tt=0;tt<H;++tt)F[tt](this,l,e,Q)}this._vaf.commit()}else{for(var nt=0;nt<r;++nt){var ot=o[nt];ot._dirty=!1;for(var rt=0;rt<H;++rt)F[rt](this,l,e,ot);this._vaf.subCommit(ot._index,1)}this._vaf.endSubCommits()}this._pointPrimitivesToUpdateIndex=0}if(r>1.5*n&&(o.length=n),Object(s["a"])(this._vaf)&&Object(s["a"])(this._vaf.va)){var st;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,a["a"].transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));var ct=u["a"].IDENTITY;t.mode===I["a"].SCENE3D?(ct=this.modelMatrix,st=a["a"].clone(this._baseVolumeWC,this._boundingVolume)):st=a["a"].clone(this._baseVolume2D,this._boundingVolume),it(this,t,st);var dt,lt,ht,ut,_t,pt,mt=this._blendOption!==this.blendOption;this._blendOption=this.blendOption,mt&&(this._blendOption===C["a"].OPAQUE||this._blendOption===C["a"].OPAQUE_AND_TRANSLUCENT?this._rsOpaque=g["a"].fromCache({depthTest:{enabled:!0,func:p["a"].LEQUAL},depthMask:!0}):this._rsOpaque=void 0,this._blendOption===C["a"].TRANSLUCENT||this._blendOption===C["a"].OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=g["a"].fromCache({depthTest:{enabled:!0,func:p["a"].LEQUAL},depthMask:!1,blending:E["a"].ALPHA_BLEND}):this._rsTranslucent=void 0),this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||0!==t.minimumDisableDepthTestDistance,(mt||this._shaderScaleByDistance&&!this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance&&!this._compiledShaderTranslucencyByDistance||this._shaderDistanceDisplayCondition&&!this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance)&&(dt=new v["a"]({sources:[O["a"]]}),this._shaderScaleByDistance&&dt.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&dt.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderDistanceDisplayCondition&&dt.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&dt.defines.push("DISABLE_DEPTH_DISTANCE"),this._blendOption===C["a"].OPAQUE_AND_TRANSLUCENT&&(lt=new v["a"]({defines:["OPAQUE"],sources:[T["a"]]}),this._sp=S["a"].replaceCache({context:l,shaderProgram:this._sp,vertexShaderSource:dt,fragmentShaderSource:lt,attributeLocations:G}),lt=new v["a"]({defines:["TRANSLUCENT"],sources:[T["a"]]}),this._spTranslucent=S["a"].replaceCache({context:l,shaderProgram:this._spTranslucent,vertexShaderSource:dt,fragmentShaderSource:lt,attributeLocations:G})),this._blendOption===C["a"].OPAQUE&&(lt=new v["a"]({sources:[T["a"]]}),this._sp=S["a"].replaceCache({context:l,shaderProgram:this._sp,vertexShaderSource:dt,fragmentShaderSource:lt,attributeLocations:G})),this._blendOption===C["a"].TRANSLUCENT&&(lt=new v["a"]({sources:[T["a"]]}),this._spTranslucent=S["a"].replaceCache({context:l,shaderProgram:this._spTranslucent,vertexShaderSource:dt,fragmentShaderSource:lt,attributeLocations:G})),this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance);var ft=t.commandList;if(h.render||m){var bt=this._colorCommands,yt=this._blendOption===C["a"].OPAQUE,gt=this._blendOption===C["a"].OPAQUE_AND_TRANSLUCENT;ht=this._vaf.va,ut=ht.length,bt.length=ut;var St=gt?2*ut:ut;for(pt=0;pt<St;++pt){var vt=yt||gt&&pt%2===0;_t=bt[pt],Object(s["a"])(_t)||(_t=bt[pt]=new b["a"]),_t.primitiveType=_["a"].POINTS,_t.pass=vt||!gt?y["a"].OPAQUE:y["a"].TRANSLUCENT,_t.owner=this;var Dt=gt?Math.floor(pt/2):pt;_t.boundingVolume=st,_t.modelMatrix=ct,_t.shaderProgram=vt?this._sp:this._spTranslucent,_t.uniformMap=this._uniforms,_t.vertexArray=ht[Dt].va,_t.renderState=vt?this._rsOpaque:this._rsTranslucent,_t.debugShowBoundingVolume=this.debugShowBoundingVolume,_t.pickId="v_pickColor",ft.push(_t)}}}},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),F(this._pointPrimitives),Object(d["a"])(this)},e["a"]=V},"7b4a":function(t,e,i){"use strict";var a=i("535a"),n=i("2ab8");function o(t){var e=Object(a["a"])(t,{});this.attenuation=Object(a["a"])(e.attenuation,!1),this.geometricErrorScale=Object(a["a"])(e.geometricErrorScale,1),this.maximumAttenuation=e.maximumAttenuation,this.baseResolution=e.baseResolution,this.eyeDomeLighting=Object(a["a"])(e.eyeDomeLighting,!0),this.eyeDomeLightingStrength=Object(a["a"])(e.eyeDomeLightingStrength,1),this.eyeDomeLightingRadius=Object(a["a"])(e.eyeDomeLightingRadius,1),this.backFaceCulling=Object(a["a"])(e.backFaceCulling,!1),this.normalShading=Object(a["a"])(e.normalShading,!0)}o.isSupported=function(t){return n["a"].isSupported(t.context)},e["a"]=o},a994:function(t,e,i){"use strict";var a=i("bd8d"),n=i("2bb9"),o=i("535a"),r=i("2f63"),s=i("9f1d"),c=i("7d62"),d=i("93da"),l=i("d289"),h=i("6596"),u=i("5af0"),_=i("c4a1"),p=i("3443"),m=i("7b4a"),f=i("a307");function b(t,e,i,a,n){this._tileset=t,this._tile=e,this._resource=i,this._pickId=void 0,this._batchTable=void 0,this._styleDirty=!1,this._features=void 0,this.featurePropertiesDirty=!1,this._pointCloud=new p["a"]({arrayBuffer:a,byteOffset:n,cull:!1,opaquePass:l["a"].CESIUM_3D_TILE,vertexShaderLoaded:y(this),fragmentShaderLoaded:g(this),uniformMapLoaded:S(this),batchTableLoaded:v(this),pickIdLoaded:D(this)})}function y(t){return function(e){return Object(r["a"])(t._batchTable)?t._batchTable.getVertexShaderCallback(!1,"a_batchId",void 0)(e):e}}function g(t){return function(e){return Object(r["a"])(t._batchTable)?t._batchTable.getFragmentShaderCallback(!1,void 0)(e):"uniform vec4 czm_pickColor;\n"+e}}function S(t){return function(e){return Object(r["a"])(t._batchTable)?t._batchTable.getUniformMapCallback()(e):Object(n["a"])(e,{czm_pickColor:function(){return t._pickId.color}})}}function v(t){return function(e,i,a){t._batchTable=new h["a"](t,e,i,a)}}function D(t){return function(){return Object(r["a"])(t._batchTable)?t._batchTable.getPickId():"czm_pickColor"}}function T(t){var e=t._tileset.pointCloudShading,i=t._tile.contentBoundingVolume.boundingSphere.volume(),a=d["a"].cbrt(i/t.pointsLength),n=t._tile.geometricError;return 0===n&&(n=Object(r["a"])(e)&&Object(r["a"])(e.baseResolution)?e.baseResolution:a),n}function O(t){var e=t.featuresLength;if(!Object(r["a"])(t._features)&&e>0){for(var i=new Array(e),a=0;a<e;++a)i[a]=new u["a"](t,a);t._features=i}}Object(s["a"])(b.prototype,{featuresLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return this._pointCloud.pointsLength}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return this._pointCloud.geometryByteLength}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.memorySizeInBytes:0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._pointCloud.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){return this._batchTable}}}),b.prototype.hasProperty=function(t,e){return!!Object(r["a"])(this._batchTable)&&this._batchTable.hasProperty(t,e)},b.prototype.getFeature=function(t){if(Object(r["a"])(this._batchTable)){this.featuresLength;return O(this),this._features[t]}},b.prototype.applyDebugSettings=function(t,e){this._pointCloud.color=t?e:a["a"].WHITE},b.prototype.applyStyle=function(t){Object(r["a"])(this._batchTable)?this._batchTable.applyStyle(t):this._styleDirty=!0};var E=new m["a"];b.prototype.update=function(t,e){var i,a=this._pointCloud,n=Object(o["a"])(t.pointCloudShading,E),s=this._tile,c=this._batchTable,d=e.mode,l=t.clippingPlanes;Object(r["a"])(this._pickId)||Object(r["a"])(c)||(this._pickId=e.context.createPickId({primitive:t,content:this})),Object(r["a"])(c)&&c.update(t,e),i=Object(r["a"])(s._contentBoundingVolume)?d===f["a"].SCENE3D?s._contentBoundingVolume.boundingSphere:s._contentBoundingVolume2D.boundingSphere:d===f["a"].SCENE3D?s._boundingVolume.boundingSphere:s._boundingVolume2D.boundingSphere;var h=this._styleDirty;this._styleDirty=!1,a.clippingPlanesOriginMatrix=t.clippingPlanesOriginMatrix,a.style=Object(r["a"])(c)?void 0:t.style,a.styleDirty=h,a.modelMatrix=s.computedTransform,a.time=t.timeSinceLoad,a.shadows=t.shadows,a.boundingSphere=i,a.clippingPlanes=l,a.isClipped=Object(r["a"])(l)&&l.enabled&&s._isClipped,a.clippingPlanesDirty=s.clippingPlanesDirty,a.attenuation=n.attenuation,a.backFaceCulling=n.backFaceCulling,a.normalShading=n.normalShading,a.geometricError=T(this),a.geometricErrorScale=n.geometricErrorScale,Object(r["a"])(n)&&Object(r["a"])(n.maximumAttenuation)?a.maximumAttenuation=n.maximumAttenuation:s.refine===_["a"].ADD?a.maximumAttenuation=5:a.maximumAttenuation=t.maximumScreenSpaceError,a.update(e)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._pickId=this._pickId&&this._pickId.destroy(),this._pointCloud=this._pointCloud&&this._pointCloud.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Object(c["a"])(this)},e["a"]=b},bdd0:function(t,e,i){"use strict";var a=i("77af"),n=i("670c"),o=i("be18"),r=i("a561"),s=i("bd8d"),c=i("535a"),d=i("2f63"),l=i("9f1d"),h=i("aee6"),u=i("52f0"),_=i("6dfc"),p=i("a307"),m=i("0c80");function f(t,e){t=Object(c["a"])(t,c["a"].EMPTY_OBJECT);var i=t.translucencyByDistance,a=t.scaleByDistance,n=t.distanceDisplayCondition;Object(d["a"])(i)&&(i=_["a"].clone(i)),Object(d["a"])(a)&&(a=_["a"].clone(a)),Object(d["a"])(n)&&(n=h["a"].clone(n)),this._show=Object(c["a"])(t.show,!0),this._position=o["a"].clone(Object(c["a"])(t.position,o["a"].ZERO)),this._actualPosition=o["a"].clone(this._position),this._color=s["a"].clone(Object(c["a"])(t.color,s["a"].WHITE)),this._outlineColor=s["a"].clone(Object(c["a"])(t.outlineColor,s["a"].TRANSPARENT)),this._outlineWidth=Object(c["a"])(t.outlineWidth,0),this._pixelSize=Object(c["a"])(t.pixelSize,10),this._scaleByDistance=a,this._translucencyByDistance=i,this._distanceDisplayCondition=n,this._disableDepthTestDistance=Object(c["a"])(t.disableDepthTestDistance,0),this._id=t.id,this._collection=Object(c["a"])(t.collection,e),this._clusterShow=!0,this._pickId=void 0,this._pointPrimitiveCollection=e,this._dirty=!1,this._index=-1}var b=f.SHOW_INDEX=0,y=f.POSITION_INDEX=1,g=f.COLOR_INDEX=2,S=f.OUTLINE_COLOR_INDEX=3,v=f.OUTLINE_WIDTH_INDEX=4,D=f.PIXEL_SIZE_INDEX=5,T=f.SCALE_BY_DISTANCE_INDEX=6,O=f.TRANSLUCENCY_BY_DISTANCE_INDEX=7,E=f.DISTANCE_DISPLAY_CONDITION_INDEX=8,C=f.DISABLE_DEPTH_DISTANCE_INDEX=9;function A(t,e){var i=t._pointPrimitiveCollection;Object(d["a"])(i)&&(i._updatePointPrimitive(t,e),t._dirty=!0)}f.NUMBER_OF_PROPERTIES=10,Object(l["a"])(f.prototype,{show:{get:function(){return this._show},set:function(t){this._show!==t&&(this._show=t,A(this,b))}},position:{get:function(){return this._position},set:function(t){var e=this._position;o["a"].equals(e,t)||(o["a"].clone(t,e),o["a"].clone(t,this._actualPosition),A(this,y))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(t){var e=this._scaleByDistance;_["a"].equals(e,t)||(this._scaleByDistance=_["a"].clone(t,e),A(this,T))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(t){var e=this._translucencyByDistance;_["a"].equals(e,t)||(this._translucencyByDistance=_["a"].clone(t,e),A(this,O))}},pixelSize:{get:function(){return this._pixelSize},set:function(t){this._pixelSize!==t&&(this._pixelSize=t,A(this,D))}},color:{get:function(){return this._color},set:function(t){var e=this._color;s["a"].equals(e,t)||(s["a"].clone(t,e),A(this,g))}},outlineColor:{get:function(){return this._outlineColor},set:function(t){var e=this._outlineColor;s["a"].equals(e,t)||(s["a"].clone(t,e),A(this,S))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth!==t&&(this._outlineWidth=t,A(this,v))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){h["a"].equals(this._distanceDisplayCondition,t)||(this._distanceDisplayCondition=h["a"].clone(t,this._distanceDisplayCondition),A(this,E))}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(t){this._disableDepthTestDistance!==t&&(this._disableDepthTestDistance=t,A(this,C))}},id:{get:function(){return this._id},set:function(t){this._id=t,Object(d["a"])(this._pickId)&&(this._pickId.object.id=t)}},pickId:{get:function(){return this._pickId}},clusterShow:{get:function(){return this._clusterShow},set:function(t){this._clusterShow!==t&&(this._clusterShow=t,A(this,b))}}}),f.prototype.getPickId=function(t){return Object(d["a"])(this._pickId)||(this._pickId=t.createPickId({primitive:this,collection:this._collection,id:this._id})),this._pickId},f.prototype._getActualPosition=function(){return this._actualPosition},f.prototype._setActualPosition=function(t){o["a"].clone(t,this._actualPosition),A(this,y)};var I=new r["a"];f._computeActualPosition=function(t,e,i){return e.mode===p["a"].SCENE3D?t:(u["a"].multiplyByPoint(i,t,I),m["a"].computeActualWgs84Position(e,I))};var P=new r["a"];f._computeScreenSpacePosition=function(t,e,i,a){var n=u["a"].multiplyByVector(t,r["a"].fromElements(e.x,e.y,e.z,1,P),P),o=m["a"].wgs84ToWindowCoordinates(i,n,a);return o},f.prototype.computeScreenSpacePosition=function(t,e){var i=this._pointPrimitiveCollection;Object(d["a"])(e)||(e=new n["a"]);var a=i.modelMatrix,o=f._computeScreenSpacePosition(a,this._actualPosition,t,e);if(Object(d["a"])(o))return o.y=t.canvas.clientHeight-o.y,o},f.getScreenSpaceBoundingBox=function(t,e,i){var n=t.pixelSize,o=.5*n,r=e.x-o,s=e.y-o,c=n,l=n;return Object(d["a"])(i)||(i=new a["a"]),i.x=r,i.y=s,i.width=c,i.height=l,i},f.prototype.equals=function(t){return this===t||Object(d["a"])(t)&&this._id===t._id&&o["a"].equals(this._position,t._position)&&s["a"].equals(this._color,t._color)&&this._pixelSize===t._pixelSize&&this._outlineWidth===t._outlineWidth&&this._show===t._show&&s["a"].equals(this._outlineColor,t._outlineColor)&&_["a"].equals(this._scaleByDistance,t._scaleByDistance)&&_["a"].equals(this._translucencyByDistance,t._translucencyByDistance)&&h["a"].equals(this._distanceDisplayCondition,t._distanceDisplayCondition)&&this._disableDepthTestDistance===t._disableDepthTestDistance},f.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._pointPrimitiveCollection=void 0},e["a"]=f}}]);